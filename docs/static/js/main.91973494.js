/*! For license information please see main.91973494.js.LICENSE.txt */
!function(){var t={7228:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},2858:function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},3646:function(t,e,n){var r=n(7228);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},1506:function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},8926:function(t){function e(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=t.apply(n,r);function s(t){e(a,i,o,s,u,"next",t)}function u(t){e(a,i,o,s,u,"throw",t)}s(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},4575:function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},9100:function(t,e,n){var r=n(9489),i=n(7067);function o(e,n,a){return i()?(t.exports=o=Reflect.construct,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=o=function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r(o,n.prototype),o},t.exports.__esModule=!0,t.exports.default=t.exports),o.apply(null,arguments)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},3913:function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},3269:function(t,e,n){var r=n(379);t.exports=function(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}},t.exports.__esModule=!0,t.exports.default=t.exports},9842:function(t,e,n){var r=n(9754),i=n(7067),o=n(8585);t.exports=function(t){var e=i();return function(){var n,i=r(t);if(e){var a=r(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}},t.exports.__esModule=!0,t.exports.default=t.exports},9713:function(t){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},6525:function(t,e,n){var r=n(8331);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=i=function(t,e,n){var i=r(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},t.exports.__esModule=!0,t.exports.default=t.exports),i.apply(this,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},9754:function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},2205:function(t,e,n){var r=n(9489);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},430:function(t){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports},7067:function(t){t.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},6860:function(t){t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},3884:function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}},t.exports.__esModule=!0,t.exports.default=t.exports},521:function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},8206:function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},1109:function(t,e,n){var r=n(9713);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t},t.exports.__esModule=!0,t.exports.default=t.exports},8585:function(t,e,n){var r=n(8).default,i=n(1506);t.exports=function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},9489:function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},769:function(t,e,n){var r=n(2858),i=n(3884),o=n(379),a=n(521);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},8331:function(t,e,n){var r=n(9754);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports},8551:function(t,e,n){var r=n(2858),i=n(6860),o=n(379),a=n(521);t.exports=function(t){return r(t)||i(t)||o(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},319:function(t,e,n){var r=n(3646),i=n(6860),o=n(379),a=n(8206);t.exports=function(t){return r(t)||i(t)||o(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},8:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},379:function(t,e,n){var r=n(7228);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},5957:function(t,e,n){var r=n(9754),i=n(9489),o=n(430),a=n(9100);function s(e){var n="function"===typeof Map?new Map:void 0;return t.exports=s=function(t){if(null===t||!o(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},7757:function(t,e,n){t.exports=n(9727)},3038:function(t,e,n){var r=n(8551).default,i=n(5957).default,o=n(9713).default,a=n(319).default,s=n(7757),u=n(8926).default,l=n(3269).default,c=n(769).default,h=n(8585).default,d=n(6525).default,f=n(9754).default,p=n(1109).default,v=n(1506).default,m=n(2205).default,g=n(9842).default,y=n(4575).default,_=n(3913).default;t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=225)}([function(t,e,n){"use strict";var r,i,o,a,s,u,l,c,h,d,f,p,v,m,g,y,_,x,b;n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return b})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return r})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return g})),n.d(e,"j",(function(){return _})),n.d(e,"k",(function(){return p})),n.d(e,"l",(function(){return x})),n.d(e,"m",(function(){return y})),n.d(e,"n",(function(){return i})),n.d(e,"o",(function(){return h})),n.d(e,"p",(function(){return d})),n.d(e,"q",(function(){return l})),n.d(e,"r",(function(){return c})),n.d(e,"s",(function(){return f})),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(r||(r={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(i||(i={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(o||(o={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(a||(a={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(s||(s={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(u||(u={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(l||(l={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(c||(c={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(h||(h={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(d||(d={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(f||(f={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(p||(p={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(v||(v={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(m||(m={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(g||(g={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(y||(y={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(_||(_={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(x||(x={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(b||(b={}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return v})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return i})),n.d(e,"g",(function(){return s})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return o})),n.d(e,"j",(function(){return l})),n.d(e,"k",(function(){return f})),n.d(e,"l",(function(){return r})),n.d(e,"m",(function(){return E})),n.d(e,"n",(function(){return w}));var r,i=2*Math.PI,o=180/Math.PI,a=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(r||(r={}));var s=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),u=[new s,new s,new s,new s],l=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(n),this.height=Number(i),this.type=r.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.intersects=function(t,e){if(!e){var n=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=n)return!1;var r=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>r}var i=this.left,o=this.right,a=this.top,s=this.bottom;if(o<=i||s<=a)return!1;var l=u[0].set(t.left,t.top),c=u[1].set(t.left,t.bottom),h=u[2].set(t.right,t.top),d=u[3].set(t.right,t.bottom);if(h.x<=l.x||c.y<=l.y)return!1;var f=Math.sign(e.a*e.d-e.b*e.c);if(0===f)return!1;if(e.apply(l,l),e.apply(c,c),e.apply(h,h),e.apply(d,d),Math.max(l.x,c.x,h.x,d.x)<=i||Math.min(l.x,c.x,h.x,d.x)>=o||Math.max(l.y,c.y,h.y,d.y)<=a||Math.min(l.y,c.y,h.y,d.y)>=s)return!1;var p=f*(c.y-l.y),v=f*(l.x-c.x),m=p*i+v*a,g=p*o+v*a,y=p*i+v*s,_=p*o+v*s;if(Math.max(m,g,y,_)<=p*l.x+v*l.y||Math.min(m,g,y,_)>=p*d.x+v*d.y)return!1;var x=f*(l.y-h.y),b=f*(h.x-l.x),T=x*i+b*a,w=x*o+b*a,E=x*i+b*s,S=x*o+b*s;return!(Math.max(T,w,E,S)<=x*l.x+b*l.y||Math.min(T,w,E,S)>=x*d.x+b*d.y)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(n-e,0),this.y=r,this.height=Math.max(i-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var n=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=n-e,this.y=r,this.height=i-r,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),c=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.radius=n,this.type=r.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-t,i=this.y-e;return(r*=r)+(i*=i)<=n},t.prototype.getBounds=function(){return new l(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),h=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=e,this.width=n,this.height=i,this.type=r.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,r=(e-this.y)/this.height;return(n*=n)+(r*=r)<=1},t.prototype.getBounds=function(){return new l(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),d=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var o=[],a=0,s=i.length;a<s;a++)o.push(i[a].x,i[a].y);i=o}this.points=i,this.type=r.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var a=this.points[2*i],s=this.points[2*i+1],u=this.points[2*o],l=this.points[2*o+1];s>e!=l>e&&t<(e-s)/(l-s)*(u-a)+a&&(n=!n)}return n},t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},t}(),f=function(){function t(t,e,n,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=20),this.x=t,this.y=e,this.width=n,this.height=i,this.radius=o,this.type=r.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+n&&e<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;var r=t-(this.x+n),i=e-(this.y+n),o=n*n;if(r*r+i*i<=o)return!0;if((r=t-(this.x+this.width-n))*r+i*i<=o)return!0;if(r*r+(i=e-(this.y+this.height-n))*i<=o)return!0;if((r=t-(this.x+n))*r+i*i<=o)return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},t}(),p=function(){function t(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this._x=n,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,n){return void 0===e&&(e=this.cb),void 0===n&&(n=this.scope),new t(e,n,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),v=function(){function t(t,e,n,r,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(t,e){e=e||new s;var n=t.x,r=t.y;return e.x=this.a*n+this.c*r+this.tx,e.y=this.b*n+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new s;var n=1/(this.a*this.d+this.c*-this.b),r=t.x,i=t.y;return e.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){return this.a=Math.cos(a+u)*i,this.b=Math.sin(a+u)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=t-(n*this.a+r*this.c),this.ty=e-(n*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,r=this.c,o=this.d,a=t.pivot,s=-Math.atan2(-r,o),u=Math.atan2(n,e),l=Math.abs(s+u);return l<1e-5||Math.abs(i-l)<1e-5?(t.rotation=u,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=u),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(r*r+o*o),t.position.x=this.tx+(a.x*e+a.y*r),t.position.y=this.ty+(a.x*n+a.y*o),t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),m=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],g=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],y=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],_=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],x=[],b=[],T=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];x.push(e);for(var n=0;n<16;n++)for(var r=T(m[t]*m[n]+y[t]*g[n]),i=T(g[t]*m[n]+_[t]*g[n]),o=T(m[t]*y[n]+y[t]*_[n]),a=T(g[t]*y[n]+_[t]*_[n]),s=0;s<16;s++)if(m[s]===r&&g[s]===i&&y[s]===o&&_[s]===a){e.push(s);break}}for(t=0;t<16;t++){var u=new v;u.set(m[t],g[t],y[t],_[t],0,0),b.push(u)}}();var w={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return m[t]},uY:function(t){return g[t]},vX:function(t){return y[t]},vY:function(t){return _[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return x[t][e]},sub:function(t,e){return x[t][w.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?w.S:w.N:2*Math.abs(e)<=Math.abs(t)?t>0?w.E:w.W:e>0?t>0?w.SE:w.SW:t>0?w.NE:w.NW},matrixAppendRotationInv:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=b[w.inv(e)];i.tx=n,i.ty=r,t.append(i)}},E=function(){function t(){this.worldTransform=new v,this.localTransform=new v,this.position=new p(this.onChange,this,0,0),this.scale=new p(this.onChange,this,1,1),this.pivot=new p(this.onChange,this,0,0),this.skew=new p(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return oe})),n.d(e,"b",(function(){return P})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return de})),n.d(e,"e",(function(){return ge})),n.d(e,"f",(function(){return xe})),n.d(e,"g",(function(){return fe})),n.d(e,"h",(function(){return U})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return b})),n.d(e,"k",(function(){return kt})),n.d(e,"l",(function(){return V})),n.d(e,"m",(function(){return $})),n.d(e,"n",(function(){return Pt})),n.d(e,"o",(function(){return X})),n.d(e,"p",(function(){return L})),n.d(e,"q",(function(){return ue})),n.d(e,"r",(function(){return It})),n.d(e,"s",(function(){return Ot})),n.d(e,"t",(function(){return N})),n.d(e,"u",(function(){return Lt})),n.d(e,"v",(function(){return q})),n.d(e,"w",(function(){return S})),n.d(e,"x",(function(){return pe})),n.d(e,"y",(function(){return le})),n.d(e,"z",(function(){return he})),n.d(e,"A",(function(){return ce}));var r=n(4),i=n(0),o=n(3),a=n(12),s=n(7),u=n(1);r.b.PREFER_ENV=o.isMobile.any?i.g.WEBGL:i.g.WEBGL2,r.b.STRICT_TEXTURE_CACHE=!1;var l=[];function c(t,e){if(!t)return null;var n="";if("string"==typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(var i=l.length-1;i>=0;--i){var o=l[i];if(o.test&&o.test(t,n))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function d(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var f=function(){return(f=Object.assign||function(t){for(var e,n=arguments,r=1,i=arguments.length;r<i;r++)for(var o in e=n[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},p=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new a.a("setRealSize"),this.onUpdate=new a.a("update"),this.onError=new a.a("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,n){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),v=function(t){function e(e,n){var r=this,i=n||{},o=i.width,a=i.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return(r=t.call(this,o,a)||this).data=e,r}return d(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK);var o=e.realWidth,a=e.realHeight;return n.width===o&&n.height===a?r.texSubImage2D(e.target,0,0,0,o,a,e.format,n.type,this.data):(n.width=o,n.height=a,r.texImage2D(e.target,0,n.internalFormat,o,a,0,e.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(p),m={scaleMode:i.p.NEAREST,format:i.h.RGBA,alphaMode:i.a.NPM},g=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var a=t.call(this)||this,s=(n=n||{}).alphaMode,u=n.mipmap,l=n.anisotropicLevel,h=n.scaleMode,d=n.width,f=n.height,v=n.wrapMode,m=n.format,g=n.type,y=n.target,_=n.resolution,x=n.resourceOptions;return!e||e instanceof p||((e=c(e,x)).internal=!0),a.resolution=_||r.b.RESOLUTION,a.width=Math.round((d||0)*a.resolution)/a.resolution,a.height=Math.round((f||0)*a.resolution)/a.resolution,a._mipmap=void 0!==u?u:r.b.MIPMAP_TEXTURES,a.anisotropicLevel=void 0!==l?l:r.b.ANISOTROPIC_LEVEL,a._wrapMode=v||r.b.WRAP_MODE,a._scaleMode=void 0!==h?h:r.b.SCALE_MODE,a.format=m||i.h.RGBA,a.type=g||i.r.UNSIGNED_BYTE,a.target=y||i.q.TEXTURE_2D,a.alphaMode=void 0!==s?s:i.a.UNPACK,a.uid=Object(o.uid)(),a.touched=0,a.isPowerOfTwo=!1,a._refreshPOT(),a._glTextures={},a.dirtyId=0,a.dirtyStyleId=0,a.cacheId=null,a.valid=d>0&&f>0,a.textureCacheIds=[],a.destroyed=!1,a.resource=null,a._batchEnabled=0,a._batchLocation=0,a.parentTextureArray=null,a.setResource(e),a}return d(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,n){return n=n||this.resolution,this.setRealSize(t*n,e*n,n)},e.prototype.setRealSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Object(o.isPow2)(this.realWidth)&&Object(o.isPow2)(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete o.BaseTextureCache[this.cacheId],delete o.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,n,i){void 0===i&&(i=r.b.STRICT_TEXTURE_CACHE);var a="string"==typeof t,s=null;if(a)s=t;else{if(!t._pixiId){var u=n&&n.pixiIdPrefix||"pixiid";t._pixiId=u+"_"+Object(o.uid)()}s=t._pixiId}var l=o.BaseTextureCache[s];if(a&&i&&!l)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return l||((l=new e(t,n)).cacheId=s,e.addToCache(l,s)),l},e.fromBuffer=function(t,n,r,o){t=t||new Float32Array(n*r*4);var a=new v(t,{width:n,height:r}),s=t instanceof Float32Array?i.r.FLOAT:i.r.UNSIGNED_BYTE;return new e(a,Object.assign(m,o||{width:n,height:r,type:s}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),o.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),o.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=o.BaseTextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete o.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete o.BaseTextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(o.EventEmitter),y=function(t){function e(e,n){var r=this,i=n||{},o=i.width,a=i.height;(r=t.call(this,o,a)||this).items=[],r.itemDirtyIds=[];for(var s=0;s<e;s++){var u=new g;r.items.push(u),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return d(e,t),e.prototype.initFromArray=function(t,e){for(var n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof p?this.addResourceAt(t[n],n):this.addResourceAt(c(t[n],e),n))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],n=e.realWidth,r=e.realHeight;return t.resize(n,r),Promise.resolve(t)})),this._load},e}(p),_=function(t){function e(e,n){var r,i,o=this,a=n||{},s=a.width,u=a.height;return Array.isArray(e)?(r=e,i=e.length):i=e,o=t.call(this,i,{width:s,height:u})||this,r&&o.initFromArray(r,n),o}return d(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=i.q.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,n){var r=this.length,i=this.itemDirtyIds,o=this.items,a=t.gl;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,r,0,e.format,n.type,null);for(var s=0;s<r;s++){var u=o[s];i[s]<u.dirtyId&&(i[s]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,s,u.resource.width,u.resource.height,1,e.format,n.type,u.resource.source))}return!0},e}(y),x=function(t){function e(e){var n=this,r=e,i=r.naturalWidth||r.videoWidth||r.width,o=r.naturalHeight||r.videoHeight||r.height;return(n=t.call(this,i,o)||this).source=e,n.noSubImage=!1,n}return d(e,t),e.crossOrigin=function(t,e,n){void 0===n&&0!==e.indexOf("data:")?t.crossOrigin=Object(o.determineCrossOrigin)(e):!1!==n&&(t.crossOrigin="string"==typeof n?n:"anonymous")},e.prototype.upload=function(t,e,n,r){var o=t.gl,a=e.realWidth,s=e.realHeight;if((r=r||this.source)instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK),this.noSubImage||e.target!==o.TEXTURE_2D||n.width!==a||n.height!==s?(n.width=a,n.height=s,o.texImage2D(e.target,0,n.internalFormat,e.format,n.type,r)):o.texSubImage2D(o.TEXTURE_2D,0,0,0,e.format,n.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(p),b=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e.test=function(t){var e=globalThis.OffscreenCanvas;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(x),T=function(t){function e(n,r){var o=this,a=r||{},s=a.width,u=a.height,l=a.autoLoad,c=a.linkBaseTexture;if(n&&n.length!==e.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");o=t.call(this,6,{width:s,height:u})||this;for(var h=0;h<e.SIDES;h++)o.items[h].target=i.q.TEXTURE_CUBE_MAP_POSITIVE_X+h;return o.linkBaseTexture=!1!==c,n&&o.initFromArray(n,r),!1!==l&&o.load(),o}return d(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=i.q.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,n){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=i.q.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,n,r){for(var i=this.itemDirtyIds,o=0;o<e.SIDES;o++){var a=this.items[o];i[o]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(t,a,r),i[o]=a.dirtyId):i[o]<-1&&(t.gl.texImage2D(a.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(y),w=function(t){function e(e,n){var i=this;if(n=n||{},!(e instanceof HTMLImageElement)){var o=new Image;x.crossOrigin(o,e,n.crossorigin),o.src=e,e=o}return i=t.call(this,e)||this,!e.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=e.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==n.createBitmap?n.createBitmap:r.b.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,i.bitmap=null,i._load=null,!1!==n.autoLoad&&i.load(),i}return d(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,n){var r=e.source;e.url=r.src;var i=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){n(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(r){return n(r,0,0,e.width,e.height,{premultiplyAlpha:t.alphaMode===i.a.UNPACK?"premultiply":"none"})})).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process},e.prototype.upload=function(e,n,r){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,n,r,this.bitmap),!this.preserveBitmap){var i=!0,o=n._glTextures;for(var a in o){var s=o[a];if(s!==r&&s.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(x),E=function(t){function e(e,n){var r=this;return n=n||{},(r=t.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=e,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,!1!==n.autoLoad&&r.load(),r}return d(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(n){if(t._resolve=function(){t.resize(t.source.width,t.source.height),n(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;x.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(n){t._resolve&&(e.onerror=null,t.onError.emit(n))},e.onload=function(){if(t._resolve){var n=e.width,r=e.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*t.scale,a=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(i=t._overrideWidth||t._overrideHeight/r*n,a=t._overrideHeight||t._overrideWidth/n*r),i=Math.round(i),a=Math.round(a);var s=t.source;s.width=i,s.height=a,s._pixiId="canvas_"+Object(o.uid)(),s.getContext("2d").drawImage(e,0,0,n,r,0,0,i,a),t._resolve(),t._resolve=null}}},e.getSize=function(t){var n=e.SVG_SIZE.exec(t),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,n){return"svg"===n||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(x),S=function(t){function e(n,r){var i=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]);var a=n[0].src||n[0];x.crossOrigin(o,a,r.crossorigin);for(var s=0;s<n.length;++s){var u=document.createElement("source"),l=n[s],c=l.src,h=l.mime,d=(c=c||n[s]).split("?").shift().toLowerCase(),f=d.slice(d.lastIndexOf(".")+1);h=h||e.MIME_TYPES[f]||"video/"+f,u.src=c,u.type=h,o.appendChild(u)}n=o}return(i=t.call(this,n)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return d(e,t),e.prototype.update=function(e){if(!this.destroyed){var n=s.a.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){t.valid?n(t):(t._resolve=n,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(s.a.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(s.a.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(s.a.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(s.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(s.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,n){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(x),A=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e.test=function(t){return!!globalThis.createImageBitmap&&t instanceof ImageBitmap},e}(x);l.push(w,A,b,S,E,v,T,_);var M={__proto__:null,Resource:p,BaseImageResource:x,INSTALLED:l,autoDetectResource:c,AbstractMultiResource:y,ArrayResource:_,BufferResource:v,CanvasResource:b,CubeResource:T,ImageResource:w,SVGResource:E,VideoResource:S,ImageBitmapResource:A},R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK);var o=e.realWidth,a=e.realHeight;return n.width===o&&n.height===a?r.texSubImage2D(e.target,0,0,0,o,a,e.format,n.type,this.data):(n.width=o,n.height=a,r.texImage2D(e.target,0,n.internalFormat,o,a,0,e.format,n.type,this.data)),!0},e}(v),C=function(){function t(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new a.a("disposeFramebuffer"),this.multisample=i.l.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new g(null,{scaleMode:i.p.NEAREST,resolution:1,mipmap:i.k.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new g(new R(null,{width:this.width,height:this.height}),{scaleMode:i.p.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:i.k.OFF,format:i.h.DEPTH_COMPONENT,type:i.r.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],i=r.resolution;r.setSize(t/i,e/i)}this.depthTexture&&(i=this.depthTexture.resolution,this.depthTexture.setSize(t/i,e/i))}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),P=function(t){function e(e){void 0===e&&(e={});var n=this;if("number"==typeof e){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];e={width:r,height:o,scaleMode:a,resolution:s}}return e.width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:i.l.NONE,(n=t.call(this,null,e)||this).mipmap=i.k.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new C(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=e.multisample,n.maskStack=[],n.filterStack=[{}],n}return d(e,t),e.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(g),I=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,n){var r=e.width,i=e.height;if(n){var o=t.width/2/r,a=t.height/2/i,s=t.x/r+o,l=t.y/i+a;n=u.n.add(n,u.n.NW),this.x0=s+o*u.n.uX(n),this.y0=l+a*u.n.uY(n),n=u.n.add(n,2),this.x1=s+o*u.n.uX(n),this.y1=l+a*u.n.uY(n),n=u.n.add(n,2),this.x2=s+o*u.n.uX(n),this.y2=l+a*u.n.uY(n),n=u.n.add(n,2),this.x3=s+o*u.n.uX(n),this.y3=l+a*u.n.uY(n)}else this.x0=t.x/r,this.y0=t.y/i,this.x1=(t.x+t.width)/r,this.y1=t.y/i,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/i,this.x3=t.x/r,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),O=new I;function k(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var N=function(t){function e(n,r,i,o,a,s){var l=t.call(this)||this;if(l.noFrame=!1,r||(l.noFrame=!0,r=new u.j(0,0,1,1)),n instanceof e&&(n=n.baseTexture),l.baseTexture=n,l._frame=r,l.trim=o,l.valid=!1,l._uvs=O,l.uvMatrix=null,l.orig=i||r,l._rotate=Number(a||0),!0===a)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=s?new u.g(s.x,s.y):new u.g(0,0),l._updateID=0,l.textureCacheIds=[],n.valid?l.noFrame?n.valid&&l.onBaseTextureUpdated(n):l.frame=r:n.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&n.on("update",l.onBaseTextureUpdated,l),l}return d(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture.resource;n&&n.url&&o.TextureCache[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),n=this._frame===this.orig?t:this.orig.clone(),r=new e(this.baseTexture,!this.noFrame&&t,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r},e.prototype.updateUvs=function(){this._uvs===O&&(this._uvs=new I),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i=r.b.STRICT_TEXTURE_CACHE);var a="string"==typeof t,s=null;if(a)s=t;else if(t instanceof g){if(!t.cacheId){var u=n&&n.pixiIdPrefix||"pixiid";t.cacheId=u+"-"+Object(o.uid)(),g.addToCache(t,t.cacheId)}s=t.cacheId}else t._pixiId||(u=n&&n.pixiIdPrefix||"pixiid",t._pixiId=u+"_"+Object(o.uid)()),s=t._pixiId;var l=o.TextureCache[s];if(a&&i&&!l)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return l||t instanceof g?!l&&t instanceof g&&(l=new e(t),e.addToCache(l,s)):(n.resolution||(n.resolution=Object(o.getResolutionOfUrl)(t)),(l=new e(new g(t,n))).baseTexture.cacheId=s,g.addToCache(l.baseTexture,s),e.addToCache(l,s)),l},e.fromURL=function(t,n){var r=Object.assign({autoLoad:!1},null==n?void 0:n.resourceOptions),i=e.from(t,Object.assign({resourceOptions:r},n),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then((function(){return Promise.resolve(i)}))},e.fromBuffer=function(t,n,r,i){return new e(g.fromBuffer(t,n,r,i))},e.fromLoader=function(t,n,i,a){var s=new g(t,Object.assign({scaleMode:r.b.SCALE_MODE,resolution:Object(o.getResolutionOfUrl)(n)},a)),u=s.resource;u instanceof w&&(u.url=n);var l=new e(s);return i||(i=n),g.addToCache(l.baseTexture,i),e.addToCache(l,i),i!==n&&(g.addToCache(l.baseTexture,n),e.addToCache(l,n)),l.baseTexture.valid?Promise.resolve(l):new Promise((function(t){l.baseTexture.once("loaded",(function(){return t(l)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),o.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),o.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=o.TextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete o.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)o.TextureCache[t.textureCacheIds[r]]===t&&delete o.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,r=t.width,i=t.height,o=e+r>this.baseTexture.width,a=n+i>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",u="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,l="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+s+" "+l)}this.valid=r&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new g),k(e._EMPTY),k(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=16,t.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),e._WHITE=new e(new g(new b(t))),k(e._WHITE),k(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(o.EventEmitter),L=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return d(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,n){void 0===n&&(n=!0);var r=this.baseTexture.resolution,i=Math.round(t*r)/r,o=Math.round(e*r)/r;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(i,o),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var n=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=n[i];return"number"==typeof t&&(Object(o.deprecation)("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new e(new P(t))},e}(N),D=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e,n){void 0===n&&(n=i.l.NONE);var r=new P(Object.assign({width:t,height:e,resolution:1,multisample:n},this.textureOptions));return new L(r)},t.prototype.getOptimalTexture=function(t,e,n,r){var a;void 0===n&&(n=1),void 0===r&&(r=i.l.NONE),t=Math.ceil(t*n-1e-6),e=Math.ceil(e*n-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?a=r>1?-r:-1:(a=((65535&(t=Object(o.nextPow2)(t)))<<16|65535&(e=Object(o.nextPow2)(e)))>>>0,r>1&&(a+=4294967296*r)),this.texturePool[a]||(this.texturePool[a]=[]);var s=this.texturePool[a].pop();return s||(s=this.createTexture(t,e,r)),s.filterPoolKey=a,s.setResolution(n),s},t.prototype.getFilterTexture=function(t,e,n){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution,n||i.l.NONE);return r.filterFrame=t.filterFrame,r},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},t.SCREEN_KEY=-1,t}(),F=function(){function t(t,e,n,r,o,a,s){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=i.r.FLOAT),this.buffer=t,this.size=e,this.normalized=n,this.type=r,this.stride=o,this.start=a,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,n,r,i,o){return new t(e,n,r,i,o)},t}(),B=0,U=function(){function t(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=e,this.id=B++,this.disposeRunner=new a.a("disposeBuffer")}return t.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===i.d.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?i.d.ELEMENT_ARRAY_BUFFER:i.d.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),G={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},j={5126:4,5123:2,5121:1},H=0,z={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},V=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=H++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new a.a("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,n,r,i,o,a,s){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof U||(e instanceof Array&&(e=new Float32Array(e)),e=new U(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,n,r,i);return this}var c=this.buffers.indexOf(e);return-1===c&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new F(c,n,r,i,o,a,s),this.instanced=this.instanced||s,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof U||(t instanceof Array&&(t=new Uint16Array(t)),t=new U(t)),t.type=i.d.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],n=[],r=new U;for(t in this.attributes){var i=this.attributes[t],a=this.buffers[i.buffer];e.push(a.data),n.push(i.size*j[i.type]/4),i.buffer=0}for(r.data=function(t,e){for(var n=0,r=0,i={},a=0;a<t.length;a++)r+=e[a],n+=t[a].length;var s=new ArrayBuffer(4*n),u=null,l=0;for(a=0;a<t.length;a++){var c=e[a],h=t[a],d=Object(o.getBufferType)(h);i[d]||(i[d]=new G[d](s)),u=i[d];for(var f=0;f<h.length;f++)u[(f/c|0)*r+l+f%c]=h[f];l+=c}return new Float32Array(s)}(e,n),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,n=0;n<this.buffers.length;n++)e.buffers[n]=new U(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];e.attributes[n]=new F(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=i.d.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var n,r=new t,a=[],s=[],u=[],l=0;l<e.length;l++){n=e[l];for(var c=0;c<n.buffers.length;c++)s[c]=s[c]||0,s[c]+=n.buffers[c].data.length,u[c]=0}for(l=0;l<n.buffers.length;l++)a[l]=new(z[Object(o.getBufferType)(n.buffers[l].data)])(s[l]),r.buffers[l]=new U(a[l]);for(l=0;l<e.length;l++)for(n=e[l],c=0;c<n.buffers.length;c++)a[c].set(n.buffers[c].data,u[c]),u[c]+=n.buffers[c].data.length;if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.type=i.d.ELEMENT_ARRAY_BUFFER;var h=0,d=0,f=0,p=0;for(l=0;l<n.buffers.length;l++)if(n.buffers[l]!==n.indexBuffer){p=l;break}for(var l in n.attributes){var v=n.attributes[l];(0|v.buffer)===p&&(d+=v.size*j[v.type]/4)}for(l=0;l<e.length;l++){var m=e[l].indexBuffer.data;for(c=0;c<m.length;c++)r.indexBuffer.data[c+f]+=h;h+=e[l].buffers[p].data.length/d,f+=m.length}}return r},t}(),W=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return d(e,t),e}(V),X=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new U(e.vertices),e.uvBuffer=new U(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return d(e,t),e.prototype.map=function(t,e){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+e.width/t.width,this.uvs[3]=r,this.uvs[4]=n+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=n,this.uvs[7]=r+e.height/t.height,n=e.x,r=e.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+e.width,this.vertices[3]=r,this.vertices[4]=n+e.width,this.vertices[5]=r+e.height,this.vertices[6]=n,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(V),Y=0,q=function(){function t(t,e,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Y++,this.static=!!e,this.ubo=!!n,t instanceof U?(this.buffer=t,this.buffer.type=i.d.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new U(new Float32Array(1)),this.buffer.type=i.d.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,n,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new t(n,r)},t.from=function(e,n,r){return new t(e,n,r)},t.uboFrom=function(e,n){return new t(e,null==n||n,!0)},t}(),Z=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=i.l.NONE,this.sourceFrame=new u.j,this.destinationFrame=new u.j,this.bindingSourceFrame=new u.j,this.bindingDestinationFrame=new u.j,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),Q=[new u.g,new u.g,new u.g,new u.g],K=new u.d,J=function(){function t(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new D,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new W,this.quadUv=new X,this.tempRect=new u.j,this.activeState={},this.globalUniforms=new q({outputFrame:new u.j,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(t,e){for(var n,r,i=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new Z,s=this.renderer.renderTexture,u=e[0].resolution,l=e[0].multisample,c=e[0].padding,h=e[0].autoFit,d=null===(n=e[0].legacy)||void 0===n||n,f=1;f<e.length;f++){var p=e[f];u=Math.min(u,p.resolution),l=Math.min(l,p.multisample),c=this.useMaxPadding?Math.max(c,p.padding):c+p.padding,h=h&&p.autoFit,d=d||null===(r=p.legacy)||void 0===r||r}1===o.length&&(this.defaultFilterStack[0].renderTexture=s.current),o.push(a),a.resolution=u,a.multisample=l,a.legacy=d,a.target=t,a.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),a.sourceFrame.pad(c);var v=this.tempRect.copyFrom(s.sourceFrame);i.projection.transform&&this.transformAABB(K.copyFrom(i.projection.transform).invert(),v),h?(a.sourceFrame.fit(v),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(v)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,u,l),a.filters=e,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var m=this.tempRect;m.x=0,m.y=0,m.width=a.sourceFrame.width,m.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(s.sourceFrame),a.bindingDestinationFrame.copyFrom(s.destinationFrame),a.transform=i.projection.transform,i.projection.transform=null,s.bind(a.renderTexture,a.sourceFrame,m),i.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),n=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var o=r.inputSize,a=r.inputPixel,s=r.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],a[0]=Math.round(o[0]*e.resolution),a[1]=Math.round(o[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],s[0]=.5*a[2],s[1]=.5*a[3],s[2]=e.sourceFrame.width*o[2]-.5*a[2],s[3]=e.sourceFrame.height*o[3]-.5*a[3],e.legacy){var u=r.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,e.renderTexture,l.renderTexture,i.e.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var c=e.renderTexture,h=this.getOptimalFilterTexture(c.width,c.height,e.resolution);h.filterFrame=c.filterFrame;var d=0;for(d=0;d<n.length-1;++d){1===d&&e.multisample>1&&((h=this.getOptimalFilterTexture(c.width,c.height,e.resolution)).filterFrame=c.filterFrame),n[d].apply(this,c,h,i.e.CLEAR,e);var f=c;c=h,h=f}n[d].apply(this,c,l.renderTexture,i.e.BLEND,e),d>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(t,e){void 0===e&&(e=i.e.CLEAR);var n=this.renderer,r=n.renderTexture,o=n.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,r.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=1&o.stateId||this.forceClear;(e===i.e.CLEAR||e===i.e.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(t,e,n,r){var o=this.renderer;o.state.set(t.state),this.bindAndClear(n,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(i.f.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(i.f.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,o=e._texture.orig,a=t.set(i.width,0,0,i.height,r.x,r.y),s=e.worldTransform.copyTo(u.d.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/o.width,1/o.height),a.translate(e.anchor.x,e.anchor.y),a},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,n,r){return void 0===n&&(n=1),void 0===r&&(r=i.l.NONE),this.texturePool.getOptimalTexture(t,e,n,r)},t.prototype.getFilterTexture=function(t,e,n){if("number"==typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,n||i.l.NONE);return o.filterFrame=t.filterFrame,o},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(t,e){var n=Q[0],r=Q[1],i=Q[2],o=Q[3];n.set(e.left,e.top),r.set(e.left,e.bottom),i.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(n,n),t.apply(r,r),t.apply(i,i),t.apply(o,o);var a=Math.min(n.x,r.x,i.x,o.x),s=Math.min(n.y,r.y,i.y,o.y),u=Math.max(n.x,r.x,i.x,o.x),l=Math.max(n.y,r.y,i.y,o.y);e.x=a,e.y=s,e.width=u-a,e.height=l-s},t.prototype.roundFrame=function(t,e,n,r,i){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(i){var o=i.a,a=i.b,s=i.c,u=i.d;if((Math.abs(a)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}(i=i?K.copyFrom(i):K.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(i,t),t.ceil(e),this.transformAABB(i.invert(),t)}},t}(),$=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),tt=function(){function t(t){this.renderer=t,this.emptyRenderer=new $(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var n=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=n[r]||null,t[r]&&(t[r]._batchLocation=r)},t.prototype.boundArray=function(t,e,n,r){for(var i=t.elements,o=t.ids,a=t.count,s=0,u=0;u<a;u++){var l=i[u],c=l._batchLocation;if(c>=0&&c<r&&e[c]===l)o[u]=c;else for(;s<r;){var h=e[s];if(!h||h._batchEnabled!==n||h._batchLocation!==s){o[u]=s,l._batchLocation=s,e[s]=l;break}s++}}},t.prototype.destroy=function(){this.renderer=null},t}(),et=0,nt=function(){function t(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=et++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=et++,this.renderer.runners.contextChange.emit(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var n;if(r.b.PREFER_ENV>=i.g.WEBGL2&&(n=t.getContext("webgl2",e)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){var e=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),rt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=i.l.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},it=new u.j,ot=function(){function t(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new C(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new u.j,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;r.b.PREFER_ENV===i.g.WEBGL_LEGACY&&(e=null,n=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},t.prototype.bind=function(t,e,n){void 0===n&&(n=0);var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,i.mipLevel=n),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,i.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var s=e.width>>n,u=e.height>>n,l=s/e.width;this.setViewport(e.x*l,e.y*l,s,u)}else s=t.width>>n,u=t.height>>n,this.setViewport(0,0,s,u)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,n,r){var i=this.viewport;t=Math.round(t),e=Math.round(e),n=Math.round(n),r=Math.round(r),i.width===n&&i.height===r&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=n,i.height=r,this.gl.viewport(t,e,n,r))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(t,e,n,r,o){void 0===o&&(o=i.c.COLOR|i.c.DEPTH);var a=this.gl;a.clearColor(t,e,n,r),a.clear(o)},t.prototype.initFramebuffer=function(t){var e=this.gl,n=new rt(e.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,n.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.RGBA8,t.width,t.height)),n.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),n.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var r=t.colorTextures,i=r.length;e.drawBuffers||(i=Math.min(i,1));for(var o=0;o<i;o++){var a=r[o],s=a.parentTextureArray||a;this.renderer.texture.bind(s,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t,e){var n=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures,o=i.length;n.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?(r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.RGBA8,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var a=[],s=0;s<o;s++){var u=i[s],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),0===s&&r.msaaBuffer||(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+s,u.target,l._glTextures[this.CONTEXT_UID].texture,e),a.push(n.COLOR_ATTACHMENT0+s))}if(a.length>1&&n.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){var c=t.depthTexture;this.renderer.texture.bind(c,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r.stencil))},t.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},t.prototype.detectSamples=function(t){var e=this.msaaSamples,n=i.l.NONE;if(t<=1||null===e)return n;for(var r=0;r<e.length;r++)if(e[r]<=t){n=e[r];break}return 1===n&&(n=i.l.NONE),n},t.prototype.blit=function(t,e,n){var r=this.current,i=this.renderer,o=this.gl,a=this.CONTEXT_UID;if(2===i.context.webGLVersion&&r){var s=r.glFramebuffers[a];if(s){if(!t){if(!s.msaaBuffer)return;var u=r.colorTextures[0];if(!u)return;s.blitFramebuffer||(s.blitFramebuffer=new C(r.width,r.height),s.blitFramebuffer.addColorTexture(0,u)),(t=s.blitFramebuffer).colorTextures[0]!==u&&(t.colorTextures[0]=u,t.dirtyId++,t.dirtyFormat++),t.width===r.width&&t.height===r.height||(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}e||((e=it).width=r.width,e.height=r.height),n||(n=e);var l=e.width===n.width&&e.height===n.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,s.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},t.prototype.disposeFramebuffer=function(t,e){var n=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<e.length;n++)this.disposeFramebuffer(e[n],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var n=t.width,r=t.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),e.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,e.multisample,i.DEPTH24_STENCIL8,n,r):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),e.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new u.j},t.prototype.destroy=function(){this.renderer=null},t}(),at={5126:4,5123:2,5121:1},st=function(){function t(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;r.b.PREFER_ENV===i.g.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(t){return n.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return n.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var o=t.getExtension("ANGLE_instanced_arrays");o?(t.vertexAttribDivisor=function(t,e){return o.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,n,r,i){return o.drawElementsInstancedANGLE(t,e,n,r,i)},t.drawArraysInstanced=function(t,e,n,r){return o.drawArraysInstancedANGLE(t,e,n,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var n=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var o=r[e.program.id]||this.initGeometryVao(t,e,i);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,n=0;n<t.buffers.length;n++){var r=t.buffers[n];e.update(r)}},t.prototype.checkCompatibility=function(t,e){var n=t.attributes,r=e.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},t.prototype.getSignature=function(t,e){var n=t.attributes,r=e.attributeData,i=["g",t.id];for(var o in n)r[o]&&i.push(o,r[o].location);return i.join("-")},t.prototype.initGeometryVao=function(t,e,n){void 0===n&&(n=!0);var r=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[i]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);var s=this.getSignature(t,a),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[s];if(l)return u[a.id]=l,l;var c=t.buffers,h=t.attributes,d={},f={};for(var p in c)d[p]=0,f[p]=0;for(var p in h)!h[p].size&&a.attributeData[p]?h[p].size=a.attributeData[p].size:h[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[h[p].buffer]+=h[p].size*at[h[p].type];for(var p in h){var v=h[p],m=v.size;void 0===v.stride&&(d[v.buffer]===m*at[v.type]?v.stride=0:v.stride=d[v.buffer]),void 0===v.start&&(v.start=f[v.buffer],f[v.buffer]+=m*at[v.type])}l=r.createVertexArray(),r.bindVertexArray(l);for(var g=0;g<c.length;g++){var y=c[g];o.bind(y),n&&y._glBuffers[i].refCount++}return this.activateVao(t,a),this._activeVao=l,u[a.id]=l,u[s]=l,l},t.prototype.disposeGeometry=function(t,e){var n;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,o=t.buffers,a=null===(n=this.renderer)||void 0===n?void 0:n.buffer;if(t.disposeRunner.remove(this),r){if(a)for(var s=0;s<o.length;s++){var u=o[s]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,0!==u.refCount||e||a.dispose(o[s],e))}if(!e)for(var l in r)if("g"===l[0]){var c=r[l];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),n=0;n<e.length;n++)this.disposeGeometry(this.managedGeometries[e[n]],t)},t.prototype.activateVao=function(t,e){var n=this.gl,r=this.CONTEXT_UID,i=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&i.bind(t.indexBuffer);var s=null;for(var u in a){var l=a[u],c=o[l.buffer],h=c._glBuffers[r];if(e.attributeData[u]){s!==h&&(i.bind(c),s=h);var d=e.attributeData[u].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,l.size,l.type||n.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(d,1)}}}},t.prototype.draw=function(t,e,n,r){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,s=2===a?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(t,e||o.indexBuffer.data.length,s,(n||0)*a,r||1):i.drawElements(t,e||o.indexBuffer.data.length,s,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(t,n,e||o.getSize(),r||1):i.drawArrays(t,n,e||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),ut=function(){function t(t){void 0===t&&(t=null),this.type=i.j.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=r.b.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=i.j.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function lt(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function ct(t,e){var n=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),r=t.getShaderInfoLog(e),i=r.split("\n"),o={},a=i.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||o[t])&&(o[t]=!0,!0)})),s=[""];a.forEach((function(t){n[t-1]="%c"+n[t-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var u=n.join("\n");s[0]=u,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function ht(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e}function dt(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ht(2*e);case"bvec3":return ht(3*e);case"bvec4":return ht(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ft,pt={},vt=pt;function mt(t,e,n){if("precision"!==t.substring(0,9)){var r=e;return e===i.m.HIGH&&n!==i.m.HIGH&&(r=i.m.MEDIUM),"precision "+r+" float;\n"+t}return n!==i.m.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var gt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function yt(t){return gt[t]}var _t=null,xt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function bt(t,e){if(!_t){var n=Object.keys(xt);_t={};for(var r=0;r<n.length;++r){var i=n[r];_t[t[i]]=xt[i]}}return _t[e]}var Tt,wt=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Et={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},St={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},At=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Mt(t){for(var e="",n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}var Rt=0,Ct={},Pt=function(){function t(e,n,o){void 0===o&&(o="pixi-shader"),this.id=Rt++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(o=o.replace(/\s+/g,"-"),Ct[o]?(Ct[o]++,o+="-"+Ct[o]):Ct[o]=1,this.vertexSrc="#define SHADER_NAME "+o+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+o+"\n"+this.fragmentSrc,this.vertexSrc=mt(this.vertexSrc,r.b.PRECISION_VERTEX,i.m.HIGH),this.fragmentSrc=mt(this.fragmentSrc,r.b.PRECISION_FRAGMENT,function(){if(!ft){ft=i.m.MEDIUM;var t=function(){if(vt===pt||vt&&vt.isContextLost()){var t=document.createElement("canvas"),e=void 0;r.b.PREFER_ENV>=i.g.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),vt=e}return vt}();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);ft=e.precision?i.m.HIGH:i.m.MEDIUM}}return ft}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,n,r){var i=e+n,a=o.ProgramCache[i];return a||(o.ProgramCache[i]=a=new t(e,n,r)),a},t}(),It=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof q?e:new q(e):new q({})}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var n in e.uniforms){var r=e.uniforms[n];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,n,r){return new t(Pt.from(e,n),r)},t}(),Ot=function(){function t(){this.data=0,this.blendMode=i.b.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==i.b.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),kt=function(t){function e(n,i,o){var a=this,s=Pt.from(n||e.defaultVertexSrc,i||e.defaultFragmentSrc);return(a=t.call(this,s,o)||this).padding=0,a.resolution=r.b.FILTER_RESOLUTION,a.multisample=r.b.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new Ot,a}return d(e,t),e.prototype.apply=function(t,e,n,r,i){t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(It),Nt=new u.d,Lt=function(){function t(t,e){this._texture=t,this.mapCoord=new u.d,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,r=0;r<t.length;r+=2){var i=t[r],o=t[r+1];e[r]=i*n.a+o*n.c+n.tx,e[r+1]=i*n.b+o*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=e.orig,i=e.trim;i&&(Nt.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Nt));var o=e.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+s+u)/o.width,a[1]=(e._frame.y+s+u)/o.height,a[2]=(e._frame.x+e._frame.width-s+u)/o.width,a[3]=(e._frame.y+e._frame.height-s+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),Dt=function(t){function e(e,n,r){var i=this,o=null;return"string"!=typeof e&&void 0===n&&void 0===r&&(o=e,e=void 0,n=void 0,r=void 0),(i=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",n||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=o,i.maskMatrix=new u.d,i}return d(e,t),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,n,r){var i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Lt(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,n,r))},e}(kt),Ft=function(){function t(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){var n=e;if(!n.isMaskData){var r=this.maskDataPool.pop()||new ut;r.pooled=!0,r.maskObject=e,n=r}var o=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(o),n.autoDetect&&this.detect(n),n._target=t,n.type!==i.j.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case i.j.SCISSOR:this.renderer.scissor.push(n);break;case i.j.STENCIL:this.renderer.stencil.push(n);break;case i.j.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n)}n.type===i.j.SPRITE&&this.maskStack.push(n)},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case i.j.SCISSOR:this.renderer.scissor.pop();break;case i.j.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case i.j.SPRITE:this.popSpriteMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){var n=this.maskStack[this.maskStack.length-1];n.type===i.j.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},t.prototype.detect=function(t){t.maskObject.isSprite?t.type=i.j.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=i.j.SCISSOR:t.type=i.j.STENCIL},t.prototype.pushSpriteMask=function(t){var e,n,r=t.maskObject,i=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new Dt]);var a,s,u=this.renderer,l=u.renderTexture;if(l.current){var c=l.current;a=t.resolution||c.resolution,s=null!==(e=t.multisample)&&void 0!==e?e:c.multisample}else a=t.resolution||u.resolution,s=null!==(n=t.multisample)&&void 0!==n?n:u.multisample;o[0].resolution=a,o[0].multisample=s,o[0].maskSprite=r;var h=i.filterArea;i.filterArea=r.getBounds(!0),u.filter.push(i,o),i.filterArea=h,t._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.destroy=function(){this.renderer=null},t}(),Bt=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==n&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Ut=new u.d,Gt=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return d(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){if(!t._scissorRectLocal){var e=t._scissorRect,n=t.maskObject,r=this.renderer,i=r.renderTexture;n.renderable=!0;var o=n.getBounds();this.roundFrameToPixels(o,i.current?i.current.resolution:r.resolution,i.sourceFrame,i.destinationFrame,r.projection.transform),n.renderable=!1,e&&o.fit(e),t._scissorRectLocal=o}},e.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,n=t.b,r=t.c,i=t.d;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)},e.prototype.testScissor=function(t){var n=t.maskObject;if(!n.isFastRect||!n.isFastRect())return!1;if(e.isMatrixRotated(n.worldTransform))return!1;if(e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var r=t._scissorRectLocal;return r.width>0&&r.height>0},e.prototype.roundFrameToPixels=function(t,n,r,i,o){e.isMatrixRotated(o)||((o=o?Ut.copyFrom(o):Ut.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(o,t),t.fit(i),t.x=Math.round(t.x*n),t.y=Math.round(t.y*n),t.width=Math.round(t.width*n),t.height=Math.round(t.height*n))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,e=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)},e}(Bt),jt=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return d(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,n=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?e.disable(e.STENCIL_TEST):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(Bt),Ht=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new u.d,this.transform=null}return t.prototype.update=function(t,e,n,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,n,r){var i=this.projectionMatrix,o=r?-1:1;i.identity(),i.a=1/e.width*2,i.d=o*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-o-e.y*i.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),zt=new u.j,Vt=new u.j,Wt=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new u.j,this.destinationFrame=new u.j,this.viewportFrame=new u.j}return t.prototype.bind=function(t,e,n){void 0===t&&(t=null);var r,i,o,a=this.renderer;this.current=t,t?(o=(r=t.baseTexture).resolution,e||(zt.width=t.frame.width,zt.height=t.frame.height,e=zt),n||(Vt.x=t.frame.x,Vt.y=t.frame.y,Vt.width=e.width,Vt.height=e.height,n=Vt),i=r.framebuffer):(o=a.resolution,e||(zt.width=a.screen.width,zt.height=a.screen.height,e=zt),n||((n=zt).width=e.width,n.height=e.height));var s=this.viewportFrame;s.x=n.x*o,s.y=n.y*o,s.width=n.width*o,s.height=n.height*o,t||(s.y=a.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(i,s),this.renderer.projection.update(n,e,o,!i),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var n=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,i=n.width!==r.width||n.height!==r.height;if(i){var o=this.viewportFrame,a=o.x,s=o.y,u=o.width,l=o.height;a=Math.round(a),s=Math.round(s),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,s,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),i&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function Xt(t,e,n,r,i){n.buffer.update(i)}var Yt={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},qt={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};var Zt=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();var Qt=0,Kt={textureCount:0,uboCount:0},Jt=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Qt++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Tt)return Tt;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Tt=!0===t({a:"b"},"a","b")}catch(t){Tt=!1}return Tt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),e||(Kt.textureCount=0,Kt.uboCount=0,this.syncUniformGroup(t.uniformGroup,Kt)),r},t.prototype.setUniforms=function(t){var e=this.shader.program,n=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(n.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var n=this.getGlProgram();t.static&&t.dirtyId===n.uniformDirtyGroups[t.id]||(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,e))},t.prototype.syncUniforms=function(t,e,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var n,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var i in t.uniforms){var o=e[i];if(o){for(var a=t.uniforms[i],s=!1,u=0;u<wt.length;u++)if(wt[u].test(o,a)){r.push(wt[u].code(i,a)),s=!0;break}if(!s){var l=(1===o.size?Et:St)[o.type].replace("location",'ud["'+i+'"].location');r.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+l+";")}}else(null===(n=t.uniforms[i])||void 0===n?void 0:n.group)&&(t.uniforms[i].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var n=this.getGlProgram();if(!t.static||0!==t.dirtyId||!n.uniformGroups[t.id]){t.dirtyId=0;var r=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,e);t.buffer.update(),r(n.uniformData,t.uniforms,this.renderer,Kt,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,n){var r=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var i=this.gl.getUniformBlockIndex(e.program,n);e.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=function(t,e){if(!t.autoManage)return{size:0,syncFunc:Xt};for(var n=function(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),n=0,r=0,i=0,o=0;o<e.length;o++){var a=e[o];if(n=qt[a.data.type],a.data.size>1&&(n=Math.max(n,16)*a.data.size),a.dataLen=n,r%n!=0&&r<16){var s=r%n%16;r+=s,i+=s}r+n>16?(i=16*Math.ceil(i/16),a.offset=i,i+=n,r=n):(a.offset=i,r+=n,i+=n)}return{uboElements:e,size:i=16*Math.ceil(i/16)}}(function(t,e){var n=[];for(var r in t)e[r]&&n.push(e[r]);return n.sort((function(t,e){return t.index-e.index})),n}(t.uniforms,e)),r=n.uboElements,i=n.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],a=0;a<r.length;a++){for(var s=r[a],u=t.uniforms[s.data.name],l=s.data.name,c=!1,h=0;h<wt.length;h++){var d=wt[h];if(d.codeUbo&&d.test(s.data,u)){o.push("offset = "+s.offset/4+";",wt[h].codeUbo(s.data.name,u)),c=!0;break}}if(!c)if(s.data.size>1){var f=yt(s.data.type),p=Math.max(qt[s.data.type]/16,1),v=f/p,m=(4-v%4)%4;o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+s.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+s.data.size*p+"; i++)\n                {\n                    for(var j = 0; j < "+v+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+m+";\n                }\n\n                ")}else{var g=Yt[s.data.type];o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+s.offset/4+";\n                "+g+";\n                ")}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}(t,this.shader.program.uniformData)),t.autoManage){var s=new Float32Array(a.size/4);t.buffer.update(s)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,n){var r=t.uniforms,i=[n+"-"];for(var o in r)i.push(o),e[o]&&i.push(e[o].type);return i.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,n=t.program,r=function(t,e){var n=lt(t,t.VERTEX_SHADER,e.vertexSrc),r=lt(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||function(t,e,n,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||ct(t,n),t.getShaderParameter(r,t.COMPILE_STATUS)||ct(t,r),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,i,n,r),e.attributeData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i);if(0!==o.name.indexOf("gl_")){var a=bt(e,o.type),s={type:a,name:o.name,size:yt(a),location:e.getAttribLocation(t,o.name)};n[o.name]=s}}return n}(i,t),e.uniformData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=e.getActiveUniform(t,i),a=o.name.replace(/\[.*?\]$/,""),s=!!o.name.match(/\[.*?\]$/),u=bt(e,o.type);n[a]={name:a,index:i,type:u,size:o.size,isArray:s,value:dt(u,o.size)}}return n}(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort((function(t,e){return t>e?1:-1}));for(var a=0;a<o.length;a++)e.attributeData[o[a]].location=a,t.bindAttribLocation(i,a,o[a]);t.linkProgram(i)}t.deleteShader(n),t.deleteShader(r);var s={};for(var a in e.uniformData){var u=e.uniformData[a];s[a]={location:t.getUniformLocation(i,a),value:dt(u.type,u.size)}}return new Zt(i,s)}(e,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}(),$t=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=i.b.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Ot,this.defaultState.blend=!0}return t.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[i.b.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.ADD]=[t.ONE,t.ONE],e[i.b.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.NONE]=[0,0],e[i.b.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[i.b.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[i.b.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[i.b.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[i.b.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[i.b.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[i.b.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[i.b.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[i.b.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[i.b.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,n=0;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,t)},t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],n=this.gl;2===e.length?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(t,e){var n=this.checks.indexOf(t);e&&-1===n?this.checks.push(t):e||-1===n||this.checks.splice(n,1)},t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),te=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=r.b.GC_MAX_IDLE,this.checkCountMax=r.b.GC_MAX_CHECK_COUNT,this.mode=r.b.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==i.i.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,n=!1,r=0;r<e.length;r++){var i=e[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){var o=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[o++]=e[r]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t.prototype.destroy=function(){this.renderer=null},t}(),ee=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=i.r.UNSIGNED_BYTE,this.internalFormat=i.h.RGBA,this.samplerType=0},ne=function(){function t(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new g,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){var e,n,r,o,a,s,u,l,c,h,d,f,p,v,m,g,y,_,x,b,T,w,E;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?((e={})[i.r.UNSIGNED_BYTE]=((n={})[i.h.RGBA]=t.RGBA8,n[i.h.RGB]=t.RGB8,n[i.h.RG]=t.RG8,n[i.h.RED]=t.R8,n[i.h.RGBA_INTEGER]=t.RGBA8UI,n[i.h.RGB_INTEGER]=t.RGB8UI,n[i.h.RG_INTEGER]=t.RG8UI,n[i.h.RED_INTEGER]=t.R8UI,n[i.h.ALPHA]=t.ALPHA,n[i.h.LUMINANCE]=t.LUMINANCE,n[i.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,n),e[i.r.BYTE]=((r={})[i.h.RGBA]=t.RGBA8_SNORM,r[i.h.RGB]=t.RGB8_SNORM,r[i.h.RG]=t.RG8_SNORM,r[i.h.RED]=t.R8_SNORM,r[i.h.RGBA_INTEGER]=t.RGBA8I,r[i.h.RGB_INTEGER]=t.RGB8I,r[i.h.RG_INTEGER]=t.RG8I,r[i.h.RED_INTEGER]=t.R8I,r),e[i.r.UNSIGNED_SHORT]=((o={})[i.h.RGBA_INTEGER]=t.RGBA16UI,o[i.h.RGB_INTEGER]=t.RGB16UI,o[i.h.RG_INTEGER]=t.RG16UI,o[i.h.RED_INTEGER]=t.R16UI,o[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,o),e[i.r.SHORT]=((a={})[i.h.RGBA_INTEGER]=t.RGBA16I,a[i.h.RGB_INTEGER]=t.RGB16I,a[i.h.RG_INTEGER]=t.RG16I,a[i.h.RED_INTEGER]=t.R16I,a),e[i.r.UNSIGNED_INT]=((s={})[i.h.RGBA_INTEGER]=t.RGBA32UI,s[i.h.RGB_INTEGER]=t.RGB32UI,s[i.h.RG_INTEGER]=t.RG32UI,s[i.h.RED_INTEGER]=t.R32UI,s[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,s),e[i.r.INT]=((u={})[i.h.RGBA_INTEGER]=t.RGBA32I,u[i.h.RGB_INTEGER]=t.RGB32I,u[i.h.RG_INTEGER]=t.RG32I,u[i.h.RED_INTEGER]=t.R32I,u),e[i.r.FLOAT]=((l={})[i.h.RGBA]=t.RGBA32F,l[i.h.RGB]=t.RGB32F,l[i.h.RG]=t.RG32F,l[i.h.RED]=t.R32F,l[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,l),e[i.r.HALF_FLOAT]=((c={})[i.h.RGBA]=t.RGBA16F,c[i.h.RGB]=t.RGB16F,c[i.h.RG]=t.RG16F,c[i.h.RED]=t.R16F,c),e[i.r.UNSIGNED_SHORT_5_6_5]=((h={})[i.h.RGB]=t.RGB565,h),e[i.r.UNSIGNED_SHORT_4_4_4_4]=((d={})[i.h.RGBA]=t.RGBA4,d),e[i.r.UNSIGNED_SHORT_5_5_5_1]=((f={})[i.h.RGBA]=t.RGB5_A1,f),e[i.r.UNSIGNED_INT_2_10_10_10_REV]=((p={})[i.h.RGBA]=t.RGB10_A2,p[i.h.RGBA_INTEGER]=t.RGB10_A2UI,p),e[i.r.UNSIGNED_INT_10F_11F_11F_REV]=((v={})[i.h.RGB]=t.R11F_G11F_B10F,v),e[i.r.UNSIGNED_INT_5_9_9_9_REV]=((m={})[i.h.RGB]=t.RGB9_E5,m),e[i.r.UNSIGNED_INT_24_8]=((g={})[i.h.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,g),e[i.r.FLOAT_32_UNSIGNED_INT_24_8_REV]=((y={})[i.h.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,y),E=e):((_={})[i.r.UNSIGNED_BYTE]=((x={})[i.h.RGBA]=t.RGBA,x[i.h.RGB]=t.RGB,x[i.h.ALPHA]=t.ALPHA,x[i.h.LUMINANCE]=t.LUMINANCE,x[i.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,x),_[i.r.UNSIGNED_SHORT_5_6_5]=((b={})[i.h.RGB]=t.RGB,b),_[i.r.UNSIGNED_SHORT_4_4_4_4]=((T={})[i.h.RGBA]=t.RGBA,T),_[i.r.UNSIGNED_SHORT_5_5_5_1]=((w={})[i.h.RGBA]=t.RGBA,w),E=_),E}(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new ee(t.createTexture());for(t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new ee(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture),n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);for(t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR),n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var n=this.gl;if((t=null==t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),n[r]=null)},t.prototype.ensureSamplerType=function(t){var e=this.boundTextures,n=this.hasIntegerTextures,r=this.CONTEXT_UID;if(n)for(var o=t-1;o>=0;--o){var a=e[o];a&&a._glTextures[r].samplerType!==i.o.FLOAT&&this.renderer.texture.unbind(a)}},t.prototype.initTexture=function(t){var e=new ee(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var n,r;e.internalFormat=null!==(r=null===(n=this.internalFormats[t.type])||void 0===n?void 0:n[t.format])&&void 0!==r?r:t.format,2===this.webGLVersion&&t.type===i.r.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var n=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(n,t,e))e.samplerType!==i.o.FLOAT&&(this.hasIntegerTextures=!0);else{var r=t.realWidth,o=t.realHeight,a=n.gl;(e.width!==r||e.height!==o||e.dirtyId<0)&&(e.width=r,e.height=o,a.texImage2D(t.target,0,e.internalFormat,r,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var n=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&Object(o.removeItems)(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==i.k.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=i.s.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var n=this.gl;if(e.mipmap&&t.mipmap!==i.k.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===i.p.LINEAR){var o=Math.min(t.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR:n.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),re={__proto__:null,FilterSystem:J,BatchSystem:tt,ContextSystem:nt,FramebufferSystem:ot,GeometrySystem:st,MaskSystem:Ft,ScissorSystem:Gt,StencilSystem:jt,ProjectionSystem:Ht,RenderTextureSystem:Wt,ShaderSystem:Jt,StateSystem:$t,TextureGCSystem:te,TextureSystem:ne},ie=new u.d,oe=function(t){function e(e,n){void 0===e&&(e=i.n.UNKNOWN);var a=t.call(this)||this;return n=Object.assign({},r.b.RENDER_OPTIONS,n),a.options=n,a.type=e,a.screen=new u.j(0,0,n.width,n.height),a.view=n.view||document.createElement("canvas"),a.resolution=n.resolution||r.b.RESOLUTION,a.useContextAlpha=n.useContextAlpha,a.autoDensity=!!n.autoDensity,a.preserveDrawingBuffer=n.preserveDrawingBuffer,a.clearBeforeRender=n.clearBeforeRender,a._backgroundColor=0,a._backgroundColorRgba=[0,0,0,1],a._backgroundColorString="#000000",a.backgroundColor=n.backgroundColor||a._backgroundColor,a.backgroundAlpha=n.backgroundAlpha,void 0!==n.transparent&&(Object(o.deprecation)("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),a.useContextAlpha=n.transparent,a.backgroundAlpha=n.transparent?0:1),a._lastObjectRendered=null,a.plugins={},a}return d(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var n=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=r+"px"),this.emit("resize",n,r)},e.prototype.generateTexture=function(t,e,n,r){void 0===e&&(e={}),"number"==typeof e&&(Object(o.deprecation)("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:n,region:r});var i=e.region,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}(e,["region"]);0===(r=i||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var s=L.create(f({width:r.width,height:r.height},a));return ie.tx=-r.x,ie.ty=-r.y,this.render(t,{renderTexture:s,clear:!1,transform:ie,skipUpdateTransform:!!t.parent}),s},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=i.n.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Object(o.hex2string)(t),Object(o.hex2rgb)(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(o.EventEmitter),ae=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},se=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,n=this.CONTEXT_UID,r=t._glBuffers[n]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)},t.prototype.bindBufferBase=function(t,e){var n=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var i=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,i.buffer)}},t.prototype.bindBufferRange=function(t,e,n){var r=this.gl,i=this.CONTEXT_UID;n=n||0;var o=t._glBuffers[i]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,o.buffer,256*n,256)},t.prototype.update=function(t){var e=this.gl,n=this.CONTEXT_UID,r=t._glBuffers[n];if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var i=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,i)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),n&&(e||r.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),n=0;n<e.length;n++)this.dispose(this.managedBuffers[e[n]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,n=this.gl;return t._glBuffers[e]=new ae(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}(),ue=function(t){function e(n){var r=t.call(this,i.n.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new a.a("destroy"),contextChange:new a.a("contextChange"),reset:new a.a("reset"),update:new a.a("update"),postrender:new a.a("postrender"),prerender:new a.a("prerender"),resize:new a.a("resize")},r.runners.contextChange.add(r),r.globalUniforms=new q({projectionMatrix:new u.d},!0),r.addSystem(Ft,"mask").addSystem(nt,"context").addSystem($t,"state").addSystem(Jt,"shader").addSystem(ne,"texture").addSystem(se,"buffer").addSystem(st,"geometry").addSystem(ot,"framebuffer").addSystem(Gt,"scissor").addSystem(jt,"stencil").addSystem(Ht,"projection").addSystem(te,"textureGC").addSystem(J,"filter").addSystem(Wt,"renderTexture").addSystem(tt,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:n.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,Object(o.sayHello)(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return d(e,t),e.create=function(t){if(Object(o.isWebGLSupported)())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,e=this.gl;if(1===this.context.webGLVersion){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n);t>=i.l.HIGH?this.multisample=i.l.HIGH:t>=i.l.MEDIUM?this.multisample=i.l.MEDIUM:t>=i.l.LOW?this.multisample=i.l.LOW:this.multisample=i.l.NONE},e.prototype.addSystem=function(t,e){var n=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=n,this.runners)this.runners[r].add(n);return this},e.prototype.render=function(t,e){var n,r,i,a;if(e&&(e instanceof L?(Object(o.deprecation)("6.0.0","Renderer#render arguments changed, use options instead."),n=e,r=arguments[2],i=arguments[3],a=arguments[4]):(n=e.renderTexture,r=e.clear,i=e.transform,a=e.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(n||(this._lastObjectRendered=t),!a){var s=t.enableTempParent();t.updateTransform(),t.disableTempParent(s)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(e,n,r,i){void 0===n&&(n={});var o=t.prototype.generateTexture.call(this,e,n,r,i);return this.framebuffer.blit(),o},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return Object(o.deprecation)("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,n){e.__plugins=e.__plugins||{},e.__plugins[t]=n},e}(oe);function le(t){return ue.create(t)}var ce="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",he="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",de=function(){this.texArray=null,this.blend=0,this.type=i.f.TRIANGLES,this.start=0,this.size=0,this.data=null},fe=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),pe=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),ve=function(t){function e(e){var n=t.call(this,e)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Ot.for2d(),n.size=4*r.b.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),e.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return d(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;r.b.PREFER_ENV===i.g.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=e.createShader(e.FRAGMENT_SHADER);;){var r=At.replace(/%forloop%/gi,Mt(t));if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,n=e._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new de);for(;n.length<i;)n.push(new fe);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,n=this.MAX_TEXTURES,r=e._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count,s=++g._globalBatch,u=0,l=r[0],c=0;i.copyBoundTextures(o,n);for(var h=0;h<this._bufferSize;++h){var d=t[h];t[h]=null,d._batchEnabled!==s&&(l.count>=n&&(i.boundArray(l,o,s,n),this.buildDrawCalls(l,c,h),c=h,l=r[++u],++s),d._batchEnabled=s,d.touched=a,l.elements[l.count++]=d)}for(l.count>0&&(i.boundArray(l,o,s,n),this.buildDrawCalls(l,c,this._bufferSize),++u,++s),h=0;h<o.length;h++)o[h]=null;g._globalBatch=s},e.prototype.buildDrawCalls=function(t,n,r){var i=this._bufferedElements,a=this._attributeBuffer,s=this._indexBuffer,u=this.vertexSize,l=e._drawCallPool,c=this._dcIndex,h=this._aIndex,d=this._iIndex,f=l[c];f.start=this._iIndex,f.texArray=t;for(var p=n;p<r;++p){var v=i[p],m=v._texture.baseTexture,g=o.premultiplyBlendMode[m.alphaMode?1:0][v.blendMode];i[p]=null,n<p&&f.blend!==g&&(f.size=d-f.start,n=p,(f=l[++c]).texArray=t,f.start=d),this.packInterleavedGeometry(v,a,s,h,d),h+=v.vertexData.length/2*u,d+=v.indices.length,f.blend=g}n<r&&(f.size=d-f.start,++c),this._dcIndex=c,this._aIndex=h,this._iIndex=d},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,n=this._indexBuffer;r.b.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,r=n.gl,i=n.state,o=e._drawCallPool,a=null,s=0;s<t;s++){var u=o[s],l=u.texArray,c=u.type,h=u.size,d=u.start,f=u.blend;a!==l&&(a=l,this.bindAndClearTexArray(l)),this.state.blendMode=f,i.set(this.state),r.drawElements(c,h,r.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),r.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=Object(o.nextPow2)(Math.ceil(t/8)),n=Object(o.log2)(e),r=8*e;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new pe(r*this.vertexSize*4)),i},e.prototype.getIndexBuffer=function(t){var e=Object(o.nextPow2)(Math.ceil(t/12)),n=Object(o.log2)(e),r=12*e;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i},e.prototype.packInterleavedGeometry=function(t,e,n,r,i){for(var a=e.uint32View,s=e.float32View,u=r/this.vertexSize,l=t.uvs,c=t.indices,h=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?Object(o.premultiplyTint)(t._tintRGB,f):t._tintRGB+(255*f<<24),v=0;v<h.length;v+=2)s[r++]=h[v],s[r++]=h[v+1],s[r++]=l[v],s[r++]=l[v+1],a[r++]=p,s[r++]=d;for(v=0;v<c.length;v++)n[i++]=u+c[v]},e._drawCallPool=[],e._textureArrayPool=[],e}($),me=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=q.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Pt(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new u.d,default:this.defaultGroupCache[t]};return new It(this.programCache[t],i)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var n=0;n<t;n++)n>0&&(e+="\nelse "),n<t-1&&(e+="if(vTextureId < "+n+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return(e+="\n")+"\n"},t}(),ge=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n._buffer=new U(null,e,!1),n._indexBuffer=new U(null,e,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,i.r.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,i.r.FLOAT).addAttribute("aColor",n._buffer,4,!0,i.r.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,i.r.FLOAT).addIndex(n._indexBuffer),n}return d(e,t),e}(V),ye="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",_e="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",xe=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:ye,fragment:_e,geometryClass:ge,vertexSize:6},t),n=e.vertex,r=e.fragment,i=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var a=t.call(this,e)||this;return a.shaderGenerator=new me(n,r),a.geometryClass=o,a.vertexSize=i,a}return d(e,t),e}(ve)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return ye},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return _e},enumerable:!1,configurable:!0}),t}().create(),be={},Te=function(t){Object.defineProperty(be,t,{get:function(){return Object(o.deprecation)("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),M[t]}})};for(var we in M)Te(we);var Ee={},Se=function(t){Object.defineProperty(Ee,t,{get:function(){return Object(o.deprecation)("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),re[t]}})};for(var we in re)Se(we)},function(t,e,n){"use strict";n.r(e),n.d(e,"BaseTextureCache",(function(){return j})),n.d(e,"CanvasRenderTarget",(function(){return V})),n.d(e,"DATA_URI",(function(){return Y})),n.d(e,"ProgramCache",(function(){return U})),n.d(e,"TextureCache",(function(){return G})),n.d(e,"clearTextureCache",(function(){return z})),n.d(e,"correctBlendMode",(function(){return T})),n.d(e,"createIndicesForQuads",(function(){return A})),n.d(e,"decomposeDataUri",(function(){return q})),n.d(e,"deprecation",(function(){return B})),n.d(e,"destroyTextureCache",(function(){return H})),n.d(e,"determineCrossOrigin",(function(){return Z})),n.d(e,"getBufferType",(function(){return M})),n.d(e,"getResolutionOfUrl",(function(){return Q})),n.d(e,"hex2rgb",(function(){return g})),n.d(e,"hex2string",(function(){return y})),n.d(e,"interleaveTypedArrays",(function(){return C})),n.d(e,"isPow2",(function(){return I})),n.d(e,"isWebGLSupported",(function(){return v})),n.d(e,"log2",(function(){return O})),n.d(e,"nextPow2",(function(){return P})),n.d(e,"premultiplyBlendMode",(function(){return b})),n.d(e,"premultiplyRgba",(function(){return w})),n.d(e,"premultiplyTint",(function(){return E})),n.d(e,"premultiplyTintToRgba",(function(){return S})),n.d(e,"removeItems",(function(){return k})),n.d(e,"rgb2hex",(function(){return x})),n.d(e,"sayHello",(function(){return p})),n.d(e,"sign",(function(){return N})),n.d(e,"skipHello",(function(){return f})),n.d(e,"string2hex",(function(){return _})),n.d(e,"trimCanvas",(function(){return W})),n.d(e,"uid",(function(){return D})),n.d(e,"url",(function(){return c}));var r=n(4);n.d(e,"isMobile",(function(){return r.a}));var i=n(50),o=n.n(i);n.d(e,"EventEmitter",(function(){return o.a}));var a=n(51),s=n.n(a);n.d(e,"earcut",(function(){return s.a}));var u=n(35),l=n(0),c={parse:u.parse,format:u.format,resolve:u.resolve};r.b.RETINA_PREFIX=/@([0-9\.]+)x/,r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var h,d=!1;function f(){d=!0}function p(t){var e;if(!d){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=["\n %c %c %c PixiJS 6.4.2 - \u2730 "+t+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,n)}else globalThis.console&&globalThis.console.log("PixiJS 6.4.2 - "+t+" - http://www.pixijs.com/");d=!0}}function v(){return void 0===h&&(h=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!(!n||!n.getContextAttributes().stencil);if(n){var o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,i}catch(t){return!1}}()),h}var m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function g(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function y(t){var e=t.toString(16);return"#"+("000000".substring(0,6-e.length)+e)}function _(t){return"string"==typeof t&&"#"===(t=m[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),parseInt(t,16)}function x(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var b=function(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[l.b.NORMAL_NPM]=l.b.NORMAL,t[l.b.ADD_NPM]=l.b.ADD,t[l.b.SCREEN_NPM]=l.b.SCREEN,e[l.b.NORMAL]=l.b.NORMAL_NPM,e[l.b.ADD]=l.b.ADD_NPM,e[l.b.SCREEN]=l.b.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function T(t,e){return b[e?1:0][t]}function w(t,e,n,r){return n=n||new Float32Array(4),r||void 0===r?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e):(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=e,n}function E(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var n=t>>16&255,r=t>>8&255,i=255&t;return(255*e<<24)+((n=n*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(i*e+.5|0)}function S(t,e,n,r){return(n=n||new Float32Array(4))[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,(r||void 0===r)&&(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n}function A(t,e){void 0===e&&(e=null);var n=6*t;if((e=e||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+n);for(var r=0,i=0;r<n;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function M(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var R={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function C(t,e){for(var n=0,r=0,i={},o=0;o<t.length;o++)r+=e[o],n+=t[o].length;var a=new ArrayBuffer(4*n),s=null,u=0;for(o=0;o<t.length;o++){var l=e[o],c=t[o],h=M(c);i[h]||(i[h]=new R[h](a)),s=i[h];for(var d=0;d<c.length;d++)s[(d/l|0)*r+u+d%l]=c[d];u+=l}return new Float32Array(a)}function P(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}function I(t){return!(t&t-1||!t)}function O(t){var e=(t>65535?1:0)<<4,n=((t>>>=e)>255?1:0)<<3;return e|=n,e|=n=((t>>>=n)>15?1:0)<<2,(e|=n=((t>>>=n)>3?1:0)<<1)|(t>>>=n)>>1}function k(t,e,n){var r,i=t.length;if(!(e>=i||0===n)){var o=i-(n=e+n>i?i-e:n);for(r=e;r<o;++r)t[r]=t[r+n];t.length=o}}function N(t){return 0===t?0:t<0?-1:1}var L=0;function D(){return++L}var F={};function B(t,e,n){if(void 0===n&&(n=3),!F[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),F[e]=!0}}var U={},G=Object.create(null),j=Object.create(null);function H(){var t;for(t in G)G[t].destroy();for(t in j)j[t].destroy()}function z(){var t;for(t in G)delete G[t];for(t in j)delete j[t]}var V=function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||r.b.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),t}();function W(t){var e,n,r,i=t.width,o=t.height,a=t.getContext("2d"),s=a.getImageData(0,0,i,o).data,u=s.length,l={top:null,left:null,right:null,bottom:null},c=null;for(e=0;e<u;e+=4)0!==s[e+3]&&(n=e/4%i,r=~~(e/4/i),null===l.top&&(l.top=r),(null===l.left||n<l.left)&&(l.left=n),(null===l.right||l.right<n)&&(l.right=n+1),(null===l.bottom||l.bottom<r)&&(l.bottom=r));return null!==l.top&&(i=l.right-l.left,o=l.bottom-l.top+1,c=a.getImageData(l.left,l.top,i,o)),{height:o,width:i,data:c}}var X,Y=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function q(t){var e=Y.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function Z(t,e){if(void 0===e&&(e=globalThis.location),0===t.indexOf("data:"))return"";e=e||globalThis.location,X||(X=document.createElement("a")),X.href=t;var n=c.parse(X.href),r=!n.port&&""===e.port||n.port===e.port;return n.hostname===e.hostname&&r&&n.protocol===e.protocol?"":"anonymous"}function Q(t,e){var n=r.b.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):void 0!==e?e:1}},function(t,e,n){"use strict";n.d(e,"a",(function(){return B})),n.d(e,"b",(function(){return U}));var r,i,o,a,s,u,l,c,h,d,f,p,v,m,g,y,_,x,b,T=/iPhone/i,w=/iPod/i,E=/iPad/i,S=/\biOS-universal(?:.+)Mac\b/i,A=/\bAndroid(?:.+)Mobile\b/i,M=/Android/i,R=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,C=/Silk/i,P=/Windows Phone/i,I=/\bWindows(?:.+)ARM\b/i,O=/BlackBerry/i,k=/BB10/i,N=/Opera Mini/i,L=/\b(CriOS|Chrome)(?:.+)Mobile/i,D=/Mobile(?:.+)Firefox\b/i,F=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream},B=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,r=n.split("[FBAN");void 0!==r[1]&&(n=r[0]),void 0!==(r=n.split("Twitter"))[1]&&(n=r[0]);var i=function(t){return function(e){return e.test(t)}}(n),o={apple:{phone:i(T)&&!i(P),ipod:i(w),tablet:!i(T)&&(i(E)||F(e))&&!i(P),universal:i(S),device:(i(T)||i(w)||i(E)||i(S)||F(e))&&!i(P)},amazon:{phone:i(R),tablet:!i(R)&&i(C),device:i(R)||i(C)},android:{phone:!i(P)&&i(R)||!i(P)&&i(A),tablet:!i(P)&&!i(R)&&!i(A)&&(i(C)||i(M)),device:!i(P)&&(i(R)||i(C)||i(A)||i(M))||i(/\bokhttp\b/i)},windows:{phone:i(P),tablet:i(I),device:i(P)||i(I)},other:{blackberry:i(O),blackberry10:i(k),opera:i(N),firefox:i(D),chrome:i(L),device:i(O)||i(k)||i(N)||i(D)||i(L)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(globalThis.navigator);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(r||(r={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(i||(i={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(o||(o={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(a||(a={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(s||(s={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(u||(u={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(l||(l={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(c||(c={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(h||(h={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(d||(d={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(f||(f={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(p||(p={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(v||(v={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(m||(m={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(g||(g={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(y||(y={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(_||(_={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(x||(x={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(b||(b={}));var U={MIPMAP_TEXTURES:p.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:x.NONE,SPRITE_MAX_TEXTURES:function(t){var e,n=!0;(B.tablet||B.phone)&&(B.apple.device&&(e=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(e[1],10)<11&&(n=!1),B.android.device&&(e=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(e[1],10)<7&&(n=!1));return n?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:g.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:f.CLAMP,SCALE_MODE:d.LINEAR,PRECISION_VERTEX:y.HIGH,PRECISION_FRAGMENT:B.apple.device?y.HIGH:y.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!B.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return I})),n.d(e,"c",(function(){return R})),n.d(e,"d",(function(){return C}));var r=n(4),i=n(1),o=n(3);r.b.SORTABLE_CHILDREN=!1;var a=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?i.j.EMPTY:((t=t||new i.j(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var n=t.a,r=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,u=n*e.x+i*e.y+a,l=r*e.x+o*e.y+s;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},t.prototype.addQuad=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=t[0],a=t[1];e=o<e?o:e,n=a<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[2])<e?o:e,n=(a=t[3])<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[4])<e?o:e,n=(a=t[5])<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[6])<e?o:e,n=(a=t[7])<n?a:n,r=o>r?o:r,i=a>i?a:i,this.minX=e,this.minY=n,this.maxX=r,this.maxY=i},t.prototype.addFrame=function(t,e,n,r,i){this.addFrameMatrix(t.worldTransform,e,n,r,i)},t.prototype.addFrameMatrix=function(t,e,n,r,i){var o=t.a,a=t.b,s=t.c,u=t.d,l=t.tx,c=t.ty,h=this.minX,d=this.minY,f=this.maxX,p=this.maxY,v=o*e+s*n+l,m=a*e+u*n+c;h=v<h?v:h,d=m<d?m:d,f=v>f?v:f,p=m>p?m:p,h=(v=o*r+s*n+l)<h?v:h,d=(m=a*r+u*n+c)<d?m:d,f=v>f?v:f,p=m>p?m:p,h=(v=o*e+s*i+l)<h?v:h,d=(m=a*e+u*i+c)<d?m:d,f=v>f?v:f,p=m>p?m:p,h=(v=o*r+s*i+l)<h?v:h,d=(m=a*r+u*i+c)<d?m:d,f=v>f?v:f,p=m>p?m:p,this.minX=h,this.minY=d,this.maxX=f,this.maxY=p},t.prototype.addVertexData=function(t,e,n){for(var r=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=e;s<n;s+=2){var u=t[s],l=t[s+1];r=u<r?u:r,i=l<i?l:i,o=u>o?u:o,a=l>a?l:a}this.minX=r,this.minY=i,this.maxX=o,this.maxY=a},t.prototype.addVertices=function(t,e,n,r){this.addVerticesMatrix(t.worldTransform,e,n,r)},t.prototype.addVerticesMatrix=function(t,e,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=i);for(var a=t.a,s=t.b,u=t.c,l=t.d,c=t.tx,h=t.ty,d=this.minX,f=this.minY,p=this.maxX,v=this.maxY,m=n;m<r;m+=2){var g=e[m],y=e[m+1],_=a*g+u*y+c,x=l*y+s*g+h;d=Math.min(d,_-i),p=Math.max(p,_+i),f=Math.min(f,x-o),v=Math.max(v,x+o)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=v},t.prototype.addBounds=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(n<=i&&r<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(n<=i&&r<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,n,r,i,o){t-=i,e-=o,n+=i,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},t}(),s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function u(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var l,c,h,d,f,p,v,m,g,y,_,x,b,T,w,E,S,A,M,R=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new i.m,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new a,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return u(e,t),e.mixin=function(t){for(var n=Object.keys(t),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new i.j),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new i.j),t=this._localBoundsRect),this._localBounds||(this._localBounds=new a);var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,t);return this.parent=n,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-o,s},e.prototype.toGlobal=function(t,e,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,n,r){return e&&(t=e.toGlobal(t,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),this.position.x=t,this.position.y=e,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=u,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new C),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*i.i},set:function(t){this.transform.rotation=t*i.b},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask!==t&&(this._mask&&((e=this._mask.maskObject||this._mask)._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1)),this._mask=t,this._mask&&(0===(e=this._mask.maskObject||this._mask)._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++))},enumerable:!1,configurable:!0}),e}(o.EventEmitter),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return u(e,t),e}(R);function P(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}R.prototype.displayObjectUpdateTransform=R.prototype.updateTransform,function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(l||(l={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(c||(c={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(h||(h={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(d||(d={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(f||(f={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(p||(p={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(v||(v={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(m||(m={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(g||(g={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(y||(y={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(_||(_={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(x||(x={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(b||(b={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(T||(T={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(w||(w={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(E||(E={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(S||(S={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(A||(A={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(M||(M={}));var I=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=r.b.SORTABLE_CHILDREN,e.sortDirty=!1,e}return u(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var i=e[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);Object(o.removeItems)(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var i=e[0],a=this.children.indexOf(i);if(-1===a)return null;i.parent=null,i.transform._parentID=-1,Object(o.removeItems)(this.children,a,1),this._boundsID++,this.onChildrenChange(a),i.emit("removed",this),this.emit("childRemoved",i,this,a)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Object(o.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var n,r=t,i=e-r;if(i>0&&i<=e){n=this.children.splice(r,i);for(var o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,n=this.children.length;e<n;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(P),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var n=e._mask.maskObject||e._mask;n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,n){void 0===n&&(n=!1);var r=t.prototype.getLocalBounds.call(this,e);if(!n)for(var i=0,o=this.children.length;i<o;++i){var a=this.children[i];a.visible&&a.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var n=t.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var r,i;if(this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==e.prototype._render&&(r=this.getBounds(!0)),r&&n.intersects(r,i))this._render(t);else if(this.cullArea)return;for(var o=0,a=this.children.length;o<a;++o){var s=this.children[o],u=s.cullable;s.cullable=u||!this.cullArea,s.render(t),s.cullable=u}}},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){var e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r])}var i=e&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==S.NONE));if(i&&t.batch.flush(),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t),r=0;for(var o=this.children.length;r<o;++r)this.children[r].render(t)}i&&t.batch.flush(),n&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(R);I.prototype.containerUpdateTransform=I.prototype.updateTransform},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),l.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},l.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},l.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},l.prototype.emit=function(t,e,n,r,o,a){var s=i?i+t:t;if(!this._events[s])return!1;var u,l,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,o),!0;case 6:return c.fn.call(c.context,e,n,r,o,a),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||u(this,o);else{for(var s=0,l=[],c=a.length;s<c;s++)(a[s].fn!==e||r&&!a[s].once||n&&a[s].context!==n)&&l.push(a[s]);l.length?this._events[o]=1===l.length?l[0]:l:u(this,o)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,t.exports=l},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return r}));var r,i=n(4);i.b.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(r||(r={}));var o=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=n,this.once=r}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),a=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new o(null,null,1/0),this.deltaMS=1/i.b.TARGET_FPMS,this.elapsedMS=1/i.b.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,n){return void 0===n&&(n=r.NORMAL),this._addListener(new o(t,e,n))},t.prototype.addOnce=function(t,e,n){return void 0===n&&(n=r.NORMAL),this._addListener(new o(t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*i.b.TARGET_FPMS;for(var r=this._head,o=r.next;o;)o=o.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,i.b.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),s=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,r.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?a.shared:new a,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return v}));var r=n(2),i=n(1),o=n(0),a=n(5),s=n(4),u=n(3),l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function c(t,e){function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var h=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),d=new i.g,f=new i.h,p=function(t){function e(e,n,i,a){void 0===a&&(a=o.f.TRIANGLES);var u=t.call(this)||this;return u.geometry=e,u.shader=n,u.state=i||r.s.for2d(),u.drawMode=a,u.start=0,u.size=0,u.uvs=null,u.indices=null,u.vertexData=new Float32Array(1),u.vertexDirty=-1,u._transformID=-1,u._roundPixels=s.b.ROUND_PIXELS,u.batchUvs=null,u}return c(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===o.f.TRIANGLES&&n.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],e=t.data,n=t._updateID;if(n!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var r=this.transform.worldTransform,i=r.a,o=r.b,a=r.c,u=r.d,l=r.tx,c=r.ty,h=this.vertexData,d=0;d<h.length/2;d++){var f=e[2*d],p=e[2*d+1];h[2*d]=i*f+a*p+l,h[2*d+1]=o*f+u*p+c}if(this._roundPixels){var v=s.b.RESOLUTION;for(d=0;d<h.length;++d)h[d]=Math.round((h[d]*v|0)/v)}this.vertexDirty=n}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new h(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,d);for(var e=this.geometry.getBuffer("aVertexPosition").data,n=f.points,r=this.geometry.getIndex().data,i=r.length,o=4===this.drawMode?3:1,a=0;a+2<i;a+=o){var s=2*r[a],u=2*r[a+1],l=2*r[a+2];if(n[0]=e[s],n[1]=e[s+1],n[2]=e[u],n[3]=e[u+1],n[4]=e[l],n[5]=e[l+1],f.contains(d.x,d.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(a.b),v=function(t){function e(e,n){var o=this,a={uSampler:e,alpha:1,uTextureMatrix:i.d.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(a,n.uniforms),(o=t.call(this,n.program||r.n.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),a)||this)._colorDirty=!1,o.uvMatrix=new r.u(e),o.batchable=void 0===n.program,o.pluginName=n.pluginName,o.tint=n.tint,o.alpha=n.alpha,o}return c(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Object(u.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(r.r),m=function(t){function e(e,n,i){var a=t.call(this)||this,s=new r.h(e),u=new r.h(n,!0),l=new r.h(i,!0,!0);return a.addAttribute("aVertexPosition",s,2,!1,o.r.FLOAT).addAttribute("aTextureCoord",u,2,!1,o.r.FLOAT).addIndex(l),a._updateId=-1,a}return c(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(r.l)},function(t,e){t.exports="precision mediump float;\nattribute vec2 aVertexPosition;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 filterCoord;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nvec4 filterVertexPosition() {\n\tvec2 position = (aVertexPosition * max(outputFrame.zw, vec2(0.))) + outputFrame.xy;\n\treturn vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\nvec2 filterTextureCoord() {\n\treturn aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\nvoid main() {\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tfilterCoord = aVertexPosition * outputFrame.zw;\n}\n"},function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return p}));var r=n(2),i=n(3),o=n(1),a=n(0),s=n(4),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},l=function(){function t(t){this._foundShapes=[],this.renderer=t}return t.prototype.pushMask=function(t){var e=this.renderer,n=t.maskObject||t;e.context.save();var r=this._foundShapes;if(this.recursiveFindShapes(n,r),r.length>0){var i=e.context;i.beginPath();for(var o=0;o<r.length;o++){var a=r[o],s=a.transform.worldTransform;this.renderer.setContextTransform(s),this.renderGraphicsShape(a)}r.length=0,i.clip()}},t.prototype.recursiveFindShapes=function(t,e){t.geometry&&t.geometry.graphicsData&&e.push(t);var n=t.children;if(n)for(var r=0;r<n.length;r++)this.recursiveFindShapes(n[r],e)},t.prototype.renderGraphicsShape=function(t){t.finishPoly();var e=this.renderer.context,n=t.geometry.graphicsData,r=n.length;if(0!==r)for(var i=0;i<r;i++){var a=n[i],s=a.shape;if(s.type===o.l.POLY){var u=s.points,l=a.holes,c=void 0,h=void 0,d=void 0,f=void 0;e.moveTo(u[0],u[1]);for(var p=1;p<u.length/2;p++)e.lineTo(u[2*p],u[2*p+1]);if(l.length>0){for(c=0,d=u[0],f=u[1],p=2;p+2<u.length;p+=2)c+=(u[p]-d)*(u[p+3]-f)-(u[p+2]-d)*(u[p+1]-f);for(var v=0;v<l.length;v++)if(u=l[v].shape.points){for(h=0,d=u[0],f=u[1],p=2;p+2<u.length;p+=2)h+=(u[p]-d)*(u[p+3]-f)-(u[p+2]-d)*(u[p+1]-f);if(h*c<0)for(e.moveTo(u[0],u[1]),p=2;p<u.length;p+=2)e.lineTo(u[p],u[p+1]);else for(e.moveTo(u[u.length-2],u[u.length-1]),p=u.length-4;p>=0;p-=2)e.lineTo(u[p],u[p+1]);l[v].shape.closeStroke&&e.closePath()}}u[0]===u[u.length-2]&&u[1]===u[u.length-1]&&e.closePath()}else if(s.type===o.l.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(s.type===o.l.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(s.type===o.l.ELIP){var m=2*s.width,g=2*s.height,y=s.x-m/2,_=s.y-g/2,x=m/2*.5522848,b=g/2*.5522848,T=y+m,w=_+g,E=y+m/2,S=_+g/2;e.moveTo(y,S),e.bezierCurveTo(y,S-b,E-x,_,E,_),e.bezierCurveTo(E+x,_,T,S-b,T,S),e.bezierCurveTo(T,S+b,E+x,w,E,w),e.bezierCurveTo(E-x,w,y,S+b,y,S),e.closePath()}else if(s.type===o.l.RREC){var A=s.x,M=s.y,R=s.width,C=s.height,P=s.radius,I=Math.min(R,C)/2;P=P>I?I:P,e.moveTo(A,M+P),e.lineTo(A,M+C-P),e.quadraticCurveTo(A,M+C,A+P,M+C),e.lineTo(A+R-P,M+C),e.quadraticCurveTo(A+R,M+C,A+R,M+C-P),e.lineTo(A+R,M+P),e.quadraticCurveTo(A+R,M,A+R-P,M),e.lineTo(A+P,M),e.quadraticCurveTo(A,M,A,M+P),e.closePath()}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();function c(t){var e=document.createElement("canvas");e.width=6,e.height=1;var n=e.getContext("2d");return n.fillStyle=t,n.fillRect(0,0,6,1),e}function h(){if("undefined"==typeof document)return!1;var t=c("#ff00ff"),e=c("#ffff00"),n=document.createElement("canvas");n.width=6,n.height=1;var r=n.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(t,0,0),r.drawImage(e,2,0);var i=r.getImageData(2,0,1,1);if(!i)return!1;var o=i.data;return 255===o[0]&&0===o[1]&&0===o[2]}var d=new o.d,f=function(t){function e(n){var r,o=t.call(this,a.n.CANVAS,n)||this;if(o.refresh=!0,o.maskManager=new l(o),o.smoothProperty="imageSmoothingEnabled",o.blendModes=(void 0===r&&(r=[]),h()?(r[a.b.NORMAL]="source-over",r[a.b.ADD]="lighter",r[a.b.MULTIPLY]="multiply",r[a.b.SCREEN]="screen",r[a.b.OVERLAY]="overlay",r[a.b.DARKEN]="darken",r[a.b.LIGHTEN]="lighten",r[a.b.COLOR_DODGE]="color-dodge",r[a.b.COLOR_BURN]="color-burn",r[a.b.HARD_LIGHT]="hard-light",r[a.b.SOFT_LIGHT]="soft-light",r[a.b.DIFFERENCE]="difference",r[a.b.EXCLUSION]="exclusion",r[a.b.HUE]="hue",r[a.b.SATURATION]="saturate",r[a.b.COLOR]="color",r[a.b.LUMINOSITY]="luminosity"):(r[a.b.NORMAL]="source-over",r[a.b.ADD]="lighter",r[a.b.MULTIPLY]="source-over",r[a.b.SCREEN]="source-over",r[a.b.OVERLAY]="source-over",r[a.b.DARKEN]="source-over",r[a.b.LIGHTEN]="source-over",r[a.b.COLOR_DODGE]="source-over",r[a.b.COLOR_BURN]="source-over",r[a.b.HARD_LIGHT]="source-over",r[a.b.SOFT_LIGHT]="source-over",r[a.b.DIFFERENCE]="source-over",r[a.b.EXCLUSION]="source-over",r[a.b.HUE]="source-over",r[a.b.SATURATION]="source-over",r[a.b.COLOR]="source-over",r[a.b.LUMINOSITY]="source-over"),r[a.b.NORMAL_NPM]=r[a.b.NORMAL],r[a.b.ADD_NPM]=r[a.b.ADD],r[a.b.SCREEN_NPM]=r[a.b.SCREEN],r[a.b.SRC_IN]="source-in",r[a.b.SRC_OUT]="source-out",r[a.b.SRC_ATOP]="source-atop",r[a.b.DST_OVER]="destination-over",r[a.b.DST_IN]="destination-in",r[a.b.DST_OUT]="destination-out",r[a.b.DST_ATOP]="destination-atop",r[a.b.XOR]="xor",r[a.b.SUBTRACT]="source-over",r),o.renderingToScreen=!1,o._activeBlendMode=null,o._projTransform=null,o._outerBlend=!1,o.rootContext=o.view.getContext("2d",{alpha:o.useContextAlpha}),o.context=o.rootContext,!o.rootContext.imageSmoothingEnabled){var s=o.rootContext;s.webkitImageSmoothingEnabled?o.smoothProperty="webkitImageSmoothingEnabled":s.mozImageSmoothingEnabled?o.smoothProperty="mozImageSmoothingEnabled":s.oImageSmoothingEnabled?o.smoothProperty="oImageSmoothingEnabled":s.msImageSmoothingEnabled&&(o.smoothProperty="msImageSmoothingEnabled")}return o.initPlugins(e.__plugins),Object(i.sayHello)("Canvas"),o.resize(o.options.width,o.options.height),o}return function(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.addSystem=function(){return this},e.prototype.render=function(t,e){if(this.view){var n,o,s,u;e&&(e instanceof r.p||e instanceof r.b?(Object(i.deprecation)("6.0.0","CanvasRenderer#render arguments changed, use options instead."),n=e,o=arguments[2],s=arguments[3],u=arguments[4]):(n=e.renderTexture,o=e.clear,s=e.transform,u=e.skipUpdateTransform)),this.renderingToScreen=!n,this.emit("prerender");var l=this.resolution;n?((n=n.castToBaseTexture())._canvasRenderTarget||(n._canvasRenderTarget=new i.CanvasRenderTarget(n.width,n.height,n.resolution),n.resource=new r.j(n._canvasRenderTarget.canvas),n.valid=!0),this.context=n._canvasRenderTarget.context,this.resolution=n._canvasRenderTarget.resolution):this.context=this.rootContext;var c=this.context;if(this._projTransform=s||null,n||(this._lastObjectRendered=t),!u){var h=t.enableTempParent();t.updateTransform(),t.disableTempParent(h)}if(c.save(),c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,this._activeBlendMode=a.b.NORMAL,this._outerBlend=!1,c.globalCompositeOperation=this.blendModes[a.b.NORMAL],void 0!==o?o:this.clearBeforeRender)if(this.renderingToScreen)c.clearRect(0,0,this.width,this.height),this.backgroundAlpha>0&&(c.globalAlpha=this.useContextAlpha?this.backgroundAlpha:1,c.fillStyle=this._backgroundColorString,c.fillRect(0,0,this.width,this.height),c.globalAlpha=1);else{(n=n)._canvasRenderTarget.clear();var d=n.clearColor;d[3]>0&&(c.globalAlpha=this.useContextAlpha?d[3]:1,c.fillStyle=Object(i.hex2string)(Object(i.rgb2hex)(d)),c.fillRect(0,0,n.realWidth,n.realHeight),c.globalAlpha=1)}var f=this.context;this.context=c,t.renderCanvas(this),this.context=f,c.restore(),this.resolution=l,this._projTransform=null,this.emit("postrender")}},e.prototype.setContextTransform=function(t,e,n){var r=t,i=this._projTransform,o=this.resolution;n=n||o,i&&((r=d).copyFrom(t),r.prepend(i)),e?this.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*o|0,r.ty*o|0):this.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*o,r.ty*o)},e.prototype.clear=function(t,e){void 0===t&&(t=this._backgroundColorString),void 0===e&&(e=this.backgroundAlpha);var n=this.context;n.clearRect(0,0,this.width,this.height),t&&(n.globalAlpha=this.useContextAlpha?e:1,n.fillStyle=t,n.fillRect(0,0,this.width,this.height),n.globalAlpha=1)},e.prototype.setBlendMode=function(t,e){var n=t===a.b.SRC_IN||t===a.b.SRC_OUT||t===a.b.DST_IN||t===a.b.DST_ATOP;!e&&n&&(t=a.b.NORMAL),this._activeBlendMode!==t&&(this._activeBlendMode=t,this._outerBlend=n,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.smoothProperty&&(this.rootContext[this.smoothProperty]=s.b.SCALE_MODE===a.p.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e.registerPlugin=function(t,n){e.__plugins=e.__plugins||{},e.__plugins[t]=n},e}(r.a),p={canvas:null,getTintedCanvas:function(t,e){var n=t.texture,r="#"+("00000"+(0|(e=p.roundColor(e))).toString(16)).slice(-6);n.tintCache=n.tintCache||{};var i,o=n.tintCache[r];if(o){if(o.tintId===n._updateID)return n.tintCache[r];i=n.tintCache[r]}else i=document.createElement("canvas");if(p.tintMethod(n,e,i),i.tintId=n._updateID,p.convertTintToImage){var a=new Image;a.src=i.toDataURL(),n.tintCache[r]=a}else n.tintCache[r]=i;return i},getTintedPattern:function(t,e){var n="#"+("00000"+(0|(e=p.roundColor(e))).toString(16)).slice(-6);t.patternCache=t.patternCache||{};var r=t.patternCache[n];return r&&r.tintId===t._updateID||(p.canvas||(p.canvas=document.createElement("canvas")),p.tintMethod(t,e,p.canvas),(r=p.canvas.getContext("2d").createPattern(p.canvas,"repeat")).tintId=t._updateID,t.patternCache[n]=r),r},tintWithMultiply:function(t,e,n){var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.fillStyle="#"+("00000"+(0|e).toString(16)).slice(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply";var a=t.baseTexture.getDrawableSource();r.drawImage(a,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(a,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithOverlay:function(t,e,n){var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).slice(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.getDrawableSource(),i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithPerPixel:function(t,e,n){var r=n.getContext("2d"),o=t._frame.clone(),a=t.baseTexture.resolution;o.x*=a,o.y*=a,o.width*=a,o.height*=a,n.width=Math.ceil(o.width),n.height=Math.ceil(o.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.getDrawableSource(),o.x,o.y,o.width,o.height,0,0,o.width,o.height),r.restore();for(var s=Object(i.hex2rgb)(e),u=s[0],l=s[1],c=s[2],h=r.getImageData(0,0,o.width,o.height),d=h.data,f=0;f<d.length;f+=4)d[f+0]*=u,d[f+1]*=l,d[f+2]*=c;r.putImageData(h,0,0)},roundColor:function(t){var e=p.cacheStepsPerColorChannel,n=Object(i.hex2rgb)(t);return n[0]=Math.min(255,n[0]/e*e),n[1]=Math.min(255,n[1]/e*e),n[2]=Math.min(255,n[2]/e*e),Object(i.rgb2hex)(n)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:h(),tintMethod:null};p.tintMethod=p.canUseMultiply?p.tintWithMultiply:p.tintWithPerPixel;var v=r.q.create;r.q.create=function(t){if(!t||!t.forceCanvas)try{return v(t)}catch(t){}return new f(t)},r.c.prototype.getDrawableSource=function(){var t=this.resource;return t?t.bitmap||t.source:null},r.b.prototype._canvasRenderTarget=null,r.t.prototype.patternCache=null,r.t.prototype.tintCache=null},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,n,r,i,o,a,s){if(arguments.length>8)throw new Error("max arguments reached");var u=this,l=u.name,c=u.items;this._aliasCount++;for(var h=0,d=c.length;h<d;h++)c[h][l](t,e,n,r,i,o,a,s);return c===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(r.prototype,{dispatch:{value:r.prototype.emit},run:{value:r.prototype.emit}})},function(t,e,n){var r=n(20),i=n(15);t.exports=function(t){return"number"==typeof t||i(t)&&"[object Number]"==r(t)}},function(t,e,n){var r=n(49),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return c}));var r=n(8),i=n(0),o=n(2),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function s(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(t){function e(e,n,r,i){void 0===e&&(e=100),void 0===n&&(n=100),void 0===r&&(r=10),void 0===i&&(i=10);var o=t.call(this)||this;return o.segWidth=r,o.segHeight=i,o.width=e,o.height=n,o.build(),o}return s(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],n=[],r=[],i=this.segWidth-1,o=this.segHeight-1,a=this.width/i,s=this.height/o,u=0;u<t;u++){var l=u%this.segWidth,c=u/this.segWidth|0;e.push(l*a,c*s),n.push(l/i,c/o)}var h=i*o;for(u=0;u<h;u++){var d=u%i,f=u/i|0,p=f*this.segWidth+d,v=f*this.segWidth+d+1,m=(f+1)*this.segWidth+d,g=(f+1)*this.segWidth+d+1;r.push(p,v,m,v,g,m)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(r.b),l=function(t){function e(e,n,r){void 0===e&&(e=200),void 0===r&&(r=0);var i=t.call(this,new Float32Array(4*n.length),new Float32Array(4*n.length),new Uint16Array(6*(n.length-1)))||this;return i.points=n,i._width=e,i.textureScale=r,i.build(),i}return s(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),n.data=new Float32Array(4*t.length),r.data=new Uint16Array(6*(t.length-1)));var i=n.data,o=r.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;for(var a=0,s=t[0],u=this._width*this.textureScale,l=t.length,c=0;c<l;c++){var h=4*c;if(this.textureScale>0){var d=s.x-t[c].x,f=s.y-t[c].y,p=Math.sqrt(d*d+f*f);s=t[c],a+=p/u}else a=c/(l-1);i[h]=a,i[h+1]=0,i[h+2]=a,i[h+3]=1}var v=0;for(c=0;c<l-1;c++)h=2*c,o[v++]=h,o[v++]=h+1,o[v++]=h+2,o[v++]=h+2,o[v++]=h+1,o[v++]=h+3;n.update(),r.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,n=t[0],r=0,i=0,o=this.buffers[0].data,a=t.length,s=0;s<a;s++){var u=t[s],l=4*s;i=-((e=s<t.length-1?t[s+1]:u).x-n.x),r=e.y-n.y;var c=Math.sqrt(r*r+i*i),h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=c,i/=c,r*=h,i*=h,o[l]=u.x+r,o[l+1]=u.y+i,o[l+2]=u.x-r,o[l+3]=u.y-i,n=u}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(r.b),c=function(t){function e(e,n,o){void 0===o&&(o=0);var a=this,s=new l(e.height,n,o),u=new r.c(e);return o>0&&(e.baseTexture.wrapMode=i.s.REPEAT),(a=t.call(this,s,u)||this).autoUpdate=!0,a}return s(e,t),e.prototype._render=function(e){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),t.prototype._render.call(this,e)},e}(r.a),h=function(t){function e(e,n,i){var a=this,s=new u(e.width,e.height,n,i),l=new r.c(o.t.WHITE);return(a=t.call(this,s,l)||this).texture=e,a.autoResize=!0,a}return s(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,e=this.shader.texture,n=e.width,r=e.height;!this.autoResize||t.width===n&&t.height===r||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(r.a),d=function(t){function e(e,n,i,a,s){void 0===e&&(e=o.t.EMPTY);var u=this,l=new r.b(n,i,a);l.getBuffer("aVertexPosition").static=!1;var c=new r.c(e);return(u=t.call(this,l,c,null,s)||this).autoUpdate=!0,u}return s(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(r.a),f=function(t){function e(e,n,r,i,a){void 0===n&&(n=10),void 0===r&&(r=10),void 0===i&&(i=10),void 0===a&&(a=10);var s=t.call(this,o.t.WHITE,4,4)||this;return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=n,s._rightWidth=i,s._topHeight=r,s._bottomHeight=a,s.texture=e,s}return s(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,r=this._height>n?1:this._height/n;return Math.min(e,r)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(h)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r;!function(i){"use strict";function o(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function a(t,e,n,r,i,a){return o((s=o(o(e,t),o(r,a)))<<(u=i)|s>>>32-u,n);var s,u}function s(t,e,n,r,i,o,s){return a(e&n|~e&r,t,e,i,o,s)}function u(t,e,n,r,i,o,s){return a(e&r|n&~r,t,e,i,o,s)}function l(t,e,n,r,i,o,s){return a(e^n^r,t,e,i,o,s)}function c(t,e,n,r,i,o,s){return a(n^(e|~r),t,e,i,o,s)}function h(t,e){var n,r,i,a,h;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var d=1732584193,f=-271733879,p=-1732584194,v=271733878;for(n=0;n<t.length;n+=16)r=d,i=f,a=p,h=v,d=s(d,f,p,v,t[n],7,-680876936),v=s(v,d,f,p,t[n+1],12,-389564586),p=s(p,v,d,f,t[n+2],17,606105819),f=s(f,p,v,d,t[n+3],22,-1044525330),d=s(d,f,p,v,t[n+4],7,-176418897),v=s(v,d,f,p,t[n+5],12,1200080426),p=s(p,v,d,f,t[n+6],17,-1473231341),f=s(f,p,v,d,t[n+7],22,-45705983),d=s(d,f,p,v,t[n+8],7,1770035416),v=s(v,d,f,p,t[n+9],12,-1958414417),p=s(p,v,d,f,t[n+10],17,-42063),f=s(f,p,v,d,t[n+11],22,-1990404162),d=s(d,f,p,v,t[n+12],7,1804603682),v=s(v,d,f,p,t[n+13],12,-40341101),p=s(p,v,d,f,t[n+14],17,-1502002290),d=u(d,f=s(f,p,v,d,t[n+15],22,1236535329),p,v,t[n+1],5,-165796510),v=u(v,d,f,p,t[n+6],9,-1069501632),p=u(p,v,d,f,t[n+11],14,643717713),f=u(f,p,v,d,t[n],20,-373897302),d=u(d,f,p,v,t[n+5],5,-701558691),v=u(v,d,f,p,t[n+10],9,38016083),p=u(p,v,d,f,t[n+15],14,-660478335),f=u(f,p,v,d,t[n+4],20,-405537848),d=u(d,f,p,v,t[n+9],5,568446438),v=u(v,d,f,p,t[n+14],9,-1019803690),p=u(p,v,d,f,t[n+3],14,-187363961),f=u(f,p,v,d,t[n+8],20,1163531501),d=u(d,f,p,v,t[n+13],5,-1444681467),v=u(v,d,f,p,t[n+2],9,-51403784),p=u(p,v,d,f,t[n+7],14,1735328473),d=l(d,f=u(f,p,v,d,t[n+12],20,-1926607734),p,v,t[n+5],4,-378558),v=l(v,d,f,p,t[n+8],11,-2022574463),p=l(p,v,d,f,t[n+11],16,1839030562),f=l(f,p,v,d,t[n+14],23,-35309556),d=l(d,f,p,v,t[n+1],4,-1530992060),v=l(v,d,f,p,t[n+4],11,1272893353),p=l(p,v,d,f,t[n+7],16,-155497632),f=l(f,p,v,d,t[n+10],23,-1094730640),d=l(d,f,p,v,t[n+13],4,681279174),v=l(v,d,f,p,t[n],11,-358537222),p=l(p,v,d,f,t[n+3],16,-722521979),f=l(f,p,v,d,t[n+6],23,76029189),d=l(d,f,p,v,t[n+9],4,-640364487),v=l(v,d,f,p,t[n+12],11,-421815835),p=l(p,v,d,f,t[n+15],16,530742520),d=c(d,f=l(f,p,v,d,t[n+2],23,-995338651),p,v,t[n],6,-198630844),v=c(v,d,f,p,t[n+7],10,1126891415),p=c(p,v,d,f,t[n+14],15,-1416354905),f=c(f,p,v,d,t[n+5],21,-57434055),d=c(d,f,p,v,t[n+12],6,1700485571),v=c(v,d,f,p,t[n+3],10,-1894986606),p=c(p,v,d,f,t[n+10],15,-1051523),f=c(f,p,v,d,t[n+1],21,-2054922799),d=c(d,f,p,v,t[n+8],6,1873313359),v=c(v,d,f,p,t[n+15],10,-30611744),p=c(p,v,d,f,t[n+6],15,-1560198380),f=c(f,p,v,d,t[n+13],21,1309151649),d=c(d,f,p,v,t[n+4],6,-145523070),v=c(v,d,f,p,t[n+11],10,-1120210379),p=c(p,v,d,f,t[n+2],15,718787259),f=c(f,p,v,d,t[n+9],21,-343485551),d=o(d,r),f=o(f,i),p=o(p,a),v=o(v,h);return[d,f,p,v]}function d(t){var e,n="",r=32*t.length;for(e=0;e<r;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function f(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var r=8*t.length;for(e=0;e<r;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function p(t){var e,n,r="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),r+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return r}function v(t){return unescape(encodeURIComponent(t))}function m(t){return function(t){return d(h(f(t),8*t.length))}(v(t))}function g(t,e){return function(t,e){var n,r,i=f(t),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=h(i,8*t.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=h(o.concat(f(e)),512+8*e.length),d(h(a.concat(r),640))}(v(t),v(e))}function y(t,e,n){return e?n?g(e,t):p(g(e,t)):n?m(t):p(m(t))}void 0===(r=function(){return y}.call(e,n,e,t))||(t.exports=r)}()},function(t,e){t.exports="precision mediump float;\nattribute vec2 aVertexPosition;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 filterCoord;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nvec4 filterVertexPosition() {\n\tvec2 position = (aVertexPosition * max(outputFrame.zw, vec2(0.))) + outputFrame.xy;\n\treturn vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\nvec2 filterTextureCoord() {\n\treturn aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\nvoid main() {\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tfilterCoord = aVertexPosition * outputFrame.zw;\n}\n"},function(t,e,n){var r=n(24),i=n(133),o=n(134),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(158),i=n(161);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){(function(e){t.exports=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){return i(e[a][1][t]||t)}),l,l.exports,t,e,n,r)}return n[a].exports}for(var o=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,n,r){(function(t){"use strict";var e,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,a=new i(c),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),e=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)e="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var u=new t.MessageChannel;u.port1.onmessage=c,e=function(){u.port2.postMessage(0)}}var l=[];function c(){var t,e;r=!0;for(var n=l.length;n;){for(e=l,l=[],t=-1;++t<n;)e[t]();n=l.length}r=!1}n.exports=function(t){1!==l.push(t)||r||e()}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var r=t(1);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==i&&f(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){r((function(){var r;try{r=e(n)}catch(e){return o.reject(t,e)}r===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,r)}))}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){var n=!1;function r(e){n||(n=!0,o.reject(t,e))}function i(e){n||(n=!0,o.resolve(t,e))}var a=p((function(){e(i,r)}));"error"===a.status&&r(a.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}e.exports=l,l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(i);return this.state!==u?h(n,this.state===s?t:e,this.outcome):this.queue.push(new c(n,t,e)),n},c.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){o.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=p(d,e);if("error"===n.status)return o.reject(t,n.value);var r=n.value;if(r)f(t,r);else{t.state=s,t.outcome=e;for(var i=-1,a=t.queue.length;++i<a;)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},l.resolve=function(t){return t instanceof this?t:o.resolve(new this(i),t)},l.reject=function(t){var e=new this(i);return o.reject(e,t)},l.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,u=-1,l=new this(i);++u<n;)c(t[u],u);return l;function c(t,i){e.resolve(t).then((function(t){a[i]=t,++s!==n||r||(r=!0,o.resolve(l,a))}),(function(t){r||(r=!0,o.reject(l,t))}))}},l.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);for(var r,a=-1,s=new this(i);++a<e;)r=t[a],this.resolve(r).then((function(t){n||(n=!0,o.resolve(s,t))}),(function(t){n||(n=!0,o.reject(s,t))}));return s}},{1:1}],3:[function(t,n,r){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function o(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var a=Promise;function s(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function u(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function l(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function c(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h=void 0,d={},f=Object.prototype.toString;function p(t){return"boolean"==typeof h?a.resolve(h):function(t){return new a((function(e){var n=t.transaction("local-forage-detect-blob-support","readwrite"),r=o([""]);n.objectStore("local-forage-detect-blob-support").put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}(t).then((function(t){return h=t}))}function v(t){var e=d[t.name],n={};n.promise=new a((function(t,e){n.resolve=t,n.reject=e})),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then((function(){return n.promise})):e.dbReady=n.promise}function m(t){var e=d[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function g(t,e){var n=d[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function y(t,e){return new a((function(n,r){if(d[t.name]=d[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return n(t.db);v(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var a=i.open.apply(i,o);e&&(a.onupgradeneeded=function(e){var n=a.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore("local-forage-detect-blob-support")}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),a.onerror=function(t){t.preventDefault(),r(a.error)},a.onsuccess=function(){var e=a.result;e.onversionchange=function(t){t.target.close()},n(e),m(t)}}))}function _(t){return y(t,!1)}function x(t){return y(t,!0)}function b(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,i=t.version>t.db.version;if(r&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),i||n){if(n){var o=t.db.version+1;o>t.version&&(t.version=o)}return!0}return!1}function T(t){return o([function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}(atob(t.data))],{type:t.type})}function w(t){return t&&t.__local_forage_encoded_blob}function E(t){var e=this,n=e._initReady().then((function(){var t=d[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return u(n,t,t),n}function S(t,e,n,r){void 0===r&&(r=1);try{var i=t.db.transaction(t.storeName,e);n(null,i)}catch(i){if(r>0&&(!t.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return a.resolve().then((function(){if(!t.db||"NotFoundError"===i.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),x(t)})).then((function(){return function(t){v(t);for(var e=d[t.name],n=e.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return t.db=null,_(t).then((function(e){return t.db=e,b(t)?x(t):e})).then((function(r){t.db=e.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(e){throw g(t,e),e}))}(t).then((function(){S(t,e,n,r-1)}))})).catch(n);n(i)}}var A={_driver:"asyncStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]=t[r];var i=d[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},d[n.name]=i),i.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=E);var o=[];function s(){return a.resolve()}for(var u=0;u<i.forages.length;u++){var l=i.forages[u];l!==e&&o.push(l._initReady().catch(s))}var c=i.forages.slice(0);return a.all(o).then((function(){return n.db=i.db,_(n)})).then((function(t){return n.db=t,b(n,e._defaultConfig.version)?x(n):t})).then((function(t){n.db=i.db=t,e._dbInfo=n;for(var r=0;r<c.length;r++){var o=c[r];o!==e&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))},_support:function(){try{if(!i||!i.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=new a((function(e,r){n.ready().then((function(){S(n._dbInfo,"readonly",(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;w(r)&&(r=T(r));var i=t(r,n.key,s++);void 0!==i?e(i):n.continue()}else e()},a.onerror=function(){r(a.error)}}catch(t){r(t)}}))})).catch(r)}));return s(r,e),r},getItem:function(t,e){var n=this;t=l(t);var r=new a((function(e,r){n.ready().then((function(){S(n._dbInfo,"readonly",(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),w(t)&&(t=T(t)),e(t)},a.onerror=function(){r(a.error)}}catch(t){r(t)}}))})).catch(r)}));return s(r,e),r},setItem:function(t,e,n){var r=this;t=l(t);var i=new a((function(n,i){var o;r.ready().then((function(){return o=r._dbInfo,"[object Blob]"===f.call(e)?p(o.db).then((function(t){return t?e:(n=e,new a((function(t,e){var r=new FileReader;r.onerror=e,r.onloadend=function(e){var r=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):e})).then((function(e){S(r._dbInfo,"readwrite",(function(o,a){if(o)return i(o);try{var s=a.objectStore(r._dbInfo.storeName);null===e&&(e=void 0);var u=s.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),n(e)},a.onabort=a.onerror=function(){var t=u.error?u.error:u.transaction.error;i(t)}}catch(t){i(t)}}))})).catch(i)}));return s(i,n),i},removeItem:function(t,e){var n=this;t=l(t);var r=new a((function(e,r){n.ready().then((function(){S(n._dbInfo,"readwrite",(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).delete(t);o.oncomplete=function(){e()},o.onerror=function(){r(a.error)},o.onabort=function(){var t=a.error?a.error:a.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return s(r,e),r},clear:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){S(e._dbInfo,"readwrite",(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).clear();i.oncomplete=function(){t()},i.onabort=i.onerror=function(){var t=o.error?o.error:o.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return s(n,t),n},length:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){S(e._dbInfo,"readonly",(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).count();o.onsuccess=function(){t(o.result)},o.onerror=function(){n(o.error)}}catch(t){n(t)}}))})).catch(n)}));return s(n,t),n},key:function(t,e){var n=this,r=new a((function(e,r){t<0?e(null):n.ready().then((function(){S(n._dbInfo,"readonly",(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=!1,u=a.openKeyCursor();u.onsuccess=function(){var n=u.result;n?0===t||s?e(n.key):(s=!0,n.advance(t)):e(null)},u.onerror=function(){r(u.error)}}catch(t){r(t)}}))})).catch(r)}));return s(r,e),r},keys:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){S(e._dbInfo,"readonly",(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).openKeyCursor(),a=[];o.onsuccess=function(){var e=o.result;e?(a.push(e.key),e.continue()):t(a)},o.onerror=function(){n(o.error)}}catch(t){n(t)}}))})).catch(n)}));return s(n,t),n},dropInstance:function(t,e){e=c.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,o=this;if(t.name){var u=t.name===n.name&&o._dbInfo.db,l=u?a.resolve(o._dbInfo.db):_(t).then((function(e){var n=d[t.name],r=n.forages;n.db=e;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=e;return e}));r=t.storeName?l.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;v(t);var r=d[t.name],o=r.forages;e.close();for(var s=0;s<o.length;s++){var u=o[s];u._dbInfo.db=null,u._dbInfo.version=n}return new a((function(e,r){var o=i.open(t.name,n);o.onerror=function(t){o.result.close(),r(t)},o.onupgradeneeded=function(){o.result.deleteObjectStore(t.storeName)},o.onsuccess=function(){var t=o.result;t.close(),e(t)}})).then((function(t){r.db=t;for(var e=0;e<o.length;e++){var n=o[e];n._dbInfo.db=t,m(n._dbInfo)}})).catch((function(e){throw(g(t,e)||a.resolve()).catch((function(){})),e}))}})):l.then((function(e){v(t);var n=d[t.name],r=n.forages;e.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new a((function(e,n){var r=i.deleteDatabase(t.name);r.onerror=function(){var t=r.result;t&&t.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}})).then((function(t){n.db=t;for(var e=0;e<r.length;e++)m(r[e]._dbInfo)})).catch((function(e){throw(g(t,e)||a.resolve()).catch((function(){})),e}))}))}else r=a.reject("Invalid arguments");return s(r,e),r}},M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=/^~~local_forage_type~([^~]+)~/,C="__lfsc__:".length,P=C+"arbf".length,I=Object.prototype.toString;function O(t){var e,n,r,i,o,a=.75*t.length,s=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l=new ArrayBuffer(a),c=new Uint8Array(l);for(e=0;e<s;e+=4)n=M.indexOf(t[e]),r=M.indexOf(t[e+1]),i=M.indexOf(t[e+2]),o=M.indexOf(t[e+3]),c[u++]=n<<2|r>>4,c[u++]=(15&r)<<4|i>>2,c[u++]=(3&i)<<6|63&o;return l}function k(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=M[n[e]>>2],r+=M[(3&n[e])<<4|n[e+1]>>4],r+=M[(15&n[e+1])<<2|n[e+2]>>6],r+=M[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var N={serialize:function(t,e){var n="";if(t&&(n=I.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===I.call(t.buffer))){var r,i="__lfsc__:";t instanceof ArrayBuffer?(r=t,i+="arbf"):(r=t.buffer,"[object Int8Array]"===n?i+="si08":"[object Uint8Array]"===n?i+="ui08":"[object Uint8ClampedArray]"===n?i+="uic8":"[object Int16Array]"===n?i+="si16":"[object Uint16Array]"===n?i+="ur16":"[object Int32Array]"===n?i+="si32":"[object Uint32Array]"===n?i+="ui32":"[object Float32Array]"===n?i+="fl32":"[object Float64Array]"===n?i+="fl64":e(new Error("Failed to get type for BinaryArray"))),e(i+k(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n="~~local_forage_type~"+t.type+"~"+k(this.result);e("__lfsc__:blob"+n)},o.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}},deserialize:function(t){if("__lfsc__:"!==t.substring(0,C))return JSON.parse(t);var e,n=t.substring(P),r=t.substring(C,P);if("blob"===r&&R.test(n)){var i=n.match(R);e=i[1],n=n.substring(i[0].length)}var a=O(n);switch(r){case"arbf":return a;case"blob":return o([a],{type:e});case"si08":return new Int8Array(a);case"ui08":return new Uint8Array(a);case"uic8":return new Uint8ClampedArray(a);case"si16":return new Int16Array(a);case"ur16":return new Uint16Array(a);case"si32":return new Int32Array(a);case"ui32":return new Uint32Array(a);case"fl32":return new Float32Array(a);case"fl64":return new Float64Array(a);default:throw new Error("Unkown type: "+r)}},stringToBuffer:O,bufferToString:k};function L(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function D(t,e,n,r,i,o){t.executeSql(n,r,i,(function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,s){s.rows.length?o(t,a):L(t,e,(function(){t.executeSql(n,r,i,o)}),o)}),o):o(t,a)}),o)}function F(t,e,n,r){var i=this;t=l(t);var o=new a((function(o,a){i.ready().then((function(){void 0===e&&(e=null);var s=e,u=i._dbInfo;u.serializer.serialize(e,(function(e,l){l?a(l):u.db.transaction((function(n){D(n,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){o(s)}),(function(t,e){a(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void o(F.apply(i,[t,s,n,r-1]));a(e)}}))}))})).catch(a)}));return s(o,n),o}function B(t){return new a((function(e,n){t.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);e({db:t,storeNames:i})}),(function(t,e){n(e)}))}),(function(t){n(t)}))}))}var U={_driver:"webSQLStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!=typeof t[r]?t[r].toString():t[r];var i=new a((function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return r(t)}n.db.transaction((function(i){L(i,n,(function(){e._dbInfo=n,t()}),(function(t,e){r(e)}))}),r)}));return n.serializer=N,i},_support:"function"==typeof openDatabase,iterate:function(t,e){var n=this,r=new a((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){D(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var o=r.rows,a=o.length,s=0;s<a;s++){var u=o.item(s),l=u.value;if(l&&(l=i.serializer.deserialize(l)),void 0!==(l=t(l,u.key,s+1)))return void e(l)}e()}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},getItem:function(t,e){var n=this;t=l(t);var r=new a((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){D(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},setItem:function(t,e,n){return F.apply(this,[t,e,n,1])},removeItem:function(t,e){var n=this;t=l(t);var r=new a((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){D(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},clear:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){D(e,r,"DELETE FROM "+r.storeName,[],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},length:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){D(e,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(e,n){var r=n.rows.item(0).c;t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},key:function(t,e){var n=this,r=new a((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){D(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},keys:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){D(e,r,"SELECT key FROM "+r.storeName,[],(function(e,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},dropInstance:function(t,e){e=c.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,i=this;return s(r=t.name?new a((function(e){var r;r=t.name===n.name?i._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:r,storeNames:[t.storeName]}):e(B(r))})).then((function(t){return new a((function(e,n){t.db.transaction((function(r){function i(t){return new a((function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){n(e)}))}))}for(var o=[],s=0,u=t.storeNames.length;s<u;s++)o.push(i(t.storeNames[s]));a.all(o).then((function(){e()})).catch((function(t){n(t)}))}),(function(t){n(t)}))}))})):a.reject("Invalid arguments"),e),r}};function G(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}var j={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=G(t,this._defaultConfig),!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(t){return!0}}()||localStorage.length>0?(this._dbInfo=e,e.serializer=N,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=n.ready().then((function(){for(var e=n._dbInfo,r=e.keyPrefix,i=r.length,o=localStorage.length,a=1,s=0;s<o;s++){var u=localStorage.key(s);if(0===u.indexOf(r)){var l=localStorage.getItem(u);if(l&&(l=e.serializer.deserialize(l)),void 0!==(l=t(l,u.substring(i),a++)))return l}}}));return s(r,e),r},getItem:function(t,e){var n=this;t=l(t);var r=n.ready().then((function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r}));return s(r,e),r},setItem:function(t,e,n){var r=this;t=l(t);var i=r.ready().then((function(){void 0===e&&(e=null);var n=e;return new a((function(i,o){var a=r._dbInfo;a.serializer.serialize(e,(function(e,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+t,e),i(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||o(t),o(t)}}))}))}));return s(i,n),i},removeItem:function(t,e){var n=this;t=l(t);var r=n.ready().then((function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return s(r,e),r},clear:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}}));return s(n,t),n},length:function(t){var e=this.keys().then((function(t){return t.length}));return s(e,t),e},key:function(t,e){var n=this,r=n.ready().then((function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e}));return s(r,e),r},keys:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(t.keyPrefix)&&r.push(o.substring(t.keyPrefix.length))}return r}));return s(n,t),n},dropInstance:function(t,e){if(e=c.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,i=this;return s(r=t.name?new a((function(e){t.storeName?e(G(t,i._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}})):a.reject("Invalid arguments"),e),r}},H=function(t,e){for(var n,r,i=t.length,o=0;o<i;){if((n=t[o])===(r=e)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;o++}return!1},z=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},V={},W={},X={INDEXEDDB:A,WEBSQL:U,LOCALSTORAGE:j},Y=[X.INDEXEDDB._driver,X.WEBSQL._driver,X.LOCALSTORAGE._driver],q=["dropInstance"],Z=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(q),Q={description:"",driver:Y.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function K(t,e){t[e]=function(){var n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function J(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(z(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var $=new(function(){function t(e){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),X)if(X.hasOwnProperty(n)){var r=X[n],i=r._driver;this[n]=i,V[i]||this.defineDriver(r)}this._defaultConfig=J({},Q),this._config=J({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":r(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var r=new a((function(e,n){try{var r=t._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(i);for(var o=Z.concat("_initStorage"),u=0,l=o.length;u<l;u++){var c=o[u];if((!H(q,c)||t[c])&&"function"!=typeof t[c])return void n(i)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=a.reject(e);return s(n,arguments[arguments.length-1]),n}},n=0,r=q.length;n<r;n++){var i=q[n];t[i]||(t[i]=e(i))}}();var h=function(n){V[r]&&console.info("Redefining LocalForage driver: "+r),V[r]=t,W[r]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(h,n):h(!!t._support):h(!0)}catch(t){n(t)}}));return u(r,e,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=V[t]?a.resolve(V[t]):a.reject(new Error("Driver not found."));return u(r,e,n),r},t.prototype.getSerializer=function(t){var e=a.resolve(N);return u(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return u(n,t,t),n},t.prototype.setDriver=function(t,e,n){var r=this;z(t)||(t=[t]);var i=this._getSupportedDrivers(t);function o(){r._config.driver=r.driver()}function s(t){return r._extend(t),o(),r._ready=r._initStorage(r._config),r._ready}var l=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=l.then((function(){var t=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(t).then((function(t){r._driver=t._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(t){return function(){var e=0;return function n(){for(;e<t.length;){var i=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(s).catch(n)}o();var u=new Error("No available storage method found.");return r._driverSet=a.reject(u),r._driverSet}()}}(i)}))})).catch((function(){o();var t=new Error("No available storage method found.");return r._driverSet=a.reject(t),r._driverSet})),u(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!W[t]},t.prototype._extend=function(t){J(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];this.supports(i)&&e.push(i)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=Z.length;t<e;t++)K(this,Z[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=$},{3:3}]},{},[4])(4)}).call(this,n(17))},function(t,e,n){var r=n(14).Symbol;t.exports=r},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(148),i=n(149),o=n(150),a=n(151),s=n(152);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(36);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(22)(Object,"create");t.exports=r},function(t,e,n){var r=n(170);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(192),i=n(37),o=n(193),a=n(194),s=n(195),u=n(20),l=n(53),c=l(r),h=l(i),d=l(o),f=l(a),p=l(s),v=u;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=v(new i)||o&&"[object Promise]"!=v(o.resolve())||a&&"[object Set]"!=v(new a)||s&&"[object WeakMap]"!=v(new s))&&(v=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case c:return"[object DataView]";case h:return"[object Map]";case d:return"[object Promise]";case f:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){var r=n(66),i=n(67);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var l=e[s],c=o?o(n[l],t[l],l,n,t):void 0;void 0===c&&(c=t[l]),a?i(n,l,c):r(n,l,c)}return n}},function(t,e,n){var r=n(20),i=n(21);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return Pn}));var r=n(4),i=n(0),o=n(10),a=n(8),s=n(16),u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function l(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var c=l((function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||t,a),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,i,o,a){var s=arguments,u=n?n+t:t;if(!this._events[u])return!1;var l,c,h=this._events[u],d=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),d){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,i),!0;case 5:return h.fn.call(h.context,e,r,i,o),!0;case 6:return h.fn.call(h.context,e,r,i,o,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=s[c];h.fn.apply(h.context,l)}else{var f,p=h.length;for(c=0;c<p;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),d){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,r);break;case 4:h[c].fn.call(h[c].context,e,r,i);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=s[f];h[c].fn.apply(h[c].context,l)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==e||i&&!s[u].once||r&&s[u].context!==r)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})),h=l((function(t,e){!function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,o="object"==typeof u&&u;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var a,s,l=2147483647,c=/^xn--/,h=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,v=String.fromCharCode;function m(t){throw RangeError(f[t])}function g(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function y(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+g((t=t.replace(d,".")).split("."),e).join(".")}function _(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function x(t){return g(t,(function(t){var e="";return t>65535&&(e+=v((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+v(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function T(t,e,n){var r=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;r+=36)t=p(t/35);return p(r+36*t/(t+38))}function w(t){var e,n,r,i,o,a,s,u,c,h,d,f=[],v=t.length,g=0,y=128,_=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&m("not-basic"),f.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(o=g,a=1,s=36;i>=v&&m("invalid-input"),((u=(d=t.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||u>p((l-g)/a))&&m("overflow"),g+=u*a,!(u<(c=s<=_?1:s>=_+26?26:s-_));s+=36)a>p(l/(h=36-c))&&m("overflow"),a*=h;_=T(g-o,e=f.length+1,0==o),p(g/e)>l-y&&m("overflow"),y+=p(g/e),g%=e,f.splice(g++,0,y)}return x(f)}function E(t){var e,n,r,i,o,a,s,u,c,h,d,f,g,y,x,w=[];for(f=(t=_(t)).length,e=128,n=0,o=72,a=0;a<f;++a)(d=t[a])<128&&w.push(v(d));for(r=i=w.length,i&&w.push("-");r<f;){for(s=l,a=0;a<f;++a)(d=t[a])>=e&&d<s&&(s=d);for(s-e>p((l-n)/(g=r+1))&&m("overflow"),n+=(s-e)*g,e=s,a=0;a<f;++a)if((d=t[a])<e&&++n>l&&m("overflow"),d==e){for(u=n,c=36;!(u<(h=c<=o?1:c>=o+26?26:c-o));c+=36)x=u-h,y=36-h,w.push(v(b(h+x%y,0))),u=p(x/y);w.push(v(b(u,0))),o=T(n,g,r==i),n=0,++r}++n,++e}return w.join("")}if(a={version:"1.3.2",ucs2:{decode:_,encode:x},decode:w,encode:E,toASCII:function(t){return y(t,(function(t){return h.test(t)?"xn--"+E(t):t}))},toUnicode:function(t){return y(t,(function(t){return c.test(t)?w(t.slice(4).toLowerCase()):t}))}},r&&i)if(t.exports==r)i.exports=a;else for(s in a)a.hasOwnProperty(s)&&(r[s]=a[s]);else n.punycode=a}(u)})),d=function(t){return"string"==typeof t},f=function(t){return"object"==typeof t&&null!==t},p=function(t){return null===t};function v(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var m=function(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=t.length;a>0&&s>a&&(s=a);for(var u=0;u<s;++u){var l,c,h,d,f=t[u].replace(o,"%20"),p=f.indexOf(n);p>=0?(l=f.substr(0,p),c=f.substr(p+1)):(l=f,c=""),h=decodeURIComponent(l),d=decodeURIComponent(c),v(i,h)?Array.isArray(i[h])?i[h].push(d):i[h]=[i[h],d]:i[h]=d}return i},g=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},y=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(r){var i=encodeURIComponent(g(r))+n;return Array.isArray(t[r])?t[r].map((function(t){return i+encodeURIComponent(g(t))})).join(e):i+encodeURIComponent(g(t[r]))})).join(e):r?encodeURIComponent(g(r))+n+encodeURIComponent(g(t)):""},_=l((function(t,e){e.decode=e.parse=m,e.encode=e.stringify=y})),x=N;function b(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var T=/^([a-z0-9.+-]+:)/i,w=/:[0-9]*$/,E=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,S=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),A=["'"].concat(S),M=["%","/","?",";","#"].concat(A),R=["/","?","#"],C=/^[+a-z0-9A-Z_-]{0,63}$/,P=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,I={javascript:!0,"javascript:":!0},O={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function N(t,e,n){if(t&&f(t)&&t instanceof b)return t;var r=new b;return r.parse(t,e,n),r}b.prototype.parse=function(t,e,n){if(!d(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var a=t=o.join(i);if(a=a.trim(),!n&&1===t.split("#").length){var s=E.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=T.exec(a);if(u){var l=(u=u[0]).toLowerCase();this.protocol=l,a=a.substr(u.length)}if(n||u||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===a.substr(0,2);!c||u&&O[u]||(a=a.substr(2),this.slashes=!0)}if(!O[u]&&(c||u&&!k[u])){for(var f,p,v=-1,m=0;m<R.length;m++)-1!==(g=a.indexOf(R[m]))&&(-1===v||g<v)&&(v=g);for(-1!==(p=-1===v?a.lastIndexOf("@"):a.lastIndexOf("@",v))&&(f=a.slice(0,p),a=a.slice(p+1),this.auth=decodeURIComponent(f)),v=-1,m=0;m<M.length;m++){var g;-1!==(g=a.indexOf(M[m]))&&(-1===v||g<v)&&(v=g)}-1===v&&(v=a.length),this.host=a.slice(0,v),a=a.slice(v),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var x=this.hostname.split(/\./),b=(m=0,x.length);m<b;m++){var w=x[m];if(w&&!w.match(C)){for(var S="",N=0,L=w.length;N<L;N++)w.charCodeAt(N)>127?S+="x":S+=w[N];if(!S.match(C)){var D=x.slice(0,m),F=x.slice(m+1),B=w.match(P);B&&(D.push(B[1]),F.unshift(B[2])),F.length&&(a="/"+F.join(".")+a),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=h.toASCII(this.hostname));var U=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+U,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!I[l])for(m=0,b=A.length;m<b;m++){var j=A[m];if(-1!==a.indexOf(j)){var H=encodeURIComponent(j);H===j&&(H=escape(j)),a=a.split(j).join(H)}}var z=a.indexOf("#");-1!==z&&(this.hash=a.substr(z),a=a.slice(0,z));var V=a.indexOf("?");if(-1!==V?(this.search=a.substr(V),this.query=a.substr(V+1),e&&(this.query=_.parse(this.query)),a=a.slice(0,V)):e&&(this.search="",this.query={}),a&&(this.pathname=a),k[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var W=this.search||"";this.path=U+W}return this.href=this.format(),this},b.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&f(this.query)&&Object.keys(this.query).length&&(o=_.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||k[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+i+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},b.prototype.resolve=function(t){return this.resolveObject(N(t,!1,!0)).format()},b.prototype.resolveObject=function(t){if(d(t)){var e=new b;e.parse(t,!1,!0),t=e}for(var n=new b,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),s=0;s<a.length;s++){var u=a[s];"protocol"!==u&&(n[u]=t[u])}return k[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!k[t.protocol]){for(var l=Object.keys(t),c=0;c<l.length;c++){var h=l[c];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||O[t.protocol])n.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var v=n.pathname||"",m=n.search||"";n.path=v+m}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=y||g||n.host&&t.pathname,x=_,T=n.pathname&&n.pathname.split("/")||[],w=(f=t.pathname&&t.pathname.split("/")||[],n.protocol&&!k[n.protocol]);if(w&&(n.hostname="",n.port=null,n.host&&(""===T[0]?T[0]=n.host:T.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),_=_&&(""===f[0]||""===T[0])),y)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,T=f;else if(f.length)T||(T=[]),T.pop(),T=T.concat(f),n.search=t.search,n.query=t.query;else if(!function(t){return null==t}(t.search))return w&&(n.hostname=n.host=T.shift(),(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift())),n.search=t.search,n.query=t.query,p(n.pathname)&&p(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!T.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=T.slice(-1)[0],S=(n.host||t.host||T.length>1)&&("."===E||".."===E)||""===E,A=0,M=T.length;M>=0;M--)"."===(E=T[M])?T.splice(M,1):".."===E?(T.splice(M,1),A++):A&&(T.splice(M,1),A--);if(!_&&!x)for(;A--;A)T.unshift("..");!_||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),S&&"/"!==T.join("/").substr(-1)&&T.push("");var R,C=""===T[0]||T[0]&&"/"===T[0].charAt(0);return w&&(n.hostname=n.host=C?"":T.length?T.shift():"",(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift())),(_=_||n.host&&T.length)&&!C&&T.unshift(""),T.length?n.pathname=T.join("/"):(n.pathname=null,n.path=null),p(n.pathname)&&p(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},b.prototype.parseHost=function(){var t=this.host,e=w.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var L={parse:x,format:function(t){return d(t)&&(t=N(t)),t instanceof b?t.format():b.prototype.format.call(t)},resolve:function(t,e){return N(t,!1,!0).resolve(e)}};r.b.RETINA_PREFIX=/@([0-9\.]+)x/,r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var D,F=!1,B=function(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[i.b.NORMAL_NPM]=i.b.NORMAL,t[i.b.ADD_NPM]=i.b.ADD,t[i.b.SCREEN_NPM]=i.b.SCREEN,e[i.b.NORMAL]=i.b.NORMAL_NPM,e[i.b.ADD]=i.b.ADD_NPM,e[i.b.SCREEN]=i.b.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function U(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}function G(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}function j(t){return!(t&t-1||!t)}function H(t){var e=(t>65535?1:0)<<4,n=((t>>>=e)>255?1:0)<<3;return e|=n,e|=n=((t>>>=n)>15?1:0)<<2,(e|=n=((t>>>=n)>3?1:0)<<1)|(t>>>=n)>>1}var z=0;function V(){return++z}var W={};function X(t,e,n){if(void 0===n&&(n=3),!W[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),W[e]=!0}}var Y,q={},Z=Object.create(null),Q=Object.create(null);function K(t,e){var n=r.b.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):void 0!==e?e:1}!function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||r.b.RESOLUTION,this.resize(t,e)}t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0})}();var J,$=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,n,r,i,o,a,s){if(arguments.length>8)throw new Error("max arguments reached");var u=this,l=u.name,c=u.items;this._aliasCount++;for(var h=0,d=c.length;h<d;h++)c[h][l](t,e,n,r,i,o,a,s);return c===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties($.prototype,{dispatch:{value:$.prototype.emit},run:{value:$.prototype.emit}}),r.b.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(J||(J={}));var tt,et=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=n,this.once=r}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),nt=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new et(null,null,1/0),this.deltaMS=1/r.b.TARGET_FPMS,this.elapsedMS=1/r.b.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,n){return void 0===n&&(n=J.NORMAL),this._addListener(new et(t,e,n))},t.prototype.addOnce=function(t,e,n){return void 0===n&&(n=J.NORMAL),this._addListener(new et(t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*r.b.TARGET_FPMS;for(var i=this._head,o=i.next;o;)o=o.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,r.b.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),rt=2*Math.PI;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(tt||(tt={}));var it=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),ot=[new it,new it,new it,new it],at=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(n),this.height=Number(r),this.type=tt.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.intersects=function(t,e){if(!e){var n=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=n)return!1;var r=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>r}var i=this.left,o=this.right,a=this.top,s=this.bottom;if(o<=i||s<=a)return!1;var u=ot[0].set(t.left,t.top),l=ot[1].set(t.left,t.bottom),c=ot[2].set(t.right,t.top),h=ot[3].set(t.right,t.bottom);if(c.x<=u.x||l.y<=u.y)return!1;var d=Math.sign(e.a*e.d-e.b*e.c);if(0===d)return!1;if(e.apply(u,u),e.apply(l,l),e.apply(c,c),e.apply(h,h),Math.max(u.x,l.x,c.x,h.x)<=i||Math.min(u.x,l.x,c.x,h.x)>=o||Math.max(u.y,l.y,c.y,h.y)<=a||Math.min(u.y,l.y,c.y,h.y)>=s)return!1;var f=d*(l.y-u.y),p=d*(u.x-l.x),v=f*i+p*a,m=f*o+p*a,g=f*i+p*s,y=f*o+p*s;if(Math.max(v,m,g,y)<=f*u.x+p*u.y||Math.min(v,m,g,y)>=f*h.x+p*h.y)return!1;var _=d*(u.y-c.y),x=d*(c.x-u.x),b=_*i+x*a,T=_*o+x*a,w=_*i+x*s,E=_*o+x*s;return!(Math.max(b,T,w,E)<=_*u.x+x*u.y||Math.min(b,T,w,E)>=_*h.x+x*h.y)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(n-e,0),this.y=r,this.height=Math.max(i-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var n=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=n-e,this.y=r,this.height=i-r,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),st=function(){function t(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this._x=n,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,n){return void 0===e&&(e=this.cb),void 0===n&&(n=this.scope),new t(e,n,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),ut=function(){function t(t,e,n,r,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(t,e){e=e||new it;var n=t.x,r=t.y;return e.x=this.a*n+this.c*r+this.tx,e.y=this.b*n+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new it;var n=1/(this.a*this.d+this.c*-this.b),r=t.x,i=t.y;return e.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){return this.a=Math.cos(a+u)*i,this.b=Math.sin(a+u)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=t-(n*this.a+r*this.c),this.ty=e-(n*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=t.pivot,a=-Math.atan2(-r,i),s=Math.atan2(n,e),u=Math.abs(a+s);return u<1e-5||Math.abs(rt-u)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=s),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(r*r+i*i),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*n+o.y*i),t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),lt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ct=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ht=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],dt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ft=[],pt=[],vt=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];ft.push(e);for(var n=0;n<16;n++)for(var r=vt(lt[t]*lt[n]+ht[t]*ct[n]),i=vt(ct[t]*lt[n]+dt[t]*ct[n]),o=vt(lt[t]*ht[n]+ht[t]*dt[n]),a=vt(ct[t]*ht[n]+dt[t]*dt[n]),s=0;s<16;s++)if(lt[s]===r&&ct[s]===i&&ht[s]===o&&dt[s]===a){e.push(s);break}}for(t=0;t<16;t++){var u=new ut;u.set(lt[t],ct[t],ht[t],dt[t],0,0),pt.push(u)}}();var mt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return lt[t]},uY:function(t){return ct[t]},vX:function(t){return ht[t]},vY:function(t){return dt[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return ft[t][e]},sub:function(t,e){return ft[t][mt.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?mt.S:mt.N:2*Math.abs(e)<=Math.abs(t)?t>0?mt.E:mt.W:e>0?t>0?mt.SE:mt.SW:t>0?mt.NE:mt.NW},matrixAppendRotationInv:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=pt[mt.inv(e)];i.tx=n,i.ty=r,t.append(i)}};!function(){function t(){this.worldTransform=new ut,this.localTransform=new ut,this.position=new st(this.onChange,this,0,0),this.scale=new st(this.onChange,this,1,1),this.pivot=new st(this.onChange,this,0,0),this.skew=new st(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t}(),r.b.PREFER_ENV=r.a.any?i.g.WEBGL:i.g.WEBGL2,r.b.STRICT_TEXTURE_CACHE=!1;var gt=[];function yt(t,e){if(!t)return null;var n="";if("string"==typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(var i=gt.length-1;i>=0;--i){var o=gt[i];if(o.test&&o.test(t,n))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var _t=function(t,e){return(_t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function xt(t,e){function n(){this.constructor=t}_t(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var bt=function(){return(bt=Object.assign||function(t){for(var e,n=arguments,r=1,i=arguments.length;r<i;r++)for(var o in e=n[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Tt=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new $("setRealSize"),this.onUpdate=new $("update"),this.onError=new $("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,n){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),wt=function(t){function e(e,n){var r=this,i=n||{},o=i.width,a=i.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return(r=t.call(this,o,a)||this).data=e,r}return xt(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK);var o=e.realWidth,a=e.realHeight;return n.width===o&&n.height===a?r.texSubImage2D(e.target,0,0,0,o,a,e.format,n.type,this.data):(n.width=o,n.height=a,r.texImage2D(e.target,0,n.internalFormat,o,a,0,e.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(Tt),Et={scaleMode:i.p.NEAREST,format:i.h.RGBA,alphaMode:i.a.NPM},St=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var o=t.call(this)||this,a=(n=n||{}).alphaMode,s=n.mipmap,u=n.anisotropicLevel,l=n.scaleMode,c=n.width,h=n.height,d=n.wrapMode,f=n.format,p=n.type,v=n.target,m=n.resolution,g=n.resourceOptions;return!e||e instanceof Tt||((e=yt(e,g)).internal=!0),o.resolution=m||r.b.RESOLUTION,o.width=Math.round((c||0)*o.resolution)/o.resolution,o.height=Math.round((h||0)*o.resolution)/o.resolution,o._mipmap=void 0!==s?s:r.b.MIPMAP_TEXTURES,o.anisotropicLevel=void 0!==u?u:r.b.ANISOTROPIC_LEVEL,o._wrapMode=d||r.b.WRAP_MODE,o._scaleMode=void 0!==l?l:r.b.SCALE_MODE,o.format=f||i.h.RGBA,o.type=p||i.r.UNSIGNED_BYTE,o.target=v||i.q.TEXTURE_2D,o.alphaMode=void 0!==a?a:i.a.UNPACK,o.uid=V(),o.touched=0,o.isPowerOfTwo=!1,o._refreshPOT(),o._glTextures={},o.dirtyId=0,o.dirtyStyleId=0,o.cacheId=null,o.valid=c>0&&h>0,o.textureCacheIds=[],o.destroyed=!1,o.resource=null,o._batchEnabled=0,o._batchLocation=0,o.parentTextureArray=null,o.setResource(e),o}return xt(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,n){return n=n||this.resolution,this.setRealSize(t*n,e*n,n)},e.prototype.setRealSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=j(this.realWidth)&&j(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Q[this.cacheId],delete Z[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,n,i){void 0===i&&(i=r.b.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;if(o)a=t;else{if(!t._pixiId){var s=n&&n.pixiIdPrefix||"pixiid";t._pixiId=s+"_"+V()}a=t._pixiId}var u=Q[a];if(o&&i&&!u)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return u||((u=new e(t,n)).cacheId=a,e.addToCache(u,a)),u},e.fromBuffer=function(t,n,r,o){t=t||new Float32Array(n*r*4);var a=new wt(t,{width:n,height:r}),s=t instanceof Float32Array?i.r.FLOAT:i.r.UNSIGNED_BYTE;return new e(a,Object.assign(Et,o||{width:n,height:r,type:s}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Q[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),Q[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=Q[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete Q[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete Q[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(c),At=function(t){function e(e,n){var r=this,i=n||{},o=i.width,a=i.height;(r=t.call(this,o,a)||this).items=[],r.itemDirtyIds=[];for(var s=0;s<e;s++){var u=new St;r.items.push(u),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return xt(e,t),e.prototype.initFromArray=function(t,e){for(var n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof Tt?this.addResourceAt(t[n],n):this.addResourceAt(yt(t[n],e),n))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],n=e.realWidth,r=e.realHeight;return t.resize(n,r),Promise.resolve(t)})),this._load},e}(Tt),Mt=function(t){function e(e,n){var r,i,o=this,a=n||{},s=a.width,u=a.height;return Array.isArray(e)?(r=e,i=e.length):i=e,o=t.call(this,i,{width:s,height:u})||this,r&&o.initFromArray(r,n),o}return xt(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=i.q.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,n){var r=this.length,i=this.itemDirtyIds,o=this.items,a=t.gl;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,r,0,e.format,n.type,null);for(var s=0;s<r;s++){var u=o[s];i[s]<u.dirtyId&&(i[s]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,s,u.resource.width,u.resource.height,1,e.format,n.type,u.resource.source))}return!0},e}(At),Rt=function(t){function e(e){var n=this,r=e,i=r.naturalWidth||r.videoWidth||r.width,o=r.naturalHeight||r.videoHeight||r.height;return(n=t.call(this,i,o)||this).source=e,n.noSubImage=!1,n}return xt(e,t),e.crossOrigin=function(t,e,n){void 0===n&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=globalThis.location),0===t.indexOf("data:"))return"";e=e||globalThis.location,Y||(Y=document.createElement("a")),Y.href=t;var n=L.parse(Y.href),r=!n.port&&""===e.port||n.port===e.port;return n.hostname===e.hostname&&r&&n.protocol===e.protocol?"":"anonymous"}(e):!1!==n&&(t.crossOrigin="string"==typeof n?n:"anonymous")},e.prototype.upload=function(t,e,n,r){var o=t.gl,a=e.realWidth,s=e.realHeight;if((r=r||this.source)instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK),this.noSubImage||e.target!==o.TEXTURE_2D||n.width!==a||n.height!==s?(n.width=a,n.height=s,o.texImage2D(e.target,0,n.internalFormat,e.format,n.type,r)):o.texSubImage2D(o.TEXTURE_2D,0,0,0,e.format,n.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(Tt),Ct=function(t){function e(e){return t.call(this,e)||this}return xt(e,t),e.test=function(t){var e=globalThis.OffscreenCanvas;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(Rt),Pt=function(t){function e(n,r){var o=this,a=r||{},s=a.width,u=a.height,l=a.autoLoad,c=a.linkBaseTexture;if(n&&n.length!==e.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");o=t.call(this,6,{width:s,height:u})||this;for(var h=0;h<e.SIDES;h++)o.items[h].target=i.q.TEXTURE_CUBE_MAP_POSITIVE_X+h;return o.linkBaseTexture=!1!==c,n&&o.initFromArray(n,r),!1!==l&&o.load(),o}return xt(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=i.q.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,n){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=i.q.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,n,r){for(var i=this.itemDirtyIds,o=0;o<e.SIDES;o++){var a=this.items[o];i[o]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(t,a,r),i[o]=a.dirtyId):i[o]<-1&&(t.gl.texImage2D(a.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(At),It=function(t){function e(e,n){var i=this;if(n=n||{},!(e instanceof HTMLImageElement)){var o=new Image;Rt.crossOrigin(o,e,n.crossorigin),o.src=e,e=o}return i=t.call(this,e)||this,!e.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=e.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==n.createBitmap?n.createBitmap:r.b.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,i.bitmap=null,i._load=null,!1!==n.autoLoad&&i.load(),i}return xt(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,n){var r=e.source;e.url=r.src;var i=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){n(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(r){return n(r,0,0,e.width,e.height,{premultiplyAlpha:t.alphaMode===i.a.UNPACK?"premultiply":"none"})})).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process},e.prototype.upload=function(e,n,r){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,n,r,this.bitmap),!this.preserveBitmap){var i=!0,o=n._glTextures;for(var a in o){var s=o[a];if(s!==r&&s.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(Rt),Ot=function(t){function e(e,n){var r=this;return n=n||{},(r=t.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=e,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,!1!==n.autoLoad&&r.load(),r}return xt(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(n){if(t._resolve=function(){t.resize(t.source.width,t.source.height),n(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;Rt.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(n){t._resolve&&(e.onerror=null,t.onError.emit(n))},e.onload=function(){if(t._resolve){var n=e.width,r=e.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*t.scale,o=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(i=t._overrideWidth||t._overrideHeight/r*n,o=t._overrideHeight||t._overrideWidth/n*r),i=Math.round(i),o=Math.round(o);var a=t.source;a.width=i,a.height=o,a._pixiId="canvas_"+V(),a.getContext("2d").drawImage(e,0,0,n,r,0,0,i,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var n=e.SVG_SIZE.exec(t),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,n){return"svg"===n||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Rt),kt=function(t){function e(n,r){var i=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]);var a=n[0].src||n[0];Rt.crossOrigin(o,a,r.crossorigin);for(var s=0;s<n.length;++s){var u=document.createElement("source"),l=n[s],c=l.src,h=l.mime,d=(c=c||n[s]).split("?").shift().toLowerCase(),f=d.slice(d.lastIndexOf(".")+1);h=h||e.MIME_TYPES[f]||"video/"+f,u.src=c,u.type=h,o.appendChild(u)}n=o}return(i=t.call(this,n)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return xt(e,t),e.prototype.update=function(e){if(!this.destroyed){var n=nt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){t.valid?n(t):(t._resolve=n,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(nt.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(nt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(nt.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(nt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(nt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,n){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Rt),Nt=function(t){function e(e){return t.call(this,e)||this}return xt(e,t),e.test=function(t){return!!globalThis.createImageBitmap&&t instanceof ImageBitmap},e}(Rt);gt.push(It,Nt,Ct,kt,Ot,wt,Pt,Mt);var Lt={__proto__:null,Resource:Tt,BaseImageResource:Rt,INSTALLED:gt,autoDetectResource:yt,AbstractMultiResource:At,ArrayResource:Mt,BufferResource:wt,CanvasResource:Ct,CubeResource:Pt,ImageResource:It,SVGResource:Ot,VideoResource:kt,ImageBitmapResource:Nt},Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xt(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK);var o=e.realWidth,a=e.realHeight;return n.width===o&&n.height===a?r.texSubImage2D(e.target,0,0,0,o,a,e.format,n.type,this.data):(n.width=o,n.height=a,r.texImage2D(e.target,0,n.internalFormat,o,a,0,e.format,n.type,this.data)),!0},e}(wt),Ft=function(){function t(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new $("disposeFramebuffer"),this.multisample=i.l.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new St(null,{scaleMode:i.p.NEAREST,resolution:1,mipmap:i.k.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new St(new Dt(null,{width:this.width,height:this.height}),{scaleMode:i.p.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:i.k.OFF,format:i.h.DEPTH_COMPONENT,type:i.r.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],i=r.resolution;r.setSize(t/i,e/i)}this.depthTexture&&(i=this.depthTexture.resolution,this.depthTexture.setSize(t/i,e/i))}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),Bt=function(t){function e(e){void 0===e&&(e={});var n=this;if("number"==typeof e){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];e={width:r,height:o,scaleMode:a,resolution:s}}return e.width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:i.l.NONE,(n=t.call(this,null,e)||this).mipmap=i.k.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new Ft(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=e.multisample,n.maskStack=[],n.filterStack=[{}],n}return xt(e,t),e.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(St),Ut=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,n){var r=e.width,i=e.height;if(n){var o=t.width/2/r,a=t.height/2/i,s=t.x/r+o,u=t.y/i+a;n=mt.add(n,mt.NW),this.x0=s+o*mt.uX(n),this.y0=u+a*mt.uY(n),n=mt.add(n,2),this.x1=s+o*mt.uX(n),this.y1=u+a*mt.uY(n),n=mt.add(n,2),this.x2=s+o*mt.uX(n),this.y2=u+a*mt.uY(n),n=mt.add(n,2),this.x3=s+o*mt.uX(n),this.y3=u+a*mt.uY(n)}else this.x0=t.x/r,this.y0=t.y/i,this.x1=(t.x+t.width)/r,this.y1=t.y/i,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/i,this.x3=t.x/r,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),Gt=new Ut;function jt(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var Ht=function(t){function e(n,r,i,o,a,s){var u=t.call(this)||this;if(u.noFrame=!1,r||(u.noFrame=!0,r=new at(0,0,1,1)),n instanceof e&&(n=n.baseTexture),u.baseTexture=n,u._frame=r,u.trim=o,u.valid=!1,u._uvs=Gt,u.uvMatrix=null,u.orig=i||r,u._rotate=Number(a||0),!0===a)u._rotate=2;else if(u._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=s?new it(s.x,s.y):new it(0,0),u._updateID=0,u.textureCacheIds=[],n.valid?u.noFrame?n.valid&&u.onBaseTextureUpdated(n):u.frame=r:n.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&n.on("update",u.onBaseTextureUpdated,u),u}return xt(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture.resource;n&&n.url&&Z[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),n=this._frame===this.orig?t:this.orig.clone(),r=new e(this.baseTexture,!this.noFrame&&t,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r},e.prototype.updateUvs=function(){this._uvs===Gt&&(this._uvs=new Ut),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i=r.b.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;if(o)a=t;else if(t instanceof St){if(!t.cacheId){var s=n&&n.pixiIdPrefix||"pixiid";t.cacheId=s+"-"+V(),St.addToCache(t,t.cacheId)}a=t.cacheId}else t._pixiId||(s=n&&n.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+V()),a=t._pixiId;var u=Z[a];if(o&&i&&!u)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return u||t instanceof St?!u&&t instanceof St&&(u=new e(t),e.addToCache(u,a)):(n.resolution||(n.resolution=K(t)),(u=new e(new St(t,n))).baseTexture.cacheId=a,St.addToCache(u.baseTexture,a),e.addToCache(u,a)),u},e.fromURL=function(t,n){var r=Object.assign({autoLoad:!1},null==n?void 0:n.resourceOptions),i=e.from(t,Object.assign({resourceOptions:r},n),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then((function(){return Promise.resolve(i)}))},e.fromBuffer=function(t,n,r,i){return new e(St.fromBuffer(t,n,r,i))},e.fromLoader=function(t,n,i,o){var a=new St(t,Object.assign({scaleMode:r.b.SCALE_MODE,resolution:K(n)},o)),s=a.resource;s instanceof It&&(s.url=n);var u=new e(a);return i||(i=n),St.addToCache(u.baseTexture,i),e.addToCache(u,i),i!==n&&(St.addToCache(u.baseTexture,n),e.addToCache(u,n)),u.baseTexture.valid?Promise.resolve(u):new Promise((function(t){u.baseTexture.once("loaded",(function(){return t(u)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Z[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),Z[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=Z[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete Z[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)Z[t.textureCacheIds[r]]===t&&delete Z[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,r=t.width,i=t.height,o=e+r>this.baseTexture.width,a=n+i>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",u="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,l="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+s+" "+l)}this.valid=r&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new St),jt(e._EMPTY),jt(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=16,t.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),e._WHITE=new e(new St(new Ct(t))),jt(e._WHITE),jt(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(c),zt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return xt(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,n){void 0===n&&(n=!0);var r=this.baseTexture.resolution,i=Math.round(t*r)/r,o=Math.round(e*r)/r;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(i,o),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var n=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=n[i];return"number"==typeof t&&(X("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new e(new Bt(t))},e}(Ht),Vt=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e,n){void 0===n&&(n=i.l.NONE);var r=new Bt(Object.assign({width:t,height:e,resolution:1,multisample:n},this.textureOptions));return new zt(r)},t.prototype.getOptimalTexture=function(t,e,n,r){var o;void 0===n&&(n=1),void 0===r&&(r=i.l.NONE),t=Math.ceil(t*n-1e-6),e=Math.ceil(e*n-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?o=r>1?-r:-1:(o=((65535&(t=G(t)))<<16|65535&(e=G(e)))>>>0,r>1&&(o+=4294967296*r)),this.texturePool[o]||(this.texturePool[o]=[]);var a=this.texturePool[o].pop();return a||(a=this.createTexture(t,e,r)),a.filterPoolKey=o,a.setResolution(n),a},t.prototype.getFilterTexture=function(t,e,n){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution,n||i.l.NONE);return r.filterFrame=t.filterFrame,r},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},t.SCREEN_KEY=-1,t}(),Wt=function(){function t(t,e,n,r,o,a,s){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=i.r.FLOAT),this.buffer=t,this.size=e,this.normalized=n,this.type=r,this.stride=o,this.start=a,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,n,r,i,o){return new t(e,n,r,i,o)},t}(),Xt=0,Yt=function(){function t(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=e,this.id=Xt++,this.disposeRunner=new $("disposeBuffer")}return t.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===i.d.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?i.d.ELEMENT_ARRAY_BUFFER:i.d.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),qt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},Zt={5126:4,5123:2,5121:1},Qt=0,Kt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Jt=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Qt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new $("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,n,r,i,o,a,s){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Yt||(e instanceof Array&&(e=new Float32Array(e)),e=new Yt(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,n,r,i);return this}var c=this.buffers.indexOf(e);return-1===c&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new Wt(c,n,r,i,o,a,s),this.instanced=this.instanced||s,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof Yt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Yt(t)),t.type=i.d.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],n=[],r=new Yt;for(t in this.attributes){var i=this.attributes[t],o=this.buffers[i.buffer];e.push(o.data),n.push(i.size*Zt[i.type]/4),i.buffer=0}for(r.data=function(t,e){for(var n=0,r=0,i={},o=0;o<t.length;o++)r+=e[o],n+=t[o].length;var a=new ArrayBuffer(4*n),s=null,u=0;for(o=0;o<t.length;o++){var l=e[o],c=t[o],h=U(c);i[h]||(i[h]=new qt[h](a)),s=i[h];for(var d=0;d<c.length;d++)s[(d/l|0)*r+u+d%l]=c[d];u+=l}return new Float32Array(a)}(e,n),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,n=0;n<this.buffers.length;n++)e.buffers[n]=new Yt(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];e.attributes[n]=new Wt(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=i.d.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var n,r=new t,o=[],a=[],s=[],u=0;u<e.length;u++){n=e[u];for(var l=0;l<n.buffers.length;l++)a[l]=a[l]||0,a[l]+=n.buffers[l].data.length,s[l]=0}for(u=0;u<n.buffers.length;u++)o[u]=new(Kt[U(n.buffers[u].data)])(a[u]),r.buffers[u]=new Yt(o[u]);for(u=0;u<e.length;u++)for(n=e[u],l=0;l<n.buffers.length;l++)o[l].set(n.buffers[l].data,s[l]),s[l]+=n.buffers[l].data.length;if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.type=i.d.ELEMENT_ARRAY_BUFFER;var c=0,h=0,d=0,f=0;for(u=0;u<n.buffers.length;u++)if(n.buffers[u]!==n.indexBuffer){f=u;break}for(var u in n.attributes){var p=n.attributes[u];(0|p.buffer)===f&&(h+=p.size*Zt[p.type]/4)}for(u=0;u<e.length;u++){var v=e[u].indexBuffer.data;for(l=0;l<v.length;l++)r.indexBuffer.data[l+d]+=c;c+=e[u].buffers[f].data.length/h,d+=v.length}}return r},t}(),$t=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return xt(e,t),e}(Jt),te=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Yt(e.vertices),e.uvBuffer=new Yt(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return xt(e,t),e.prototype.map=function(t,e){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+e.width/t.width,this.uvs[3]=r,this.uvs[4]=n+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=n,this.uvs[7]=r+e.height/t.height,n=e.x,r=e.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+e.width,this.vertices[3]=r,this.vertices[4]=n+e.width,this.vertices[5]=r+e.height,this.vertices[6]=n,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Jt),ee=0,ne=function(){function t(t,e,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ee++,this.static=!!e,this.ubo=!!n,t instanceof Yt?(this.buffer=t,this.buffer.type=i.d.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Yt(new Float32Array(1)),this.buffer.type=i.d.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,n,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new t(n,r)},t.from=function(e,n,r){return new t(e,n,r)},t.uboFrom=function(e,n){return new t(e,null==n||n,!0)},t}(),re=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=i.l.NONE,this.sourceFrame=new at,this.destinationFrame=new at,this.bindingSourceFrame=new at,this.bindingDestinationFrame=new at,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),ie=[new it,new it,new it,new it],oe=new ut,ae=function(){function t(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Vt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new $t,this.quadUv=new te,this.tempRect=new at,this.activeState={},this.globalUniforms=new ne({outputFrame:new at,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(t,e){for(var n,r,i=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new re,s=this.renderer.renderTexture,u=e[0].resolution,l=e[0].multisample,c=e[0].padding,h=e[0].autoFit,d=null===(n=e[0].legacy)||void 0===n||n,f=1;f<e.length;f++){var p=e[f];u=Math.min(u,p.resolution),l=Math.min(l,p.multisample),c=this.useMaxPadding?Math.max(c,p.padding):c+p.padding,h=h&&p.autoFit,d=d||null===(r=p.legacy)||void 0===r||r}1===o.length&&(this.defaultFilterStack[0].renderTexture=s.current),o.push(a),a.resolution=u,a.multisample=l,a.legacy=d,a.target=t,a.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),a.sourceFrame.pad(c);var v=this.tempRect.copyFrom(s.sourceFrame);i.projection.transform&&this.transformAABB(oe.copyFrom(i.projection.transform).invert(),v),h?(a.sourceFrame.fit(v),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(v)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,u,l),a.filters=e,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var m=this.tempRect;m.x=0,m.y=0,m.width=a.sourceFrame.width,m.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(s.sourceFrame),a.bindingDestinationFrame.copyFrom(s.destinationFrame),a.transform=i.projection.transform,i.projection.transform=null,s.bind(a.renderTexture,a.sourceFrame,m),i.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),n=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var o=r.inputSize,a=r.inputPixel,s=r.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],a[0]=Math.round(o[0]*e.resolution),a[1]=Math.round(o[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],s[0]=.5*a[2],s[1]=.5*a[3],s[2]=e.sourceFrame.width*o[2]-.5*a[2],s[3]=e.sourceFrame.height*o[3]-.5*a[3],e.legacy){var u=r.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,e.renderTexture,l.renderTexture,i.e.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var c=e.renderTexture,h=this.getOptimalFilterTexture(c.width,c.height,e.resolution);h.filterFrame=c.filterFrame;var d=0;for(d=0;d<n.length-1;++d){1===d&&e.multisample>1&&((h=this.getOptimalFilterTexture(c.width,c.height,e.resolution)).filterFrame=c.filterFrame),n[d].apply(this,c,h,i.e.CLEAR,e);var f=c;c=h,h=f}n[d].apply(this,c,l.renderTexture,i.e.BLEND,e),d>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(t,e){void 0===e&&(e=i.e.CLEAR);var n=this.renderer,r=n.renderTexture,o=n.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,r.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=1&o.stateId||this.forceClear;(e===i.e.CLEAR||e===i.e.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(t,e,n,r){var o=this.renderer;o.state.set(t.state),this.bindAndClear(n,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(i.f.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(i.f.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,o=e._texture.orig,a=t.set(i.width,0,0,i.height,r.x,r.y),s=e.worldTransform.copyTo(ut.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/o.width,1/o.height),a.translate(e.anchor.x,e.anchor.y),a},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,n,r){return void 0===n&&(n=1),void 0===r&&(r=i.l.NONE),this.texturePool.getOptimalTexture(t,e,n,r)},t.prototype.getFilterTexture=function(t,e,n){if("number"==typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,n||i.l.NONE);return o.filterFrame=t.filterFrame,o},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(t,e){var n=ie[0],r=ie[1],i=ie[2],o=ie[3];n.set(e.left,e.top),r.set(e.left,e.bottom),i.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(n,n),t.apply(r,r),t.apply(i,i),t.apply(o,o);var a=Math.min(n.x,r.x,i.x,o.x),s=Math.min(n.y,r.y,i.y,o.y),u=Math.max(n.x,r.x,i.x,o.x),l=Math.max(n.y,r.y,i.y,o.y);e.x=a,e.y=s,e.width=u-a,e.height=l-s},t.prototype.roundFrame=function(t,e,n,r,i){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(i){var o=i.a,a=i.b,s=i.c,u=i.d;if((Math.abs(a)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}(i=i?oe.copyFrom(i):oe.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(i,t),t.ceil(e),this.transformAABB(i.invert(),t)}},t}(),se=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),ue=function(){function t(t){this.renderer=t,this.emptyRenderer=new se(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var n=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=n[r]||null,t[r]&&(t[r]._batchLocation=r)},t.prototype.boundArray=function(t,e,n,r){for(var i=t.elements,o=t.ids,a=t.count,s=0,u=0;u<a;u++){var l=i[u],c=l._batchLocation;if(c>=0&&c<r&&e[c]===l)o[u]=c;else for(;s<r;){var h=e[s];if(!h||h._batchEnabled!==n||h._batchLocation!==s){o[u]=s,l._batchLocation=s,e[s]=l;break}s++}}},t.prototype.destroy=function(){this.renderer=null},t}(),le=0,ce=function(){function t(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=le++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=le++,this.renderer.runners.contextChange.emit(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var n;if(r.b.PREFER_ENV>=i.g.WEBGL2&&(n=t.getContext("webgl2",e)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){var e=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),he=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=i.l.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},de=new at,fe=function(){function t(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Ft(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new at,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;r.b.PREFER_ENV===i.g.WEBGL_LEGACY&&(e=null,n=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},t.prototype.bind=function(t,e,n){void 0===n&&(n=0);var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,i.mipLevel=n),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,i.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var s=e.width>>n,u=e.height>>n,l=s/e.width;this.setViewport(e.x*l,e.y*l,s,u)}else s=t.width>>n,u=t.height>>n,this.setViewport(0,0,s,u)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,n,r){var i=this.viewport;t=Math.round(t),e=Math.round(e),n=Math.round(n),r=Math.round(r),i.width===n&&i.height===r&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=n,i.height=r,this.gl.viewport(t,e,n,r))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(t,e,n,r,o){void 0===o&&(o=i.c.COLOR|i.c.DEPTH);var a=this.gl;a.clearColor(t,e,n,r),a.clear(o)},t.prototype.initFramebuffer=function(t){var e=this.gl,n=new he(e.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,n.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.RGBA8,t.width,t.height)),n.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),n.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var r=t.colorTextures,i=r.length;e.drawBuffers||(i=Math.min(i,1));for(var o=0;o<i;o++){var a=r[o],s=a.parentTextureArray||a;this.renderer.texture.bind(s,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t,e){var n=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures,o=i.length;n.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?(r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.RGBA8,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var a=[],s=0;s<o;s++){var u=i[s],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),0===s&&r.msaaBuffer||(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+s,u.target,l._glTextures[this.CONTEXT_UID].texture,e),a.push(n.COLOR_ATTACHMENT0+s))}if(a.length>1&&n.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){var c=t.depthTexture;this.renderer.texture.bind(c,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r.stencil))},t.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},t.prototype.detectSamples=function(t){var e=this.msaaSamples,n=i.l.NONE;if(t<=1||null===e)return n;for(var r=0;r<e.length;r++)if(e[r]<=t){n=e[r];break}return 1===n&&(n=i.l.NONE),n},t.prototype.blit=function(t,e,n){var r=this.current,i=this.renderer,o=this.gl,a=this.CONTEXT_UID;if(2===i.context.webGLVersion&&r){var s=r.glFramebuffers[a];if(s){if(!t){if(!s.msaaBuffer)return;var u=r.colorTextures[0];if(!u)return;s.blitFramebuffer||(s.blitFramebuffer=new Ft(r.width,r.height),s.blitFramebuffer.addColorTexture(0,u)),(t=s.blitFramebuffer).colorTextures[0]!==u&&(t.colorTextures[0]=u,t.dirtyId++,t.dirtyFormat++),t.width===r.width&&t.height===r.height||(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}e||((e=de).width=r.width,e.height=r.height),n||(n=e);var l=e.width===n.width&&e.height===n.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,s.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},t.prototype.disposeFramebuffer=function(t,e){var n=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<e.length;n++)this.disposeFramebuffer(e[n],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var n=t.width,r=t.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),e.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,e.multisample,i.DEPTH24_STENCIL8,n,r):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),e.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new at},t.prototype.destroy=function(){this.renderer=null},t}(),pe={5126:4,5123:2,5121:1},ve=function(){function t(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;r.b.PREFER_ENV===i.g.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(t){return n.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return n.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var o=t.getExtension("ANGLE_instanced_arrays");o?(t.vertexAttribDivisor=function(t,e){return o.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,n,r,i){return o.drawElementsInstancedANGLE(t,e,n,r,i)},t.drawArraysInstanced=function(t,e,n,r){return o.drawArraysInstancedANGLE(t,e,n,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var n=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var o=r[e.program.id]||this.initGeometryVao(t,e,i);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,n=0;n<t.buffers.length;n++){var r=t.buffers[n];e.update(r)}},t.prototype.checkCompatibility=function(t,e){var n=t.attributes,r=e.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},t.prototype.getSignature=function(t,e){var n=t.attributes,r=e.attributeData,i=["g",t.id];for(var o in n)r[o]&&i.push(o,r[o].location);return i.join("-")},t.prototype.initGeometryVao=function(t,e,n){void 0===n&&(n=!0);var r=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[i]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);var s=this.getSignature(t,a),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[s];if(l)return u[a.id]=l,l;var c=t.buffers,h=t.attributes,d={},f={};for(var p in c)d[p]=0,f[p]=0;for(var p in h)!h[p].size&&a.attributeData[p]?h[p].size=a.attributeData[p].size:h[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[h[p].buffer]+=h[p].size*pe[h[p].type];for(var p in h){var v=h[p],m=v.size;void 0===v.stride&&(d[v.buffer]===m*pe[v.type]?v.stride=0:v.stride=d[v.buffer]),void 0===v.start&&(v.start=f[v.buffer],f[v.buffer]+=m*pe[v.type])}l=r.createVertexArray(),r.bindVertexArray(l);for(var g=0;g<c.length;g++){var y=c[g];o.bind(y),n&&y._glBuffers[i].refCount++}return this.activateVao(t,a),this._activeVao=l,u[a.id]=l,u[s]=l,l},t.prototype.disposeGeometry=function(t,e){var n;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,o=t.buffers,a=null===(n=this.renderer)||void 0===n?void 0:n.buffer;if(t.disposeRunner.remove(this),r){if(a)for(var s=0;s<o.length;s++){var u=o[s]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,0!==u.refCount||e||a.dispose(o[s],e))}if(!e)for(var l in r)if("g"===l[0]){var c=r[l];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),n=0;n<e.length;n++)this.disposeGeometry(this.managedGeometries[e[n]],t)},t.prototype.activateVao=function(t,e){var n=this.gl,r=this.CONTEXT_UID,i=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&i.bind(t.indexBuffer);var s=null;for(var u in a){var l=a[u],c=o[l.buffer],h=c._glBuffers[r];if(e.attributeData[u]){s!==h&&(i.bind(c),s=h);var d=e.attributeData[u].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,l.size,l.type||n.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(d,1)}}}},t.prototype.draw=function(t,e,n,r){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,s=2===a?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(t,e||o.indexBuffer.data.length,s,(n||0)*a,r||1):i.drawElements(t,e||o.indexBuffer.data.length,s,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(t,n,e||o.getSize(),r||1):i.drawArrays(t,n,e||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),me=function(){function t(t){void 0===t&&(t=null),this.type=i.j.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=r.b.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=i.j.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function ge(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function ye(t,e){var n=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),r=t.getShaderInfoLog(e),i=r.split("\n"),o={},a=i.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||o[t])&&(o[t]=!0,!0)})),s=[""];a.forEach((function(t){n[t-1]="%c"+n[t-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var u=n.join("\n");s[0]=u,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function _e(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e}function xe(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return _e(2*e);case"bvec3":return _e(3*e);case"bvec4":return _e(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var be,Te={},we=Te;function Ee(t,e,n){if("precision"!==t.substring(0,9)){var r=e;return e===i.m.HIGH&&n!==i.m.HIGH&&(r=i.m.MEDIUM),"precision "+r+" float;\n"+t}return n!==i.m.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var Se={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Ae(t){return Se[t]}var Me=null,Re={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Ce(t,e){if(!Me){var n=Object.keys(Re);Me={};for(var r=0;r<n.length;++r){var i=n[r];Me[t[i]]=Re[i]}}return Me[e]}var Pe,Ie=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Oe={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},ke={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Ne=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Le(t){for(var e="",n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}var De=0,Fe={},Be=function(){function t(e,n,o){void 0===o&&(o="pixi-shader"),this.id=De++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(o=o.replace(/\s+/g,"-"),Fe[o]?(Fe[o]++,o+="-"+Fe[o]):Fe[o]=1,this.vertexSrc="#define SHADER_NAME "+o+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+o+"\n"+this.fragmentSrc,this.vertexSrc=Ee(this.vertexSrc,r.b.PRECISION_VERTEX,i.m.HIGH),this.fragmentSrc=Ee(this.fragmentSrc,r.b.PRECISION_FRAGMENT,function(){if(!be){be=i.m.MEDIUM;var t=function(){if(we===Te||we&&we.isContextLost()){var t=document.createElement("canvas"),e=void 0;r.b.PREFER_ENV>=i.g.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),we=e}return we}();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);be=e.precision?i.m.HIGH:i.m.MEDIUM}}return be}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,n,r){var i=e+n,o=q[i];return o||(q[i]=o=new t(e,n,r)),o},t}(),Ue=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof ne?e:new ne(e):new ne({})}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var n in e.uniforms){var r=e.uniforms[n];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,n,r){return new t(Be.from(e,n),r)},t}(),Ge=function(){function t(){this.data=0,this.blendMode=i.b.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==i.b.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),je=function(t){function e(n,i,o){var a=this,s=Be.from(n||e.defaultVertexSrc,i||e.defaultFragmentSrc);return(a=t.call(this,s,o)||this).padding=0,a.resolution=r.b.FILTER_RESOLUTION,a.multisample=r.b.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new Ge,a}return xt(e,t),e.prototype.apply=function(t,e,n,r,i){t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Ue),He=new ut,ze=function(){function t(t,e){this._texture=t,this.mapCoord=new ut,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,r=0;r<t.length;r+=2){var i=t[r],o=t[r+1];e[r]=i*n.a+o*n.c+n.tx,e[r+1]=i*n.b+o*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=e.orig,i=e.trim;i&&(He.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(He));var o=e.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+s+u)/o.width,a[1]=(e._frame.y+s+u)/o.height,a[2]=(e._frame.x+e._frame.width-s+u)/o.width,a[3]=(e._frame.y+e._frame.height-s+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),Ve=function(t){function e(e,n,r){var i=this,o=null;return"string"!=typeof e&&void 0===n&&void 0===r&&(o=e,e=void 0,n=void 0,r=void 0),(i=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",n||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=o,i.maskMatrix=new ut,i}return xt(e,t),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,n,r){var i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new ze(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,n,r))},e}(je),We=function(){function t(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){var n=e;if(!n.isMaskData){var r=this.maskDataPool.pop()||new me;r.pooled=!0,r.maskObject=e,n=r}var o=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(o),n.autoDetect&&this.detect(n),n._target=t,n.type!==i.j.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case i.j.SCISSOR:this.renderer.scissor.push(n);break;case i.j.STENCIL:this.renderer.stencil.push(n);break;case i.j.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n)}n.type===i.j.SPRITE&&this.maskStack.push(n)},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case i.j.SCISSOR:this.renderer.scissor.pop();break;case i.j.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case i.j.SPRITE:this.popSpriteMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){var n=this.maskStack[this.maskStack.length-1];n.type===i.j.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},t.prototype.detect=function(t){t.maskObject.isSprite?t.type=i.j.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=i.j.SCISSOR:t.type=i.j.STENCIL},t.prototype.pushSpriteMask=function(t){var e,n,r=t.maskObject,i=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new Ve]);var a,s,u=this.renderer,l=u.renderTexture;if(l.current){var c=l.current;a=t.resolution||c.resolution,s=null!==(e=t.multisample)&&void 0!==e?e:c.multisample}else a=t.resolution||u.resolution,s=null!==(n=t.multisample)&&void 0!==n?n:u.multisample;o[0].resolution=a,o[0].multisample=s,o[0].maskSprite=r;var h=i.filterArea;i.filterArea=r.getBounds(!0),u.filter.push(i,o),i.filterArea=h,t._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.destroy=function(){this.renderer=null},t}(),Xe=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==n&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Ye=new ut,qe=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return xt(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){if(!t._scissorRectLocal){var e=t._scissorRect,n=t.maskObject,r=this.renderer,i=r.renderTexture;n.renderable=!0;var o=n.getBounds();this.roundFrameToPixels(o,i.current?i.current.resolution:r.resolution,i.sourceFrame,i.destinationFrame,r.projection.transform),n.renderable=!1,e&&o.fit(e),t._scissorRectLocal=o}},e.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,n=t.b,r=t.c,i=t.d;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)},e.prototype.testScissor=function(t){var n=t.maskObject;if(!n.isFastRect||!n.isFastRect())return!1;if(e.isMatrixRotated(n.worldTransform))return!1;if(e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var r=t._scissorRectLocal;return r.width>0&&r.height>0},e.prototype.roundFrameToPixels=function(t,n,r,i,o){e.isMatrixRotated(o)||((o=o?Ye.copyFrom(o):Ye.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(o,t),t.fit(i),t.x=Math.round(t.x*n),t.y=Math.round(t.y*n),t.width=Math.round(t.width*n),t.height=Math.round(t.height*n))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,e=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)},e}(Xe),Ze=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return xt(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,n=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?e.disable(e.STENCIL_TEST):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(Xe),Qe=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ut,this.transform=null}return t.prototype.update=function(t,e,n,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,n,r){var i=this.projectionMatrix,o=r?-1:1;i.identity(),i.a=1/e.width*2,i.d=o*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-o-e.y*i.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),Ke=new at,Je=new at,$e=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new at,this.destinationFrame=new at,this.viewportFrame=new at}return t.prototype.bind=function(t,e,n){void 0===t&&(t=null);var r,i,o,a=this.renderer;this.current=t,t?(o=(r=t.baseTexture).resolution,e||(Ke.width=t.frame.width,Ke.height=t.frame.height,e=Ke),n||(Je.x=t.frame.x,Je.y=t.frame.y,Je.width=e.width,Je.height=e.height,n=Je),i=r.framebuffer):(o=a.resolution,e||(Ke.width=a.screen.width,Ke.height=a.screen.height,e=Ke),n||((n=Ke).width=e.width,n.height=e.height));var s=this.viewportFrame;s.x=n.x*o,s.y=n.y*o,s.width=n.width*o,s.height=n.height*o,t||(s.y=a.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(i,s),this.renderer.projection.update(n,e,o,!i),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var n=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,i=n.width!==r.width||n.height!==r.height;if(i){var o=this.viewportFrame,a=o.x,s=o.y,u=o.width,l=o.height;a=Math.round(a),s=Math.round(s),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,s,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),i&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function tn(t,e,n,r,i){n.buffer.update(i)}var en={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},nn={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};var rn=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();var on=0,an={textureCount:0,uboCount:0},sn=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=on++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Pe)return Pe;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Pe=!0===t({a:"b"},"a","b")}catch(t){Pe=!1}return Pe}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),e||(an.textureCount=0,an.uboCount=0,this.syncUniformGroup(t.uniformGroup,an)),r},t.prototype.setUniforms=function(t){var e=this.shader.program,n=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(n.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var n=this.getGlProgram();t.static&&t.dirtyId===n.uniformDirtyGroups[t.id]||(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,e))},t.prototype.syncUniforms=function(t,e,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var n,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var i in t.uniforms){var o=e[i];if(o){for(var a=t.uniforms[i],s=!1,u=0;u<Ie.length;u++)if(Ie[u].test(o,a)){r.push(Ie[u].code(i,a)),s=!0;break}if(!s){var l=(1===o.size?Oe:ke)[o.type].replace("location",'ud["'+i+'"].location');r.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+l+";")}}else(null===(n=t.uniforms[i])||void 0===n?void 0:n.group)&&(t.uniforms[i].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var n=this.getGlProgram();if(!t.static||0!==t.dirtyId||!n.uniformGroups[t.id]){t.dirtyId=0;var r=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,e);t.buffer.update(),r(n.uniformData,t.uniforms,this.renderer,an,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,n){var r=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var i=this.gl.getUniformBlockIndex(e.program,n);e.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=function(t,e){if(!t.autoManage)return{size:0,syncFunc:tn};for(var n=function(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),n=0,r=0,i=0,o=0;o<e.length;o++){var a=e[o];if(n=nn[a.data.type],a.data.size>1&&(n=Math.max(n,16)*a.data.size),a.dataLen=n,r%n!=0&&r<16){var s=r%n%16;r+=s,i+=s}r+n>16?(i=16*Math.ceil(i/16),a.offset=i,i+=n,r=n):(a.offset=i,r+=n,i+=n)}return{uboElements:e,size:i=16*Math.ceil(i/16)}}(function(t,e){var n=[];for(var r in t)e[r]&&n.push(e[r]);return n.sort((function(t,e){return t.index-e.index})),n}(t.uniforms,e)),r=n.uboElements,i=n.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],a=0;a<r.length;a++){for(var s=r[a],u=t.uniforms[s.data.name],l=s.data.name,c=!1,h=0;h<Ie.length;h++){var d=Ie[h];if(d.codeUbo&&d.test(s.data,u)){o.push("offset = "+s.offset/4+";",Ie[h].codeUbo(s.data.name,u)),c=!0;break}}if(!c)if(s.data.size>1){var f=Ae(s.data.type),p=Math.max(nn[s.data.type]/16,1),v=f/p,m=(4-v%4)%4;o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+s.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+s.data.size*p+"; i++)\n                {\n                    for(var j = 0; j < "+v+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+m+";\n                }\n\n                ")}else{var g=en[s.data.type];o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+s.offset/4+";\n                "+g+";\n                ")}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}(t,this.shader.program.uniformData)),t.autoManage){var s=new Float32Array(a.size/4);t.buffer.update(s)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,n){var r=t.uniforms,i=[n+"-"];for(var o in r)i.push(o),e[o]&&i.push(e[o].type);return i.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,n=t.program,r=function(t,e){var n=ge(t,t.VERTEX_SHADER,e.vertexSrc),r=ge(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||function(t,e,n,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||ye(t,n),t.getShaderParameter(r,t.COMPILE_STATUS)||ye(t,r),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,i,n,r),e.attributeData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i);if(0!==o.name.indexOf("gl_")){var a=Ce(e,o.type),s={type:a,name:o.name,size:Ae(a),location:e.getAttribLocation(t,o.name)};n[o.name]=s}}return n}(i,t),e.uniformData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=e.getActiveUniform(t,i),a=o.name.replace(/\[.*?\]$/,""),s=!!o.name.match(/\[.*?\]$/),u=Ce(e,o.type);n[a]={name:a,index:i,type:u,size:o.size,isArray:s,value:xe(u,o.size)}}return n}(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort((function(t,e){return t>e?1:-1}));for(var a=0;a<o.length;a++)e.attributeData[o[a]].location=a,t.bindAttribLocation(i,a,o[a]);t.linkProgram(i)}t.deleteShader(n),t.deleteShader(r);var s={};for(var a in e.uniformData){var u=e.uniformData[a];s[a]={location:t.getUniformLocation(i,a),value:xe(u.type,u.size)}}return new rn(i,s)}(e,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}(),un=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=i.b.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Ge,this.defaultState.blend=!0}return t.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[i.b.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.ADD]=[t.ONE,t.ONE],e[i.b.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.NONE]=[0,0],e[i.b.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[i.b.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[i.b.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[i.b.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[i.b.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[i.b.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[i.b.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[i.b.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[i.b.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[i.b.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,n=0;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,t)},t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],n=this.gl;2===e.length?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(t,e){var n=this.checks.indexOf(t);e&&-1===n?this.checks.push(t):e||-1===n||this.checks.splice(n,1)},t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),ln=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=r.b.GC_MAX_IDLE,this.checkCountMax=r.b.GC_MAX_CHECK_COUNT,this.mode=r.b.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==i.i.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,n=!1,r=0;r<e.length;r++){var i=e[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){var o=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[o++]=e[r]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t.prototype.destroy=function(){this.renderer=null},t}(),cn=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=i.r.UNSIGNED_BYTE,this.internalFormat=i.h.RGBA,this.samplerType=0},hn=function(){function t(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new St,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){var e,n,r,o,a,s,u,l,c,h,d,f,p,v,m,g,y,_,x,b,T,w,E;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?((e={})[i.r.UNSIGNED_BYTE]=((n={})[i.h.RGBA]=t.RGBA8,n[i.h.RGB]=t.RGB8,n[i.h.RG]=t.RG8,n[i.h.RED]=t.R8,n[i.h.RGBA_INTEGER]=t.RGBA8UI,n[i.h.RGB_INTEGER]=t.RGB8UI,n[i.h.RG_INTEGER]=t.RG8UI,n[i.h.RED_INTEGER]=t.R8UI,n[i.h.ALPHA]=t.ALPHA,n[i.h.LUMINANCE]=t.LUMINANCE,n[i.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,n),e[i.r.BYTE]=((r={})[i.h.RGBA]=t.RGBA8_SNORM,r[i.h.RGB]=t.RGB8_SNORM,r[i.h.RG]=t.RG8_SNORM,r[i.h.RED]=t.R8_SNORM,r[i.h.RGBA_INTEGER]=t.RGBA8I,r[i.h.RGB_INTEGER]=t.RGB8I,r[i.h.RG_INTEGER]=t.RG8I,r[i.h.RED_INTEGER]=t.R8I,r),e[i.r.UNSIGNED_SHORT]=((o={})[i.h.RGBA_INTEGER]=t.RGBA16UI,o[i.h.RGB_INTEGER]=t.RGB16UI,o[i.h.RG_INTEGER]=t.RG16UI,o[i.h.RED_INTEGER]=t.R16UI,o[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,o),e[i.r.SHORT]=((a={})[i.h.RGBA_INTEGER]=t.RGBA16I,a[i.h.RGB_INTEGER]=t.RGB16I,a[i.h.RG_INTEGER]=t.RG16I,a[i.h.RED_INTEGER]=t.R16I,a),e[i.r.UNSIGNED_INT]=((s={})[i.h.RGBA_INTEGER]=t.RGBA32UI,s[i.h.RGB_INTEGER]=t.RGB32UI,s[i.h.RG_INTEGER]=t.RG32UI,s[i.h.RED_INTEGER]=t.R32UI,s[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,s),e[i.r.INT]=((u={})[i.h.RGBA_INTEGER]=t.RGBA32I,u[i.h.RGB_INTEGER]=t.RGB32I,u[i.h.RG_INTEGER]=t.RG32I,u[i.h.RED_INTEGER]=t.R32I,u),e[i.r.FLOAT]=((l={})[i.h.RGBA]=t.RGBA32F,l[i.h.RGB]=t.RGB32F,l[i.h.RG]=t.RG32F,l[i.h.RED]=t.R32F,l[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,l),e[i.r.HALF_FLOAT]=((c={})[i.h.RGBA]=t.RGBA16F,c[i.h.RGB]=t.RGB16F,c[i.h.RG]=t.RG16F,c[i.h.RED]=t.R16F,c),e[i.r.UNSIGNED_SHORT_5_6_5]=((h={})[i.h.RGB]=t.RGB565,h),e[i.r.UNSIGNED_SHORT_4_4_4_4]=((d={})[i.h.RGBA]=t.RGBA4,d),e[i.r.UNSIGNED_SHORT_5_5_5_1]=((f={})[i.h.RGBA]=t.RGB5_A1,f),e[i.r.UNSIGNED_INT_2_10_10_10_REV]=((p={})[i.h.RGBA]=t.RGB10_A2,p[i.h.RGBA_INTEGER]=t.RGB10_A2UI,p),e[i.r.UNSIGNED_INT_10F_11F_11F_REV]=((v={})[i.h.RGB]=t.R11F_G11F_B10F,v),e[i.r.UNSIGNED_INT_5_9_9_9_REV]=((m={})[i.h.RGB]=t.RGB9_E5,m),e[i.r.UNSIGNED_INT_24_8]=((g={})[i.h.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,g),e[i.r.FLOAT_32_UNSIGNED_INT_24_8_REV]=((y={})[i.h.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,y),E=e):((_={})[i.r.UNSIGNED_BYTE]=((x={})[i.h.RGBA]=t.RGBA,x[i.h.RGB]=t.RGB,x[i.h.ALPHA]=t.ALPHA,x[i.h.LUMINANCE]=t.LUMINANCE,x[i.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,x),_[i.r.UNSIGNED_SHORT_5_6_5]=((b={})[i.h.RGB]=t.RGB,b),_[i.r.UNSIGNED_SHORT_4_4_4_4]=((T={})[i.h.RGBA]=t.RGBA,T),_[i.r.UNSIGNED_SHORT_5_5_5_1]=((w={})[i.h.RGBA]=t.RGBA,w),E=_),E}(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new cn(t.createTexture());for(t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new cn(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture),n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);for(t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR),n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var n=this.gl;if((t=null==t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),n[r]=null)},t.prototype.ensureSamplerType=function(t){var e=this.boundTextures,n=this.hasIntegerTextures,r=this.CONTEXT_UID;if(n)for(var o=t-1;o>=0;--o){var a=e[o];a&&a._glTextures[r].samplerType!==i.o.FLOAT&&this.renderer.texture.unbind(a)}},t.prototype.initTexture=function(t){var e=new cn(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var n,r;e.internalFormat=null!==(r=null===(n=this.internalFormats[t.type])||void 0===n?void 0:n[t.format])&&void 0!==r?r:t.format,2===this.webGLVersion&&t.type===i.r.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var n=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(n,t,e))e.samplerType!==i.o.FLOAT&&(this.hasIntegerTextures=!0);else{var r=t.realWidth,o=t.realHeight,a=n.gl;(e.width!==r||e.height!==o||e.dirtyId<0)&&(e.width=r,e.height=o,a.texImage2D(t.target,0,e.internalFormat,r,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var n=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&function(t,e,n){var r,i=t.length;if(!(e>=i||0===n)){var o=i-(n=e+n>i?i-e:n);for(r=e;r<o;++r)t[r]=t[r+n];t.length=o}}(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==i.k.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=i.s.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var n=this.gl;if(e.mipmap&&t.mipmap!==i.k.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===i.p.LINEAR){var o=Math.min(t.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR:n.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),dn={__proto__:null,FilterSystem:ae,BatchSystem:ue,ContextSystem:ce,FramebufferSystem:fe,GeometrySystem:ve,MaskSystem:We,ScissorSystem:qe,StencilSystem:Ze,ProjectionSystem:Qe,RenderTextureSystem:$e,ShaderSystem:sn,StateSystem:un,TextureGCSystem:ln,TextureSystem:hn},fn=new ut,pn=function(t){function e(e,n){void 0===e&&(e=i.n.UNKNOWN);var o=t.call(this)||this;return n=Object.assign({},r.b.RENDER_OPTIONS,n),o.options=n,o.type=e,o.screen=new at(0,0,n.width,n.height),o.view=n.view||document.createElement("canvas"),o.resolution=n.resolution||r.b.RESOLUTION,o.useContextAlpha=n.useContextAlpha,o.autoDensity=!!n.autoDensity,o.preserveDrawingBuffer=n.preserveDrawingBuffer,o.clearBeforeRender=n.clearBeforeRender,o._backgroundColor=0,o._backgroundColorRgba=[0,0,0,1],o._backgroundColorString="#000000",o.backgroundColor=n.backgroundColor||o._backgroundColor,o.backgroundAlpha=n.backgroundAlpha,void 0!==n.transparent&&(X("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),o.useContextAlpha=n.transparent,o.backgroundAlpha=n.transparent?0:1),o._lastObjectRendered=null,o.plugins={},o}return xt(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var n=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=r+"px"),this.emit("resize",n,r)},e.prototype.generateTexture=function(t,e,n,r){void 0===e&&(e={}),"number"==typeof e&&(X("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:n,region:r});var i=e.region,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}(e,["region"]);0===(r=i||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var a=zt.create(bt({width:r.width,height:r.height},o));return fn.tx=-r.x,fn.ty=-r.y,this.render(t,{renderTexture:a,clear:!1,transform:fn,skipUpdateTransform:!!t.parent}),a},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=i.n.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=t.toString(16),"#"+(e="000000".substring(0,6-e.length)+e)),function(t,e){void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(c),vn=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},mn=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,n=this.CONTEXT_UID,r=t._glBuffers[n]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)},t.prototype.bindBufferBase=function(t,e){var n=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var i=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,i.buffer)}},t.prototype.bindBufferRange=function(t,e,n){var r=this.gl,i=this.CONTEXT_UID;n=n||0;var o=t._glBuffers[i]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,o.buffer,256*n,256)},t.prototype.update=function(t){var e=this.gl,n=this.CONTEXT_UID,r=t._glBuffers[n];if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var i=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,i)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),n&&(e||r.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),n=0;n<e.length;n++)this.dispose(this.managedBuffers[e[n]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,n=this.gl;return t._glBuffers[e]=new vn(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}();!function(t){function e(n){var r=t.call(this,i.n.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new $("destroy"),contextChange:new $("contextChange"),reset:new $("reset"),update:new $("update"),postrender:new $("postrender"),prerender:new $("prerender"),resize:new $("resize")},r.runners.contextChange.add(r),r.globalUniforms=new ne({projectionMatrix:new ut},!0),r.addSystem(We,"mask").addSystem(ce,"context").addSystem(un,"state").addSystem(sn,"shader").addSystem(hn,"texture").addSystem(mn,"buffer").addSystem(ve,"geometry").addSystem(fe,"framebuffer").addSystem(qe,"scissor").addSystem(Ze,"stencil").addSystem(Qe,"projection").addSystem(ln,"textureGC").addSystem(ae,"filter").addSystem($e,"renderTexture").addSystem(ue,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:n.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,function(t){var e;if(!F){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=["\n %c %c %c PixiJS 6.4.2 - \u2730 "+t+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,n)}else globalThis.console&&globalThis.console.log("PixiJS 6.4.2 - "+t+" - http://www.pixijs.com/");F=!0}}(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}xt(e,t),e.create=function(t){if(void 0===D&&(D=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!(!n||!n.getContextAttributes().stencil);if(n){var o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,i}catch(t){return!1}}()),D)return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,e=this.gl;if(1===this.context.webGLVersion){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n);t>=i.l.HIGH?this.multisample=i.l.HIGH:t>=i.l.MEDIUM?this.multisample=i.l.MEDIUM:t>=i.l.LOW?this.multisample=i.l.LOW:this.multisample=i.l.NONE},e.prototype.addSystem=function(t,e){var n=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=n,this.runners)this.runners[r].add(n);return this},e.prototype.render=function(t,e){var n,r,i,o;if(e&&(e instanceof zt?(X("6.0.0","Renderer#render arguments changed, use options instead."),n=e,r=arguments[2],i=arguments[3],o=arguments[4]):(n=e.renderTexture,r=e.clear,i=e.transform,o=e.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(n||(this._lastObjectRendered=t),!o){var a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(e,n,r,i){void 0===n&&(n={});var o=t.prototype.generateTexture.call(this,e,n,r,i);return this.framebuffer.blit(),o},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return X("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,n){e.__plugins=e.__plugins||{},e.__plugins[t]=n}}(pn);var gn=function(){this.texArray=null,this.blend=0,this.type=i.f.TRIANGLES,this.start=0,this.size=0,this.data=null},yn=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),_n=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),xn=function(t){function e(e){var n=t.call(this,e)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Ge.for2d(),n.size=4*r.b.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),e.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return xt(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;r.b.PREFER_ENV===i.g.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=e.createShader(e.FRAGMENT_SHADER);;){var r=Ne.replace(/%forloop%/gi,Le(t));if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,n=e._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new gn);for(;n.length<i;)n.push(new yn);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,n=this.MAX_TEXTURES,r=e._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count,s=++St._globalBatch,u=0,l=r[0],c=0;i.copyBoundTextures(o,n);for(var h=0;h<this._bufferSize;++h){var d=t[h];t[h]=null,d._batchEnabled!==s&&(l.count>=n&&(i.boundArray(l,o,s,n),this.buildDrawCalls(l,c,h),c=h,l=r[++u],++s),d._batchEnabled=s,d.touched=a,l.elements[l.count++]=d)}for(l.count>0&&(i.boundArray(l,o,s,n),this.buildDrawCalls(l,c,this._bufferSize),++u,++s),h=0;h<o.length;h++)o[h]=null;St._globalBatch=s},e.prototype.buildDrawCalls=function(t,n,r){var i=this._bufferedElements,o=this._attributeBuffer,a=this._indexBuffer,s=this.vertexSize,u=e._drawCallPool,l=this._dcIndex,c=this._aIndex,h=this._iIndex,d=u[l];d.start=this._iIndex,d.texArray=t;for(var f=n;f<r;++f){var p=i[f],v=p._texture.baseTexture,m=B[v.alphaMode?1:0][p.blendMode];i[f]=null,n<f&&d.blend!==m&&(d.size=h-d.start,n=f,(d=u[++l]).texArray=t,d.start=h),this.packInterleavedGeometry(p,o,a,c,h),c+=p.vertexData.length/2*s,h+=p.indices.length,d.blend=m}n<r&&(d.size=h-d.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=h},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,n=this._indexBuffer;r.b.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,r=n.gl,i=n.state,o=e._drawCallPool,a=null,s=0;s<t;s++){var u=o[s],l=u.texArray,c=u.type,h=u.size,d=u.start,f=u.blend;a!==l&&(a=l,this.bindAndClearTexArray(l)),this.state.blendMode=f,i.set(this.state),r.drawElements(c,h,r.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),r.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=G(Math.ceil(t/8)),n=H(e),r=8*e;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new _n(r*this.vertexSize*4)),i},e.prototype.getIndexBuffer=function(t){var e=G(Math.ceil(t/12)),n=H(e),r=12*e;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i},e.prototype.packInterleavedGeometry=function(t,e,n,r,i){for(var o=e.uint32View,a=e.float32View,s=r/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,h=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),f=d<1&&t._texture.baseTexture.alphaMode?function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var n=t>>16&255,r=t>>8&255,i=255&t;return(255*e<<24)+((n=n*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(i*e+.5|0)}(t._tintRGB,d):t._tintRGB+(255*d<<24),p=0;p<c.length;p+=2)a[r++]=c[p],a[r++]=c[p+1],a[r++]=u[p],a[r++]=u[p+1],o[r++]=f,a[r++]=h;for(p=0;p<l.length;p++)n[i++]=s+l[p]},e._drawCallPool=[],e._textureArrayPool=[],e}(se),bn=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=ne.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Be(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new ut,default:this.defaultGroupCache[t]};return new Ue(this.programCache[t],i)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var n=0;n<t;n++)n>0&&(e+="\nelse "),n<t-1&&(e+="if(vTextureId < "+n+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return(e+="\n")+"\n"},t}(),Tn=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n._buffer=new Yt(null,e,!1),n._indexBuffer=new Yt(null,e,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,i.r.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,i.r.FLOAT).addAttribute("aColor",n._buffer,4,!0,i.r.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,i.r.FLOAT).addIndex(n._indexBuffer),n}return xt(e,t),e}(Jt),wn="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",En="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";(function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:wn,fragment:En,geometryClass:Tn,vertexSize:6},t),n=e.vertex,r=e.fragment,i=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var a=t.call(this,e)||this;return a.shaderGenerator=new bn(n,r),a.geometryClass=o,a.vertexSize=i,a}return xt(e,t),e}(xn)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return wn},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return En},enumerable:!1,configurable:!0}),t})().create();var Sn={},An=function(t){Object.defineProperty(Sn,t,{get:function(){return X("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),Lt[t]}})};for(var Mn in Lt)An(Mn);var Rn={},Cn=function(t){Object.defineProperty(Rn,t,{get:function(){return X("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),dn[t]}})};for(var Mn in dn)Cn(Mn);var Pn=function(){function t(t){this.renderer=t}return t.prototype.render=function(t){var e=this.renderer,n=t.worldTransform;e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),e.setContextTransform(n,t.roundPixels),t.drawMode!==i.f.TRIANGLES?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.geometry.buffers[0].data.length,n=0;n<e-2;n++){var r=2*n;this._renderDrawTriangle(t,r,r+2,r+4)}},t.prototype._renderTriangles=function(t){for(var e=t.geometry.getIndex().data,n=e.length,r=0;r<n;r+=3){var i=2*e[r],o=2*e[r+1],a=2*e[r+2];this._renderDrawTriangle(t,i,o,a)}},t.prototype._renderDrawTriangle=function(t,e,n,r){var i=this.renderer.context,a=t.geometry.buffers[0].data,s=t.uvs,u=t.texture;if(u.valid){var l=16777215!==t.tint,c=u.baseTexture,h=c.width,d=c.height;l&&t._cachedTint!==t.tint&&(t._cachedTint=t.tint,t._cachedTexture=t._cachedTexture||new Ht(c),t._tintedCanvas=o.b.getTintedCanvas({texture:t._cachedTexture},t.tint));var f=l?t._tintedCanvas:c.getDrawableSource(),p=s[e]*c.width,v=s[n]*c.width,m=s[r]*c.width,g=s[e+1]*c.height,y=s[n+1]*c.height,_=s[r+1]*c.height,x=a[e],b=a[n],T=a[r],w=a[e+1],E=a[n+1],S=a[r+1],A=t.canvasPadding/this.renderer.resolution;if(A>0){var M=t.worldTransform,R=M.a,C=M.b,P=M.c,I=M.d,O=(x+b+T)/3,k=(w+E+S)/3,N=x-O,L=w-k,D=R*N+P*L,F=C*N+I*L,B=Math.sqrt(D*D+F*F),U=1+A/B;x=O+N*U,w=k+L*U,D=R*(N=b-O)+P*(L=E-k),F=C*N+I*L,b=O+N*(U=1+A/(B=Math.sqrt(D*D+F*F))),E=k+L*U,D=R*(N=T-O)+P*(L=S-k),F=C*N+I*L,T=O+N*(U=1+A/(B=Math.sqrt(D*D+F*F))),S=k+L*U}i.save(),i.beginPath(),i.moveTo(x,w),i.lineTo(b,E),i.lineTo(T,S),i.closePath(),i.clip();var G=p*y+g*m+v*_-y*m-g*v-p*_,j=x*y+g*T+b*_-y*T-g*b-x*_,H=p*b+x*m+v*T-b*m-x*v-p*T,z=p*y*T+g*b*m+x*v*_-x*y*m-g*v*T-p*b*_,V=w*y+g*S+E*_-y*S-g*E-w*_,W=p*E+w*m+v*S-E*m-w*v-p*S,X=p*y*S+g*E*m+w*v*_-w*y*m-g*v*S-p*E*_;i.transform(j/G,V/G,H/G,W/G,z/G,X/G),i.drawImage(f,0,0,h*c.resolution,d*c.resolution,0,0,h,d),i.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,n=t.geometry.getBuffer("aVertexPosition").data,r=n.length/2;e.beginPath();for(var i=1;i<r-2;++i){var o=2*i,a=n[o],s=n[o+1],u=n[o+2],l=n[o+3],c=n[o+4],h=n[o+5];e.moveTo(a,s),e.lineTo(u,l),e.lineTo(c,h)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();r.b.MESH_CANVAS_PADDING=0,a.c.prototype._renderCanvas=function(t,e){t.plugins.mesh.render(e)},s.a.prototype._cachedTint=16777215,s.a.prototype._tintedCanvas=null,s.a.prototype._canvasUvs=null,s.a.prototype._renderCanvas=function(t){var e=t.context,n=this.worldTransform,r=16777215!==this.tint,i=this.texture;if(i.valid){r&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedCanvas=o.b.getTintedCanvas(this,this.tint));var a=r?this._tintedCanvas:i.baseTexture.getDrawableSource();this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var s=this.vertices,u=this._canvasUvs,l=r?0:i.frame.x,c=r?0:i.frame.y,h=l+i.frame.width,d=c+i.frame.height;u[0]=l,u[1]=l+this._leftWidth,u[2]=h-this._rightWidth,u[3]=h,u[4]=c,u[5]=c+this._topHeight,u[6]=d-this._bottomHeight,u[7]=d;for(var f=0;f<8;f++)u[f]*=i.baseTexture.resolution;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.setContextTransform(n,this.roundPixels);for(var p=0;p<3;p++)for(var v=0;v<3;v++){var m=2*v+8*p,g=Math.max(1,u[v+1]-u[v]),y=Math.max(1,u[p+5]-u[p+4]),_=Math.max(1,s[m+10]-s[m]),x=Math.max(1,s[m+11]-s[m+1]);e.drawImage(a,u[v],u[p+4],g,y,s[m],s[m+1],_,x)}}};var In=!1;a.a.prototype._cachedTint=16777215,a.a.prototype._tintedCanvas=null,a.a.prototype._cachedTexture=null,a.a.prototype._renderCanvas=function(t){this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.material._renderCanvas?this.material._renderCanvas(t,this):In||(In=!0,globalThis.console&&console.warn("Mesh with custom shaders are not supported in CanvasRenderer."))},a.a.prototype._canvasPadding=null,Object.defineProperty(a.a.prototype,"canvasPadding",{get:function(){return null!==this._canvasPadding?this._canvasPadding:r.b.MESH_CANVAS_PADDING},set:function(t){this._canvasPadding=t}}),s.b.prototype._renderCanvas=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(t,this)},s.c.prototype._renderCanvas=function(t){(this.autoUpdate||this.geometry._width!==this.shader.texture.height)&&(this.geometry._width=this.shader.texture.height,this.geometry.update()),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(t,this)}}).call(this,n(17))},function(t,e,n){"use strict";var r=n(139),i=n(140);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){return i.isString(t)&&(t=_(t)),t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),h=["%","/","?",";","#"].concat(c),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(141);function _(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",l=t.split(s);l[0]=l[0].replace(/\\/g,"/");var _=t=l.join(s);if(_=_.trim(),!n&&1===t.split("#").length){var x=u.exec(_);if(x)return this.path=_,this.href=_,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=a.exec(_);if(b){var T=(b=b[0]).toLowerCase();this.protocol=T,_=_.substr(b.length)}if(n||b||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===_.substr(0,2);!w||b&&m[b]||(_=_.substr(2),this.slashes=!0)}if(!m[b]&&(w||b&&!g[b])){for(var E,S,A=-1,M=0;M<d.length;M++)-1!==(R=_.indexOf(d[M]))&&(-1===A||R<A)&&(A=R);for(-1!==(S=-1===A?_.lastIndexOf("@"):_.lastIndexOf("@",A))&&(E=_.slice(0,S),_=_.slice(S+1),this.auth=decodeURIComponent(E)),A=-1,M=0;M<h.length;M++){var R;-1!==(R=_.indexOf(h[M]))&&(-1===A||R<A)&&(A=R)}-1===A&&(A=_.length),this.host=_.slice(0,A),_=_.slice(A),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var P=this.hostname.split(/\./),I=(M=0,P.length);M<I;M++){var O=P[M];if(O&&!O.match(f)){for(var k="",N=0,L=O.length;N<L;N++)O.charCodeAt(N)>127?k+="x":k+=O[N];if(!k.match(f)){var D=P.slice(0,M),F=P.slice(M+1),B=O.match(p);B&&(D.push(B[1]),F.unshift(B[2])),F.length&&(_="/"+F.join(".")+_),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+U,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!v[T])for(M=0,I=c.length;M<I;M++){var j=c[M];if(-1!==_.indexOf(j)){var H=encodeURIComponent(j);H===j&&(H=escape(j)),_=_.split(j).join(H)}}var z=_.indexOf("#");-1!==z&&(this.hash=_.substr(z),_=_.slice(0,z));var V=_.indexOf("?");if(-1!==V?(this.search=_.substr(V),this.query=_.substr(V+1),e&&(this.query=y.parse(this.query)),_=_.slice(0,V)):e&&(this.search="",this.query={}),_&&(this.pathname=_),g[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var W=this.search||"";this.path=U+W}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),l=0;l<u.length;l++){var c=u[l];"protocol"!==c&&(n[c]=t[c])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!g[t.protocol]){for(var h=Object.keys(t),d=0;d<h.length;d++){var f=h[d];n[f]=t[f]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||m[t.protocol])n.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var v=n.pathname||"",y=n.search||"";n.path=v+y}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),x=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=x||_||n.host&&t.pathname,T=b,w=n.pathname&&n.pathname.split("/")||[],E=(p=t.pathname&&t.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),b=b&&(""===p[0]||""===w[0])),x)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search))return E&&(n.hostname=n.host=w.shift(),(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift())),n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=w.slice(-1)[0],A=(n.host||t.host||w.length>1)&&("."===S||".."===S)||""===S,M=0,R=w.length;R>=0;R--)"."===(S=w[R])?w.splice(R,1):".."===S?(w.splice(R,1),M++):M&&(w.splice(R,1),M--);if(!b&&!T)for(;M--;M)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),A&&"/"!==w.join("/").substr(-1)&&w.push("");var C,P=""===w[0]||w[0]&&"/"===w[0].charAt(0);return E&&(n.hostname=n.host=P?"":w.length?w.shift():"",(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift())),(b=b||n.host&&w.length)&&!P&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(22)(n(14),"Map");t.exports=r},function(t,e,n){var r=n(183),i=n(60),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return o.call(t,e)})))}:i;t.exports=s},function(t,e,n){var r=n(61),i=n(190),o=n(65);t.exports=function(t){return o(t)?r(t):i(t)}},function(t,e,n){(function(t){var r=n(14),i=n(187),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u}).call(this,n(25)(t))},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(49),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,n(25)(t))},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(61),i=n(206),o=n(65);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e,n){var r=n(56);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){"use strict";var r=n(144);t.exports=function(t,e){e=e||{};var n=new r,i=e.inPlace||!1,o=t.map((function(t){return i?t:{width:t.width,height:t.height,item:t}}));o=o.sort((function(t,e){return e.width*e.height-t.width*t.height})),n.fit(o);var a={width:o.reduce((function(t,e){return Math.max(t,e.x+e.width)}),0),height:o.reduce((function(t,e){return Math.max(t,e.y+e.height)}),0)};return i||(a.items=o),a}},function(t,e,n){var r=n(21),i=n(196),o=n(197),a=Math.max,s=Math.min;t.exports=function(t,e,n){var u,l,c,h,d,f,p=0,v=!1,m=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=u,r=l;return u=l=void 0,p=e,h=t.apply(r,n)}function _(t){return p=t,d=setTimeout(b,e),v?y(t):h}function x(t){var n=t-f;return void 0===f||n>=e||n<0||m&&t-p>=c}function b(){var t=i();if(x(t))return T(t);d=setTimeout(b,function(t){var n=e-(t-f);return m?s(n,c-(t-p)):n}(t))}function T(t){return d=void 0,g&&u?y(t):(u=l=void 0,h)}function w(){var t=i(),n=x(t);if(u=arguments,l=this,f=t,n){if(void 0===d)return _(f);if(m)return clearTimeout(d),d=setTimeout(b,e),y(f)}return void 0===d&&(d=setTimeout(b,e)),h}return e=o(e)||0,r(n)&&(v=!!n.leading,c=(m="maxWait"in n)?a(o(n.maxWait)||0,e):c,g="trailing"in n?!!n.trailing:g),w.cancel=function(){void 0!==d&&clearTimeout(d),p=0,u=f=l=d=void 0},w.flush=function(){return void 0===d?h:T(i())},w}},function(t,e,n){var r=n(201);t.exports=function(t){return r(t,5)}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(17))},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),l.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},l.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},l.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},l.prototype.emit=function(t,e,n,r,o,a){var s=i?i+t:t;if(!this._events[s])return!1;var u,l,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,o),!0;case 6:return c.fn.call(c.context,e,n,r,o,a),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||u(this,o);else{for(var s=0,l=[],c=a.length;s<c;s++)(a[s].fn!==e||r&&!a[s].once||n&&a[s].context!==n)&&l.push(a[s]);l.length?this._events[o]=1===l.length?l[0]:l:u(this,o)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,t.exports=l},function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,o,s,u,l,c,f,p=e&&e.length,m=p?e[0]*n:t.length,g=i(t,0,m,n,!0),y=[];if(!g||g.next===g.prev)return y;if(p&&(g=function(t,e,n,r){var o,a,s,u=[];for(o=0,a=e.length;o<a;o++)(s=i(t,e[o]*r,o<a-1?e[o+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),u.push(v(s));for(u.sort(h),o=0;o<u.length;o++)n=d(u[o],n);return n}(t,e,g,n)),t.length>80*n){r=s=t[0],o=u=t[1];for(var _=n;_<m;_+=n)(l=t[_])<r&&(r=l),(c=t[_+1])<o&&(o=c),l>s&&(s=l),c>u&&(u=c);f=0!==(f=Math.max(s-r,u-o))?32767/f:0}return a(g,y,n,r,o,f,0),y}function i(t,e,n,r,i){var o,a;if(i===R(t,e,n,r)>0)for(o=e;o<n;o+=r)a=S(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=S(o,t[o],t[o+1],a);return a&&_(a,a.next)&&(A(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!_(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(A(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,h,d){if(t){!d&&h&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=p(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,h);for(var f,v,m=t;t.prev!==t.next;)if(f=t.prev,v=t.next,h?u(t,r,i,h):s(t))e.push(f.i/n|0),e.push(t.i/n|0),e.push(v.i/n|0),A(t),t=v.next,m=v.next;else if((t=v)===m){d?1===d?a(t=l(o(t),e,n),e,n,r,i,h,2):2===d&&c(t,e,n,r,i,h):a(o(t),e,n,r,i,h,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(y(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,a=r.x,s=e.y,u=n.y,l=r.y,c=i<o?i<a?i:a:o<a?o:a,h=s<u?s<l?s:l:u<l?u:l,d=i>o?i>a?i:a:o>a?o:a,f=s>u?s>l?s:l:u>l?u:l,p=r.next;p!==e;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&m(i,s,o,u,a,l,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,a=t.next;if(y(i,o,a)>=0)return!1;for(var s=i.x,u=o.x,l=a.x,c=i.y,h=o.y,d=a.y,f=s<u?s<l?s:l:u<l?u:l,v=c<h?c<d?c:d:h<d?h:d,g=s>u?s>l?s:l:u>l?u:l,_=c>h?c>d?c:d:h>d?h:d,x=p(f,v,e,n,r),b=p(g,_,e,n,r),T=t.prevZ,w=t.nextZ;T&&T.z>=x&&w&&w.z<=b;){if(T.x>=f&&T.x<=g&&T.y>=v&&T.y<=_&&T!==i&&T!==a&&m(s,c,u,h,l,d,T.x,T.y)&&y(T.prev,T,T.next)>=0)return!1;if(T=T.prevZ,w.x>=f&&w.x<=g&&w.y>=v&&w.y<=_&&w!==i&&w!==a&&m(s,c,u,h,l,d,w.x,w.y)&&y(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;T&&T.z>=x;){if(T.x>=f&&T.x<=g&&T.y>=v&&T.y<=_&&T!==i&&T!==a&&m(s,c,u,h,l,d,T.x,T.y)&&y(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;w&&w.z<=b;){if(w.x>=f&&w.x<=g&&w.y>=v&&w.y<=_&&w!==i&&w!==a&&m(s,c,u,h,l,d,w.x,w.y)&&y(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function l(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!_(i,a)&&x(i,r,r.next,a)&&w(i,a)&&w(a,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(a.i/n|0),A(r),A(r.next),r=t=a),r=r.next}while(r!==t);return o(r)}function c(t,e,n,r,i,s){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&g(u,l)){var c=E(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,e,n,r,i,s,0),void a(c,e,n,r,i,s,0)}l=l.next}u=u.next}while(u!==t)}function h(t,e){return t.x-e.x}function d(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var u,l=n,c=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&m(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),w(r,t)&&(u<d||u===d&&(r.x>n.x||r.x===n.x&&f(n,r)))&&(n=r,d=u)),r=r.next}while(r!==l);return n}(t,e);if(!n)return e;var r=E(n,t);return o(r,r.next),o(n,n.next)}function f(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function p(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function v(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function m(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&x(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(w(t,e)&&w(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||_(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function x(t,e,n,r){var i=T(y(t,e,n)),o=T(y(t,e,r)),a=T(y(n,r,t)),s=T(y(n,r,e));return i!==o&&a!==s||!(0!==i||!b(t,n,e))||!(0!==o||!b(t,r,e))||!(0!==a||!b(n,t,r))||!(0!==s||!b(n,e,r))}function b(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function T(t){return t>0?1:t<0?-1:0}function w(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function E(t,e){var n=new M(t.i,t.x,t.y),r=new M(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function S(t,e,n,r){var i=new M(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function M(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=r,t.exports.default=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(R(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(R(t,l,c,n))}var h=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,f=r[s+1]*n,p=r[s+2]*n;h+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},function(t,e,n){var r=n(26),i=n(153),o=n(154),a=n(155),s=n(156),u=n(157);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=u,t.exports=l},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(162),i=n(169),o=n(171),a=n(172),s=n(173);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(174),i=n(177),o=n(178);t.exports=function(t,e,n,a,s,u){var l=1&n,c=t.length,h=e.length;if(c!=h&&!(l&&h>c))return!1;var d=u.get(t),f=u.get(e);if(d&&f)return d==e&&f==t;var p=-1,v=!0,m=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++p<c;){var g=t[p],y=e[p];if(a)var _=l?a(y,g,p,e,t,u):a(g,y,p,t,e,u);if(void 0!==_){if(_)continue;v=!1;break}if(m){if(!i(e,(function(t,e){if(!o(m,e)&&(g===t||s(g,t,n,a,u)))return m.push(e)}))){v=!1;break}}else if(g!==y&&!s(g,y,n,a,u)){v=!1;break}}return u.delete(t),u.delete(e),v}},function(t,e,n){var r=n(14).Uint8Array;t.exports=r},function(t,e,n){var r=n(58),i=n(38),o=n(39);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(59),i=n(30);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(184),i=n(185),o=n(30),a=n(40),s=n(188),u=n(62),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),c=!n&&i(t),h=!n&&!c&&a(t),d=!n&&!c&&!h&&u(t),f=n||c||h||d,p=f?r(t.length,String):[],v=p.length;for(var m in t)!e&&!l.call(t,m)||f&&("length"==m||h&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,v))||p.push(m);return p}},function(t,e,n){var r=n(189),i=n(41),o=n(42),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(33),i=n(63);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(67),i=n(36),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(203);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(59),i=n(69),o=n(38),a=n(60),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=s},function(t,e,n){var r=n(64)(Object.getPrototypeOf,Object);t.exports=r},function(t,e){t.exports="varying vec2 vUv;\nvoid main() {\n\tvUv = uv;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * vec4(position, 1.0);\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform float lines[26];\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float direction;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat middleAlpha = 0.0;\n\tfloat endAlpha = 0.0;\n\tfloat headLength = 0.0;\n\tif (timePercent < 0.5) {\n\t\tmiddleAlpha = 1.0;\n\t\tendAlpha = 1.0 - (timePercent / 0.5);\n\t}\n\telse {\n\t\tmiddleAlpha = 1.0 - ((timePercent - 0.5) / 0.5);\n\t\tendAlpha = 0.0;\n\t}\n\tfor (int i = 0; i < 26; i++) {\n\t\tfloat halfDis = lines[i] / 2.0;\n\t\tfloat middle = headLength + halfDis;\n\t\theadLength += lines[i];\n\t\tif ((direction > 0.9) && (direction < 1.1)) {\n\t\t\tif (abs(vUv.y - middle) <= halfDis) {\n\t\t\t\tsrcColor.a = endAlpha + (((halfDis - abs(vUv.y - middle)) / halfDis) * (middleAlpha - endAlpha));\n\t\t\t\tgl_FragColor = blendSrcOver(srcColor, distColor);\n\t\t\t\treturn ;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (abs(vUv.x - middle) <= halfDis) {\n\t\t\t\tsrcColor.a = endAlpha + (((halfDis - abs(vUv.x - middle)) / halfDis) * (middleAlpha - endAlpha));\n\t\t\t\tgl_FragColor = blendSrcOver(srcColor, distColor);\n\t\t\t\treturn ;\n\t\t\t}\n\t\t}\n\t}\n\tgl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nvarying vec2 vUv;\nvec2 transform(vec2 uv) {\n\tuv.y = (uv.y * height) / width;\n\treturn uv - vec2(0.5, (0.5 * height) / width);\n}\nvoid main() {\n\tfloat maxR;\n\tfloat ringR;\n\tfloat radiusMin;\n\tfloat radiusMax;\n\tfloat dist;\n\tvec2 uv = vec2(vUv.x, vUv.y);\n\tmaxR = length(transform(vec2(1.0, 1.0)));\n\tringR = 1.0 / 6.0;\n\tradiusMin = timePercent * maxR;\n\tradiusMax = radiusMin + ringR;\n\tdist = length(transform(uv));\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tif (dist < radiusMin) {\n\t\tsrcColor.a = 0.0;\n\t}\n\telse if ((dist >= radiusMin) && (dist <= radiusMax)) {\n\t\tsrcColor.a = (dist - radiusMin) / ringR;\n\t}\n\telse {\n\t\tsrcColor.a = 1.0;\n\t}\n\tif (timePercent >= 1.0) {\n\t\tsrcColor.a = 0.0;\n\t}\n\telse if (timePercent == 0.0) {\n\t\tsrcColor.a = 1.0;\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nuniform int option;\nvarying vec2 vUv;\nvec2 transformTo(vec2 uv, vec2 origin) {\n\tuv.y = (uv.y * height) / width;\n\treturn uv - vec2(origin.x, (origin.y * height) / width);\n}\nvec2 offset(float progress[4], float band, float amp, float radius, vec2 centerPosition) {\n\tvec2 tc = vUv.xy;\n\tvec2 uv = vec2(0.0, 0.0);\n\tvec2 p;\n\tfloat len;\n\tvec2 uv_offset;\n\tfloat wave_width = band * radius;\n\tfor (int i = 0; i < 4; i += 1) {\n\t\tif (progress[i] == -1.0) {\n\t\t\tcontinue;\n\t\t}\n\t\tp = tc - centerPosition;\n\t\tp.x = (p.x * width) / height;\n\t\tlen = length(p);\n\t\tfloat current_progress = progress[i];\n\t\tfloat current_radius = radius * current_progress;\n\t\tfloat damp_factor = 1.0;\n\t\tif (current_progress > .5) {\n\t\t\tdamp_factor = (1.0 - current_progress) * 2.0;\n\t\t}\n\t\tfloat cut_factor = clamp((wave_width * damp_factor) - abs(current_radius - len), 0.0, 1.0);\n\t\tfloat waves_factor = (4.0 * len) / radius;\n\t\tuv_offset = (((p / len) * cos((waves_factor - (current_progress * 10.0)) * 3.14)) * amp) * cut_factor;\n\t\tuv += uv_offset;\n\t}\n\treturn uv;\n}\nvoid main() {\n\tfloat maxR;\n\tfloat ringR;\n\tfloat radiusMin;\n\tfloat radiusMax;\n\tfloat dist;\n\tfloat progress[4];\n\tvec2 uv = vUv.xy;\n\tvec2 uvOffset = vec2(0.0, 0.0);\n\tvec2 startPosition = vec2(0.5, 0.5);\n\tfloat redius = 2.0;\n\tif (option == 1) {\n\t\tstartPosition = vec2(0.0, 0.0);\n\t}\n\telse if (option == 2) {\n\t\tstartPosition = vec2(1.0, 0.0);\n\t}\n\telse if (option == 3) {\n\t\tstartPosition = vec2(1.0, 1.0);\n\t}\n\telse if (option == 4) {\n\t\tstartPosition = vec2(0.0, 1.0);\n\t}\n\tmaxR = length(transformTo(vec2(1.0, 1.0), vec2(0.0, 0.0)));\n\tif (option == 0) {\n\t\tmaxR = maxR / 2.0;\n\t\tredius = redius / 2.0;\n\t}\n\tdist = length(transformTo(uv, startPosition));\n\tringR = 1.0 / 6.0;\n\tradiusMin = timePercent * maxR;\n\tradiusMax = radiusMin + ringR;\n\tfor (int i = 0; i < 4; i++) {\n\t\tprogress[i] = timePercent + (0.1 * float(i));\n\t\tif (progress[i] < 0.0) {\n\t\t\tprogress[i] = 0.0;\n\t\t}\n\t}\n\tuvOffset = offset(progress, 0.2, 0.3, redius, startPosition);\n\tvec4 srcColor = texture2D(texturePrev, fract(vUv + uvOffset));\n\tvec4 distColor = texture2D(textureNext, fract(vUv + uvOffset));\n\tif (dist < radiusMin) {\n\t\tsrcColor.a = 0.0;\n\t}\n\telse if ((dist >= radiusMin) && (dist <= radiusMax)) {\n\t\tsrcColor.a = (dist - radiusMin) / ringR;\n\t}\n\telse {\n\t\tsrcColor.a = 1.0;\n\t}\n\tif (timePercent >= 1.0) {\n\t\tsrcColor.a = 0.0;\n\t}\n\telse if (timePercent == 0.0) {\n\t\tsrcColor.a = 1.0;\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform int option;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat alphaStart;\n\tfloat alphaEnd;\n\tfloat rectStart;\n\tfloat rectEnd;\n\tbool isRevert = option > 1 ? true : false;\n\tif (timePercent <= 0.33) {\n\t\talphaStart = isRevert ? 1.0 - (timePercent / 0.33) : 1.0;\n\t\talphaEnd = isRevert ? 1.0 : 1.0 - (timePercent / 0.33);\n\t\trectStart = isRevert ? 0.0 : 0.5;\n\t\trectEnd = isRevert ? 0.5 : 1.0;\n\t}\n\telse if ((timePercent > 0.33) && (timePercent <= 0.66)) {\n\t\talphaStart = isRevert ? 0.0 : 1.0;\n\t\talphaEnd = isRevert ? 1.0 : 0.0;\n\t\trectEnd = isRevert ? (((timePercent - 0.33) / 0.33) * 0.5) + 0.5 : 1.0 - (((timePercent - 0.33) / 0.33) * 0.5);\n\t\trectStart = rectEnd - 0.5;\n\t}\n\telse {\n\t\talphaStart = isRevert ? 0.0 : (1.0 - timePercent) / (1.0 - 0.66);\n\t\talphaEnd = isRevert ? (1.0 - timePercent) / (1.0 - 0.66) : 0.0;\n\t\trectStart = isRevert ? 0.5 : 0.0;\n\t\trectEnd = isRevert ? 1.0 : 0.5;\n\t}\n\tfloat changAxis = (option % 2) == 0 ? vUv.x : vUv.y;\n\tif (changAxis >= rectEnd) {\n\t\tsrcColor.a = isRevert ? 1.0 : 0.0;\n\t}\n\telse if (changAxis <= rectStart) {\n\t\tsrcColor.a = isRevert ? 0.0 : 1.0;\n\t}\n\telse {\n\t\tsrcColor.a = alphaStart + (((changAxis - rectStart) / 0.5) * (alphaEnd - alphaStart));\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n"},function(t,e){t.exports="uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform sampler2D dissolveTexture;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 dissolveColor = texture2D(dissolveTexture, vUv);\n\tif (dissolveColor.r == 0.0) {\n\t\tresult = srcColor;\n\t}\n\telse {\n\t\tresult = distColor;\n\t}\n\tgl_FragColor = result;\n}\n"},function(t,e){t.exports="uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tif (timePercent < 0.5) {\n\t\tfloat stagePercent = timePercent / 0.5;\n\t\tresult = srcColor + (stagePercent * (1.0 - srcColor));\n\t}\n\telse {\n\t\tfloat stagePercent = (timePercent - 0.5) / 0.5;\n\t\tresult = 1.0 - (stagePercent * (1.0 - distColor));\n\t}\n\tgl_FragColor = result;\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform int option;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tif (option == 1) {\n\t\tif (timePercent < 0.5) {\n\t\t\tsrcColor.rgb *= (1.0 - (timePercent * 2.0));\n\t\t\tgl_FragColor = srcColor;\n\t\t}\n\t\telse {\n\t\t\tdistColor.rgb *= ((timePercent - 0.5) * 2.0);\n\t\t\tgl_FragColor = distColor;\n\t\t}\n\t}\n\telse {\n\t\tsrcColor.a = 1.0 - timePercent;\n\t\tgl_FragColor = blendSrcOver(srcColor, distColor);\n\t}\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform int option;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tfloat changeAxis = (option % 2) == 1 ? vUv.x : vUv.y;\n\tbool changeAxisX = (option % 2) == 1;\n\tbool isRevert = option > 1;\n\tfloat line;\n\tif (isRevert) {\n\t\tline = interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 3);\n\t}\n\telse {\n\t\tline = interpolationFloat(0.0, 1.0, 0.0, 1.0, timePercent, 3);\n\t}\n\tvec2 uv = vUv.xy;\n\tif (changeAxis > line) {\n\t\tif (changeAxisX) {\n\t\t\tuv.x -= line;\n\t\t}\n\t\telse {\n\t\t\tuv.y -= line;\n\t\t}\n\t}\n\telse {\n\t\tif (changeAxisX) {\n\t\t\tuv.x += (1.0 - line);\n\t\t}\n\t\telse {\n\t\t\tuv.y += (1.0 - line);\n\t\t}\n\t}\n\tif (isRevert) {\n\t\tresult = changeAxis > line ? texture2D(textureNext, uv) : texture2D(texturePrev, uv);\n\t}\n\telse {\n\t\tresult = changeAxis > line ? texture2D(texturePrev, uv) : texture2D(textureNext, uv);\n\t}\n\tgl_FragColor = result;\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform bool direction;\nuniform bool orient;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec2 rectLeft = direction ? vec2(0.25, 0.0) : vec2(0.25, 0.5);\n\tvec2 rectRight = direction ? vec2(1, 0.75) : vec2(0.5, 0.75);\n\tvec2 alphaLeft = vec2(1.0, 1.0);\n\tvec2 alphaRight = vec2(1.0, 1.0);\n\tif (timePercent <= 0.333) {\n\t\talphaLeft.y = 1.0 - (timePercent / 0.333);\n\t\talphaRight.x = 1.0 - (timePercent / 0.333);\n\t}\n\telse if ((timePercent <= 0.666) && (timePercent > 0.333)) {\n\t\trectLeft.x = direction ? (((timePercent - 0.333) / 0.333) * 0.25) + rectLeft.x : rectLeft.x - (((timePercent - 0.333) / 0.333) * 0.25);\n\t\trectLeft.y = direction ? rectLeft.x - 0.25 : rectLeft.x + 0.25;\n\t\trectRight.y = direction ? rectRight.y - (((timePercent - 0.333) / 0.333) * 0.25) : rectRight.y + (((timePercent - 0.333) / 0.333) * 0.25);\n\t\trectRight.x = direction ? rectRight.y + 0.25 : rectRight.y - 0.25;\n\t\talphaLeft.y = 0.0;\n\t\talphaRight.x = 0.0;\n\t}\n\telse {\n\t\trectLeft = direction ? vec2(0.5, 0.25) : vec2(0.0, 0.25);\n\t\trectRight = direction ? vec2(0.75, 0.5) : vec2(0.75, 1.0);\n\t\talphaLeft.y = 0.0;\n\t\talphaRight.x = 0.0;\n\t\talphaLeft.x = 1.0 - ((timePercent - 0.666) / (1.0 - 0.666));\n\t\talphaRight.y = 1.0 - ((timePercent - 0.666) / (1.0 - 0.666));\n\t}\n\tfloat axis = orient ? vUv.x : vUv.y;\n\tif (direction) {\n\t\tif ((axis < rectLeft.y) || (axis > rectRight.x)) {\n\t\t\tsrcColor.a = 0.0;\n\t\t}\n\t\telse if ((axis > rectLeft.x) && (axis < rectRight.y)) {\n\t\t\tsrcColor.a = 1.0;\n\t\t}\n\t\telse {\n\t\t\tif ((axis < rectLeft.x) && (axis > rectLeft.y)) {\n\t\t\t\tsrcColor.a = alphaLeft.y - (((axis - rectLeft.y) / (rectLeft.x - rectLeft.y)) * (alphaLeft.y - alphaLeft.x));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsrcColor.a = alphaRight.x - (((rectRight.x - axis) / (rectLeft.x - rectLeft.y)) * (alphaRight.x - alphaRight.y));\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tif ((axis < rectLeft.x) || (axis > rectRight.y)) {\n\t\t\tsrcColor.a = 1.0;\n\t\t}\n\t\telse if ((axis > rectLeft.y) && (axis < rectRight.x)) {\n\t\t\tsrcColor.a = 0.0;\n\t\t}\n\t\telse {\n\t\t\tif ((axis >= rectLeft.x) && (axis <= rectLeft.y)) {\n\t\t\t\tsrcColor.a = alphaLeft.x - (((axis - rectLeft.x) / (rectLeft.y - rectLeft.x)) * (alphaLeft.x - alphaLeft.y));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsrcColor.a = alphaRight.y - (((rectRight.y - axis) / (rectLeft.y - rectLeft.x)) * (alphaRight.y - alphaRight.x));\n\t\t\t}\n\t\t}\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n"},function(t,e){t.exports="uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform bool direction;\nuniform bool thruBlk;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 uv4 = vec4(vUv.xy, 1.0, 1.0);\n\tfloat scale;\n\tfloat transform;\n\tif (timePercent < 0.5) {\n\t\tscale = 1.0 - ((timePercent / 0.5) * 0.05);\n\t\ttransform = (1.0 - scale) * 0.5;\n\t}\n\telse {\n\t\tscale = 0.95 + (((timePercent - 0.5) / 0.5) * 0.05);\n\t\ttransform = (1.0 - scale) * 0.5;\n\t}\n\tmat4 matrix = mat4(scale, 0.0, 0.0, 0.0, 0.0, scale, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, transform, transform, 0.0, 1.0);\n\tvec4 uv = matrix * uv4;\n\tvec4 srcColor = texture2D(texturePrev, uv.xy);\n\tvec4 distColor = texture2D(textureNext, uv.xy);\n\tvec4 result = timePercent < 0.5 ? srcColor : distColor;\n\tvec3 start;\n\tvec3 end;\n\tvec3 middleColor = thruBlk ? vec3(0.0, 0.0, 0.0) : vec3(1.0, 1.0, 1.0);\n\tif ((timePercent < 0.25) || (timePercent > 0.75)) {\n\t\tresult *= 1.0;\n\t}\n\telse if ((timePercent >= 0.25) && (timePercent <= 0.5)) {\n\t\tif (timePercent <= 0.375) {\n\t\t\tstart = result.rgb;\n\t\t\tend = start + (((timePercent - 0.25) / 0.125) * (middleColor - result.rgb));\n\t\t}\n\t\telse {\n\t\t\tstart = result.rgb + (((timePercent - 0.375) / 0.125) * (middleColor - result.rgb));\n\t\t\tend = middleColor;\n\t\t}\n\t\tresult = direction ? vec4(end - (vUv.x * (end - start)), result.a) : vec4(start - (vUv.x * (start - end)), result.a);\n\t}\n\telse if ((timePercent > 0.5) && (timePercent <= 0.75)) {\n\t\tif (timePercent < 0.625) {\n\t\t\tstart = middleColor - (((timePercent - 0.5) / 0.125) * (middleColor - result.rgb));\n\t\t\tend = middleColor;\n\t\t}\n\t\telse {\n\t\t\tstart = result.rgb;\n\t\t\tend = middleColor - (((timePercent - 0.625) / 0.125) * (middleColor - result.rgb));\n\t\t}\n\t\tresult = direction ? vec4(end - (vUv.x * (end - start)), result.a) : vec4(start - (vUv.x * (start - end)), result.a);\n\t}\n\tgl_FragColor = result;\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform int optionX;\nuniform int optionY;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tfloat lineX = optionX > 0 ? interpolationFloat(0.0, 1.0, 0.0, 1.0, timePercent, 1) : interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 1);\n\tfloat lineY = optionY > 0 ? interpolationFloat(0.0, 1.0, 0.0, 1.0, timePercent, 1) : interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 1);\n\tvec2 uv = vUv.xy;\n\tif ((optionX < 0) && (vUv.x <= lineX)) {\n\t\tuv.x += (1.0 - lineX);\n\t}\n\tif ((optionX > 0) && (vUv.x >= lineX)) {\n\t\tuv.x -= lineX;\n\t}\n\tif ((optionY < 0) && (vUv.y <= lineY)) {\n\t\tuv.y += (1.0 - lineY);\n\t}\n\tif ((optionY > 0) && (vUv.y >= lineY)) {\n\t\tuv.y -= lineY;\n\t}\n\tif ((optionX != 0) && (optionY == 0)) {\n\t\tif (optionX > 0) {\n\t\t\tresult = vUv.x > lineX ? texture2D(texturePrev, uv) : texture2D(textureNext, vUv);\n\t\t}\n\t\telse {\n\t\t\tresult = vUv.x > lineX ? texture2D(textureNext, vUv) : texture2D(texturePrev, uv);\n\t\t}\n\t}\n\tif ((optionX == 0) && (optionY != 0)) {\n\t\tif (optionY > 0) {\n\t\t\tresult = vUv.y > lineY ? texture2D(texturePrev, uv) : texture2D(textureNext, vUv);\n\t\t}\n\t\telse {\n\t\t\tresult = vUv.y > lineY ? texture2D(textureNext, vUv) : texture2D(texturePrev, uv);\n\t\t}\n\t}\n\tif ((optionX != 0) && (optionY != 0)) {\n\t\tif ((optionX > 0) && (optionY > 0)) {\n\t\t\tresult = (vUv.x > lineX) && (vUv.y > lineY) ? texture2D(texturePrev, uv) : texture2D(textureNext, vUv);\n\t\t}\n\t\telse if ((optionX > 0) && (optionY < 0)) {\n\t\t\tresult = (vUv.x > lineX) && (vUv.y < lineY) ? texture2D(texturePrev, uv) : texture2D(textureNext, vUv);\n\t\t}\n\t\telse if ((optionX < 0) && (optionY > 0)) {\n\t\t\tresult = (vUv.x < lineX) && (vUv.y > lineY) ? texture2D(texturePrev, uv) : texture2D(textureNext, vUv);\n\t\t}\n\t\telse {\n\t\t\tresult = (vUv.x < lineX) && (vUv.y < lineY) ? texture2D(texturePrev, uv) : texture2D(textureNext, vUv);\n\t\t}\n\t}\n\tgl_FragColor = result;\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform int optionX;\nuniform int optionY;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tfloat lineX = optionX > 0 ? interpolationFloat(0.0, 1.0, 0.0, 1.0, timePercent, 1) : interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 1);\n\tfloat lineY = optionY > 0 ? interpolationFloat(0.0, 1.0, 0.0, 1.0, timePercent, 1) : interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 1);\n\tvec2 uv = vUv.xy;\n\tif ((optionX < 0) && (vUv.x > lineX)) {\n\t\tuv.x -= lineX;\n\t}\n\tif ((optionX > 0) && (vUv.x < lineX)) {\n\t\tuv.x += (1.0 - lineX);\n\t}\n\tif ((optionY < 0) && (vUv.y > lineY)) {\n\t\tuv.y -= lineY;\n\t}\n\tif ((optionY > 0) && (vUv.y < lineY)) {\n\t\tuv.y += (1.0 - lineY);\n\t}\n\tif ((optionX != 0) && (optionY == 0)) {\n\t\tif (optionX > 0) {\n\t\t\tresult = vUv.x > lineX ? texture2D(texturePrev, vUv) : texture2D(textureNext, uv);\n\t\t}\n\t\telse {\n\t\t\tresult = vUv.x > lineX ? texture2D(textureNext, uv) : texture2D(texturePrev, vUv);\n\t\t}\n\t}\n\tif ((optionX == 0) && (optionY != 0)) {\n\t\tif (optionY > 0) {\n\t\t\tresult = vUv.y > lineY ? texture2D(texturePrev, vUv) : texture2D(textureNext, uv);\n\t\t}\n\t\telse {\n\t\t\tresult = vUv.y > lineY ? texture2D(textureNext, uv) : texture2D(texturePrev, vUv);\n\t\t}\n\t}\n\tif ((optionX != 0) && (optionY != 0)) {\n\t\tif ((optionX > 0) && (optionY > 0)) {\n\t\t\tresult = (vUv.x < lineX) && (vUv.y < lineY) ? texture2D(textureNext, uv) : texture2D(texturePrev, vUv);\n\t\t}\n\t\telse if ((optionX > 0) && (optionY < 0)) {\n\t\t\tresult = (vUv.x < lineX) && (vUv.y > lineY) ? texture2D(textureNext, uv) : texture2D(texturePrev, vUv);\n\t\t}\n\t\telse if ((optionX < 0) && (optionY > 0)) {\n\t\t\tresult = (vUv.x > lineX) && (vUv.y < lineY) ? texture2D(textureNext, uv) : texture2D(texturePrev, vUv);\n\t\t}\n\t\telse {\n\t\t\tresult = (vUv.x > lineX) && (vUv.y > lineY) ? texture2D(textureNext, uv) : texture2D(texturePrev, vUv);\n\t\t}\n\t}\n\tgl_FragColor = result;\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nmat3 yuv2rgb = mat3(1.0, 0.0, 1.13983, 1.0, -0.39465, -0.58060, 1.0, 2.03211, 0.0);\nmat3 rgb2yuv = mat3(0.2126, 0.7152, 0.0722, -0.09991, -0.33609, 0.43600, 0.615, -0.5586, -0.05639);\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec3 result;\n\tfloat resultAlpha;\n\tif (timePercent < 0.5) {\n\t\tresult = srcColor.rgb * rgb2yuv;\n\t\tresult.r += interpolationFloat(0.0, 1.0, 0.0, 0.5, timePercent, 0);\n\t\tresultAlpha = srcColor.a;\n\t}\n\telse {\n\t\tresult = distColor.rgb * rgb2yuv;\n\t\tresult.r += interpolationFloat(1.0, 0.0, 0.5, 1.0, timePercent, 0);\n\t\tresultAlpha = distColor.a;\n\t}\n\tresult *= yuv2rgb;\n\tgl_FragColor = vec4(result.rgb, resultAlpha);\n}\n"},function(t,e){t.exports="uniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float timePercent;\nuniform float segmentWidth;\nuniform float segmentHeight;\nattribute vec2 segment;\nattribute float times;\nattribute int option;\nvarying vec2 vUv;\nvarying float fakePercent;\nvoid main() {\n\tvUv = uv;\n\tfloat width = segmentWidth * horizontalSegments;\n\tfloat height = segmentHeight * verticalSegments;\n\tvec4 newPosition = vec4(position, 1.0);\n\tvec2 segmentOrigin = vec2(((segment.x + 0.5) * segmentWidth) - (width * 0.5), (height * 0.5) - ((1.0 * (segment.y + 0.5)) * segmentHeight));\n\tif (timePercent > times) {\n\t\tfloat percent = (timePercent - times) / 0.7;\n\t\tif (percent > 1.0) {\n\t\t\tpercent = 1.0;\n\t\t}\n\t\tif (percent > 0.5) {\n\t\t\tpercent += 1.0;\n\t\t}\n\t\tmat4 matrix = mat4(cos((-1.0 * percent) * 3.14), 0.0, sin((-1.0 * percent) * 3.14), 0.0, 0.0, 1.0, 0.0, 0.0, -sin((-1.0 * percent) * 3.14), 0.0, cos((-1.0 * percent) * 3.14), 0.0, 0.0, 0.0, 0.0, 1.0);\n\t\tif (option == 1) {\n\t\t\tmatrix = mat4(1.0, 0.0, 0.0, 0.0, 0.0, cos(percent * 3.14), -sin(percent * 3.14), 0.0, 0.0, sin(percent * 3.13), cos(percent * 3.14), 0.0, 0.0, 0.0, 0.0, 1.0);\n\t\t}\n\t\tnewPosition.x -= segmentOrigin.x;\n\t\tnewPosition.y -= segmentOrigin.y;\n\t\tnewPosition = matrix * newPosition;\n\t\tnewPosition.x += segmentOrigin.x;\n\t\tnewPosition.y += segmentOrigin.y;\n\t\tif (segment.x < (horizontalSegments / 2.0)) {\n\t\t\tfakePercent = percent - (abs((horizontalSegments / 2.0) - segment.x) * (0.25 / horizontalSegments));\n\t\t}\n\t\telse {\n\t\t\tfakePercent = percent + (abs((horizontalSegments / 2.0) - segment.x) * (0.25 / horizontalSegments));\n\t\t}\n\t}\n\tif ((timePercent < 0.0001) || (timePercent > 0.9999)) {\n\t\tgl_Position = (projectionMatrix * modelViewMatrix) * vec4(position, 1.0);\n\t\treturn ;\n\t}\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n"},function(t,e){t.exports="uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvarying float fakePercent;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 color = srcColor;\n\tif (fakePercent > 0.5) {\n\t\tcolor = distColor;\n\t}\n\tif ((fakePercent < 0.5) && (fakePercent > 0.35)) {\n\t\tcolor.a = 0.5;\n\t}\n\tgl_FragColor = color;\n}\n"},function(t,e){t.exports="#define PI 3.14159265\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float timePercent;\nuniform float segmentWidth;\nuniform float segmentHeight;\nuniform float duration;\nattribute vec2 segment;\nattribute float times;\nvarying vec2 vUv;\nmat4 rotateY(float angle) {\n\treturn mat4(cos(angle), 0.0, sin(angle), 0.0, 0.0, 1.0, 0.0, 0.0, -sin(angle), 0.0, cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n}\nvoid main() {\n\tvUv = uv;\n\tfloat width = segmentWidth * horizontalSegments;\n\tfloat height = segmentHeight * verticalSegments;\n\tmat4 matrix;\n\tfloat stagePercent;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat selfTimePercent = (timePercent - times) / (4.0 / 5.0);\n\tif (selfTimePercent < 0.0) {\n\t\tselfTimePercent = 0.0;\n\t}\n\telse if (selfTimePercent > 1.0) {\n\t\tselfTimePercent = 1.0;\n\t}\n\tif (selfTimePercent < (2.0 / 5.0)) {\n\t\tstagePercent = selfTimePercent / (2.0 / 5.0);\n\t\tnewPosition.x -= (0.5 * width);\n\t\tmatrix = rotateY(((-1.0 * stagePercent) * PI) * 0.5);\n\t\tnewPosition = matrix * newPosition;\n\t\tnewPosition.x += (0.5 * width);\n\t}\n\telse if ((selfTimePercent >= (2.0 / 5.0)) && (selfTimePercent < (3.0 / 5.0))) {\n\t\tstagePercent = (selfTimePercent - (2.0 / 5.0)) / (1.0 / 5.0);\n\t\tnewPosition.x -= (0.5 * width);\n\t\tnewPosition = rotateY((-1.0 * PI) * 0.5) * newPosition;\n\t\tmatrix = rotateY(((-1.0 * stagePercent) * PI) * 2.0);\n\t\tnewPosition = matrix * newPosition;\n\t\tnewPosition.x += (0.5 * width);\n\t\tnewPosition.x -= (width * stagePercent);\n\t}\n\telse {\n\t\tfloat offset = (((newPosition.x + (0.5 * width)) / width) * 2.0) / 5.0;\n\t\tstagePercent = (selfTimePercent - (1.0 / 5.0)) / ((2.0 / 5.0) + offset);\n\t\tif (stagePercent > 1.0) {\n\t\t\tstagePercent = 1.0;\n\t\t}\n\t\tvec4 vvUvv = vec4(vUv.x - 0.5, vUv.y - 0.5, 0.0, 1.0);\n\t\tvvUvv = rotateY(-1.0 * PI) * vvUvv;\n\t\tvUv = vvUvv.xy + 0.5;\n\t\tnewPosition.x -= (0.5 * width);\n\t\tmatrix = rotateY((((-1.0 * stagePercent) * PI) * 0.5) - (PI * 2.5));\n\t\tnewPosition = matrix * newPosition;\n\t\tnewPosition.x += (0.5 * width);\n\t\tnewPosition.x -= width;\n\t}\n\tif ((timePercent < 0.0001) || (timePercent > 0.9999)) {\n\t\tvUv = uv;\n\t\tgl_Position = (projectionMatrix * modelViewMatrix) * vec4(position, 1.0);\n\t\treturn ;\n\t}\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n"},function(t,e){t.exports="uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 color = srcColor;\n\tif (timePercent > 0.5) {\n\t\tcolor = distColor;\n\t}\n\tif (timePercent < 0.0001) {\n\t\tcolor = srcColor;\n\t}\n\telse if (timePercent > 0.9999) {\n\t\tcolor = distColor;\n\t}\n\tgl_FragColor = color;\n}\n"},function(t,e){t.exports="#define PI 3.14159265\nattribute float index;\nattribute float type;\nattribute float delay;\nuniform float timePercent;\nuniform float segmentWidth;\nuniform float segments;\nvarying vec2 vUv;\nvarying float vType;\nvarying float rotatePercent;\nmat4 rotateY(float angle) {\n\treturn mat4(cos(angle), 0.0, sin(angle), 0.0, 0.0, 1.0, 0.0, 0.0, -sin(angle), 0.0, cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n}\nvoid main() {\n\tvUv = uv;\n\tvType = type;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat selfPercent = (timePercent - delay) / 0.7;\n\trotatePercent = selfPercent;\n\tif (selfPercent < 0.0) {\n\t\tselfPercent = 0.0;\n\t}\n\telse if (selfPercent > 1.0) {\n\t\tselfPercent = 1.0;\n\t}\n\tfloat offsetX = ((segments * segmentWidth) * 0.5) - ((index + 0.5) * segmentWidth);\n\tfloat offsetZ = segmentWidth * 0.5;\n\tnewPosition.x += offsetX;\n\tnewPosition.z += offsetZ;\n\tnewPosition.x *= (0.9 + ((abs(timePercent - 0.5) / 0.5) * 0.1));\n\tnewPosition.z *= (0.9 + ((abs(timePercent - 0.5) / 0.5) * 0.1));\n\tnewPosition = rotateY((PI * 0.5) * selfPercent) * newPosition;\n\tnewPosition.x -= offsetX;\n\tnewPosition.z -= offsetZ;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n"},function(t,e){t.exports="uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvarying float vType;\nvarying float rotatePercent;\nmat3 yuv2rgb = mat3(1.0, 0.0, 1.13983, 1.0, -0.39465, -0.58060, 1.0, 2.03211, 0.0);\nmat3 rgb2yuv = mat3(0.2126, 0.7152, 0.0722, -0.09991, -0.33609, 0.43600, 0.615, -0.5586, -0.05639);\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec3 srcYuv;\n\tvec3 distYuv;\n\tif (rotatePercent < 0.5) {\n\t\tdistYuv = distColor.rgb * rgb2yuv;\n\t\tdistYuv.r *= (1.0 - (abs(rotatePercent - 0.5) / 0.5));\n\t\tdistColor = vec4(distYuv * yuv2rgb, distColor.a);\n\t}\n\telse {\n\t\tsrcYuv = distColor.rgb * rgb2yuv;\n\t\tsrcYuv.r *= (abs(rotatePercent - 0.5) / 0.5);\n\t\tsrcColor = vec4(srcYuv * yuv2rgb, srcColor.a);\n\t}\n\tvec4 color = vType < 0.5 ? srcColor : distColor;\n\tgl_FragColor = color;\n}\n"},function(t,e){t.exports="float easeInFloat(float t, float b, float c, float d) {\n\tt = t / d;\n\treturn ((c * t) * t) + b;\n}\nfloat interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.141592653\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float timePercent;\nuniform float segmentWidth;\nuniform float segmentHeight;\nattribute float isLeft;\nvarying vec2 vUv;\nvarying vec4 shadow;\nvoid main() {\n\tvUv = uv;\n\tfloat scaleX;\n\tfloat transform;\n\tfloat displacement;\n\tvec4 newPosition = vec4(position, 1.0);\n\tvec4 glPosition = (projectionMatrix * modelViewMatrix) * newPosition;\n\tfloat crestCount = 24.0;\n\tfloat width = horizontalSegments * segmentWidth;\n\tfloat height = verticalSegments * segmentHeight;\n\tfloat heightFactor = (newPosition.y + (height * 0.5)) / height;\n\tfloat scaleY = interpolationFloat(1.0, 1.05, 0.0, 0.11, timePercent, 0);\n\tnewPosition.y += (height * 0.5);\n\tnewPosition.y *= scaleY;\n\tnewPosition.y -= (height * 0.5);\n\tnewPosition.y += 10.0;\n\tif ((timePercent > 0.0) && (timePercent < 0.333)) {\n\t\tfloat delay = (1.0 - heightFactor) * 0.1;\n\t\tscaleX = interpolationFloat(1.0, 0.5, 0.0 + delay, 0.333, timePercent, 1);\n\t}\n\telse if ((timePercent >= 0.333) && (timePercent < 0.5)) {\n\t\tfloat scaleTop = 0.5;\n\t\tfloat scaleBottom = interpolationFloat(0.5, 0.25, 0.333, 0.5, timePercent, 2);\n\t\tfloat incr = easeInFloat(1.0 - heightFactor, 0.0, abs(scaleBottom - scaleTop), 1.0);\n\t\tscaleX = scaleTop - incr;\n\t}\n\telse if ((timePercent >= 0.5) && (timePercent < 0.583)) {\n\t\tfloat scaleTop = 0.5;\n\t\tfloat scaleBottom = interpolationFloat(0.25, 0.5, 0.5, 0.583, timePercent, 1);\n\t\tfloat incr = easeInFloat(1.0 - heightFactor, 0.0, abs(scaleBottom - scaleTop), 1.0);\n\t\tscaleX = scaleTop - incr;\n\t}\n\telse if (timePercent >= 0.583) {\n\t\tfloat scaleTop = 0.5;\n\t\tfloat scaleBottom = interpolationFloat(0.5, 0.75, 0.583, 0.666, timePercent, 2);\n\t\tfloat incr = easeInFloat(1.0 - heightFactor, 0.0, abs(scaleBottom - scaleTop), 1.0);\n\t\tscaleX = scaleTop + incr;\n\t}\n\tif (timePercent > 0.583) {\n\t\tdisplacement = (isLeft < 0.5 ? 1.0 : -1.0) * interpolationFloat(0.0, width / 2.0, 0.583, 1.0, timePercent, 0);\n\t}\n\tfloat ampTop = interpolationFloat(0.0, 1.0, 0.0, 0.11, timePercent, 0);\n\tfloat ampBottom = interpolationFloat(0.0, 1.0, 0.11, 0.22, timePercent, 0);\n\tfloat amp = ampBottom + (heightFactor * abs(ampBottom - ampTop));\n\tfloat foo = newPosition.x * ((crestCount * PI) / width);\n\tnewPosition.z = (amp * cos(foo + (PI / 2.0))) * 20.0;\n\ttransform = (isLeft < 0.5 ? -1.0 : 1.0) * (width * 0.5);\n\tnewPosition.x += transform;\n\tnewPosition.x *= scaleX;\n\tnewPosition.x -= transform;\n\tnewPosition.x += displacement;\n\tshadow = vec4(0.0, 0.0, 0.0, 0.0);\n\tif (newPosition.z < 15.0) {\n\t\tfloat alpha = 0.3 * (1.0 - ((newPosition.z + 20.0) / 35.0));\n\t\tshadow.a = alpha * amp;\n\t}\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvarying vec4 shadow;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 color = blendSrcOver(shadow, srcColor);\n\tgl_FragColor = color;\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265\nuniform float timePercent;\nuniform float aCoefficient;\nuniform float zCurveLimit;\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float segmentWidth;\nuniform float segmentHeight;\nuniform int option;\nvarying vec2 vUv;\nvoid main() {\n\tfloat halfWidth = (segmentWidth * horizontalSegments) * 0.5;\n\tfloat halfHeight = (segmentHeight * verticalSegments) * 0.5;\n\tvUv = uv;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat curve;\n\tfloat progress = option == 1 ? halfWidth - newPosition.x : newPosition.x + halfWidth;\n\tfloat aStart = interpolationFloat(0.00000009, aCoefficient, 0.0, 0.5, timePercent, 0);\n\tfloat aEnd = 0.0000009;\n\tfloat zStart = interpolationFloat(0.0, zCurveLimit, 0.0, 0.5, timePercent, 0);\n\tfloat zEnd = 0.0;\n\tfloat a = interpolationFloat(aStart, aEnd, 0.0, halfWidth * 2.0, progress, 0);\n\tfloat z = interpolationFloat(zStart, zEnd, 0.0, halfWidth * 2.0, progress, 0);\n\tnewPosition.z -= (((-a * newPosition.y) * newPosition.y) + z);\n\tfloat scaleYStart = interpolationFloat(1.0, 0.8, 0.0, 0.5, timePercent, 0);\n\tfloat scaleYEnd = 1.0;\n\tfloat scaleY = interpolationFloat(scaleYStart, scaleYEnd, 0.0, halfWidth * 2.0, progress, 0);\n\tnewPosition.y += halfHeight;\n\tnewPosition.y *= scaleY;\n\tfloat angle = interpolationFloat(0.0, -((2.0 * PI) / 3.0), 0.111, 1.0, timePercent, 1);\n\tmat4 rotateX = mat4(1.0, 0.0, 0.0, 0.0, 0.0, cos(angle), sin(angle), 0.0, 0.0, -sin(angle), cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n\tnewPosition = rotateX * newPosition;\n\tnewPosition.y -= halfHeight;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nvec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat alpha = interpolationFloat(0.0, 0.6, 0.5, 1.0, timePercent, 0);\n\tvec4 shadow = vec4(0.0, 0.0, 0.0, alpha);\n\tgl_FragColor = blendSrcOver(shadow, srcColor);\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform float timePercent;\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float segmentWidth;\nuniform float segmentHeight;\nuniform int option;\nvarying vec2 vUv;\nvarying float shadowAlpha;\nmat2 rotateOrigin(float angle) {\n\treturn mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n}\nvoid main() {\n\tfloat halfWidth = (segmentWidth * horizontalSegments) * 0.5;\n\tfloat halfHeight = (segmentHeight * verticalSegments) * 0.5;\n\tvUv = uv;\n\tvec2 shadowPosition = vec2(position.xy);\n\tfloat presetAngle = option == 1 ? 0.77 : 0.27;\n\tfloat rotateAngle = PI * presetAngle;\n\tfloat min_r = halfWidth * 0.05;\n\tshadowPosition = rotateOrigin(rotateAngle) * shadowPosition;\n\tvec4 newPosition = vec4(shadowPosition.xy, position.z, 1.0);\n\tfloat line = interpolationFloat(0.0, halfWidth * 2.8, 0.0, 1.0, timePercent, 1);\n\tfloat dis2BaseLine = halfWidth - newPosition.x;\n\tfloat dis2Line = line - dis2BaseLine;\n\tfloat L = line <= (halfWidth * 2.0) ? line : halfWidth * 2.0;\n\tfloat r = L / PI;\n\tr = r < min_r ? min_r : r;\n\tfloat angle = dis2Line / r;\n\tif (((dis2Line > 0.0) && (dis2Line < (line * 0.5))) && (r > min_r)) {\n\t\tshadowAlpha = interpolationFloat(0.0, 0.3, 0.0, line * 0.5, dis2Line, 0);\n\t}\n\telse {\n\t\tshadowAlpha = 0.0;\n\t}\n\tif (dis2BaseLine < line) {\n\t\tnewPosition.x = ((sin(angle) * r) + halfWidth) - line;\n\t\tnewPosition.z = (r - (cos(angle) * r)) * 0.5;\n\t}\n\tvec2 finalPosition = vec2(newPosition.xy);\n\tfinalPosition = rotateOrigin(-rotateAngle) * finalPosition;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * vec4(finalPosition.xy, newPosition.z, 1.0);\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvarying float shadowAlpha;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 shadow = vec4(0.0, 0.0, 0.0, shadowAlpha);\n\tgl_FragColor = blendSrcOver(shadow, srcColor);\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform float timePercent;\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float segmentWidth;\nuniform float segmentHeight;\nuniform int option;\nvarying vec2 vUv;\nmat4 rotateX(float angle) {\n\treturn mat4(1.0, 0.0, 0.0, 0.0, 0.0, cos(angle), sin(angle), 0.0, 0.0, -sin(angle), cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n}\nvoid main() {\n\tfloat halfWidth = (segmentWidth * horizontalSegments) * 0.5;\n\tfloat halfHeight = (segmentHeight * verticalSegments) * 0.5;\n\tvUv = uv;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat progress = option == 0 ? halfWidth - newPosition.x : halfWidth + newPosition.x;\n\tfloat delay = interpolationFloat(0.0, 0.08, 0.0, halfWidth * 2.0, progress, 0);\n\tfloat arc = halfHeight - newPosition.y;\n\tfloat L;\n\tif (timePercent < 0.8) {\n\t\tL = interpolationFloat(halfHeight * 4.0, halfHeight * 22.0, 0.3 + delay, 0.8, timePercent, 0);\n\t}\n\telse {\n\t\tL = interpolationFloat(halfHeight * 22.0, halfHeight * 300.0, 0.8, 1.0, timePercent, 0);\n\t}\n\tfloat r = L / (2.0 * PI);\n\tfloat angle = PI - (arc / r);\n\tfloat y = sin(angle) * r;\n\tfloat z = cos(angle) * r;\n\tnewPosition.y = halfHeight - y;\n\tnewPosition.z = (z + r) * 0.45;\n\tfloat rotateAngle = interpolationFloat(-PI * 0.5, 0.0, 0.0 + delay, 0.4, timePercent, 0);\n\tnewPosition.y -= halfHeight;\n\tnewPosition = rotateX(rotateAngle) * newPosition;\n\tnewPosition.y += halfHeight;\n\tfloat backRotate1 = interpolationFloat(0.0, PI * 0.03, 0.75, 0.9, timePercent, 0);\n\tnewPosition.y -= halfHeight;\n\tnewPosition = rotateX(backRotate1) * newPosition;\n\tnewPosition.y += halfHeight;\n\tfloat backRotate2 = interpolationFloat(0.0, -PI * 0.03, 0.8, 1.0, timePercent, 0);\n\tnewPosition.y -= halfHeight;\n\tnewPosition = rotateX(backRotate2) * newPosition;\n\tnewPosition.y += halfHeight;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nvec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat alpha = interpolationFloat(0.0, 0.6, 0.5, 1.0, timePercent, 0);\n\tvec4 shadow = vec4(0.0, 0.0, 0.0, 0.0);\n\tgl_FragColor = blendSrcOver(shadow, distColor);\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nfloat interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nvarying vec2 vUv;\nvec2 transform(vec2 uv) {\n\tuv.y = (uv.y * height) / width;\n\treturn uv - vec2(0.5, (0.5 * height) / width);\n}\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat shadowAngle = PI / 6.0;\n\tfloat clockAngle;\n\tvec2 a;\n\tvec2 b = transform(vUv);\n\tfloat angle;\n\tif (timePercent < 0.5) {\n\t\ta = vec2(0.0, 0.5);\n\t\tclockAngle = interpolationFloat(0.0, PI, 0.0, 0.5, timePercent, 0);\n\t\tif (b.x > 0.0) {\n\t\t\tangle = acos(((a.x * b.x) + (a.y * b.y)) / (sqrt((a.x * a.x) + (a.y * a.y)) * sqrt((b.x * b.x) + (b.y * b.y))));\n\t\t\tif (angle < clockAngle) {\n\t\t\t\tif (angle > (clockAngle - shadowAngle)) {\n\t\t\t\t\tfloat shadowAlpha = interpolationFloat(1.0, 0.0, 0.0, 1.0, abs(clockAngle - angle) / shadowAngle, 0);\n\t\t\t\t\tsrcColor.a = shadowAlpha;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsrcColor.a = 0.0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tsrcColor.a = 1.0;\n\t\t}\n\t}\n\telse {\n\t\ta = vec2(0.0, -0.5);\n\t\tclockAngle = interpolationFloat(0.0, PI + shadowAngle, 0.5, 1.0, timePercent, 0);\n\t\tif (b.x <= 0.0) {\n\t\t\tangle = acos(((a.x * b.x) + (a.y * b.y)) / (sqrt((a.x * a.x) + (a.y * a.y)) * sqrt((b.x * b.x) + (b.y * b.y))));\n\t\t\tif (angle < clockAngle) {\n\t\t\t\tif (angle > (clockAngle - shadowAngle)) {\n\t\t\t\t\tfloat shadowAlpha = interpolationFloat(1.0, 0.0, 0.0, 1.0, abs(clockAngle - angle) / shadowAngle, 0);\n\t\t\t\t\tsrcColor.a = shadowAlpha;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsrcColor.a = 0.0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tsrcColor.a = 0.0;\n\t\t}\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nuniform int option;\nvarying vec2 vUv;\nvoid main() {\n\tvec2 uv = vUv;\n\tbool useSrc = false;\n\tvec2 row;\n\tfloat delay = 0.02;\n\tbool isVert = bool(option);\n\tint segmentCount = isVert ? 10 : 7;\n\tfloat axis = isVert ? uv.y : uv.x;\n\tfloat compareAxis = isVert ? uv.x : uv.y;\n\tfor (int i = 0; i < segmentCount; i++) {\n\t\tfloat fi = float(i);\n\t\trow.r = (fi * 1.0) / float(segmentCount);\n\t\trow.g = (float(i + 1) * 1.0) / float(segmentCount);\n\t\tif ((compareAxis <= row.g) && (compareAxis > row.r)) {\n\t\t\tif ((i % 2) == 0) {\n\t\t\t\tfloat line = interpolationFloat(0.0, 1.0, delay * fi, (delay * fi) + 0.86, timePercent, 1);\n\t\t\t\tif (axis < line) {\n\t\t\t\t\tuseSrc = false;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\taxis -= line;\n\t\t\t\t\tuseSrc = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat line = interpolationFloat(1.0, 0.0, delay * fi, (delay * fi) + 0.86, timePercent, 1);\n\t\t\t\tif (axis < line) {\n\t\t\t\t\taxis = (1.0 - line) + axis;\n\t\t\t\t\tuseSrc = true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tuseSrc = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (isVert) {\n\t\tuv.y = axis;\n\t}\n\telse {\n\t\tuv.x = axis;\n\t}\n\tvec4 srcColor = texture2D(texturePrev, uv);\n\tvec4 distColor = texture2D(textureNext, uv);\n\tgl_FragColor = useSrc ? srcColor : distColor;\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nfloat interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nuniform int option;\nvarying vec2 vUv;\nvoid main() {\n\tvec2 uvSrc = vUv;\n\tvec2 uvDist = vUv;\n\tfloat scaleSrc = option == 1 ? interpolationFloat(1.0, 2.0, 0.0, 1.0, timePercent, 0) : interpolationFloat(1.0, 0.1, 0.0, 1.0, timePercent, 0);\n\tfloat scaleDist = option == 1 ? interpolationFloat(0.1, 1.0, 0.0, 1.0, timePercent, 0) : interpolationFloat(2.0, 1.0, 0.0, 1.0, timePercent, 0);\n\tuvSrc -= 0.5;\n\tuvSrc *= scaleSrc;\n\tuvSrc += 0.5;\n\tuvDist -= 0.5;\n\tuvDist *= scaleDist;\n\tuvDist += 0.5;\n\tvec4 srcColor = texture2D(texturePrev, uvSrc);\n\tsrcColor.a = interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 0);\n\tvec4 distColor;\n\tif ((((uvDist.x > 1.0) || (uvDist.x < 0.0)) || (uvDist.y > 1.0)) || (uvDist.y < 0.0)) {\n\t\tdistColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t}\n\telse {\n\t\tdistColor = texture2D(textureNext, uvDist);\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform float timePercent;\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float segmentWidth;\nuniform float segmentHeight;\nuniform int option;\nvarying vec2 vUv;\nmat4 rotateY(float angle) {\n\tif (option == 1) {\n\t\tangle *= -1.0;\n\t}\n\treturn mat4(cos(angle), 0.0, sin(angle), 0.0, 0.0, 1.0, 0.0, 0.0, -sin(angle), 0.0, cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n}\nvoid main() {\n\tfloat halfWidth = (segmentWidth * horizontalSegments) * 0.5;\n\tfloat halfHeight = (segmentHeight * verticalSegments) * 0.5;\n\tvUv = uv;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat stageOneAngle = PI / 14.0;\n\tfloat stageTwoAngle = (PI * 12.0) / 14.0;\n\tfloat stage_1 = 0.1;\n\tfloat stage_2 = 0.8;\n\tif (timePercent < 0.5) {\n\t\tnewPosition.z = interpolationFloat(0.0, -100.0, 0.0, 0.5, timePercent, 0);\n\t}\n\telse {\n\t\tnewPosition.z = interpolationFloat(-100.0, 0.0, 0.5, 1.0, timePercent, 0);\n\t}\n\tif (timePercent < stage_1) {\n\t\tfloat angle = interpolationFloat(0.0, stageOneAngle, 0.0, stage_1, timePercent, 0);\n\t\tnewPosition.x += halfWidth;\n\t\tnewPosition *= rotateY(angle);\n\t\tnewPosition.x -= halfWidth;\n\t}\n\telse if ((timePercent >= stage_1) && (timePercent < stage_2)) {\n\t\tif (timePercent > 0.5) {\n\t\t\tnewPosition *= rotateY(PI);\n\t\t}\n\t\tfloat offset = halfWidth - (sin((PI * 0.5) - stageOneAngle) * halfWidth);\n\t\tfloat angle = interpolationFloat(0.0, stageTwoAngle, stage_1, stage_2, timePercent, 0);\n\t\tnewPosition *= rotateY(angle);\n\t\tnewPosition.x += halfWidth;\n\t\tnewPosition *= rotateY(stageOneAngle);\n\t\tnewPosition.x -= halfWidth;\n\t\tnewPosition.x += interpolationFloat(0.0, 2.0 * offset, stage_1, stage_2, timePercent, 0);\n\t}\n\telse {\n\t\tfloat angle = interpolationFloat(-stageOneAngle, 0.0, stage_2, 1.0, timePercent, 0);\n\t\tnewPosition.x -= halfWidth;\n\t\tnewPosition *= rotateY(angle);\n\t\tnewPosition.x += halfWidth;\n\t}\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n"},function(t,e){t.exports="uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tgl_FragColor = timePercent < 0.5 ? srcColor : distColor;\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\n#define PI 3.14159265358\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform int option;\nvarying vec2 vUv;\nmat2 rotateOrigin(float angle) {\n\treturn mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n}\nvoid main() {\n\tfloat alphaStart;\n\tfloat alphaEnd;\n\tfloat rectStart;\n\tfloat rectEnd;\n\tbool isRevert = (option == 3) || (option == 2);\n\tbool rotateParam = (option == 3) || (option == 1);\n\tif (timePercent <= 0.33) {\n\t\talphaStart = isRevert ? 1.0 - (timePercent / 0.33) : 1.0;\n\t\talphaEnd = isRevert ? 1.0 : 1.0 - (timePercent / 0.33);\n\t\trectStart = isRevert ? 0.0 : 1.5;\n\t\trectEnd = isRevert ? 0.5 : 2.0;\n\t}\n\telse if ((timePercent > 0.33) && (timePercent <= 0.66)) {\n\t\talphaStart = isRevert ? 0.0 : 1.0;\n\t\talphaEnd = isRevert ? 1.0 : 0.0;\n\t\trectEnd = isRevert ? (((timePercent - 0.33) / 0.33) * 1.5) + 0.5 : 2.0 - (((timePercent - 0.33) / 0.33) * 1.5);\n\t\trectStart = rectEnd - 0.5;\n\t}\n\telse {\n\t\talphaStart = isRevert ? 0.0 : (1.0 - timePercent) / (1.0 - 0.66);\n\t\talphaEnd = isRevert ? (1.0 - timePercent) / (1.0 - 0.66) : 0.0;\n\t\trectStart = isRevert ? 1.5 : 0.0;\n\t\trectEnd = isRevert ? 2.0 : 0.5;\n\t}\n\tif (!rotateParam) {\n\t\trectStart -= 1.0;\n\t\trectEnd -= 1.0;\n\t}\n\tfloat rotate = rotateParam ? PI * 0.25 : PI * 0.75;\n\tvec2 rotateUv = vUv * rotateOrigin(rotate);\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec2 startPoint = vec2(rectStart, 0.0) * rotateOrigin(rotate);\n\tvec2 endPoint = vec2(rectEnd, 0.0) * rotateOrigin(rotate);\n\tif (rotateParam) {\n\t\tif (rotateUv.x >= endPoint.x) {\n\t\t\tsrcColor.a = isRevert ? 1.0 : 0.0;\n\t\t}\n\t\telse if (rotateUv.x <= startPoint.x) {\n\t\t\tsrcColor.a = isRevert ? 0.0 : 1.0;\n\t\t}\n\t\telse {\n\t\t\tsrcColor.a = alphaStart + (((rotateUv.x - startPoint.x) / (0.5 / sqrt(2.0))) * (alphaEnd - alphaStart));\n\t\t}\n\t}\n\telse {\n\t\tif (rotateUv.x <= endPoint.x) {\n\t\t\tsrcColor.a = isRevert ? 1.0 : 0.0;\n\t\t}\n\t\telse if (rotateUv.x >= startPoint.x) {\n\t\t\tsrcColor.a = isRevert ? 0.0 : 1.0;\n\t\t}\n\t\telse {\n\t\t\tsrcColor.a = alphaStart + (((startPoint.x - rotateUv.x) / (0.5 / sqrt(2.0))) * (alphaEnd - alphaStart));\n\t\t}\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n"},function(t,e,n){"use strict";(function(t){var r=n(105),i=n(106),o=setTimeout;function a(t){return Boolean(t&&void 0!==t.length)}function s(){}function u(t){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(t,this)}function l(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,u._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void h(e.promise,t)}c(e.promise,r)}else(1===t._state?c:h)(e.promise,t._value)}))):t._deferreds.push(e)}function c(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof u)return t._state=3,t._value=e,void d(t);if("function"==typeof n)return void p((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,d(t)}catch(e){h(t,e)}var r,i}function h(t,e){t._state=2,t._value=e,d(t)}function d(t){2===t._state&&0===t._deferreds.length&&u._immediateFn((function(){t._handled||u._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)l(t,t._deferreds[e]);t._deferreds=null}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function p(t,e){var n=!1;try{t((function(t){n||(n=!0,c(e,t))}),(function(t){n||(n=!0,h(e,t))}))}catch(t){if(n)return;n=!0,h(e,t)}}u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){var n=new this.constructor(s);return l(this,new f(t,e,n)),n},u.prototype.finally=r.a,u.all=function(t){return new u((function(e,n){if(!a(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(e){o(t,e)}),n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}for(var s=0;s<r.length;s++)o(s,r[s])}))},u.allSettled=i.a,u.resolve=function(t){return t&&"object"==typeof t&&t.constructor===u?t:new u((function(e){e(t)}))},u.reject=function(t){return new u((function(e,n){n(t)}))},u.race=function(t){return new u((function(e,n){if(!a(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=t.length;r<i;r++)u.resolve(t[r]).then(e,n)}))},u._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){o(t,0)},u._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.a=u}).call(this,n(136).setImmediate)},function(t,e,n){"use strict";e.a=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))}},function(t,e,n){"use strict";e.a=function(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,(function(e){o(t,e)}),(function(n){r[t]={status:"rejected",reason:n},0==--i&&e(r)}))}r[t]={status:"fulfilled",value:n},0==--i&&e(r)}for(var a=0;a<r.length;a++)o(a,r[a])}))}},function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=a(t),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e,n){var r=n(20),i=n(15);t.exports=function(t){return!0===t||!1===t||i(t)&&"[object Boolean]"==r(t)}},function(t,e){t.exports="precision mediump float;\nattribute vec2 aVertexPosition;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 filterCoord;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nvec4 filterVertexPosition() {\n\tvec2 position = (aVertexPosition * max(outputFrame.zw, vec2(0.))) + outputFrame.xy;\n\treturn vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\nvec2 filterTextureCoord() {\n\treturn aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\nvoid main() {\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tfilterCoord = aVertexPosition * outputFrame.zw;\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nprecision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec2 filterCoord;\nuniform vec4 uShapeFilterArea;\nuniform sampler2D uSampler;\nuniform sampler2D uSdfSampler;\nuniform float uSdfIsReady;\nuniform float uSdfMaxDis;\nuniform float uRad;\nuniform vec4 uGlowColor;\nuniform vec2 uSdfPosition;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nvoid main() {\n\tvec4 texColor = texture2D(uSampler, vTextureCoord);\n\tvec4 glowColor = vec4(uGlowColor.rgb * uGlowColor.a, uGlowColor.a);\n\tfloat a = 1.0;\n\tif (uSdfIsReady > 0.0) {\n\t\tvec2 cod = vec2(filterCoord.x / uShapeFilterArea.z, filterCoord.y / uShapeFilterArea.w);\n\t\tvec4 sdfColor = texture2D(uSdfSampler, cod + uSdfPosition);\n\t\tfloat dis = sdfColor.a * uSdfMaxDis;\n\t\tif ((sdfColor.r <= 0.0) && (dis >= (uRad * 0.5))) {\n\t\t\ta = 1.0 - smoothstep(uRad * 0.5, uRad, dis);\n\t\t}\n\t}\n\tvec4 resultColor = blendSrcOver(texColor, glowColor);\n\tresultColor.rgb *= resultColor.a;\n\tresultColor.rgb *= a;\n\tresultColor.a *= a;\n\tgl_FragColor = resultColor;\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec2 filterCoord;\nuniform vec4 uShapeFilterArea;\nuniform sampler2D uSampler;\nuniform sampler2D uSdfSampler;\nuniform float uSdfIsReady;\nuniform float uSdfMaxDis;\nuniform float uRad;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nvoid main() {\n\tvec4 texColor = texture2D(uSampler, vTextureCoord);\n\tif (uSdfIsReady > 0.0) {\n\t\tfloat dx = uShapeFilterArea.x < 0.0 ? -uShapeFilterArea.x : 0.0;\n\t\tfloat dy = uShapeFilterArea.y < 0.0 ? -uShapeFilterArea.y : 0.0;\n\t\tvec2 cod = vec2((filterCoord.x + dx) / uShapeFilterArea.z, (filterCoord.y + dy) / uShapeFilterArea.w);\n\t\tvec4 sdfColor = texture2D(uSdfSampler, cod);\n\t\tfloat dis = sdfColor.a * uSdfMaxDis;\n\t\tif (texColor.a > 0.0392156862745098) {\n\t\t\tif (dis <= (uRad / 2.0)) {\n\t\t\t\tfloat a = smoothstep(0.0, uRad / 2.0, dis) * 0.1;\n\t\t\t\ttexColor.rgb *= a;\n\t\t\t\ttexColor.a = a;\n\t\t\t}\n\t\t\telse if ((dis > (uRad / 2.0)) && (dis < (uRad * 1.2))) {\n\t\t\t\tfloat a = (smoothstep(uRad / 2.0, uRad * 1.2, dis) * 0.9) + 0.1;\n\t\t\t\ttexColor.rgb *= a;\n\t\t\t\ttexColor.a = a;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\ttexColor.rgba *= 0.0;\n\t\t}\n\t}\n\tgl_FragColor = texColor;\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nvoid main() {\n\tvec4 sourceColor = texture2D(uSampler, vTextureCoord);\n\tif (sourceColor.a == 0.0) {\n\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t}\n\telse {\n\t\tgl_FragColor = uColor * sourceColor.a;\n\t}\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform vec4 inputSize;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform float uStartAlpha;\nuniform float uEndAlpha;\nuniform float uStartPos;\nuniform float uEndPos;\nuniform float uHeight;\nvoid main() {\n\tvec4 sourceColor = texture2D(uSampler, vTextureCoord);\n\tvec2 cod = vTextureCoord * inputSize.xy;\n\tfloat startY = uStartPos * uHeight;\n\tfloat endY = uEndPos * uHeight;\n\tif ((cod.y >= startY) && (cod.y <= endY)) {\n\t\tfloat alpha = uStartAlpha - (((cod.y - startY) / (endY - startY)) * (uStartAlpha - uEndAlpha));\n\t\tgl_FragColor = sourceColor * alpha;\n\t}\n\telse {\n\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t}\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 vTextureCoord;\nuniform vec4 inputSize;\nvarying vec2 filterCoord;\nuniform vec4 uShapeFilterArea;\nuniform sampler2D uSampler;\nvoid main() {\n\tvec4 texColor = texture2D(uSampler, vTextureCoord);\n\tif (texColor.r > 0.0) {\n\t\tvec2 translateCoord = vec2(filterCoord.x + 10.0, filterCoord.y);\n\t\tvec4 translateColor = texture2D(uSampler, translateCoord * inputSize.zw);\n\t\tif (translateColor.a > 0.0) {\n\t\t\tgl_FragColor = texColor;\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t\t}\n\t}\n\telse {\n\t\tgl_FragColor = texColor;\n\t}\n}\n"},function(t,e,n){(function(n){var r;!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var t=this||o;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||o;if(t=parseFloat(t),e.ctx||f(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,o.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=e._howls[n]._soundById(r[i]);a&&a._node&&(a._node.volume=a._volume*t)}return e}return e._volume},mute:function(t){var e=this||o;e.ctx||f(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,o.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=e._howls[n]._soundById(r[i]);a&&a._node&&(a._node.muted=!!t||a._muted)}return e},stop:function(){for(var t=this||o,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||o,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,f()),t},codecs:function(t){return(this||o)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||o;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||o,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator?t._navigator.userAgent:"",i=r.match(/OPR\/([0-6].)/g),a=i&&parseInt(i[0].split("/")[1],10)<33,s=-1!==r.indexOf("Safari")&&-1===r.indexOf("Chrome"),u=r.match(/Version\/(.*?) /),l=s&&u&&parseInt(u[1],10)<15;return t._codecs={mp3:!(a||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||o;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function e(n){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,t._releaseHtml5Audio(r)}catch(n){t.noAudio=!0;break}for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var o=t._howls[i]._getSoundIds(),a=0;a<o.length;a++){var s=t._howls[i]._soundById(o[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}t._autoResume();var u=t.ctx.createBufferSource();u.buffer=t._scratchBuffer,u.connect(t.ctx.destination),void 0===u.start?u.noteOn(0):u.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),u.onended=function(){u.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var n=0;n<t._howls.length;n++)t._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||o;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||o;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&o.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&o.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var o=new i,a=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(t){var e=this;return o.ctx||f(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=o.usingWebAudio&&!e._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var e=0;e<this._src.length;e++){var n,r;if(this._format&&this._format[e])n=this._format[e];else{if("string"!=typeof(r=this._src[e])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&o.codecs(n)){t=this._src[e];break}}if(t)return this._src=t,this._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new s(this),this._webAudio&&l(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var n=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t&&(t="__default",!n._playLock)){for(var i=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(i++,r=n._sounds[a]._id);1===i?t=null:r=null}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!t&&(t=s._sprite||"__default"),"loaded"!==n._state){s._sprite=t,s._ended=!1;var u=s._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(r&&!s._paused)return e||n._loadQueue("play"),s._id;n._webAudio&&o._autoResume();var l=Math.max(0,s._seek>0?s._seek:n._sprite[t][0]/1e3),c=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-l),h=1e3*c/Math.abs(s._rate),d=n._sprite[t][0]/1e3,f=(n._sprite[t][0]+n._sprite[t][1])/1e3;s._sprite=t,s._ended=!1;var p=function(){s._paused=!1,s._seek=l,s._start=d,s._stop=f,s._loop=!(!s._loop&&!n._sprite[t][2])};if(!(l>=f)){var v=s._node;if(n._webAudio){var m=function(){n._playLock=!1,p(),n._refreshBuffer(s);var t=s._muted||n._muted?0:s._volume;v.gain.setValueAtTime(t,o.ctx.currentTime),s._playStart=o.ctx.currentTime,void 0===v.bufferSource.start?s._loop?v.bufferSource.noteGrainOn(0,l,86400):v.bufferSource.noteGrainOn(0,l,c):s._loop?v.bufferSource.start(0,l,86400):v.bufferSource.start(0,l,c),h!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),h)),e||setTimeout((function(){n._emit("play",s._id),n._loadQueue()}),0)};"running"===o.state&&"interrupted"!==o.ctx.state?m():(n._playLock=!0,n.once("resume",m),n._clearTimer(s._id))}else{var g=function(){v.currentTime=l,v.muted=s._muted||n._muted||o._muted||v.muted,v.volume=s._volume*o.volume(),v.playbackRate=s._rate;try{var r=v.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,p(),r.then((function(){n._playLock=!1,v._unlocked=!0,e?n._loadQueue():n._emit("play",s._id)})).catch((function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):e||(n._playLock=!1,p(),n._emit("play",s._id)),v.playbackRate=s._rate,v.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),h):(n._endTimers[s._id]=function(){n._ended(s),v.removeEventListener("ended",n._endTimers[s._id],!1)},v.addEventListener("ended",n._endTimers[s._id],!1))}catch(t){n._emit("playerror",s._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===v.src&&(v.src=n._src,v.load());var y=window&&window.ejecta||!v.readyState&&o._navigator.isCocoonJS;if(v.readyState>=3||y)g();else{n._playLock=!0,n._state="loading";v.addEventListener(o._canPlayEvent,(function t(){n._state="loaded",g(),v.removeEventListener(o._canPlayEvent,t,!1)}),!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),r=0;r<n.length;r++){e._clearTimer(n[r]);var i=e._soundById(n[r]);if(i&&!i._paused&&(i._seek=e.seek(n[r]),i._rateSeek=0,i._paused=!0,e._stopFade(n[r]),i._node))if(e._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),e._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||e._emit("pause",i?i._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var r=n._getSoundIds(t),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),e||n._emit("stop",o._id))}return n},mute:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var r=n._getSoundIds(e),i=0;i<r.length;i++){var a=n._soundById(r[i]);a&&(a._muted=t,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(t?0:a._volume,o.ctx.currentTime):a._node&&(a._node.muted=!!o._muted||t),n._emit("mute",a._id))}return n},volume:function(){var t,e,n,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]){var a=r._getSoundIds(),s=a.indexOf(i[0]);s>=0?e=parseInt(i[0],10):t=parseFloat(i[0])}else i.length>=2&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(n=e?r._soundById(e):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===e&&(r._volume=t),e=r._getSoundIds(e);for(var u=0;u<e.length;u++)(n=r._soundById(e[u]))&&(n._volume=t,i[2]||r._stopFade(e[u]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(t,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=t*o.volume()),r._emit("volume",n._id));return r},fade:function(t,e,n,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(t,e,n,r)}}),i;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),n=parseFloat(n),i.volume(t,r);for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if(r||i._stopFade(a[s]),i._webAudio&&!u._muted){var l=o.ctx.currentTime,c=l+n/1e3;u._volume=t,u._node.gain.setValueAtTime(t,l),u._node.gain.linearRampToValueAtTime(e,c)}i._startFadeInterval(u,t,e,n,a[s],void 0===r)}}return i},_startFadeInterval:function(t,e,n,r,i,o){var a=this,s=e,u=n-e,l=Math.abs(u/.01),c=Math.max(4,l>0?r/l:r),h=Date.now();t._fadeTo=n,t._interval=setInterval((function(){var i=(Date.now()-h)/r;h=Date.now(),s+=u*i,s=Math.round(100*s)/100,s=u<0?Math.max(n,s):Math.min(n,s),a._webAudio?t._volume=s:a.volume(s,t._id,!0),o&&(a._volume=s),(n<e&&s<=n||n>e&&s>=n)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(n,t._id),a._emit("fade",t._id))}),c)},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(e._interval),e._interval=null,this.volume(e._fadeTo,t),e._fadeTo=null,this._emit("fade",t)),this},loop:function(){var t,e,n,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=r._soundById(parseInt(i[0],10)))&&n._loop;t=i[0],r._loop=t}else 2===i.length&&(t=i[0],e=parseInt(i[1],10));for(var o=r._getSoundIds(e),a=0;a<o.length;a++)(n=r._soundById(o[a]))&&(n._loop=t,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,r.playing(o[a])&&(r.pause(o[a],!0),r.play(o[a],!0)))));return r},rate:function(){var t,e,n,r=this,i=arguments;if(0===i.length)e=r._sounds[0]._id;else if(1===i.length){var a=r._getSoundIds(),s=a.indexOf(i[0]);s>=0?e=parseInt(i[0],10):t=parseFloat(i[0])}else 2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if("number"!=typeof t)return(n=r._soundById(e))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===e&&(r._rate=t),e=r._getSoundIds(e);for(var u=0;u<e.length;u++)if(n=r._soundById(e[u])){r.playing(e[u])&&(n._rateSeek=r.seek(e[u]),n._playStart=r._webAudio?o.ctx.currentTime:n._playStart),n._rate=t,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(t,o.ctx.currentTime):n._node&&(n._node.playbackRate=t);var l=r.seek(e[u]),c=(r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-l,h=1e3*c/Math.abs(n._rate);!r._endTimers[e[u]]&&n._paused||(r._clearTimer(e[u]),r._endTimers[e[u]]=setTimeout(r._ended.bind(r,n),h)),r._emit("rate",n._id)}return r},seek:function(){var t,e,n=this,r=arguments;if(0===r.length)n._sounds.length&&(e=n._sounds[0]._id);else if(1===r.length){var i=n._getSoundIds(),a=i.indexOf(r[0]);a>=0?e=parseInt(r[0],10):n._sounds.length&&(e=n._sounds[0]._id,t=parseFloat(r[0]))}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(void 0===e)return 0;if("number"==typeof t&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var s=n._soundById(e);if(s){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var u=n.playing(e)?o.ctx.currentTime-s._playStart:0,l=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(l+u*Math.abs(s._rate))}return s._node.currentTime}var c=n.playing(e);c&&n.pause(e,!0),s._seek=t,s._ended=!1,n._clearTimer(e),n._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=t);var h=function(){c&&n.play(e,!0),n._emit("seek",e)};if(c&&!n._webAudio){var d=function t(){n._playLock?setTimeout(t,0):h()};setTimeout(d,0)}else h()}return n},playing:function(t){if("number"==typeof t){var e=this._soundById(t);return!!e&&!e._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this._duration,n=this._soundById(t);return n&&(e=this._sprite[n._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++)e[n]._paused||t.stop(e[n]._id),t._webAudio||(t._clearSound(e[n]._node),e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(o._canPlayEvent,e[n]._loadFn,!1),e[n]._node.removeEventListener("ended",e[n]._endFn,!1),o._releaseHtml5Audio(e[n]._node)),delete e[n]._node,t._clearTimer(e[n]._id);var r=o._howls.indexOf(t);r>=0&&o._howls.splice(r,1);var i=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===t._src||t._src.indexOf(o._howls[n]._src)>=0){i=!1;break}return u&&i&&delete u[t._src],o.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,r){var i=this["_on"+t];return"function"==typeof e&&i.push(r?{id:n,fn:e,once:r}:{id:n,fn:e}),this},off:function(t,e,n){var r=this["_on"+t],i=0;if("number"==typeof e&&(n=e,e=null),e||n)for(i=0;i<r.length;i++){var o=n===r[i].id;if(e===r[i].fn&&o||!e&&o){r.splice(i,1);break}}else if(t)this["_on"+t]=[];else{var a=Object.keys(this);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(this[a[i]])&&(this[a[i]]=[])}return this},once:function(t,e,n){return this.on(t,e,n,1),this},_emit:function(t,e,n){for(var r=this["_on"+t],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(this,r[i].fn),0),r[i].once&&this.off(t,r[i].fn,r[i].id));return this._loadQueue(t),this},_loadQueue:function(t){if(this._queue.length>0){var e=this._queue[0];e.event===t&&(this._queue.shift(),this._loadQueue()),t||e.action()}return this},_ended:function(t){var e=t._sprite;if(!this._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(this._ended.bind(this,t),100),this;var n=!(!t._loop&&!this._sprite[e][2]);if(this._emit("end",t._id),!this._webAudio&&n&&this.stop(t._id,!0).play(t._id),this._webAudio&&n){this._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=o.ctx.currentTime;var r=1e3*(t._stop-t._start)/Math.abs(t._rate);this._endTimers[t._id]=setTimeout(this._ended.bind(this,t),r)}return this._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,this._clearTimer(t._id),this._cleanBuffer(t._node),o._autoSuspend()),this._webAudio||n||this.stop(t._id,!0),this},_clearTimer:function(t){if(this._endTimers[t]){if("function"!=typeof this._endTimers[t])clearTimeout(this._endTimers[t]);else{var e=this._soundById(t);e&&e._node&&e._node.removeEventListener("ended",this._endTimers[t],!1)}delete this._endTimers[t]}return this},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){this._drain();for(var t=0;t<this._sounds.length;t++)if(this._sounds[t]._ended)return this._sounds[t].reset();return new s(this)},_drain:function(){var t=this._pool,e=0,n=0;if(!(this._sounds.length<t)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&e++;for(n=this._sounds.length-1;n>=0;n--){if(e<=t)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),e--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],n=0;n<this._sounds.length;n++)e.push(this._sounds[n]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=o.ctx.createBufferSource(),t._node.bufferSource.buffer=u[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,o.ctx.currentTime),this},_cleanBuffer:function(t){var e=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=o._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(t){this._parent=t,this.init()};s.prototype={init:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,t._sounds.push(this),this.create(),this},create:function(){var t=this._parent,e=o._muted||this._muted||this._parent._muted?0:this._volume;return t._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(e,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):o.noAudio||(this._node=o._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=t._src,this._node.preload=!0===t._preload?"auto":t._preload,this._node.volume=e*o.volume(),this._node.load()),this},reset:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)},_endListener:function(){var t=this._parent;t._duration===1/0&&(t._duration=Math.ceil(10*this._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var u={},l=function(t){var e=t._src;if(u[e])return t._duration=u[e].duration,void d(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);h(r.buffer,t)}else{var o=new XMLHttpRequest;o.open(t._xhr.method,e,!0),o.withCredentials=t._xhr.withCredentials,o.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){o.setRequestHeader(e,t._xhr.headers[e])})),o.onload=function(){var e=(o.status+"")[0];"0"===e||"2"===e||"3"===e?h(o.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete u[e],t.load())},c(o)}},c=function(t){try{t.send()}catch(e){t.onerror()}},h=function(t,e){var n=function(){e._emit("loaderror",null,"Decoding audio data failed.")},r=function(t){t&&e._sounds.length>0?(u[e._src]=t,d(e,t)):n()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(t).then(r).catch(n):o.ctx.decodeAudioData(t,r,n)},d=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},f=function(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(t){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),e=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&n<9){var r=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!r&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};void 0===(r=function(){return{Howler:o,Howl:a}}.apply(e,[]))||(t.exports=r),e.Howler=o,e.Howl=a,void 0!==n?(n.HowlerGlobal=i,n.Howler=o,n.Howl=a,n.Sound=s):"undefined"!=typeof window&&(window.HowlerGlobal=i,window.Howler=o,window.Howl=a,window.Sound=s)}(),function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){if(!this.ctx||!this.ctx.listener)return this;for(var e=this._howls.length-1;e>=0;e--)this._howls[e].stereo(t);return this},HowlerGlobal.prototype.pos=function(t,e,n){return this.ctx&&this.ctx.listener?(e="number"!=typeof e?this._pos[1]:e,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof t?this._pos:(this._pos=[t,e,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(t,e,n,r,i,o){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return e="number"!=typeof e?a[1]:e,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,i="number"!=typeof i?a[4]:i,o="number"!=typeof o?a[5]:o,"number"!=typeof t?a:(this._orientation=[t,e,n,r,i,o],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(t,e,n,r,i,o),this)},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,i),"spatial"===i?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,n,r,i)}}),o;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===i){if("number"!=typeof t)return o._pos;o._pos=[t,n,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if("number"!=typeof t)return u._pos;u._pos=[t,n,r],u._node&&(u._panner&&!u._panner.pan||e(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setPosition(t,n,r)),o._emit("pos",u._id)}}return o},Howl.prototype.orientation=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,r,i)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,r="number"!=typeof r?o._orientation[2]:r,void 0===i){if("number"!=typeof t)return o._orientation;o._orientation=[t,n,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if("number"!=typeof t)return u._orientation;u._orientation=[t,n,r],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),e(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setOrientation(t,n,r)),o._emit("orientation",u._id)}}return o},Howl.prototype.pannerAttr=function(){var t,n,r,i=this,o=arguments;if(!i._webAudio)return i;if(0===o.length)return i._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return(r=i._soundById(parseInt(o[0],10)))?r._pannerAttr:i._pannerAttr;t=o[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:i._panningModel})}else 2===o.length&&(t=o[0],n=parseInt(o[1],10));for(var a=i._getSoundIds(n),s=0;s<a.length;s++)if(r=i._soundById(a[s])){var u=r._pannerAttr;u={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:u.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:u.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:u.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:u.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:u.panningModel};var l=r._panner;l?(l.coneInnerAngle=u.coneInnerAngle,l.coneOuterAngle=u.coneOuterAngle,l.coneOuterGain=u.coneOuterGain,l.distanceModel=u.distanceModel,l.maxDistance=u.maxDistance,l.refDistance=u.refDistance,l.rolloffFactor=u.rolloffFactor,l.panningModel=u.panningModel):(r._pos||(r._pos=i._pos||[0,0,-.5]),e(r,"spatial"))}return i},Sound.prototype.init=function(t){return function(){var e=this._parent;this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,t.call(this),this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this._parent;return this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,this._stereo?e.stereo(this._stereo):this._pos?e.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,e._refreshBuffer(this)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(this,n(17))},function(t,e){t.exports="varying vec2 vTextureCoord;\nvarying vec2 vVertexPosition;\nvarying float vPercent;\nvarying float vDirection;\nvarying float vTransition;\nuniform sampler2D uSampler;\nvoid main() {\n\tvec4 outputColor;\n\tfloat percent = vPercent;\n\tfloat direction = vDirection;\n\tif (vTransition < 0.0) {\n\t\tpercent = 1.0 - percent;\n\t\tif ((vDirection > 1.5) && (vDirection < 2.5)) {\n\t\t\tdirection = 1.0;\n\t\t}\n\t\telse if ((vDirection > 0.5) && (vDirection < 1.5)) {\n\t\t\tdirection = 2.0;\n\t\t}\n\t\telse if ((vDirection > 2.5) && (vDirection < 3.5)) {\n\t\t\tdirection = 4.0;\n\t\t}\n\t\telse {\n\t\t\tdirection = 3.0;\n\t\t}\n\t}\n\tif ((direction > 1.5) && (direction < 2.5)) {\n\t\tif (vVertexPosition.y >= (1.0 - percent)) {\n\t\t\toutputColor = texture2D(uSampler, vTextureCoord);\n\t\t}\n\t\telse {\n\t\t\toutputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\tif ((vVertexPosition.y >= (1.0 - percent)) && (vVertexPosition.y <= ((1.0 - percent) + 0.2))) {\n\t\t\toutputColor = outputColor * ((vVertexPosition.y - (1.0 - percent)) / 0.2);\n\t\t}\n\t}\n\telse if ((direction > 0.5) && (direction < 1.5)) {\n\t\tif (vVertexPosition.y <= percent) {\n\t\t\toutputColor = texture2D(uSampler, vTextureCoord);\n\t\t}\n\t\telse {\n\t\t\toutputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\tif ((vVertexPosition.y <= percent) && (vVertexPosition.y >= (percent - 0.2))) {\n\t\t\toutputColor = outputColor * (1.0 - ((vVertexPosition.y - (percent - 0.2)) / 0.2));\n\t\t}\n\t}\n\telse if ((direction > 2.5) && (direction < 3.5)) {\n\t\tif (vVertexPosition.x <= percent) {\n\t\t\toutputColor = texture2D(uSampler, vTextureCoord);\n\t\t}\n\t\telse {\n\t\t\toutputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\tif ((vVertexPosition.x <= percent) && (vVertexPosition.x >= (percent - 0.2))) {\n\t\t\toutputColor = outputColor * (1.0 - ((vVertexPosition.x - (percent - 0.2)) / 0.2));\n\t\t}\n\t}\n\telse {\n\t\tif (vVertexPosition.x >= (1.0 - percent)) {\n\t\t\toutputColor = texture2D(uSampler, vTextureCoord);\n\t\t}\n\t\telse {\n\t\t\toutputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\tif ((vVertexPosition.x >= (1.0 - percent)) && (vVertexPosition.x <= ((1.0 - percent) + 0.2))) {\n\t\t\toutputColor = outputColor * ((vVertexPosition.x - (1.0 - percent)) / 0.2);\n\t\t}\n\t}\n\tgl_FragColor = outputColor;\n}\n"},function(t,e){t.exports="attribute vec2 aVertexPosition;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 vVertexPosition;\nvarying float vPercent;\nvarying float vDirection;\nvarying float vTransition;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nuniform float percent;\nuniform float direction;\nuniform float transition;\nvec4 filterVertexPosition() {\n\tvec2 position = (aVertexPosition * max(outputFrame.zw, vec2(0.))) + outputFrame.xy;\n\treturn vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\nvec2 filterTextureCoord(vec2 aVertexPosition) {\n\treturn aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\nvoid main() {\n\tvTransition = transition;\n\tvDirection = direction;\n\tvPercent = percent;\n\tvVertexPosition = aVertexPosition;\n\tvec2 localVertexPosition = aVertexPosition;\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord(localVertexPosition);\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nuniform float transition;\nvoid main() {\n\tfloat alpha = (transition * (percent - 0.5)) + 0.5;\n\tvec4 color1 = texture2D(uSampler, vTextureCoord);\n\tgl_FragColor = color1 * alpha;\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 position = vec2(uBoundRect.z - filterCoord.x, uBoundRect.w - filterCoord.y);\n\tfloat timePercent = transition > 0.0 ? percent : 1.0 - percent;\n\tfloat barCount = 6.0;\n\tfloat barWidth = (option < 0.5 ? uBoundRect.w : uBoundRect.z) / barCount;\n\tfloat alphaWidthPercent = 0.03;\n\tfloat alphaWidth = alphaWidthPercent * (option < 0.5 ? uBoundRect.w : uBoundRect.z);\n\tfloat selectAxis = option < 0.5 ? -position.y : -position.x;\n\tfloat countAxis = floor(selectAxis / barWidth);\n\tfloat modAxis = mod(selectAxis, barWidth);\n\tfloat timePosition = barWidth * timePercent;\n\tif (modAxis < timePosition) {\n\t\toutputColor = outputColor;\n\t}\n\telse if (modAxis < (timePosition + alphaWidth)) {\n\t\toutputColor = (outputColor * ((alphaWidth - modAxis) + timePosition)) / alphaWidth;\n\t}\n\telse {\n\t\toutputColor = outputColor * 0.0;\n\t}\n\tgl_FragColor = outputColor;\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 position = vec2(uBoundRect.z - filterCoord.x, uBoundRect.w - filterCoord.y);\n\tfloat timePercent = transition > 0.0 ? percent : 1.0 - percent;\n\tfloat barCount = 6.0;\n\tfloat horizontalBarWidth = uBoundRect.z / barCount;\n\tfloat verticalBarWidth = uBoundRect.w / barCount;\n\tfloat alphaWidthPercent = 0.01;\n\tfloat alphaWidth = alphaWidthPercent * (option < 0.5 ? uBoundRect.z : uBoundRect.w);\n\tfloat timePosition = horizontalBarWidth * timePercent;\n\tfloat countAxisY = floor(-position.y / verticalBarWidth);\n\tfloat modAxisY = mod(-position.y, verticalBarWidth);\n\tfloat countAxisX = floor(-position.x / horizontalBarWidth);\n\tfloat modAxisX = mod(-position.x, horizontalBarWidth);\n\tfloat modAxis = modAxisX;\n\tif (option < 0.5) {\n\t\tif (mod(countAxisY, 2.0) > 0.5) {\n\t\t\tcountAxisX = floor(((horizontalBarWidth * 0.5) - position.x) / horizontalBarWidth);\n\t\t\tmodAxisX = mod((horizontalBarWidth * 0.5) - position.x, horizontalBarWidth);\n\t\t}\n\t\tmodAxis = modAxisX;\n\t}\n\telse {\n\t\tif (mod(countAxisX, 2.0) > 0.5) {\n\t\t\tcountAxisY = floor(((verticalBarWidth * 0.5) - position.y) / verticalBarWidth);\n\t\t\tmodAxisY = mod((verticalBarWidth * 0.5) - position.y, verticalBarWidth);\n\t\t}\n\t\tmodAxis = modAxisY;\n\t}\n\tif (modAxis < timePosition) {\n\t\toutputColor = outputColor;\n\t}\n\telse if (modAxis < (timePosition + alphaWidth)) {\n\t\toutputColor = (outputColor * ((alphaWidth - modAxis) + timePosition)) / alphaWidth;\n\t}\n\telse {\n\t\toutputColor = outputColor * 0.0;\n\t}\n\tgl_FragColor = outputColor;\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 inputSize;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform sampler2D dissolveSampler;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tfloat splitWidth = max(uBoundRect.z, uBoundRect.w) / 3.0;\n\tvec2 position = mod(filterCoord.xy, splitWidth);\n\tvec2 loopTime = floor(filterCoord.xy / splitWidth);\n\tif (loopTime.x > 0.5) {\n\t\tposition.x = splitWidth - position.x;\n\t}\n\tif (loopTime.y > 0.5) {\n\t\tposition.y = splitWidth - position.y;\n\t}\n\tvec4 dissolveColor = texture2D(dissolveSampler, position.xy / splitWidth);\n\tfloat timePercent = transition > 0.0 ? percent : 1.0 - percent;\n\tif (dissolveColor.r < percent) {\n\t\tgl_FragColor = outputColor;\n\t}\n\telse {\n\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t}\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform sampler2D dissolveSampler;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 position = vec2(uBoundRect.z - filterCoord.x, uBoundRect.w - filterCoord.y);\n\tvec4 dissolveColor;\n\tif (option > 0.5) {\n\t\tdissolveColor = texture2D(dissolveSampler, vec2(vTextureCoord.x, 0.0));\n\t}\n\telse {\n\t\tdissolveColor = texture2D(dissolveSampler, vec2(0.0, vTextureCoord.y));\n\t}\n\tif (dissolveColor.r < percent) {\n\t\tgl_FragColor = outputColor * min(percent + dissolveColor.r, 1.0);\n\t}\n\telse {\n\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t}\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nvarying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x - (uBoundRect.z / 2.0), filterCoord.y - (uBoundRect.w / 2.0));\n\tfloat timePercent = interpolationFloat(0.0, 1.0, 0.0, 1.0, percent, 2);\n\tfloat radius = sqrt(pow(uBoundRect.z, 2.0) + pow(uBoundRect.w, 2.0)) / 2.0;\n\tfloat alphaWidth = 0.1;\n\tfloat pointDistance = sqrt(pow(point.x, 2.0) + pow(point.y, 2.0));\n\tfloat alphaRadiusFormula;\n\tif (option > 0.5) {\n\t\tif (transition > 0.0) {\n\t\t\talphaRadiusFormula = 1.0 - ((pointDistance - (radius * timePercent)) / (alphaWidth * radius));\n\t\t}\n\t\telse {\n\t\t\talphaRadiusFormula = (pointDistance - (radius * timePercent)) / (alphaWidth * radius);\n\t\t}\n\t}\n\telse {\n\t\tif (transition > 0.0) {\n\t\t\talphaRadiusFormula = (pointDistance - (radius * (1.0 - timePercent))) / (alphaWidth * radius);\n\t\t}\n\t\telse {\n\t\t\talphaRadiusFormula = 1.0 - ((pointDistance - (radius * (1.0 - timePercent))) / (alphaWidth * radius));\n\t\t}\n\t}\n\tif (option > 0.5) {\n\t\tif (pointDistance < (radius * timePercent)) {\n\t\t\tgl_FragColor = transition > 0.0 ? outputColor : vec4(0, 0, 0, 0);\n\t\t}\n\t\telse if (pointDistance < (radius * (timePercent + alphaWidth))) {\n\t\t\tgl_FragColor = outputColor * alphaRadiusFormula;\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = transition > 0.0 ? vec4(0, 0, 0, 0) : outputColor;\n\t\t}\n\t}\n\telse {\n\t\tif (pointDistance < (radius * (1.0 - timePercent))) {\n\t\t\tgl_FragColor = transition > 0.0 ? vec4(0, 0, 0, 0) : outputColor;\n\t\t}\n\t\telse if (pointDistance < (radius * ((1.0 - timePercent) + alphaWidth))) {\n\t\t\tgl_FragColor = outputColor * alphaRadiusFormula;\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = transition > 0.0 ? outputColor : vec4(0, 0, 0, 0);\n\t\t}\n\t}\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nvarying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x - (uBoundRect.z / 2.0), filterCoord.y - (uBoundRect.w / 2.0));\n\tfloat timePercent = interpolationFloat(0.0, 1.0, 0.0, 1.0, percent, 2);\n\tif (option < 0.5) {\n\t\ttimePercent = 1.0 - timePercent;\n\t}\n\tfloat alphaWidth = 0.2;\n\tvec2 halfRect = uBoundRect.zw / 2.0;\n\tvec2 absPoint = abs(point.xy);\n\tvec2 alphaFormula = vec2(((halfRect.x * (timePercent + alphaWidth)) - absPoint.x) / (halfRect.x * alphaWidth), ((halfRect.y * (timePercent + alphaWidth)) - absPoint.y) / (halfRect.y * alphaWidth));\n\tif (option < 0.5) {\n\t\tif ((absPoint.x < (halfRect.x * timePercent)) && (absPoint.y < (halfRect.y * timePercent))) {\n\t\t\tgl_FragColor = transition > 0.0 ? vec4(0, 0, 0, 0) : outputColor;\n\t\t}\n\t\telse if ((absPoint.x < (halfRect.x * (timePercent + alphaWidth))) && (absPoint.y < (halfRect.y * (timePercent + alphaWidth)))) {\n\t\t\tif (absPoint.x > absPoint.y) {\n\t\t\t\tgl_FragColor = outputColor * (transition > 0.0 ? 1.0 - alphaFormula.x : alphaFormula.x);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor * (transition > 0.0 ? 1.0 - alphaFormula.y : alphaFormula.y);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = transition > 0.0 ? outputColor : vec4(0, 0, 0, 0);\n\t\t}\n\t}\n\telse {\n\t\tif ((absPoint.x < (halfRect.x * timePercent)) && (absPoint.y < (halfRect.y * timePercent))) {\n\t\t\tgl_FragColor = transition > 0.0 ? outputColor : vec4(0, 0, 0, 0);\n\t\t}\n\t\telse if ((absPoint.x < (halfRect.x * (timePercent + alphaWidth))) && (absPoint.y < (halfRect.y * (timePercent + alphaWidth)))) {\n\t\t\tif (absPoint.x > absPoint.y) {\n\t\t\t\tgl_FragColor = outputColor * (transition > 0.0 ? alphaFormula.x : 1.0 - alphaFormula.x);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor * (transition > 0.0 ? alphaFormula.y : 1.0 - alphaFormula.y);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = transition > 0.0 ? vec4(0, 0, 0, 0) : outputColor;\n\t\t}\n\t}\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nvarying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x - (uBoundRect.z / 2.0), (uBoundRect.w / 2.0) - filterCoord.y);\n\tfloat timePercent = interpolationFloat(0.0, 1.0, 0.0, 1.0, percent, 2);\n\tif (option < 0.5) {\n\t\ttimePercent = 1.0 - timePercent;\n\t}\n\tfloat alphaWidth = 0.1;\n\tfloat rightTop = (((2.0 * uBoundRect.w) * timePercent) - ((uBoundRect.w * point.x) / uBoundRect.z)) - point.y;\n\tfloat rightBottom = (((uBoundRect.w * point.x) / uBoundRect.z) - ((2.0 * uBoundRect.w) * timePercent)) - point.y;\n\tfloat leftTop = (((2.0 * uBoundRect.w) * timePercent) + ((uBoundRect.w * point.x) / uBoundRect.z)) - point.y;\n\tfloat leftBottom = (((-uBoundRect.w * point.x) / uBoundRect.z) - ((2.0 * uBoundRect.w) * timePercent)) - point.y;\n\tif (((option < 0.5) && (transition > 0.0)) || ((option > 0.5) && (transition < 0.0))) {\n\t\tif ((point.x >= 0.0) && (point.y >= 0.0)) {\n\t\t\tif (rightTop < (-alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t\telse if (rightTop < 0.0) {\n\t\t\t\tgl_FragColor = outputColor * (-rightTop / (alphaWidth * uBoundRect.w));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t}\n\t\tif ((point.x >= 0.0) && (point.y <= 0.0)) {\n\t\t\tif (rightBottom < 0.0) {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t\telse if (rightBottom < (alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = (outputColor * rightBottom) / (alphaWidth * uBoundRect.w);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t}\n\t\tif ((point.x <= 0.0) && (point.y >= 0.0)) {\n\t\t\tif (leftTop < (-alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t\telse if (leftTop < 0.0) {\n\t\t\t\tgl_FragColor = outputColor * (-leftTop / (alphaWidth * uBoundRect.w));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t}\n\t\tif ((point.x <= 0.0) && (point.y <= 0.0)) {\n\t\t\tif (leftBottom < 0.0) {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t\telse if (leftBottom < (alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = (outputColor * leftBottom) / (alphaWidth * uBoundRect.w);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tif ((point.x >= 0.0) && (point.y >= 0.0)) {\n\t\t\tif (rightTop < (-alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t\telse if (rightTop < 0.0) {\n\t\t\t\tgl_FragColor = outputColor * (1.0 + (rightTop / (alphaWidth * uBoundRect.w)));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t}\n\t\tif ((point.x >= 0.0) && (point.y <= 0.0)) {\n\t\t\tif (rightBottom < 0.0) {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t\telse if (rightBottom < (alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = outputColor * (1.0 - (rightBottom / (alphaWidth * uBoundRect.w)));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t}\n\t\tif ((point.x <= 0.0) && (point.y >= 0.0)) {\n\t\t\tif (leftTop < (-alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t\telse if (leftTop < 0.0) {\n\t\t\t\tgl_FragColor = outputColor * (1.0 + (leftTop / (alphaWidth * uBoundRect.w)));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t}\n\t\tif ((point.x <= 0.0) && (point.y <= 0.0)) {\n\t\t\tif (leftBottom < 0.0) {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t\telse if (leftBottom < (alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = outputColor * (1.0 - (leftBottom / (alphaWidth * uBoundRect.w)));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t}\n\t}\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nvarying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x - (uBoundRect.z / 2.0), filterCoord.y - (uBoundRect.w / 2.0));\n\tfloat timePercent = interpolationFloat(0.0, 1.0, 0.0, 1.0, percent, 2);\n\tif (option < 0.5) {\n\t\ttimePercent = 1.0 - timePercent;\n\t}\n\tfloat alphaWidth = 0.1;\n\tvec2 absPoint = abs(point);\n\tvec2 halfRect = uBoundRect.zw / 2.0;\n\tvec2 alphaFormula = vec2(((halfRect.x * (timePercent + alphaWidth)) - absPoint.x) / (halfRect.x * alphaWidth), ((halfRect.y * (timePercent + alphaWidth)) - absPoint.y) / (halfRect.y * alphaWidth));\n\tif (((option < 0.5) && (transition > 0.0)) || ((option > 0.5) && (transition < 0.0))) {\n\t\tif ((absPoint.x < ((uBoundRect.z * 0.5) * timePercent)) || (absPoint.y < ((uBoundRect.w * 0.5) * timePercent))) {\n\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t}\n\t\telse if ((absPoint.x < ((uBoundRect.z * 0.5) * (timePercent + alphaWidth))) || (absPoint.y < ((uBoundRect.w * 0.5) * (timePercent + alphaWidth)))) {\n\t\t\tif ((absPoint.x < ((uBoundRect.z * 0.5) * (timePercent + alphaWidth))) && (absPoint.y < ((uBoundRect.w * 0.5) * (timePercent + alphaWidth)))) {\n\t\t\t\tgl_FragColor = (outputColor * (1.0 - alphaFormula.x)) * (1.0 - alphaFormula.y);\n\t\t\t}\n\t\t\telse if (absPoint.x < ((uBoundRect.z * 0.5) * (timePercent + alphaWidth))) {\n\t\t\t\tgl_FragColor = outputColor * (1.0 - alphaFormula.x);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor * (1.0 - alphaFormula.y);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = outputColor;\n\t\t}\n\t}\n\telse {\n\t\tif ((absPoint.x < ((uBoundRect.z * 0.5) * timePercent)) || (absPoint.y < ((uBoundRect.w * 0.5) * timePercent))) {\n\t\t\tgl_FragColor = outputColor;\n\t\t}\n\t\telse if ((absPoint.x < ((uBoundRect.z * 0.5) * (timePercent + alphaWidth))) || (absPoint.y < ((uBoundRect.w * 0.5) * (timePercent + alphaWidth)))) {\n\t\t\tif ((absPoint.x < ((uBoundRect.z * 0.5) * (timePercent + alphaWidth))) && (absPoint.y < ((uBoundRect.w * 0.5) * (timePercent + alphaWidth)))) {\n\t\t\t\tgl_FragColor = outputColor * (1.0 - ((1.0 - alphaFormula.x) * (1.0 - alphaFormula.y)));\n\t\t\t}\n\t\t\telse if (absPoint.x < ((uBoundRect.z * 0.5) * (timePercent + alphaWidth))) {\n\t\t\t\tgl_FragColor = outputColor * alphaFormula.x;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor * alphaFormula.y;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t}\n\t}\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x - (uBoundRect.z / 2.0), filterCoord.y - (uBoundRect.w / 2.0));\n\tvec2 absPoint = abs(point);\n\tvec2 halfRect = uBoundRect.zw / 2.0;\n\tfloat alphaWidth = 0.1;\n\tfloat timePercent = percent;\n\tif (option < 1.5) {\n\t\ttimePercent = 1.0 - timePercent;\n\t}\n\tfloat axis = (option > 0.5) && (option < 2.5) ? absPoint.y : absPoint.x;\n\tfloat compareAxis = (option > 0.5) && (option < 2.5) ? halfRect.y : halfRect.x;\n\tfloat alphaColor = abs(((timePercent * compareAxis) - axis) / (alphaWidth * compareAxis));\n\tvec4 beginColor;\n\tvec4 endColor;\n\tif ((option > 1.5) && (option < 3.5)) {\n\t\tif (transition < 0.0) {\n\t\t\tbeginColor = vec4(0, 0, 0, 0);\n\t\t\tendColor = outputColor;\n\t\t}\n\t\telse {\n\t\t\tbeginColor = outputColor;\n\t\t\tendColor = vec4(0, 0, 0, 0);\n\t\t\talphaColor = 1.0 - alphaColor;\n\t\t}\n\t}\n\telse {\n\t\tif (transition < 0.0) {\n\t\t\tbeginColor = outputColor;\n\t\t\tendColor = vec4(0, 0, 0, 0);\n\t\t\talphaColor = 1.0 - alphaColor;\n\t\t}\n\t\telse {\n\t\t\tbeginColor = vec4(0, 0, 0, 0);\n\t\t\tendColor = outputColor;\n\t\t}\n\t}\n\tif (axis < (timePercent * compareAxis)) {\n\t\tgl_FragColor = beginColor;\n\t}\n\telse if (axis < ((timePercent + alphaWidth) * compareAxis)) {\n\t\tgl_FragColor = outputColor * alphaColor;\n\t}\n\telse {\n\t\tgl_FragColor = endColor;\n\t}\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x, filterCoord.y);\n\tif ((option > 0.5) && (option < 1.5)) {\n\t\tpoint = filterCoord.xy;\n\t}\n\telse if ((option > 1.5) && (option < 2.5)) {\n\t\tpoint = uBoundRect.zw - point.xy;\n\t}\n\telse if ((option > 2.5) && (option < 3.5)) {\n\t\tpoint = vec2(uBoundRect.z - filterCoord.x, filterCoord.y);\n\t}\n\telse {\n\t\tpoint = vec2(filterCoord.x, uBoundRect.w - filterCoord.y);\n\t}\n\tfloat squareCount = 16.0;\n\tfloat horzBarWidth = uBoundRect.z / squareCount;\n\tfloat verticalBarWidth = uBoundRect.w / squareCount;\n\tfloat horzCount = floor(point.x / horzBarWidth);\n\tfloat verticalCount = floor(point.y / verticalBarWidth);\n\tfloat timePercent = (percent * squareCount) * 2.5;\n\tvec4 alphaStage;\n\tif (transition > 0.0) {\n\t\talphaStage = vec4(0.2, 0.4, 0.6, 0.8);\n\t}\n\telse {\n\t\talphaStage = vec4(0.8, 0.6, 0.4, 0.2);\n\t}\n\tif ((horzCount + verticalCount) < (timePercent - 4.0)) {\n\t\tgl_FragColor = transition > 0.0 ? outputColor : vec4(0, 0, 0, 0);\n\t}\n\telse if ((horzCount + verticalCount) < (timePercent - 3.0)) {\n\t\tgl_FragColor = outputColor * alphaStage.w;\n\t}\n\telse if ((horzCount + verticalCount) < (timePercent - 2.0)) {\n\t\tgl_FragColor = outputColor * alphaStage.z;\n\t}\n\telse if ((horzCount + verticalCount) < (timePercent - 1.0)) {\n\t\tgl_FragColor = outputColor * alphaStage.y;\n\t}\n\telse if ((horzCount + verticalCount) < timePercent) {\n\t\tgl_FragColor = outputColor * alphaStage.x;\n\t}\n\telse {\n\t\tgl_FragColor = transition > 0.0 ? vec4(0, 0, 0, 0) : outputColor;\n\t}\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\n#define PI 3.1415926538\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x - (uBoundRect.z / 2.0), filterCoord.y - (uBoundRect.w / 2.0));\n\tvec2 start = vec2(0.0, -1.0);\n\tfloat arc = acos((dot(point.xy, start) / length(point)) / length(start));\n\tif ((point.x == 0.0) && (point.y < 0.0)) {\n\t\tarc = 0.0;\n\t}\n\tif ((point.x == 0.0) && (point.y > 0.0)) {\n\t\tarc = PI;\n\t}\n\tfloat alphaBarArcWidth = 0.3;\n\tfloat timePercent = (percent * PI) * (1.0 + alphaBarArcWidth);\n\tvec3 colorAlpha = transition > 0.0 ? vec3(1.0, (timePercent - arc) / alphaBarArcWidth, 0.0) : vec3(0.0, 1.0 - ((timePercent - arc) / alphaBarArcWidth), 1.0);\n\tif ((arc + alphaBarArcWidth) <= timePercent) {\n\t\tgl_FragColor = outputColor * colorAlpha.x;\n\t}\n\telse if (arc <= timePercent) {\n\t\tgl_FragColor = outputColor * colorAlpha.y;\n\t}\n\telse {\n\t\tgl_FragColor = outputColor * colorAlpha.z;\n\t}\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\n#define PI 3.1415926538\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x - (uBoundRect.z / 2.0), filterCoord.y - (uBoundRect.w / 2.0));\n\tvec2 start = vec2(0.0, -1.0);\n\tfloat arc = acos((dot(point.xy, start) / length(point)) / length(start));\n\tif ((point.x == 0.0) && (point.y < 0.0)) {\n\t\tarc = 0.0;\n\t}\n\tif ((point.x == 0.0) && (point.y > 0.0)) {\n\t\tarc = PI;\n\t}\n\tif (point.x < 0.0) {\n\t\tarc = (2.0 * PI) - arc;\n\t}\n\tarc = arc == 0.0 ? arc : mod(arc, (2.0 * PI) / option);\n\tfloat totalAlphaBarArcWidth = 0.75;\n\tfloat alphaBarArcWidth = totalAlphaBarArcWidth / option;\n\tfloat timePercent = ((percent * PI) * (2.0 + totalAlphaBarArcWidth)) / option;\n\tvec3 colorAlpha = transition > 0.0 ? vec3(1.0, (timePercent - arc) / alphaBarArcWidth, 0.0) : vec3(0.0, 1.0 - ((timePercent - arc) / alphaBarArcWidth), 1.0);\n\tif ((arc + alphaBarArcWidth) <= timePercent) {\n\t\tgl_FragColor = outputColor * colorAlpha.x;\n\t}\n\telse if (arc <= timePercent) {\n\t\tgl_FragColor = outputColor * colorAlpha.y;\n\t}\n\telse {\n\t\tgl_FragColor = outputColor * colorAlpha.z;\n\t}\n}\n"},function(t,e,n){var r;!function(i,o){"use strict";var a="model",s="name",u="type",l="vendor",c="version",h="mobile",d="tablet",f="smarttv",p=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].toUpperCase()]=t[n];return e},v=function(t,e){return"string"==typeof t&&-1!==m(e).indexOf(m(t))},m=function(t){return t.toLowerCase()},g=function(t,e){if("string"==typeof t)return t=t.replace(/^\s\s*/,"").replace(/\s\s*$/,""),void 0===e?t:t.substring(0,255)},y=function(t,e){for(var n,r,i,o,a,s,u=0;u<e.length&&!a;){var l=e[u],c=e[u+1];for(n=r=0;n<l.length&&!a;)if(a=l[n++].exec(t))for(i=0;i<c.length;i++)s=a[++r],"object"==typeof(o=c[i])&&o.length>0?2===o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3===o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4===o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},_=function(t,e){for(var n in e)if("object"==typeof e[n]&&e[n].length>0){for(var r=0;r<e[n].length;r++)if(v(e[n][r],t))return"?"===n?void 0:n}else if(v(e[n],t))return"?"===n?void 0:n;return t},x={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},b={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[c,[s,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[c,[s,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[s,c],[/opios[\/ ]+([\w\.]+)/i],[c,[s,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[c,[s,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[s,c],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[c,[s,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[c,[s,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[c,[s,"WeChat"]],[/konqueror\/([\w\.]+)/i],[c,[s,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[c,[s,"IE"]],[/yabrowser\/([\w\.]+)/i],[c,[s,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[s,/(.+)/,"$1 Secure Browser"],c],[/\bfocus\/([\w\.]+)/i],[c,[s,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[c,[s,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[c,[s,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[c,[s,"Dolphin"]],[/coast\/([\w\.]+)/i],[c,[s,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[c,[s,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[c,[s,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[s,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[s,/(.+)/,"$1 Browser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],c],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[s,c],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[s],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[s,"Facebook"],c],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[s,c],[/\bgsa\/([\w\.]+) .*safari\//i],[c,[s,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[c,[s,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[s,"Chrome WebView"],c],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[c,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[s,c],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[c,[s,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[c,s],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[s,[c,_,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[s,c],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[s,"Netscape"],c],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[c,[s,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[s,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",m]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[["architecture","arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[["architecture","armhf"]],[/windows (ce|mobile); ppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[["architecture",/ower/,"",m]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[["architecture",m]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[a,[l,"Samsung"],[u,d]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[a,[l,"Samsung"],[u,h]],[/\((ip(?:hone|od)[\w ]*);/i],[a,[l,"Apple"],[u,h]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[a,[l,"Apple"],[u,d]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[a,[l,"Huawei"],[u,d]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[a,[l,"Huawei"],[u,h]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[a,/_/g," "],[l,"Xiaomi"],[u,h]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[a,/_/g," "],[l,"Xiaomi"],[u,d]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[a,[l,"OPPO"],[u,h]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[a,[l,"Vivo"],[u,h]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[a,[l,"Realme"],[u,h]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[a,[l,"Motorola"],[u,h]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[a,[l,"Motorola"],[u,d]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[a,[l,"LG"],[u,d]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[a,[l,"LG"],[u,h]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[a,[l,"Lenovo"],[u,d]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[a,/_/g," "],[l,"Nokia"],[u,h]],[/(pixel c)\b/i],[a,[l,"Google"],[u,d]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[a,[l,"Google"],[u,h]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[l,"Sony"],[u,h]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[a,"Xperia Tablet"],[l,"Sony"],[u,d]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[a,[l,"OnePlus"],[u,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[a,[l,"Amazon"],[u,d]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[a,/(.+)/g,"Fire Phone $1"],[l,"Amazon"],[u,h]],[/(playbook);[-\w\),; ]+(rim)/i],[a,l,[u,d]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[a,[l,"BlackBerry"],[u,h]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[a,[l,"ASUS"],[u,d]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[a,[l,"ASUS"],[u,h]],[/(nexus 9)/i],[a,[l,"HTC"],[u,d]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[l,[a,/_/g," "],[u,h]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[a,[l,"Acer"],[u,d]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[a,[l,"Meizu"],[u,h]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[a,[l,"Sharp"],[u,h]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,a,[u,h]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,a,[u,d]],[/(surface duo)/i],[a,[l,"Microsoft"],[u,d]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[a,[l,"Fairphone"],[u,h]],[/(u304aa)/i],[a,[l,"AT&T"],[u,h]],[/\bsie-(\w*)/i],[a,[l,"Siemens"],[u,h]],[/\b(rct\w+) b/i],[a,[l,"RCA"],[u,d]],[/\b(venue[\d ]{2,7}) b/i],[a,[l,"Dell"],[u,d]],[/\b(q(?:mv|ta)\w+) b/i],[a,[l,"Verizon"],[u,d]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[a,[l,"Barnes & Noble"],[u,d]],[/\b(tm\d{3}\w+) b/i],[a,[l,"NuVision"],[u,d]],[/\b(k88) b/i],[a,[l,"ZTE"],[u,d]],[/\b(nx\d{3}j) b/i],[a,[l,"ZTE"],[u,h]],[/\b(gen\d{3}) b.+49h/i],[a,[l,"Swiss"],[u,h]],[/\b(zur\d{3}) b/i],[a,[l,"Swiss"],[u,d]],[/\b((zeki)?tb.*\b) b/i],[a,[l,"Zeki"],[u,d]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],a,[u,d]],[/\b(ns-?\w{0,9}) b/i],[a,[l,"Insignia"],[u,d]],[/\b((nxa|next)-?\w{0,9}) b/i],[a,[l,"NextBook"],[u,d]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],a,[u,h]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],a,[u,h]],[/\b(ph-1) /i],[a,[l,"Essential"],[u,h]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[a,[l,"Envizen"],[u,d]],[/\b(trio[-\w\. ]+) b/i],[a,[l,"MachSpeed"],[u,d]],[/\btu_(1491) b/i],[a,[l,"Rotor"],[u,d]],[/(shield[\w ]+) b/i],[a,[l,"Nvidia"],[u,d]],[/(sprint) (\w+)/i],[l,a,[u,h]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[l,"Microsoft"],[u,h]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[a,[l,"Zebra"],[u,d]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[a,[l,"Zebra"],[u,h]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,a,[u,"console"]],[/droid.+; (shield) bui/i],[a,[l,"Nvidia"],[u,"console"]],[/(playstation [345portablevi]+)/i],[a,[l,"Sony"],[u,"console"]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[a,[l,"Microsoft"],[u,"console"]],[/smart-tv.+(samsung)/i],[l,[u,f]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[l,"Samsung"],[u,f]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,"LG"],[u,f]],[/(apple) ?tv/i],[l,[a,"Apple TV"],[u,f]],[/crkey/i],[[a,"Chromecast"],[l,"Google"],[u,f]],[/droid.+aft(\w)( bui|\))/i],[a,[l,"Amazon"],[u,f]],[/\(dtv[\);].+(aquos)/i],[a,[l,"Sharp"],[u,f]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[l,g],[a,g],[u,f]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,f]],[/((pebble))app/i],[l,a,[u,"wearable"]],[/droid.+; (glass) \d/i],[a,[l,"Google"],[u,"wearable"]],[/droid.+; (wt63?0{2,3})\)/i],[a,[l,"Zebra"],[u,"wearable"]],[/(quest( 2)?)/i],[a,[l,"Facebook"],[u,"wearable"]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[u,"embedded"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[a,[u,h]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[a,[u,d]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,d]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[u,h]],[/(android[-\w\. ]{0,9});.+buil/i],[a,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[c,[s,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[c,[s,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[s,c],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[c,s]],os:[[/microsoft (windows) (vista|xp)/i],[s,c],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[s,[c,_,x]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[s,"Windows"],[c,_,x]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[c,/_/g,"."],[s,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[s,"Mac OS"],[c,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[c,s],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[s,c],[/\(bb(10);/i],[c,[s,"BlackBerry"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[c,[s,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[c,[s,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[c,[s,"webOS"]],[/crkey\/([\d\.]+)/i],[c,[s,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[s,"Chromium OS"],c],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[s,c],[/(sunos) ?([\w\.\d]*)/i],[[s,"Solaris"],c],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[s,c]]},T=function t(e,n){if("object"==typeof e&&(n=e,e=void 0),!(this instanceof t))return new t(e,n).getResult();var r=e||(void 0!==i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),o=n?function(t,e){var n={};for(var r in t)e[r]&&e[r].length%2==0?n[r]=e[r].concat(t[r]):n[r]=t[r];return n}(b,n):b;return this.getBrowser=function(){var t,e={name:void 0,version:void 0};return y.call(e,r,o.browser),e.major="string"==typeof(t=e.version)?t.replace(/[^\d\.]/g,"").split(".")[0]:void 0,e},this.getCPU=function(){var t={architecture:void 0};return y.call(t,r,o.cpu),t},this.getDevice=function(){var t={vendor:void 0,model:void 0,type:void 0};return y.call(t,r,o.device),t},this.getEngine=function(){var t={name:void 0,version:void 0};return y.call(t,r,o.engine),t},this.getOS=function(){var t={name:void 0,version:void 0};return y.call(t,r,o.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(t){return r="string"==typeof t&&t.length>255?g(t,255):t,this},this.setUA(r),this};T.VERSION="1.0.2",T.BROWSER=p([s,c,"major"]),T.CPU=p(["architecture"]),T.DEVICE=p([a,l,u,"console",h,f,d,"wearable","embedded"]),T.ENGINE=T.OS=p([s,c]),void 0!==e?(void 0!==t&&t.exports&&(e=t.exports=T),e.UAParser=T):n(145)?void 0===(r=function(){return T}.call(e,n,e,t))||(t.exports=r):void 0!==i&&(i.UAParser=T);var w=void 0!==i&&(i.jQuery||i.Zepto);if(w&&!w.ua){var E=new T;w.ua=E.getResult(),w.ua.get=function(){return E.getUA()},w.ua.set=function(t){E.setUA(t);var e=E.getResult();for(var n in e)w.ua[n]=e[n]}}}("object"==typeof window?window:this)},function(t,e,n){var r=n(146);t.exports=function(t,e){return r(t,e)}},function(t,e,n){var r=n(24),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){"use strict";(function(t){var e=n(104),r=n(107),i=n.n(r);if("undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:void 0!==t&&(t.globalThis=t)),globalThis.Promise||(globalThis.Promise=e.a),Object.assign||(Object.assign=i.a),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!globalThis.performance||!globalThis.performance.now){var o=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-o}}for(var a=Date.now(),s=["ms","moz","webkit","o"],u=0;u<s.length&&!globalThis.requestAnimationFrame;++u){var l=s[u];globalThis.requestAnimationFrame=globalThis[l+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[l+"CancelAnimationFrame"]||globalThis[l+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+a-e;return n<0&&(n=0),a=e,globalThis.self.setTimeout((function(){a=Date.now(),t(performance.now())}),n)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array)}).call(this,n(17))},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(137),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(17))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,u=1,l={},c=!1,h=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){p(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}):t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)},d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return l[u]=i,r(u),u++},d.clearImmediate=f}function f(t){delete l[t]}function p(t){if(c)setTimeout(p,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{f(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(17),n(138))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,l=[],c=!1,h=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&f())}function f(){if(!c){var t=s(d);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){(function(t,r){var i;!function(o){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,l=/^xn--/,c=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function v(t){throw new RangeError(d[t])}function m(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function g(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+m((t=t.replace(h,".")).split("."),e).join(".")}function y(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function _(t){return m(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+p(t)})).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function b(t,e,n){var r=0;for(t=n?f(t/700):t>>1,t+=f(t/e);t>455;r+=36)t=f(t/35);return f(r+36*t/(t+38))}function T(t){var e,n,r,i,o,a,s,l,c,h,d,p=[],m=t.length,g=0,y=128,x=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&v("not-basic"),p.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=g,a=1,s=36;i>=m&&v("invalid-input"),((l=(d=t.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||l>f((u-g)/a))&&v("overflow"),g+=l*a,!(l<(c=s<=x?1:s>=x+26?26:s-x));s+=36)a>f(u/(h=36-c))&&v("overflow"),a*=h;x=b(g-o,e=p.length+1,0==o),f(g/e)>u-y&&v("overflow"),y+=f(g/e),g%=e,p.splice(g++,0,y)}return _(p)}function w(t){var e,n,r,i,o,a,s,l,c,h,d,m,g,_,T,w=[];for(m=(t=y(t)).length,e=128,n=0,o=72,a=0;a<m;++a)(d=t[a])<128&&w.push(p(d));for(r=i=w.length,i&&w.push("-");r<m;){for(s=u,a=0;a<m;++a)(d=t[a])>=e&&d<s&&(s=d);for(s-e>f((u-n)/(g=r+1))&&v("overflow"),n+=(s-e)*g,e=s,a=0;a<m;++a)if((d=t[a])<e&&++n>u&&v("overflow"),d==e){for(l=n,c=36;!(l<(h=c<=o?1:c>=o+26?26:c-o));c+=36)T=l-h,_=36-h,w.push(p(x(h+T%_,0))),l=f(T/_);w.push(p(x(l,0))),o=b(n,g,r==i),n=0,++r}++n,++e}return w.join("")}s={version:"1.4.1",ucs2:{decode:y,encode:_},decode:T,encode:w,toASCII:function(t){return g(t,(function(t){return c.test(t)?"xn--"+w(t):t}))},toUnicode:function(t){return g(t,(function(t){return l.test(t)?T(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return s}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(25)(t),n(17))},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(142),e.encode=e.stringify=n(143)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var h,d,f,p,v=t[c].replace(s,"%20"),m=v.indexOf(n);m>=0?(h=v.substr(0,m),d=v.substr(m+1)):(h=v,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),r(a,f)?i(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(a(t),(function(a){var s=encodeURIComponent(r(a))+n;return i(t[a])?o(t[a],(function(t){return s+encodeURIComponent(r(t))})).join(e):s+encodeURIComponent(r(t[a]))})).join(e):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e){var n=function(){};n.prototype={fit:function(t){var e,n,r,i,o=t.length,a=o>0?t[0].width:0,s=o>0?t[0].height:0;for(this.root={x:0,y:0,width:a,height:s},e=0;e<o;e++)r=t[e],(n=this.findNode(this.root,r.width,r.height))?(i=this.splitNode(n,r.width,r.height),r.x=i.x,r.y=i.y):(i=this.growNode(r.width,r.height),r.x=i.x,r.y=i.y)},findNode:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.width&&n<=t.height?t:null},splitNode:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,width:t.width,height:t.height-n},t.right={x:t.x+e,y:t.y,width:t.width-e,height:n},t},growNode:function(t,e){var n=t<=this.root.width,r=e<=this.root.height,i=r&&this.root.height>=this.root.width+t,o=n&&this.root.width>=this.root.height+e;return i?this.growRight(t,e):o?this.growDown(t,e):r?this.growRight(t,e):n?this.growDown(t,e):null},growRight:function(t,e){var n;return this.root={used:!0,x:0,y:0,width:this.root.width+t,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:t,height:this.root.height}},(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null},growDown:function(t,e){var n;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+e,down:{x:0,y:this.root.height,width:this.root.width,height:e},right:this.root},(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null}},t.exports=n},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){var r=n(147),i=n(15);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,a,t,s))}},function(t,e,n){var r=n(52),i=n(55),o=n(179),a=n(182),s=n(31),u=n(30),l=n(40),c=n(62),h="[object Object]",d=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,f,p,v){var m=u(t),g=u(e),y=m?"[object Array]":s(t),_=g?"[object Array]":s(e),x=(y="[object Arguments]"==y?h:y)==h,b=(_="[object Arguments]"==_?h:_)==h,T=y==_;if(T&&l(t)){if(!l(e))return!1;m=!0,x=!1}if(T&&!x)return v||(v=new r),m||c(t)?i(t,e,n,f,p,v):o(t,e,y,n,f,p,v);if(!(1&n)){var w=x&&d.call(t,"__wrapped__"),E=b&&d.call(e,"__wrapped__");if(w||E){var S=w?t.value():t,A=E?e.value():e;return v||(v=new r),p(S,A,n,f,v)}}return!!T&&(v||(v=new r),a(t,e,n,f,p,v))}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(27),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(27);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(27);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(27);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(26);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(26),i=n(37),o=n(54);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(33),i=n(159),o=n(21),a=n(53),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,d=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?d:s).test(a(t))}},function(t,e,n){var r,i=n(160),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},function(t,e,n){var r=n(14)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(163),i=n(26),o=n(37);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(164),i=n(165),o=n(166),a=n(167),s=n(168);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(28);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(28),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(28),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(28);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(29);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(29);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(29);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(29);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(54),i=n(175),o=n(176);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(24),i=n(56),o=n(36),a=n(55),s=n(180),u=n(181),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;t.exports=function(t,e,n,r,l,h,d){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=u),t.size!=e.size&&!p)return!1;var v=d.get(t);if(v)return v==e;r|=2,d.set(t,e);var m=a(f(t),f(e),r,l,h,d);return d.delete(t),m;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var r=n(57),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var u=1&n,l=r(t),c=l.length;if(c!=r(e).length&&!u)return!1;for(var h=c;h--;){var d=l[h];if(!(u?d in e:i.call(e,d)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var v=!0;s.set(t,e),s.set(e,t);for(var m=u;++h<c;){var g=t[d=l[h]],y=e[d];if(o)var _=u?o(y,g,d,e,t,s):o(g,y,d,t,e,s);if(!(void 0===_?g===y||a(g,y,n,o,s):_)){v=!1;break}m||(m="constructor"==d)}if(v&&!m){var x=t.constructor,b=e.constructor;x==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b||(v=!1)}return s.delete(t),s.delete(e),v}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(186),i=n(15),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){var r=n(20),i=n(15);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(20),i=n(63),o=n(15),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(43),i=n(191),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(64)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(22)(n(14),"DataView");t.exports=r},function(t,e,n){var r=n(22)(n(14),"Promise");t.exports=r},function(t,e,n){var r=n(22)(n(14),"Set");t.exports=r},function(t,e,n){var r=n(22)(n(14),"WeakMap");t.exports=r},function(t,e,n){var r=n(14);t.exports=function(){return r.Date.now()}},function(t,e,n){var r=n(198),i=n(21),o=n(200),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=s.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):a.test(t)?NaN:+t}},function(t,e,n){var r=n(199),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},function(t,e){var n=/\s/;t.exports=function(t){for(var e=t.length;e--&&n.test(t.charAt(e)););return e}},function(t,e,n){var r=n(20),i=n(15);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e,n){var r=n(52),i=n(202),o=n(66),a=n(204),s=n(205),u=n(208),l=n(209),c=n(210),h=n(211),d=n(57),f=n(212),p=n(31),v=n(213),m=n(214),g=n(219),y=n(30),_=n(40),x=n(221),b=n(21),T=n(223),w=n(39),E=n(44),S={};S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S["[object Function]"]=S["[object WeakMap]"]=!1,t.exports=function t(e,n,A,M,R,C){var P,I=1&n,O=2&n,k=4&n;if(A&&(P=R?A(e,M,R,C):A(e)),void 0!==P)return P;if(!b(e))return e;var N=y(e);if(N){if(P=v(e),!I)return l(e,P)}else{var L=p(e),D="[object Function]"==L||"[object GeneratorFunction]"==L;if(_(e))return u(e,I);if("[object Object]"==L||"[object Arguments]"==L||D&&!R){if(P=O||D?{}:g(e),!I)return O?h(e,s(P,e)):c(e,a(P,e))}else{if(!S[L])return R?e:{};P=m(e,L,I)}}C||(C=new r);var F=C.get(e);if(F)return F;C.set(e,P),T(e)?e.forEach((function(r){P.add(t(r,n,A,r,e,C))})):x(e)&&e.forEach((function(r,i){P.set(i,t(r,n,A,i,e,C))}));var B=N?void 0:(k?O?f:d:O?E:w)(e);return i(B||e,(function(r,i){B&&(r=e[i=r]),o(P,i,t(r,n,A,i,e,C))})),P}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(22),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,n){var r=n(32),i=n(39);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(32),i=n(44);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(21),i=n(43),o=n(207),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){(function(t){var r=n(14),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(25)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(32),i=n(38);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(32),i=n(68);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(58),i=n(68),o=n(44);t.exports=function(t){return r(t,o,i)}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(45),i=n(215),o=n(216),a=n(217),s=n(218);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return o(t);case"[object Symbol]":return a(t)}}},function(t,e,n){var r=n(45);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(24),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},function(t,e,n){var r=n(45);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(220),i=n(69),o=n(43);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},function(t,e,n){var r=n(21),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e,n){var r=n(222),i=n(41),o=n(42),a=o&&o.isMap,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(31),i=n(15);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(224),i=n(41),o=n(42),a=o&&o.isSet,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(31),i=n(15);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorType",(function(){return Kp})),n.d(e,"preloadResource",(function(){return sb})),n.d(e,"delay",(function(){return fb})),n.d(e,"waitUntil",(function(){return pb})),n.d(e,"SLIDE_EVENTS",(function(){return vb})),n.d(e,"Slide",(function(){return _b}));for(var x=[],b=0;b<256;b++)x[b]=(b<16?"0":"")+b.toString(16);function T(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(x[255&t]+x[t>>8&255]+x[t>>16&255]+x[t>>24&255]+"-"+x[255&e]+x[e>>8&255]+"-"+x[e>>16&15|64]+x[e>>24&255]+"-"+x[63&n|128]+x[n>>8&255]+"-"+x[n>>16&255]+x[n>>24&255]+x[255&r]+x[r>>8&255]+x[r>>16&255]+x[r>>24&255]).toUpperCase()}Math.PI,Math.PI;for(var w=n(23),E=function(){function t(){y(this,t)}return _(t,[{key:"addEventListener",value:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}},{key:"hasEventListener",value:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}},{key:"removeEventListener",value:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,t);t.target=null}}}}]),t}(),S=[],A=0;A<256;A++)S[A]=(A<16?"0":"")+A.toString(16);var M=Math.PI/180,R=180/Math.PI;function C(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(S[255&t]+S[t>>8&255]+S[t>>16&255]+S[t>>24&255]+"-"+S[255&e]+S[e>>8&255]+"-"+S[e>>16&15|64]+S[e>>24&255]+"-"+S[63&n|128]+S[n>>8&255]+"-"+S[n>>16&255]+S[n>>24&255]+S[255&r]+S[r>>8&255]+S[r>>16&255]+S[r>>24&255]).toUpperCase()}function P(t,e,n){return Math.max(e,Math.min(n,t))}function I(t,e,n){return(1-n)*t+n*e}function O(t){return 0==(t&t-1)&&0!==t}function k(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var N=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;y(this,t),this.x=e,this.y=n}return _(t,[{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"applyMatrix3",value:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}},{key:"rotateAround",value:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}}]),t}();N.prototype.isVector2=!0;var L,D=function(){function t(){y(this,t),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return _(t,[{key:"set",value:function(t,e,n,r,i,o,a,s,u){var l=this.elements;return l[0]=t,l[1]=r,l[2]=a,l[3]=e,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}},{key:"extractBasis",value:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],d=n[5],f=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],_=r[7],x=r[2],b=r[5],T=r[8];return i[0]=o*p+a*g+s*x,i[3]=o*v+a*y+s*b,i[6]=o*m+a*_+s*T,i[1]=u*p+l*g+c*x,i[4]=u*v+l*y+c*b,i[7]=u*m+l*_+c*T,i[2]=h*p+d*g+f*x,i[5]=h*v+d*y+f*b,i[8]=h*m+d*_+f*T,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*o*l-e*a*u-n*i*l+n*a*s+r*i*u-r*o*s}},{key:"invert",value:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=l*o-a*u,h=a*s-l*i,d=u*i-o*s,f=e*c+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var p=1/f;return t[0]=c*p,t[1]=(r*u-l*n)*p,t[2]=(a*n-r*o)*p,t[3]=h*p,t[4]=(l*e-r*s)*p,t[5]=(r*i-a*e)*p,t[6]=d*p,t[7]=(n*s-u*e)*p,t[8]=(o*e-n*i)*p,this}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}},{key:"getNormalMatrix",value:function(t){return this.setFromMatrix4(t).invert().transpose()}},{key:"transposeIntoArray",value:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}},{key:"setUvTransform",value:function(t,e,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*o+u*a)+o+t,-r*u,r*s,-r*(-u*o+s*a)+a+e,0,0,1),this}},{key:"scale",value:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}},{key:"rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],l=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*u,r[6]=e*a+n*l,r[1]=-n*i+e*s,r[4]=-n*o+e*u,r[7]=-n*a+e*l,this}},{key:"translate",value:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}},{key:"equals",value:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=t[n+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),t}();D.prototype.isMatrix3=!0;var F=function(){function t(){y(this,t)}return _(t,null,[{key:"getDataURL",value:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;var e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===L&&(L=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),L.width=t.width,L.height=t.height;var n=L.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=L}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}]),t}(),B=0,U=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1001,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1001,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1006,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1008,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1023,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1009,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:3e3;return y(this,n),t=e.call(this),Object.defineProperty(v(t),"id",{value:B++}),t.uuid=C(),t.name="",t.image=r,t.mipmaps=[],t.mapping=i,t.wrapS=o,t.wrapT=a,t.magFilter=s,t.minFilter=u,t.anisotropy=h,t.format=l,t.internalFormat=null,t.type=c,t.offset=new N(0,0),t.repeat=new N(1,1),t.center=new N(0,0),t.rotation=0,t.matrixAutoUpdate=!0,t.matrix=new D,t.generateMipmaps=!0,t.premultiplyAlpha=!1,t.flipY=!0,t.unpackAlignment=4,t.encoding=d,t.version=0,t.onUpdate=null,t}return _(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=C()),!e&&void 0===t.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)r[o].isDataTexture?i.push(G(r[o].image)):i.push(G(r[o]))}else i=G(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case 1001:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case 1001:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),n}(E);function G(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?F.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}U.DEFAULT_IMAGE=void 0,U.DEFAULT_MAPPING=300,U.prototype.isTexture=!0;var j=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;y(this,t),this.x=e,this.y=n,this.z=r,this.w=i}return _(t,[{key:"width",get:function(){return this.z},set:function(t){this.z=t}},{key:"height",get:function(){return this.w},set:function(t){this.w=t}},{key:"set",value:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setW",value:function(t){return this.w=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"applyMatrix4",value:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"setAxisAngleFromQuaternion",value:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}},{key:"setAxisAngleFromRotationMatrix",value:function(t){var e,n,r,i,o=t.elements,a=o[0],s=o[4],u=o[8],l=o[1],c=o[5],h=o[9],d=o[2],f=o[6],p=o[10];if(Math.abs(s-l)<.01&&Math.abs(u-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+d)<.1&&Math.abs(h+f)<.1&&Math.abs(a+c+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var v=(a+1)/2,m=(c+1)/2,g=(p+1)/2,y=(s+l)/4,_=(u+d)/4,x=(h+f)/4;return v>m&&v>g?v<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(v)),i=_/n):m>g?m<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(m)),i=x/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=_/(i=Math.sqrt(g)),r=x/i),this.set(n,r,i,e),this}var b=Math.sqrt((f-h)*(f-h)+(u-d)*(u-d)+(l-s)*(l-s));return Math.abs(b)<.001&&(b=1),this.x=(f-h)/b,this.y=(u-d)/b,this.z=(l-s)/b,this.w=Math.acos((a+c+p-1)/2),this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}]),t}();j.prototype.isVector4=!0;var H=function(t){m(n,t);var e=g(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y(this,n),(i=e.call(this)).width=t,i.height=r,i.depth=1,i.scissor=new j(0,0,t,r),i.scissorTest=!1,i.viewport=new j(0,0,t,r),i.texture=new U(void 0,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),i.texture.image={width:t,height:r,depth:1},i.texture.generateMipmaps=void 0!==o.generateMipmaps&&o.generateMipmaps,i.texture.minFilter=void 0!==o.minFilter?o.minFilter:1006,i.depthBuffer=void 0===o.depthBuffer||o.depthBuffer,i.stencilBuffer=void 0!==o.stencilBuffer&&o.stencilBuffer,i.depthTexture=void 0!==o.depthTexture?o.depthTexture:null,i}return _(n,[{key:"setTexture",value:function(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}},{key:"setSize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image=p({},this.texture.image),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(E);H.prototype.isWebGLRenderTarget=!0,function(t){m(n,t);var e=g(n);function n(t,r,i){var o;y(this,n);var a=(o=e.call(this,t,r)).texture;o.texture=[];for(var s=0;s<i;s++)o.texture[s]=a.clone();return o}return _(n,[{key:"setSize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=t,this.texture[r].image.height=e,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}},{key:"copy",value:function(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(var e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone();return this}}]),n}(H).prototype.isWebGLMultipleRenderTargets=!0;var z=function(t){m(n,t);var e=g(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t,r,i)).samples=4,o}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.samples=t.samples,this}}]),n}(H);z.prototype.isWebGLMultisampleRenderTarget=!0;var V=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;y(this,t),this._x=e,this._y=n,this._z=r,this._w=i}return _(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},{key:"set",value:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,o=t._order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),h=s(n/2),d=s(r/2),f=s(i/2);switch(o){case"XYZ":this._x=h*l*c+u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c-h*d*f;break;case"YXZ":this._x=h*l*c+u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c+h*d*f;break;case"ZXY":this._x=h*l*c-u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c-h*d*f;break;case"ZYX":this._x=h*l*c-u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c+h*d*f;break;case"YZX":this._x=h*l*c+u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c-h*d*f;break;case"XZY":this._x=h*l*c-u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],a=e[5],s=e[9],u=e[2],l=e[6],c=e[10],h=n+a+c;if(h>0){var d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(l-s)*d,this._y=(i-u)*d,this._z=(o-r)*d}else if(n>a&&n>c){var f=2*Math.sqrt(1+n-a-c);this._w=(l-s)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(i+u)/f}else if(a>c){var p=2*Math.sqrt(1+a-n-c);this._w=(i-u)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(s+l)/p}else{var v=2*Math.sqrt(1+c-n-a);this._w=(o-r)/v,this._x=(i+u)/v,this._y=(s+l)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(t,e){var n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(P(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,l=e._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-e;return this._w=u*o+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,a),h=Math.sin((1-e)*c)/l,d=Math.sin(e*c)/l;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(t,e,n){this.copy(t).slerp(e,n)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}},{key:"fromBufferAttribute",value:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(t,e,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,r)}},{key:"slerpFlat",value:function(t,e,n,r,i,o,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(0===a)return t[e+0]=s,t[e+1]=u,t[e+2]=l,void(t[e+3]=c);if(1===a)return t[e+0]=h,t[e+1]=d,t[e+2]=f,void(t[e+3]=p);if(c!==p||s!==h||u!==d||l!==f){var v=1-a,m=s*h+u*d+l*f+c*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var _=Math.sqrt(y),x=Math.atan2(_,m*g);v=Math.sin(v*x)/_,a=Math.sin(a*x)/_}var b=a*g;if(s=s*v+h*b,u=u*v+d*b,l=l*v+f*b,c=c*v+p*b,v===1-a){var T=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=T,u*=T,l*=T,c*=T}}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=c}},{key:"multiplyQuaternionsFlat",value:function(t,e,n,r,i,o){var a=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[o],h=i[o+1],d=i[o+2],f=i[o+3];return t[e]=a*f+l*c+s*d-u*h,t[e+1]=s*f+l*h+u*c-a*d,t[e+2]=u*f+l*d+a*h-s*c,t[e+3]=l*f-a*c-s*h-u*d,t}}]),t}();V.prototype.isQuaternion=!0;var W=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;y(this,t),this.x=e,this.y=n,this.z=r}return _(t,[{key:"set",value:function(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Y.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,e){return this.applyQuaternion(Y.setFromAxisAngle(t,e))}},{key:"applyMatrix3",value:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}},{key:"applyQuaternion",value:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,l=s*n+a*e-i*r,c=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}},{key:"cross",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}},{key:"projectOnVector",value:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}},{key:"projectOnPlane",value:function(t){return X.copy(this).projectOnVector(t),this.sub(X)}},{key:"reflect",value:function(t){return this.sub(X.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(P(n,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}},{key:"setFromMatrixPosition",value:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}},{key:"setFromMatrixScale",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:"setFromMatrix3Column",value:function(t,e){return this.fromArray(t.elements,3*e)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}]),t}();W.prototype.isVector3=!0;var X=new W,Y=new V,q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new W(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new W(-1/0,-1/0,-1/0);y(this,t),this.min=e,this.max=n}return _(t,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromArray",value:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s+=3){var l=t[s],c=t[s+1],h=t[s+2];l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this}},{key:"setFromBufferAttribute",value:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.count;s<u;s++){var l=t.getX(s),c=t.getY(s),h=t.getZ(s);l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var n=Q.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}},{key:"setFromObject",value:function(t){return this.makeEmpty(),this.expandByObject(t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"expandByObject",value:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),K.copy(e.boundingBox),K.applyMatrix4(t.matrixWorld),this.union(K));for(var n=t.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}},{key:"getParameter",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}},{key:"intersectsSphere",value:function(t){return this.clampPoint(t.center,Q),Q.distanceToSquared(t.center)<=t.radius*t.radius}},{key:"intersectsPlane",value:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}},{key:"intersectsTriangle",value:function(t){if(this.isEmpty())return!1;this.getCenter(it),ot.subVectors(this.max,it),J.subVectors(t.a,it),$.subVectors(t.b,it),tt.subVectors(t.c,it),et.subVectors($,J),nt.subVectors(tt,$),rt.subVectors(J,tt);var e=[0,-et.z,et.y,0,-nt.z,nt.y,0,-rt.z,rt.y,et.z,0,-et.x,nt.z,0,-nt.x,rt.z,0,-rt.x,-et.y,et.x,0,-nt.y,nt.x,0,-rt.y,rt.x,0];return!!ut(e,J,$,tt,ot)&&(!!ut(e=[1,0,0,0,1,0,0,0,1],J,$,tt,ot)&&(at.crossVectors(et,nt),ut(e=[at.x,at.y,at.z],J,$,tt,ot)))}},{key:"clampPoint",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return Q.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"getBoundingSphere",value:function(t){return this.getCenter(t.center),t.radius=.5*this.getSize(Q).length(),t}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"applyMatrix4",value:function(t){return this.isEmpty()||(Z[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Z[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Z[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Z[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Z[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Z[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Z[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Z[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Z)),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}();q.prototype.isBox3=!0;var Z=[new W,new W,new W,new W,new W,new W,new W,new W],Q=new W,K=new q,J=new W,$=new W,tt=new W,et=new W,nt=new W,rt=new W,it=new W,ot=new W,at=new W,st=new W;function ut(t,e,n,r,i){for(var o=0,a=t.length-3;o<=a;o+=3){st.fromArray(t,o);var s=i.x*Math.abs(st.x)+i.y*Math.abs(st.y)+i.z*Math.abs(st.z),u=e.dot(st),l=n.dot(st),c=r.dot(st);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var lt=new q,ct=new W,ht=new W,dt=new W,ft=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new W,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;y(this,t),this.center=e,this.radius=n}return _(t,[{key:"set",value:function(t,e){return this.center.copy(t),this.radius=e,this}},{key:"setFromPoints",value:function(t,e){var n=this.center;void 0!==e?n.copy(e):lt.setFromPoints(t).getCenter(n);for(var r=0,i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(t){return this.center.copy(t.center),this.radius=t.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(t){return t.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}},{key:"intersectsBox",value:function(t){return t.intersectsSphere(this)}},{key:"intersectsPlane",value:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(t,e){var n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}},{key:"getBoundingBox",value:function(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}},{key:"applyMatrix4",value:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}},{key:"translate",value:function(t){return this.center.add(t),this}},{key:"expandByPoint",value:function(t){dt.subVectors(t,this.center);var e=dt.lengthSq();if(e>this.radius*this.radius){var n=Math.sqrt(e),r=.5*(n-this.radius);this.center.add(dt.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(t){return ht.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(ct.copy(t.center).add(ht)),this.expandByPoint(ct.copy(t.center).sub(ht)),this}},{key:"equals",value:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),pt=new W,vt=new W,mt=new W,gt=new W,yt=new W,_t=new W,xt=new W,bt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new W,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new W(0,0,-1);y(this,t),this.origin=e,this.direction=n}return _(t,[{key:"set",value:function(t,e){return this.origin.copy(t),this.direction.copy(e),this}},{key:"copy",value:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}},{key:"at",value:function(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}},{key:"lookAt",value:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this}},{key:"recast",value:function(t){return this.origin.copy(this.at(t,pt)),this}},{key:"closestPointToPoint",value:function(t,e){e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:"distanceSqToPoint",value:function(t){var e=pt.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(pt.copy(this.direction).multiplyScalar(e).add(this.origin),pt.distanceToSquared(t))}},{key:"distanceSqToSegment",value:function(t,e,n,r){vt.copy(t).add(e).multiplyScalar(.5),mt.copy(e).sub(t).normalize(),gt.copy(this.origin).sub(vt);var i,o,a,s,u=.5*t.distanceTo(e),l=-this.direction.dot(mt),c=gt.dot(this.direction),h=-gt.dot(mt),d=gt.lengthSq(),f=Math.abs(1-l*l);if(f>0)if(o=l*c-h,s=u*f,(i=l*h-c)>=0)if(o>=-s)if(o<=s){var p=1/f;a=(i*=p)*(i+l*(o*=p)+2*c)+o*(l*i+o+2*h)+d}else o=u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+d;else o=-u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+d;else o<=-s?a=-(i=Math.max(0,-(-l*u+c)))*i+(o=i>0?-u:Math.min(Math.max(-u,-h),u))*(o+2*h)+d:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-h),u))*(o+2*h)+d):a=-(i=Math.max(0,-(l*u+c)))*i+(o=i>0?u:Math.min(Math.max(-u,-h),u))*(o+2*h)+d;else o=l>0?-u:u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(mt).multiplyScalar(o).add(vt),a}},{key:"intersectSphere",value:function(t,e){pt.subVectors(t.center,this.origin);var n=pt.dot(this.direction),r=pt.dot(pt)-n*n,i=t.radius*t.radius;if(r>i)return null;var o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)}},{key:"intersectsSphere",value:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}},{key:"distanceToPlane",value:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}},{key:"intersectPlane",value:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}},{key:"intersectsPlane",value:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}},{key:"intersectBox",value:function(t,e){var n,r,i,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),l>=0?(i=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),c>=0?(a=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(a=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))}},{key:"intersectsBox",value:function(t){return null!==this.intersectBox(t,pt)}},{key:"intersectTriangle",value:function(t,e,n,r,i){yt.subVectors(e,t),_t.subVectors(n,t),xt.crossVectors(yt,_t);var o,a=this.direction.dot(xt);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}gt.subVectors(this.origin,t);var s=o*this.direction.dot(_t.crossVectors(gt,_t));if(s<0)return null;var u=o*this.direction.dot(yt.cross(gt));if(u<0)return null;if(s+u>a)return null;var l=-o*gt.dot(xt);return l<0?null:this.at(l/a,i)}},{key:"applyMatrix4",value:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}},{key:"equals",value:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),Tt=function(){function t(){y(this,t),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return _(t,[{key:"set",value:function(t,e,n,r,i,o,a,s,u,l,c,h,d,f,p,v){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=r,m[1]=i,m[5]=o,m[9]=a,m[13]=s,m[2]=u,m[6]=l,m[10]=c,m[14]=h,m[3]=d,m[7]=f,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new t).fromArray(this.elements)}},{key:"copy",value:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}},{key:"copyPosition",value:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}},{key:"setFromMatrix3",value:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(t){var e=this.elements,n=t.elements,r=1/wt.setFromMatrixColumn(t,0).length(),i=1/wt.setFromMatrixColumn(t,1).length(),o=1/wt.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){var h=o*l,d=o*c,f=a*l,p=a*c;e[0]=s*l,e[4]=-s*c,e[8]=u,e[1]=d+f*u,e[5]=h-p*u,e[9]=-a*s,e[2]=p-h*u,e[6]=f+d*u,e[10]=o*s}else if("YXZ"===t.order){var v=s*l,m=s*c,g=u*l,y=u*c;e[0]=v+y*a,e[4]=g*a-m,e[8]=o*u,e[1]=o*c,e[5]=o*l,e[9]=-a,e[2]=m*a-g,e[6]=y+v*a,e[10]=o*s}else if("ZXY"===t.order){var _=s*l,x=s*c,b=u*l,T=u*c;e[0]=_-T*a,e[4]=-o*c,e[8]=b+x*a,e[1]=x+b*a,e[5]=o*l,e[9]=T-_*a,e[2]=-o*u,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){var w=o*l,E=o*c,S=a*l,A=a*c;e[0]=s*l,e[4]=S*u-E,e[8]=w*u+A,e[1]=s*c,e[5]=A*u+w,e[9]=E*u-S,e[2]=-u,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var M=o*s,R=o*u,C=a*s,P=a*u;e[0]=s*l,e[4]=P-M*c,e[8]=C*c+R,e[1]=c,e[5]=o*l,e[9]=-a*l,e[2]=-u*l,e[6]=R*c+C,e[10]=M-P*c}else if("XZY"===t.order){var I=o*s,O=o*u,k=a*s,N=a*u;e[0]=s*l,e[4]=-c,e[8]=u*l,e[1]=I*c+N,e[5]=o*l,e[9]=O*c-k,e[2]=k*c-O,e[6]=a*l,e[10]=N*c+I}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(t){return this.compose(St,t,At)}},{key:"lookAt",value:function(t,e,n){var r=this.elements;return Ct.subVectors(t,e),0===Ct.lengthSq()&&(Ct.z=1),Ct.normalize(),Mt.crossVectors(n,Ct),0===Mt.lengthSq()&&(1===Math.abs(n.z)?Ct.x+=1e-4:Ct.z+=1e-4,Ct.normalize(),Mt.crossVectors(n,Ct)),Mt.normalize(),Rt.crossVectors(Ct,Mt),r[0]=Mt.x,r[4]=Rt.x,r[8]=Ct.x,r[1]=Mt.y,r[5]=Rt.y,r[9]=Ct.y,r[2]=Mt.z,r[6]=Rt.z,r[10]=Ct.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],_=n[11],x=n[15],b=r[0],T=r[4],w=r[8],E=r[12],S=r[1],A=r[5],M=r[9],R=r[13],C=r[2],P=r[6],I=r[10],O=r[14],k=r[3],N=r[7],L=r[11],D=r[15];return i[0]=o*b+a*S+s*C+u*k,i[4]=o*T+a*A+s*P+u*N,i[8]=o*w+a*M+s*I+u*L,i[12]=o*E+a*R+s*O+u*D,i[1]=l*b+c*S+h*C+d*k,i[5]=l*T+c*A+h*P+d*N,i[9]=l*w+c*M+h*I+d*L,i[13]=l*E+c*R+h*O+d*D,i[2]=f*b+p*S+v*C+m*k,i[6]=f*T+p*A+v*P+m*N,i[10]=f*w+p*M+v*I+m*L,i[14]=f*E+p*R+v*O+m*D,i[3]=g*b+y*S+_*C+x*k,i[7]=g*T+y*A+_*P+x*N,i[11]=g*w+y*M+_*I+x*L,i[15]=g*E+y*R+_*O+x*D,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],d=t[14];return t[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*d-n*s*d)+t[7]*(+e*s*d-e*u*h+i*o*h-r*o*d+r*u*l-i*s*l)+t[11]*(+e*u*c-e*a*d-i*o*c+n*o*d+i*a*l-n*u*l)+t[15]*(-r*a*l-e*s*c+e*a*h+r*o*c-n*o*h+n*s*l)}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}},{key:"setPosition",value:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}},{key:"invert",value:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],d=t[11],f=t[12],p=t[13],v=t[14],m=t[15],g=c*v*u-p*h*u+p*s*d-a*v*d-c*s*m+a*h*m,y=f*h*u-l*v*u-f*s*d+o*v*d+l*s*m-o*h*m,_=l*p*u-f*c*u+f*a*d-o*p*d-l*a*m+o*c*m,x=f*c*s-l*p*s-f*a*h+o*p*h+l*a*v-o*c*v,b=e*g+n*y+r*_+i*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var T=1/b;return t[0]=g*T,t[1]=(p*h*i-c*v*i-p*r*d+n*v*d+c*r*m-n*h*m)*T,t[2]=(a*v*i-p*s*i+p*r*u-n*v*u-a*r*m+n*s*m)*T,t[3]=(c*s*i-a*h*i-c*r*u+n*h*u+a*r*d-n*s*d)*T,t[4]=y*T,t[5]=(l*v*i-f*h*i+f*r*d-e*v*d-l*r*m+e*h*m)*T,t[6]=(f*s*i-o*v*i-f*r*u+e*v*u+o*r*m-e*s*m)*T,t[7]=(o*h*i-l*s*i+l*r*u-e*h*u-o*r*d+e*s*d)*T,t[8]=_*T,t[9]=(f*c*i-l*p*i-f*n*d+e*p*d+l*n*m-e*c*m)*T,t[10]=(o*p*i-f*a*i+f*n*u-e*p*u-o*n*m+e*a*m)*T,t[11]=(l*a*i-o*c*i-l*n*u+e*c*u+o*n*d-e*a*d)*T,t[12]=x*T,t[13]=(l*p*r-f*c*r+f*n*h-e*p*h-l*n*v+e*c*v)*T,t[14]=(f*a*r-o*p*r-f*n*s+e*p*s+o*n*v-e*a*v)*T,t[15]=(o*c*r-l*a*r+l*n*s-e*c*s-o*n*h+e*a*h)*T,this}},{key:"scale",value:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}},{key:"makeTranslation",value:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}},{key:"makeRotationY",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}},{key:"compose",value:function(t,e,n){var r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,u=i+i,l=o+o,c=a+a,h=i*u,d=i*l,f=i*c,p=o*l,v=o*c,m=a*c,g=s*u,y=s*l,_=s*c,x=n.x,b=n.y,T=n.z;return r[0]=(1-(p+m))*x,r[1]=(d+_)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(d-_)*b,r[5]=(1-(h+m))*b,r[6]=(v+g)*b,r[7]=0,r[8]=(f+y)*T,r[9]=(v-g)*T,r[10]=(1-(h+p))*T,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}},{key:"decompose",value:function(t,e,n){var r=this.elements,i=wt.set(r[0],r[1],r[2]).length(),o=wt.set(r[4],r[5],r[6]).length(),a=wt.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Et.copy(this);var s=1/i,u=1/o,l=1/a;return Et.elements[0]*=s,Et.elements[1]*=s,Et.elements[2]*=s,Et.elements[4]*=u,Et.elements[5]*=u,Et.elements[6]*=u,Et.elements[8]*=l,Et.elements[9]*=l,Et.elements[10]*=l,e.setFromRotationMatrix(Et),n.x=i,n.y=o,n.z=a,this}},{key:"makePerspective",value:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(e-t),u=2*i/(n-r),l=(e+t)/(e-t),c=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}},{key:"makeOrthographic",value:function(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),l=1/(o-i),c=(e+t)*s,h=(n+r)*u,d=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}},{key:"equals",value:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=t[n+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}]),t}();Tt.prototype.isMatrix4=!0;var wt=new W,Et=new Tt,St=new W(0,0,0),At=new W(1,1,1),Mt=new W,Rt=new W,Ct=new W,Pt=new Tt,It=new V,Ot=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;y(this,t),this._x=e,this._y=n,this._z=r,this._order=i}return _(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},{key:"set",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],d=r[10];switch(e){case"XYZ":this._y=Math.asin(P(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-P(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(P(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-P(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(P(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-P(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(t,e,n){return Pt.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Pt,e,n)}},{key:"setFromVector3",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}},{key:"reorder",value:function(t){return It.setFromEuler(this),this.setFromQuaternion(It,t)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}},{key:"fromArray",value:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}},{key:"toVector3",value:function(t){return t?t.set(this._x,this._y,this._z):new W(this._x,this._y,this._z)}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}}]),t}();Ot.prototype.isEuler=!0,Ot.DefaultOrder="XYZ",Ot.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var kt=function(){function t(){y(this,t),this.mask=1}return _(t,[{key:"set",value:function(t){this.mask=1<<t|0}},{key:"enable",value:function(t){this.mask|=1<<t|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(t){this.mask^=1<<t|0}},{key:"disable",value:function(t){this.mask&=~(1<<t|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(t){return 0!=(this.mask&t.mask)}}]),t}(),Nt=0,Lt=new W,Dt=new V,Ft=new Tt,Bt=new W,Ut=new W,Gt=new W,jt=new V,Ht=new W(1,0,0),zt=new W(0,1,0),Vt=new W(0,0,1),Wt={type:"added"},Xt={type:"removed"},Yt=function(t){m(n,t);var e=g(n);function n(){var t;y(this,n),t=e.call(this),Object.defineProperty(v(t),"id",{value:Nt++}),t.uuid=C(),t.name="",t.type="Object3D",t.parent=null,t.children=[],t.up=n.DefaultUp.clone();var r=new W,i=new Ot,o=new V,a=new W(1,1,1);return i._onChange((function(){o.setFromEuler(i,!1)})),o._onChange((function(){i.setFromQuaternion(o,void 0,!1)})),Object.defineProperties(v(t),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:o},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Tt},normalMatrix:{value:new D}}),t.matrix=new Tt,t.matrixWorld=new Tt,t.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,t.matrixWorldNeedsUpdate=!1,t.layers=new kt,t.visible=!0,t.castShadow=!1,t.receiveShadow=!1,t.frustumCulled=!0,t.renderOrder=0,t.animations=[],t.userData={},t}return _(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(t){return this.quaternion.premultiply(t),this}},{key:"setRotationFromAxisAngle",value:function(t,e){this.quaternion.setFromAxisAngle(t,e)}},{key:"setRotationFromEuler",value:function(t){this.quaternion.setFromEuler(t,!0)}},{key:"setRotationFromMatrix",value:function(t){this.quaternion.setFromRotationMatrix(t)}},{key:"setRotationFromQuaternion",value:function(t){this.quaternion.copy(t)}},{key:"rotateOnAxis",value:function(t,e){return Dt.setFromAxisAngle(t,e),this.quaternion.multiply(Dt),this}},{key:"rotateOnWorldAxis",value:function(t,e){return Dt.setFromAxisAngle(t,e),this.quaternion.premultiply(Dt),this}},{key:"rotateX",value:function(t){return this.rotateOnAxis(Ht,t)}},{key:"rotateY",value:function(t){return this.rotateOnAxis(zt,t)}},{key:"rotateZ",value:function(t){return this.rotateOnAxis(Vt,t)}},{key:"translateOnAxis",value:function(t,e){return Lt.copy(t).applyQuaternion(this.quaternion),this.position.add(Lt.multiplyScalar(e)),this}},{key:"translateX",value:function(t){return this.translateOnAxis(Ht,t)}},{key:"translateY",value:function(t){return this.translateOnAxis(zt,t)}},{key:"translateZ",value:function(t){return this.translateOnAxis(Vt,t)}},{key:"localToWorld",value:function(t){return t.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(t){return t.applyMatrix4(Ft.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(t,e,n){t.isVector3?Bt.copy(t):Bt.set(t,e,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Ut.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ft.lookAt(Ut,Bt,this.up):Ft.lookAt(Bt,Ut,this.up),this.quaternion.setFromRotationMatrix(Ft),r&&(Ft.extractRotation(r.matrixWorld),Dt.setFromRotationMatrix(Ft),this.quaternion.premultiply(Dt.invert()))}},{key:"add",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Wt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}},{key:"remove",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(Xt)),this}},{key:"removeFromParent",value:function(){var t=this.parent;return null!==t&&t.remove(this),this}},{key:"clear",value:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.parent=null,e.dispatchEvent(Xt)}return this.children.length=0,this}},{key:"attach",value:function(t){return this.updateWorldMatrix(!0,!1),Ft.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ft.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ft),this.add(t),t.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(t){return this.getObjectByProperty("id",t)}},{key:"getObjectByName",value:function(t){return this.getObjectByProperty("name",t)}},{key:"getObjectByProperty",value:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}},{key:"getWorldPosition",value:function(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ut,t,Gt),t}},{key:"getWorldScale",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ut,jt,t),t}},{key:"getWorldDirection",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)}},{key:"traverseVisible",value:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}}},{key:"traverseAncestors",value:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)}},{key:"updateWorldMatrix",value:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var l=a[s];i(t.shapes,l)}else i(t.shapes,a)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,d=this.material.length;h<d;h++)c.push(i(t.materials,this.material[h]));r.material=c}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(var f=0;f<this.children.length;f++)r.children.push(this.children[f].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];r.animations.push(i(t.animations,v))}}if(e){var m=w(t.geometries),g=w(t.materials),y=w(t.textures),_=w(t.images),x=w(t.shapes),b=w(t.skeletons),T=w(t.animations);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),_.length>0&&(n.images=_),x.length>0&&(n.shapes=x),b.length>0&&(n.skeletons=b),T.length>0&&(n.animations=T)}return n.object=r,n;function w(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}}},{key:"clone",value:function(t){return(new this.constructor).copy(this,t)}},{key:"copy",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}]),n}(E);Yt.DefaultUp=new W(0,1,0),Yt.DefaultMatrixAutoUpdate=!0,Yt.prototype.isObject3D=!0;var qt=new W,Zt=new W,Qt=new W,Kt=new W,Jt=new W,$t=new W,te=new W,ee=new W,ne=new W,re=new W,ie=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new W,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new W,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new W;y(this,t),this.a=e,this.b=n,this.c=r}return _(t,[{key:"set",value:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}},{key:"getArea",value:function(){return qt.subVectors(this.c,this.b),Zt.subVectors(this.a,this.b),.5*qt.cross(Zt).length()}},{key:"getMidpoint",value:function(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return t.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,n){return t.getBarycoord(e,this.a,this.b,this.c,n)}},{key:"getUV",value:function(e,n,r,i,o){return t.getUV(e,this.a,this.b,this.c,n,r,i,o)}},{key:"containsPoint",value:function(e){return t.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return t.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(t){return t.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(t,e){var n,r,i=this.a,o=this.b,a=this.c;Jt.subVectors(o,i),$t.subVectors(a,i),ee.subVectors(t,i);var s=Jt.dot(ee),u=$t.dot(ee);if(s<=0&&u<=0)return e.copy(i);ne.subVectors(t,o);var l=Jt.dot(ne),c=$t.dot(ne);if(l>=0&&c<=l)return e.copy(o);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),e.copy(i).addScaledVector(Jt,n);re.subVectors(t,a);var d=Jt.dot(re),f=$t.dot(re);if(f>=0&&d<=f)return e.copy(a);var p=d*u-s*f;if(p<=0&&u>=0&&f<=0)return r=u/(u-f),e.copy(i).addScaledVector($t,r);var v=l*f-d*c;if(v<=0&&c-l>=0&&d-f>=0)return te.subVectors(a,o),r=(c-l)/(c-l+(d-f)),e.copy(o).addScaledVector(te,r);var m=1/(v+p+h);return n=p*m,r=h*m,e.copy(i).addScaledVector(Jt,n).addScaledVector($t,r)}},{key:"equals",value:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}],[{key:"getNormal",value:function(t,e,n,r){r.subVectors(n,e),qt.subVectors(t,e),r.cross(qt);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(t,e,n,r,i){qt.subVectors(r,e),Zt.subVectors(n,e),Qt.subVectors(t,e);var o=qt.dot(qt),a=qt.dot(Zt),s=qt.dot(Qt),u=Zt.dot(Zt),l=Zt.dot(Qt),c=o*u-a*a;if(0===c)return i.set(-2,-1,-1);var h=1/c,d=(u*s-a*l)*h,f=(o*l-a*s)*h;return i.set(1-d-f,f,d)}},{key:"containsPoint",value:function(t,e,n,r){return this.getBarycoord(t,e,n,r,Kt),Kt.x>=0&&Kt.y>=0&&Kt.x+Kt.y<=1}},{key:"getUV",value:function(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,Kt),s.set(0,0),s.addScaledVector(i,Kt.x),s.addScaledVector(o,Kt.y),s.addScaledVector(a,Kt.z),s}},{key:"isFrontFacing",value:function(t,e,n,r){return qt.subVectors(n,e),Zt.subVectors(t,e),qt.cross(Zt).dot(r)<0}}]),t}(),oe=0,ae=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),t=e.call(this),Object.defineProperty(v(t),"id",{value:oe++}),t.uuid=C(),t.name="",t.type="Material",t.fog=!0,t.blending=1,t.side=0,t.vertexColors=!1,t.opacity=1,t.transparent=!1,t.blendSrc=204,t.blendDst=205,t.blendEquation=100,t.blendSrcAlpha=null,t.blendDstAlpha=null,t.blendEquationAlpha=null,t.depthFunc=3,t.depthTest=!0,t.depthWrite=!0,t.stencilWriteMask=255,t.stencilFunc=519,t.stencilRef=0,t.stencilFuncMask=255,t.stencilFail=7680,t.stencilZFail=7680,t.stencilZPass=7680,t.stencilWrite=!1,t.clippingPlanes=null,t.clipIntersection=!1,t.clipShadows=!1,t.shadowSide=null,t.colorWrite=!0,t.precision=null,t.polygonOffset=!1,t.polygonOffsetFactor=0,t.polygonOffsetUnits=0,t.dithering=!1,t.alphaTest=0,t.alphaToCoverage=!1,t.premultipliedAlpha=!1,t.visible=!0,t.toneMapped=!0,t.userData={},t.version=0,t}return _(n,[{key:"onBuild",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var i=r(t.textures),o=r(t.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),n}(E);ae.prototype.isMaterial=!0;var se={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ue={h:0,s:0,l:0},le={h:0,s:0,l:0};function ce(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function he(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function de(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var fe=function(){function t(e,n,r){return y(this,t),void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}return _(t,[{key:"set",value:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}},{key:"setScalar",value:function(t){return this.r=t,this.g=t,this.b=t,this}},{key:"setHex",value:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}},{key:"setRGB",value:function(t,e,n){return this.r=t,this.g=e,this.b=n,this}},{key:"setHSL",value:function(t,e,n){if(t=function(t,e){return(t%e+e)%e}(t,1),e=P(e,0,1),n=P(n,0,1),0===e)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=ce(i,r,t+1/3),this.g=ce(i,r,t),this.b=ce(i,r,t-1/3)}return this}},{key:"setStyle",value:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return e(r[4]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}},{key:"setColorName",value:function(t){var e=se[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}},{key:"copyGammaToLinear",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}},{key:"copyLinearToGamma",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}},{key:"convertGammaToLinear",value:function(t){return this.copyGammaToLinear(this,t),this}},{key:"convertLinearToGamma",value:function(t){return this.copyLinearToGamma(this,t),this}},{key:"copySRGBToLinear",value:function(t){return this.r=he(t.r),this.g=he(t.g),this.b=he(t.b),this}},{key:"copyLinearToSRGB",value:function(t){return this.r=de(t.r),this.g=de(t.g),this.b=de(t.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(t){var e,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)e=0,n=0;else{var l=a-s;switch(n=u<=.5?l/(a+s):l/(2-a-s),a){case r:e=(i-o)/l+(i<o?6:0);break;case i:e=(o-r)/l+2;break;case o:e=(r-i)/l+4}e/=6}return t.h=e,t.s=n,t.l=u,t}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(t,e,n){return this.getHSL(ue),ue.h+=t,ue.s+=e,ue.l+=n,this.setHSL(ue.h,ue.s,ue.l),this}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}},{key:"addColors",value:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}},{key:"addScalar",value:function(t){return this.r+=t,this.g+=t,this.b+=t,this}},{key:"sub",value:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}},{key:"multiply",value:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}},{key:"multiplyScalar",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this}},{key:"lerp",value:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}},{key:"lerpColors",value:function(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}},{key:"lerpHSL",value:function(t,e){this.getHSL(ue),t.getHSL(le);var n=I(ue.h,le.h,e),r=I(ue.s,le.s,e),i=I(ue.l,le.l,e);return this.setHSL(n,r,i),this}},{key:"equals",value:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},{key:"fromBufferAttribute",value:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),t}();fe.NAMES=se,fe.prototype.isColor=!0,fe.prototype.r=1,fe.prototype.g=1,fe.prototype.b=1;var pe=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).type="MeshBasicMaterial",r.color=new fe(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.morphTargets=t.morphTargets,this}}]),n}(ae);pe.prototype.isMeshBasicMaterial=!0;var ve=new W,me=new N,ge=function(){function t(e,n,r){if(y(this,t),Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=n,this.count=void 0!==e?e.length/n:0,this.normalized=!0===r,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}return _(t,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}},{key:"copyAt",value:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}},{key:"copyArray",value:function(t){return this.array.set(t),this}},{key:"copyColorsArray",value:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new fe),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this}},{key:"copyVector2sArray",value:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new N),e[n++]=o.x,e[n++]=o.y}return this}},{key:"copyVector3sArray",value:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new W),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this}},{key:"copyVector4sArray",value:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new j),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this}},{key:"applyMatrix3",value:function(t){if(2===this.itemSize)for(var e=0,n=this.count;e<n;e++)me.fromBufferAttribute(this,e),me.applyMatrix3(t),this.setXY(e,me.x,me.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)ve.fromBufferAttribute(this,r),ve.applyMatrix3(t),this.setXYZ(r,ve.x,ve.y,ve.z);return this}},{key:"applyMatrix4",value:function(t){for(var e=0,n=this.count;e<n;e++)ve.x=this.getX(e),ve.y=this.getY(e),ve.z=this.getZ(e),ve.applyMatrix4(t),this.setXYZ(e,ve.x,ve.y,ve.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,n=this.count;e<n;e++)ve.x=this.getX(e),ve.y=this.getY(e),ve.z=this.getZ(e),ve.applyNormalMatrix(t),this.setXYZ(e,ve.x,ve.y,ve.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,n=this.count;e<n;e++)ve.x=this.getX(e),ve.y=this.getY(e),ve.z=this.getZ(e),ve.transformDirection(t),this.setXYZ(e,ve.x,ve.y,ve.z);return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"getX",value:function(t){return this.array[t*this.itemSize]}},{key:"setX",value:function(t,e){return this.array[t*this.itemSize]=e,this}},{key:"getY",value:function(t){return this.array[t*this.itemSize+1]}},{key:"setY",value:function(t,e){return this.array[t*this.itemSize+1]=e,this}},{key:"getZ",value:function(t){return this.array[t*this.itemSize+2]}},{key:"setZ",value:function(t,e){return this.array[t*this.itemSize+2]=e,this}},{key:"getW",value:function(t){return this.array[t*this.itemSize+3]}},{key:"setW",value:function(t,e){return this.array[t*this.itemSize+3]=e,this}},{key:"setXY",value:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}},{key:"setXYZ",value:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}},{key:"setXYZW",value:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}]),t}();ge.prototype.isBufferAttribute=!0;var ye=function(t){m(n,t);var e=g(n);function n(t,r,i){return y(this,n),e.call(this,new Uint16Array(t),r,i)}return _(n)}(ge),_e=function(t){m(n,t);var e=g(n);function n(t,r,i){return y(this,n),e.call(this,new Int32Array(t),r,i)}return _(n)}(ge),xe=function(t){m(n,t);var e=g(n);function n(t,r,i){return y(this,n),e.call(this,new Uint32Array(t),r,i)}return _(n)}(ge);(function(t){m(n,t);var e=g(n);function n(t,r,i){return y(this,n),e.call(this,new Uint16Array(t),r,i)}return _(n)})(ge).prototype.isFloat16BufferAttribute=!0;var be=function(t){m(n,t);var e=g(n);function n(t,r,i){return y(this,n),e.call(this,new Float32Array(t),r,i)}return _(n)}(ge);function Te(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;var we=0,Ee=new Tt,Se=new Yt,Ae=new W,Me=new q,Re=new q,Ce=new W,Pe=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),t=e.call(this),Object.defineProperty(v(t),"id",{value:we++}),t.uuid=C(),t.name="",t.type="BufferGeometry",t.index=null,t.attributes={},t.morphAttributes={},t.morphTargetsRelative=!1,t.groups=[],t.boundingBox=null,t.boundingSphere=null,t.drawRange={start:0,count:1/0},t.userData={},t}return _(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){return Array.isArray(t)?this.index=new(Te(t)>65535?xe:ye)(t,1):this.index=t,this}},{key:"getAttribute",value:function(t){return this.attributes[t]}},{key:"setAttribute",value:function(t,e){return this.attributes[t]=e,this}},{key:"deleteAttribute",value:function(t){return delete this.attributes[t],this}},{key:"hasAttribute",value:function(t){return void 0!==this.attributes[t]}},{key:"addGroup",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(t,e){this.drawRange.start=t,this.drawRange.count=e}},{key:"applyMatrix4",value:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new D).getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(t){return Ee.makeRotationFromQuaternion(t),this.applyMatrix4(Ee),this}},{key:"rotateX",value:function(t){return Ee.makeRotationX(t),this.applyMatrix4(Ee),this}},{key:"rotateY",value:function(t){return Ee.makeRotationY(t),this.applyMatrix4(Ee),this}},{key:"rotateZ",value:function(t){return Ee.makeRotationZ(t),this.applyMatrix4(Ee),this}},{key:"translate",value:function(t,e,n){return Ee.makeTranslation(t,e,n),this.applyMatrix4(Ee),this}},{key:"scale",value:function(t,e,n){return Ee.makeScale(t,e,n),this.applyMatrix4(Ee),this}},{key:"lookAt",value:function(t){return Se.lookAt(t),Se.updateMatrix(),this.applyMatrix4(Se.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ae).negate(),this.translate(Ae.x,Ae.y,Ae.z),this}},{key:"setFromPoints",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new be(e,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new q);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new W(-1/0,-1/0,-1/0),new W(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++){var i=e[n];Me.setFromBufferAttribute(i),this.morphTargetsRelative?(Ce.addVectors(this.boundingBox.min,Me.min),this.boundingBox.expandByPoint(Ce),Ce.addVectors(this.boundingBox.max,Me.max),this.boundingBox.expandByPoint(Ce)):(this.boundingBox.expandByPoint(Me.min),this.boundingBox.expandByPoint(Me.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new ft);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new W,1/0);if(t){var n=this.boundingSphere.center;if(Me.setFromBufferAttribute(t),e)for(var r=0,i=e.length;r<i;r++){var o=e[r];Re.setFromBufferAttribute(o),this.morphTargetsRelative?(Ce.addVectors(Me.min,Re.min),Me.expandByPoint(Ce),Ce.addVectors(Me.max,Re.max),Me.expandByPoint(Ce)):(Me.expandByPoint(Re.min),Me.expandByPoint(Re.max))}Me.getCenter(n);for(var a=0,s=0,u=t.count;s<u;s++)Ce.fromBufferAttribute(t,s),a=Math.max(a,n.distanceToSquared(Ce));if(e)for(var l=0,c=e.length;l<c;l++)for(var h=e[l],d=this.morphTargetsRelative,f=0,p=h.count;f<p;f++)Ce.fromBufferAttribute(h,f),d&&(Ae.fromBufferAttribute(t,f),Ce.add(Ae)),a=Math.max(a,n.distanceToSquared(Ce));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeFaceNormals",value:function(){}},{key:"computeTangents",value:function(){var t=this.index,e=this.attributes;if(null!==t&&void 0!==e.position&&void 0!==e.normal&&void 0!==e.uv){var n=t.array,r=e.position.array,i=e.normal.array,o=e.uv.array,a=r.length/3;void 0===e.tangent&&this.setAttribute("tangent",new ge(new Float32Array(4*a),4));for(var s=e.tangent.array,u=[],l=[],c=0;c<a;c++)u[c]=new W,l[c]=new W;var h=new W,d=new W,f=new W,p=new N,v=new N,m=new N,g=new W,y=new W,_=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(var x=0,b=_.length;x<b;++x)for(var T=_[x],w=T.start,E=w,S=w+T.count;E<S;E+=3)F(n[E+0],n[E+1],n[E+2]);for(var A=new W,M=new W,R=new W,C=new W,P=0,I=_.length;P<I;++P)for(var O=_[P],k=O.start,L=k,D=k+O.count;L<D;L+=3)B(n[L+0]),B(n[L+1]),B(n[L+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function F(t,e,n){h.fromArray(r,3*t),d.fromArray(r,3*e),f.fromArray(r,3*n),p.fromArray(o,2*t),v.fromArray(o,2*e),m.fromArray(o,2*n),d.sub(h),f.sub(h),v.sub(p),m.sub(p);var i=1/(v.x*m.y-m.x*v.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(f,-v.y).multiplyScalar(i),y.copy(f).multiplyScalar(v.x).addScaledVector(d,-m.x).multiplyScalar(i),u[t].add(g),u[e].add(g),u[n].add(g),l[t].add(y),l[e].add(y),l[n].add(y))}function B(t){R.fromArray(i,3*t),C.copy(R);var e=u[t];A.copy(e),A.sub(R.multiplyScalar(R.dot(e))).normalize(),M.crossVectors(C,e);var n=M.dot(l[t])<0?-1:1;s[4*t]=A.x,s[4*t+1]=A.y,s[4*t+2]=A.z,s[4*t+3]=n}}},{key:"computeVertexNormals",value:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var n=this.getAttribute("normal");if(void 0===n)n=new ge(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var o=new W,a=new W,s=new W,u=new W,l=new W,c=new W,h=new W,d=new W;if(t)for(var f=0,p=t.count;f<p;f+=3){var v=t.getX(f+0),m=t.getX(f+1),g=t.getX(f+2);o.fromBufferAttribute(e,v),a.fromBufferAttribute(e,m),s.fromBufferAttribute(e,g),h.subVectors(s,a),d.subVectors(o,a),h.cross(d),u.fromBufferAttribute(n,v),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),u.add(h),l.add(h),c.add(h),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,_=e.count;y<_;y+=3)o.fromBufferAttribute(e,y+0),a.fromBufferAttribute(e,y+1),s.fromBufferAttribute(e,y+2),h.subVectors(s,a),d.subVectors(o,a),h.cross(d),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r].array,o=t.attributes[r],a=o.array,s=o.itemSize*e,u=Math.min(a.length,i.length-s),l=0,c=s;l<u;l++,c++)i[c]=a[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)}},{key:"normalizeNormals",value:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)Ce.fromBufferAttribute(t,e),Ce.normalize(),t.setXYZ(e,Ce.x,Ce.y,Ce.z)}},{key:"toNonIndexed",value:function(){function t(t,e){for(var n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r),a=0,s=0,u=0,l=e.length;u<l;u++){a=t.isInterleavedBufferAttribute?e[u]*t.data.stride+t.offset:e[u]*r;for(var c=0;c<r;c++)o[s++]=n[a++]}return new ge(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var e=new n,r=this.index.array,i=this.attributes;for(var o in i){var a=t(i[o],r);e.setAttribute(o,a)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],h=0,d=c.length;h<d;h++){var f=t(c[h],r);l.push(f)}e.morphAttributes[u]=l}e.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];e.addGroup(g.start,g.count,g.materialIndex)}return e}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var o in i){var a=i[o];t.data.attributes[o]=a.toJSON(t.data)}var s={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],h=[],d=0,f=c.length;d<f;d++){var p=c[d];h.push(p.toJSON(t.data))}h.length>0&&(s[l]=h,u=!0)}u&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(t.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(t.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),t}},{key:"clone",value:function(){return(new n).copy(this)}},{key:"copy",value:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone(e));var r=t.attributes;for(var i in r){var o=r[i];this.setAttribute(i,o.clone(e))}var a=t.morphAttributes;for(var s in a){for(var u=[],l=a[s],c=0,h=l.length;c<h;c++)u.push(l[c].clone(e));this.morphAttributes[s]=u}this.morphTargetsRelative=t.morphTargetsRelative;for(var d=t.groups,f=0,p=d.length;f<p;f++){var v=d[f];this.addGroup(v.start,v.count,v.materialIndex)}var m=t.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=t.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(E);Pe.prototype.isBufferGeometry=!0;var Ie=new Tt,Oe=new bt,ke=new ft,Ne=new W,Le=new W,De=new W,Fe=new W,Be=new W,Ue=new W,Ge=new W,je=new W,He=new W,ze=new N,Ve=new N,We=new N,Xe=new W,Ye=new W,qe=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Pe,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pe;return y(this,n),(t=e.call(this)).type="Mesh",t.geometry=r,t.material=i,t.updateMorphTargets(),t}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(t,e){var n,r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),ke.copy(r.boundingSphere),ke.applyMatrix4(o),!1!==t.ray.intersectsSphere(ke)&&(Ie.copy(o).invert(),Oe.copy(t.ray).applyMatrix4(Ie),null===r.boundingBox||!1!==Oe.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var a=r.index,s=r.attributes.position,u=r.morphAttributes.position,l=r.morphTargetsRelative,c=r.attributes.uv,h=r.attributes.uv2,d=r.groups,f=r.drawRange;if(null!==a)if(Array.isArray(i))for(var p=0,v=d.length;p<v;p++)for(var m=d[p],g=i[m.materialIndex],y=Math.max(m.start,f.start),_=Math.min(m.start+m.count,f.start+f.count);y<_;y+=3){var x=a.getX(y),b=a.getX(y+1),T=a.getX(y+2);(n=Ze(this,g,t,Oe,s,u,l,c,h,x,b,T))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=m.materialIndex,e.push(n))}else for(var w=Math.max(0,f.start),E=Math.min(a.count,f.start+f.count);w<E;w+=3){var S=a.getX(w),A=a.getX(w+1),M=a.getX(w+2);(n=Ze(this,i,t,Oe,s,u,l,c,h,S,A,M))&&(n.faceIndex=Math.floor(w/3),e.push(n))}else if(void 0!==s)if(Array.isArray(i))for(var R=0,C=d.length;R<C;R++)for(var P=d[R],I=i[P.materialIndex],O=Math.max(P.start,f.start),k=Math.min(P.start+P.count,f.start+f.count);O<k;O+=3)(n=Ze(this,I,t,Oe,s,u,l,c,h,O,O+1,O+2))&&(n.faceIndex=Math.floor(O/3),n.face.materialIndex=P.materialIndex,e.push(n));else for(var N=Math.max(0,f.start),L=Math.min(s.count,f.start+f.count);N<L;N+=3)(n=Ze(this,i,t,Oe,s,u,l,c,h,N,N+1,N+2))&&(n.faceIndex=Math.floor(N/3),e.push(n))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(Yt);function Ze(t,e,n,r,i,o,a,s,u,l,c,h){Ne.fromBufferAttribute(i,l),Le.fromBufferAttribute(i,c),De.fromBufferAttribute(i,h);var d=t.morphTargetInfluences;if(e.morphTargets&&o&&d){Ge.set(0,0,0),je.set(0,0,0),He.set(0,0,0);for(var f=0,p=o.length;f<p;f++){var v=d[f],m=o[f];0!==v&&(Fe.fromBufferAttribute(m,l),Be.fromBufferAttribute(m,c),Ue.fromBufferAttribute(m,h),a?(Ge.addScaledVector(Fe,v),je.addScaledVector(Be,v),He.addScaledVector(Ue,v)):(Ge.addScaledVector(Fe.sub(Ne),v),je.addScaledVector(Be.sub(Le),v),He.addScaledVector(Ue.sub(De),v)))}Ne.add(Ge),Le.add(je),De.add(He)}t.isSkinnedMesh&&(t.boneTransform(l,Ne),t.boneTransform(c,Le),t.boneTransform(h,De));var g=function(t,e,n,r,i,o,a,s){if(null===(1===e.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==e.side,s)))return null;Ye.copy(s),Ye.applyMatrix4(t.matrixWorld);var u=n.ray.origin.distanceTo(Ye);return u<n.near||u>n.far?null:{distance:u,point:Ye.clone(),object:t}}(t,e,n,r,Ne,Le,De,Xe);if(g){s&&(ze.fromBufferAttribute(s,l),Ve.fromBufferAttribute(s,c),We.fromBufferAttribute(s,h),g.uv=ie.getUV(Xe,Ne,Le,De,ze,Ve,We,new N)),u&&(ze.fromBufferAttribute(u,l),Ve.fromBufferAttribute(u,c),We.fromBufferAttribute(u,h),g.uv2=ie.getUV(Xe,Ne,Le,De,ze,Ve,We,new N));var y={a:l,b:c,c:h,normal:new W,materialIndex:0};ie.getNormal(Ne,Le,De,y.normal),g.face=y}return g}qe.prototype.isMesh=!0;var Qe=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;y(this,n),(t=e.call(this)).type="BoxGeometry",t.parameters={width:r,height:i,depth:o,widthSegments:a,heightSegments:s,depthSegments:u};var l=v(t);a=Math.floor(a),s=Math.floor(s),u=Math.floor(u);var c=[],h=[],d=[],f=[],p=0,m=0;function g(t,e,n,r,i,o,a,s,u,v,g){for(var y=o/u,_=a/v,x=o/2,b=a/2,T=s/2,w=u+1,E=v+1,S=0,A=0,M=new W,R=0;R<E;R++)for(var C=R*_-b,P=0;P<w;P++){var I=P*y-x;M[t]=I*r,M[e]=C*i,M[n]=T,h.push(M.x,M.y,M.z),M[t]=0,M[e]=0,M[n]=s>0?1:-1,d.push(M.x,M.y,M.z),f.push(P/u),f.push(1-R/v),S+=1}for(var O=0;O<v;O++)for(var k=0;k<u;k++){var N=p+k+w*O,L=p+k+w*(O+1),D=p+(k+1)+w*(O+1),F=p+(k+1)+w*O;c.push(N,L,F),c.push(L,D,F),A+=6}l.addGroup(m,A,g),m+=A,p+=S}return g("z","y","x",-1,-1,o,i,r,u,s,0),g("z","y","x",1,-1,o,i,-r,u,s,1),g("x","z","y",1,1,r,o,i,a,u,2),g("x","z","y",1,-1,r,o,-i,a,u,3),g("x","y","z",1,-1,r,i,o,a,s,4),g("x","y","z",-1,-1,r,i,-o,a,s,5),t.setIndex(c),t.setAttribute("position",new be(h,3)),t.setAttribute("normal",new be(d,3)),t.setAttribute("uv",new be(f,2)),t}return _(n,null,[{key:"fromJSON",value:function(t){return new n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}]),n}(Pe);function Ke(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}return e}function Je(t){for(var e={},n=0;n<t.length;n++){var r=Ke(t[n]);for(var i in r)e[i]=r[i]}return e}var $e={clone:Ke,merge:Je},tn=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.morphTargets=!1,r.morphNormals=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(t)),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ke(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}},{key:"toJSON",value:function(t){var e=d(f(n.prototype),"toJSON",this).call(this,t);for(var r in e.glslVersion=this.glslVersion,e.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?e.uniforms[r]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[r]={type:"m4",value:i.toArray()}:e.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var o={};for(var a in this.extensions)!0===this.extensions[a]&&(o[a]=!0);return Object.keys(o).length>0&&(e.extensions=o),e}}]),n}(ae);tn.prototype.isShaderMaterial=!0;var en=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.call(this)).type="Camera",t.matrixWorldInverse=new Tt,t.projectionMatrix=new Tt,t.projectionMatrixInverse=new Tt,t}return _(n,[{key:"copy",value:function(t,e){return d(f(n.prototype),"copy",this).call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}},{key:"updateMatrixWorld",value:function(t){d(f(n.prototype),"updateMatrixWorld",this).call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(t,e){d(f(n.prototype),"updateWorldMatrix",this).call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Yt);en.prototype.isCamera=!0;var nn=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return y(this,n),(t=e.call(this)).type="PerspectiveCamera",t.fov=r,t.zoom=1,t.near=o,t.far=a,t.focus=10,t.aspect=i,t.view=null,t.filmGauge=35,t.filmOffset=0,t.updateProjectionMatrix(),t}return _(n,[{key:"copy",value:function(t,e){return d(f(n.prototype),"copy",this).call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}},{key:"setFocalLength",value:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*R*Math.atan(e),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var t=Math.tan(.5*M*this.fov);return.5*this.getFilmHeight()/t}},{key:"getEffectiveFOV",value:function(){return 2*R*Math.atan(Math.tan(.5*M*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=this.near,e=t*Math.tan(.5*M*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,e-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(t){var e=d(f(n.prototype),"toJSON",this).call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}]),n}(en);nn.prototype.isPerspectiveCamera=!0;var rn=function(t){m(n,t);var e=g(n);function n(t,r,i){var o;if(y(this,n),(o=e.call(this)).type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return h(o,void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."));o.renderTarget=i;var a=new nn(90,1,t,r);a.layers=o.layers,a.up.set(0,-1,0),a.lookAt(new W(1,0,0)),o.add(a);var s=new nn(90,1,t,r);s.layers=o.layers,s.up.set(0,-1,0),s.lookAt(new W(-1,0,0)),o.add(s);var u=new nn(90,1,t,r);u.layers=o.layers,u.up.set(0,0,1),u.lookAt(new W(0,1,0)),o.add(u);var l=new nn(90,1,t,r);l.layers=o.layers,l.up.set(0,0,-1),l.lookAt(new W(0,-1,0)),o.add(l);var c=new nn(90,1,t,r);c.layers=o.layers,c.up.set(0,-1,0),c.lookAt(new W(0,0,1)),o.add(c);var d=new nn(90,1,t,r);return d.layers=o.layers,d.up.set(0,-1,0),d.lookAt(new W(0,0,-1)),o.add(d),h(o)}return _(n,[{key:"update",value:function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=c(this.children,6),i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],h=t.xr.enabled,d=t.getRenderTarget();t.xr.enabled=!1;var f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,o),t.setRenderTarget(n,2),t.render(e,a),t.setRenderTarget(n,3),t.render(e,s),t.setRenderTarget(n,4),t.render(e,u),n.texture.generateMipmaps=f,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(d),t.xr.enabled=h}}]),n}(Yt),on=function(t){m(n,t);var e=g(n);function n(t,r,i,o,a,s,u,l,c,h){var d;return y(this,n),(d=e.call(this,t=void 0!==t?t:[],r=void 0!==r?r:301,i,o,a,s,u=void 0!==u?u:1022,l,c,h))._needsFlipEnvMap=!0,d.flipY=!1,d}return _(n,[{key:"images",get:function(){return this.image},set:function(t){this.image=t}}]),n}(U);on.prototype.isCubeTexture=!0;var an=function(t){m(n,t);var e=g(n);function n(t,r,i){var o;return y(this,n),Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=i),o=e.call(this,t,t,r),r=r||{},o.texture=new on(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),o.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,o.texture.minFilter=void 0!==r.minFilter?r.minFilter:1006,o.texture._needsFlipEnvMap=!1,o}return _(n,[{key:"fromEquirectangularTexture",value:function(t,e){this.texture.type=e.type,this.texture.format=1023,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new Qe(5,5,5),a=new tn({name:"CubemapFromEquirect",uniforms:Ke(n),vertexShader:r,fragmentShader:i,side:1,blending:0});a.uniforms.tEquirect.value=e;var s=new qe(o,a),u=e.minFilter;return 1008===e.minFilter&&(e.minFilter=1006),new rn(1,10,this).update(t,s),e.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(t,e,n,r){for(var i=t.getRenderTarget(),o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(i)}}]),n}(H);an.prototype.isWebGLCubeRenderTarget=!0;var sn=new W,un=new W,ln=new D,cn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new W(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;y(this,t),this.normal=e,this.constant=n}return _(t,[{key:"set",value:function(t,e){return this.normal.copy(t),this.constant=e,this}},{key:"setComponents",value:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(t,e,n){var r=sn.subVectors(n,e).cross(un.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}},{key:"copy",value:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this}},{key:"normalize",value:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(t){return this.normal.dot(t)+this.constant}},{key:"distanceToSphere",value:function(t){return this.distanceToPoint(t.center)-t.radius}},{key:"projectPoint",value:function(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}},{key:"intersectLine",value:function(t,e){var n=t.delta(sn),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;var i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(n).multiplyScalar(i).add(t.start)}},{key:"intersectsLine",value:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}},{key:"intersectsBox",value:function(t){return t.intersectsPlane(this)}},{key:"intersectsSphere",value:function(t){return t.intersectsPlane(this)}},{key:"coplanarPoint",value:function(t){return t.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(t,e){var n=e||ln.getNormalMatrix(t),r=this.coplanarPoint(sn).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(t){return this.constant-=t.dot(this.normal),this}},{key:"equals",value:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}();cn.prototype.isPlane=!0;var hn=new ft,dn=new W,fn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cn,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cn,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new cn,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new cn,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new cn,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new cn;y(this,t),this.planes=[e,n,r,i,o,a]}return _(t,[{key:"set",value:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}},{key:"copy",value:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],d=n[9],f=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return e[0].setComponents(a-r,c-s,p-h,y-v).normalize(),e[1].setComponents(a+r,c+s,p+h,y+v).normalize(),e[2].setComponents(a+i,c+u,p+d,y+m).normalize(),e[3].setComponents(a-i,c-u,p-d,y-m).normalize(),e[4].setComponents(a-o,c-l,p-f,y-g).normalize(),e[5].setComponents(a+o,c+l,p+f,y+g).normalize(),this}},{key:"intersectsObject",value:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),hn.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(hn)}},{key:"intersectsSprite",value:function(t){return hn.center.set(0,0,0),hn.radius=.7071067811865476,hn.applyMatrix4(t.matrixWorld),this.intersectsSphere(hn)}},{key:"intersectsSphere",value:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++)if(e[i].distanceToPoint(n)<r)return!1;return!0}},{key:"intersectsBox",value:function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];if(dn.x=r.normal.x>0?t.max.x:t.min.x,dn.y=r.normal.y>0?t.max.y:t.min.y,dn.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(dn)<0)return!1}return!0}},{key:"containsPoint",value:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}();function pn(){var t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function vn(t,e){var n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){var o=r.get(e);(!o||o.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version})}else{e.isInterleavedBufferAttribute&&(e=e.data);var a=r.get(e);void 0===a?r.set(e,function(e,r){var i=e.array,o=e.usage,a=t.createBuffer();t.bindBuffer(r,a),t.bufferData(r,i,o),e.onUploadCallback();var s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?e.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):a.version<e.version&&(function(e,r,i){var o=r.array,a=r.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(a.buffer,e,i),a.version=e.version)}}}}var mn=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;y(this,n),(t=e.call(this)).type="PlaneGeometry",t.parameters={width:r,height:i,widthSegments:o,heightSegments:a};for(var s=r/2,u=i/2,l=Math.floor(o),c=Math.floor(a),h=l+1,d=c+1,f=r/l,p=i/c,v=[],m=[],g=[],_=[],x=0;x<d;x++)for(var b=x*p-u,T=0;T<h;T++){var w=T*f-s;m.push(w,-b,0),g.push(0,0,1),_.push(T/l),_.push(1-x/c)}for(var E=0;E<c;E++)for(var S=0;S<l;S++){var A=S+h*E,M=S+h*(E+1),R=S+1+h*(E+1),C=S+1+h*E;v.push(A,M,C),v.push(M,R,C)}return t.setIndex(v),t.setAttribute("position",new be(m,3)),t.setAttribute("normal",new be(g,3)),t.setAttribute("uv",new be(_,2)),t}return _(n,null,[{key:"fromJSON",value:function(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}}]),n}(Pe),gn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotVH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSNMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 transmission = transmissionFactor * getIBLVolumeRefraction(\n\t\tnormal, v, roughnessFactor, material.diffuseColor, totalSpecular,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, float perceptualRoughness, vec3 baseColor, vec3 specularColor,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform vec3 attenuationColor;\n\tuniform float attenuationDistance;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},yn={common:{diffuse:{value:new fe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new D},uv2Transform:{value:new D},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new N(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new fe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new fe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new D}},sprite:{diffuse:{value:new fe(16777215)},opacity:{value:1},center:{value:new N(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new D}}},_n={basic:{uniforms:Je([yn.common,yn.specularmap,yn.envmap,yn.aomap,yn.lightmap,yn.fog]),vertexShader:gn.meshbasic_vert,fragmentShader:gn.meshbasic_frag},lambert:{uniforms:Je([yn.common,yn.specularmap,yn.envmap,yn.aomap,yn.lightmap,yn.emissivemap,yn.fog,yn.lights,{emissive:{value:new fe(0)}}]),vertexShader:gn.meshlambert_vert,fragmentShader:gn.meshlambert_frag},phong:{uniforms:Je([yn.common,yn.specularmap,yn.envmap,yn.aomap,yn.lightmap,yn.emissivemap,yn.bumpmap,yn.normalmap,yn.displacementmap,yn.fog,yn.lights,{emissive:{value:new fe(0)},specular:{value:new fe(1118481)},shininess:{value:30}}]),vertexShader:gn.meshphong_vert,fragmentShader:gn.meshphong_frag},standard:{uniforms:Je([yn.common,yn.envmap,yn.aomap,yn.lightmap,yn.emissivemap,yn.bumpmap,yn.normalmap,yn.displacementmap,yn.roughnessmap,yn.metalnessmap,yn.fog,yn.lights,{emissive:{value:new fe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:gn.meshphysical_vert,fragmentShader:gn.meshphysical_frag},toon:{uniforms:Je([yn.common,yn.aomap,yn.lightmap,yn.emissivemap,yn.bumpmap,yn.normalmap,yn.displacementmap,yn.gradientmap,yn.fog,yn.lights,{emissive:{value:new fe(0)}}]),vertexShader:gn.meshtoon_vert,fragmentShader:gn.meshtoon_frag},matcap:{uniforms:Je([yn.common,yn.bumpmap,yn.normalmap,yn.displacementmap,yn.fog,{matcap:{value:null}}]),vertexShader:gn.meshmatcap_vert,fragmentShader:gn.meshmatcap_frag},points:{uniforms:Je([yn.points,yn.fog]),vertexShader:gn.points_vert,fragmentShader:gn.points_frag},dashed:{uniforms:Je([yn.common,yn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:gn.linedashed_vert,fragmentShader:gn.linedashed_frag},depth:{uniforms:Je([yn.common,yn.displacementmap]),vertexShader:gn.depth_vert,fragmentShader:gn.depth_frag},normal:{uniforms:Je([yn.common,yn.bumpmap,yn.normalmap,yn.displacementmap,{opacity:{value:1}}]),vertexShader:gn.normal_vert,fragmentShader:gn.normal_frag},sprite:{uniforms:Je([yn.sprite,yn.fog]),vertexShader:gn.sprite_vert,fragmentShader:gn.sprite_frag},background:{uniforms:{uvTransform:{value:new D},t2D:{value:null}},vertexShader:gn.background_vert,fragmentShader:gn.background_frag},cube:{uniforms:Je([yn.envmap,{opacity:{value:1}}]),vertexShader:gn.cube_vert,fragmentShader:gn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:gn.equirect_vert,fragmentShader:gn.equirect_frag},distanceRGBA:{uniforms:Je([yn.common,yn.displacementmap,{referencePosition:{value:new W},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:gn.distanceRGBA_vert,fragmentShader:gn.distanceRGBA_frag},shadow:{uniforms:Je([yn.lights,yn.fog,{color:{value:new fe(0)},opacity:{value:1}}]),vertexShader:gn.shadow_vert,fragmentShader:gn.shadow_frag}};function xn(t,e,n,r,i){var o,a,s=new fe(0),u=0,l=null,c=0,h=null;function d(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,i)}return{getClearColor:function(){return s},setClearColor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(t),d(s,u=e)},getClearAlpha:function(){return u},setClearAlpha:function(t){d(s,u=t)},render:function(n,i){var f=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=e.get(p));var v=t.xr,m=v.getSession&&v.getSession();m&&"additive"===m.environmentBlendMode&&(p=null),null===p?d(s,u):p&&p.isColor&&(d(p,1),f=!0),(t.autoClear||f)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),p&&(p.isCubeTexture||306===p.mapping)?(void 0===a&&((a=new qe(new Qe(1,1,1),new tn({name:"BackgroundCubeMaterial",uniforms:Ke(_n.cube.uniforms),vertexShader:_n.cube.vertexShader,fragmentShader:_n.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(a)),a.material.uniforms.envMap.value=p,a.material.uniforms.flipEnvMap.value=p.isCubeTexture&&p._needsFlipEnvMap?-1:1,l===p&&c===p.version&&h===t.toneMapping||(a.material.needsUpdate=!0,l=p,c=p.version,h=t.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null)):p&&p.isTexture&&(void 0===o&&((o=new qe(new mn(2,2),new tn({name:"BackgroundMaterial",uniforms:Ke(_n.background.uniforms),vertexShader:_n.background.vertexShader,fragmentShader:_n.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),o.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&c===p.version&&h===t.toneMapping||(o.material.needsUpdate=!0,l=p,c=p.version,h=t.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function bn(t,e,n,r){var i=t.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},u=d(null),l=u;function c(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function h(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function d(t){for(var e=[],n=[],r=[],o=0;o<i;o++)e[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function f(){for(var t=l.newAttributes,e=0,n=t.length;e<n;e++)t[e]=0}function p(t){v(t,0)}function v(n,i){var o=l.newAttributes,a=l.enabledAttributes,s=l.attributeDivisors;o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==i&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function m(){for(var e=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function g(e,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,o,a,s):t.vertexAttribIPointer(e,n,i,a,s)}function y(){_(),l!==u&&c((l=u).object)}function _(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,y,_){var x=!1;if(a){var b=function(e,n,i){var a=!0===i.wireframe,u=s[e.id];void 0===u&&(u={},s[e.id]=u);var l=u[n.id];void 0===l&&(l={},u[n.id]=l);var c=l[a];return void 0===c&&(c=d(r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),l[a]=c),c}(y,h,u);l!==b&&c((l=b).object),x=function(t,e){var n=l.attributes,r=t.attributes,i=0;for(var o in r){var a=n[o],s=r[o];if(void 0===a)return!0;if(a.attribute!==s)return!0;if(a.data!==s.data)return!0;i++}return l.attributesNum!==i||l.index!==e}(y,_),x&&function(t,e){var n={},r=t.attributes,i=0;for(var o in r){var a=r[o],s={};s.attribute=a,a.data&&(s.data=a.data),n[o]=s,i++}l.attributes=n,l.attributesNum=i,l.index=e}(y,_)}else{var T=!0===u.wireframe;l.geometry===y.id&&l.program===h.id&&l.wireframe===T||(l.geometry=y.id,l.program=h.id,l.wireframe=T,x=!0)}!0===i.isInstancedMesh&&(x=!0),null!==_&&n.update(_,34963),x&&(function(i,o,a,s){if(!1!==r.isWebGL2||!i.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==e.get("ANGLE_instanced_arrays")){f();var u=s.attributes,l=a.getAttributes(),c=o.defaultAttributeValues;for(var h in l){var d=l[h];if(d>=0){var y=u[h];if(void 0!==y){var _=y.normalized,x=y.itemSize,b=n.get(y);if(void 0===b)continue;var T=b.buffer,w=b.type,E=b.bytesPerElement;if(y.isInterleavedBufferAttribute){var S=y.data,A=S.stride,M=y.offset;S&&S.isInstancedInterleavedBuffer?(v(d,S.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=S.meshPerAttribute*S.count)):p(d),t.bindBuffer(34962,T),g(d,x,w,_,A*E,M*E)}else y.isInstancedBufferAttribute?(v(d,y.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)):p(d),t.bindBuffer(34962,T),g(d,x,w,_,0,0)}else if("instanceMatrix"===h){var R=n.get(i.instanceMatrix);if(void 0===R)continue;var C=R.buffer,P=R.type;v(d+0,1),v(d+1,1),v(d+2,1),v(d+3,1),t.bindBuffer(34962,C),t.vertexAttribPointer(d+0,4,P,!1,64,0),t.vertexAttribPointer(d+1,4,P,!1,64,16),t.vertexAttribPointer(d+2,4,P,!1,64,32),t.vertexAttribPointer(d+3,4,P,!1,64,48)}else if("instanceColor"===h){var I=n.get(i.instanceColor);if(void 0===I)continue;var O=I.buffer,k=I.type;v(d,1),t.bindBuffer(34962,O),t.vertexAttribPointer(d,3,k,!1,12,0)}else if(void 0!==c){var N=c[h];if(void 0!==N)switch(N.length){case 2:t.vertexAttrib2fv(d,N);break;case 3:t.vertexAttrib3fv(d,N);break;case 4:t.vertexAttrib4fv(d,N);break;default:t.vertexAttrib1fv(d,N)}}}}m()}}(i,u,h,y),null!==_&&t.bindBuffer(34963,n.get(_).buffer))},reset:y,resetDefaultState:_,dispose:function(){for(var t in y(),s){var e=s[t];for(var n in e){var r=e[n];for(var i in r)h(r[i].object),delete r[i];delete e[n]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0!==s[t.id]){var e=s[t.id];for(var n in e){var r=e[n];for(var i in r)h(r[i].object),delete r[i];delete e[n]}delete s[t.id]}},releaseStatesOfProgram:function(t){for(var e in s){var n=s[e];if(void 0!==n[t.id]){var r=n[t.id];for(var i in r)h(r[i].object),delete r[i];delete n[t.id]}}},initAttributes:f,enableAttribute:p,disableUnusedAttributes:m}}function Tn(t,e,n,r){var i,o=r.isWebGL2;this.setMode=function(t){i=t},this.render=function(e,r){t.drawArrays(i,e,r),n.update(r,i,1)},this.renderInstances=function(r,a,s){if(0!==s){var u,l;if(o)u=t,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,r,a,s),n.update(a,i,s)}}}function wn(t,e,n){var r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=o||e.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),h=t.getParameter(35660),d=t.getParameter(3379),f=t.getParameter(34076),p=t.getParameter(34921),v=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),y=h>0,_=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){var n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:y&&_,maxSamples:o?t.getParameter(36183):0}}function En(t){var e=this,n=null,r=0,i=!1,o=!1,a=new cn,s=new D,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(t,n,r,i){var o=null!==t?t.length:0,l=null;if(0!==o){if(l=u.value,!0!==i||null===l){var c=r+4*o,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var d=0,f=r;d!==o;++d,f+=4)a.copy(t[d]).applyMatrix4(h,s),a.normal.toArray(l,f),l[f+3]=a.constant}u.value=l,u.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){var a=0!==t.length||e||0!==r||i;return i=e,n=c(t,o,0),r=t.length,a},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1,l()},this.setState=function(e,a,s){var h=e.clippingPlanes,d=e.clipIntersection,f=e.clipShadows,p=t.get(e);if(!i||null===h||0===h.length||o&&!f)o?c(null):l();else{var v=o?0:r,m=4*v,g=p.clippingState||null;u.value=g,g=c(h,a,m,s);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=v}}}function Sn(t){var e=new WeakMap;function n(t,e){return 303===e?t.mapping=301:304===e&&(t.mapping=302),t}function r(t){var n=t.target;n.removeEventListener("dispose",r);var i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var o=i.mapping;if(303===o||304===o){if(e.has(i))return n(e.get(i).texture,i.mapping);var a=i.image;if(a&&a.height>0){var s=t.getRenderTarget(),u=new an(a.height/2);return u.fromEquirectangularTexture(t,i),e.set(i,u),t.setRenderTarget(s),i.addEventListener("dispose",r),n(u.texture,i.mapping)}return null}}return i},dispose:function(){e=new WeakMap}}}function An(t){var e={};function n(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(t){var e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Mn(t,e,n,r){var i={},o=new WeakMap;function a(t){var s=t.target;for(var u in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[u]);s.removeEventListener("dispose",a),delete i[s.id];var l=o.get(s);l&&(e.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){var n=[],r=t.index,i=t.attributes.position,a=0;if(null!==r){var s=r.array;a=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],h=s[u+1],d=s[u+2];n.push(c,h,h,d,d,c)}}else{var f=i.array;a=i.version;for(var p=0,v=f.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var _=new(Te(n)>65535?xe:ye)(n,1);_.version=a;var x=o.get(t);x&&e.remove(x),o.set(t,_)}return{get:function(t,e){return!0===i[e.id]||(e.addEventListener("dispose",a),i[e.id]=!0,n.memory.geometries++),e},update:function(t){var n=t.attributes;for(var r in n)e.update(n[r],34962);var i=t.morphAttributes;for(var o in i)for(var a=i[o],s=0,u=a.length;s<u;s++)e.update(a[s],34962)},getWireframeAttribute:function(t){var e=o.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return o.get(t)}}}function Rn(t,e,n,r){var i,o,a,s=r.isWebGL2;this.setMode=function(t){i=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,r){t.drawElements(i,r,o,e*a),n.update(r,i,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,h;if(s)c=t,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](i,u,o,r*a,l),n.update(u,i,l)}}}function Cn(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Pn(t,e){return t[0]-e[0]}function In(t,e){return Math.abs(e[1])-Math.abs(t[1])}function On(t){for(var e={},n=new Float32Array(8),r=[],i=0;i<8;i++)r[i]=[i,0];return{update:function(i,o,a,s){var u=i.morphTargetInfluences,l=void 0===u?0:u.length,c=e[o.id];if(void 0===c||c.length!==l){c=[];for(var h=0;h<l;h++)c[h]=[h,0];e[o.id]=c}for(var d=0;d<l;d++){var f=c[d];f[0]=d,f[1]=u[d]}c.sort(In);for(var p=0;p<8;p++)p<l&&c[p][1]?(r[p][0]=c[p][0],r[p][1]=c[p][1]):(r[p][0]=Number.MAX_SAFE_INTEGER,r[p][1]=0);r.sort(Pn);for(var v=a.morphTargets&&o.morphAttributes.position,m=a.morphNormals&&o.morphAttributes.normal,g=0,y=0;y<8;y++){var _=r[y],x=_[0],b=_[1];x!==Number.MAX_SAFE_INTEGER&&b?(v&&o.getAttribute("morphTarget"+y)!==v[x]&&o.setAttribute("morphTarget"+y,v[x]),m&&o.getAttribute("morphNormal"+y)!==m[x]&&o.setAttribute("morphNormal"+y,m[x]),n[y]=b,g+=b):(v&&!0===o.hasAttribute("morphTarget"+y)&&o.deleteAttribute("morphTarget"+y),m&&!0===o.hasAttribute("morphNormal"+y)&&o.deleteAttribute("morphNormal"+y),n[y]=0)}var T=o.morphTargetsRelative?1:1-g;s.getUniforms().setValue(t,"morphTargetBaseInfluence",T),s.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function kn(t,e,n,r){var i=new WeakMap;function o(t){var e=t.target;e.removeEventListener("dispose",o),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){var a=r.render.frame,s=t.geometry,u=e.get(t,s);return i.get(u)!==a&&(e.update(u),i.set(u,a)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",o)&&t.addEventListener("dispose",o),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}_n.physical={uniforms:Je([_n.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new N(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new fe(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new N},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new fe(0)}}]),vertexShader:gn.meshphysical_vert,fragmentShader:gn.meshphysical_frag};var Nn=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return y(this,n),(t=e.call(this,null)).image={data:r,width:i,height:o,depth:a},t.magFilter=1003,t.minFilter=1003,t.wrapR=1001,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t.needsUpdate=!0,t}return _(n)}(U);Nn.prototype.isDataTexture2DArray=!0;var Ln=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return y(this,n),(t=e.call(this,null)).image={data:r,width:i,height:o,depth:a},t.magFilter=1003,t.minFilter=1003,t.wrapR=1001,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t.needsUpdate=!0,t}return _(n)}(U);Ln.prototype.isDataTexture3D=!0;var Dn=new U,Fn=new Nn,Bn=new Ln,Un=new on,Gn=[],jn=[],Hn=new Float32Array(16),zn=new Float32Array(9),Vn=new Float32Array(4);function Wn(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,o=Gn[i];if(void 0===o&&(o=new Float32Array(i),Gn[i]=o),0!==e){r.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function Xn(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Yn(t,e){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}function qn(t,e){var n=jn[e];void 0===n&&(n=new Int32Array(e),jn[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Zn(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Qn(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Xn(n,e))return;t.uniform2fv(this.addr,e),Yn(n,e)}}function Kn(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Xn(n,e))return;t.uniform3fv(this.addr,e),Yn(n,e)}}function Jn(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Xn(n,e))return;t.uniform4fv(this.addr,e),Yn(n,e)}}function $n(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Xn(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Yn(n,e)}else{if(Xn(n,r))return;Vn.set(r),t.uniformMatrix2fv(this.addr,!1,Vn),Yn(n,r)}}function tr(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Xn(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Yn(n,e)}else{if(Xn(n,r))return;zn.set(r),t.uniformMatrix3fv(this.addr,!1,zn),Yn(n,r)}}function er(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Xn(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Yn(n,e)}else{if(Xn(n,r))return;Hn.set(r),t.uniformMatrix4fv(this.addr,!1,Hn),Yn(n,r)}}function nr(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function rr(t,e){var n=this.cache;Xn(n,e)||(t.uniform2iv(this.addr,e),Yn(n,e))}function ir(t,e){var n=this.cache;Xn(n,e)||(t.uniform3iv(this.addr,e),Yn(n,e))}function or(t,e){var n=this.cache;Xn(n,e)||(t.uniform4iv(this.addr,e),Yn(n,e))}function ar(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function sr(t,e){var n=this.cache;Xn(n,e)||(t.uniform2uiv(this.addr,e),Yn(n,e))}function ur(t,e){var n=this.cache;Xn(n,e)||(t.uniform3uiv(this.addr,e),Yn(n,e))}function lr(t,e){var n=this.cache;Xn(n,e)||(t.uniform4uiv(this.addr,e),Yn(n,e))}function cr(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||Dn,i)}function hr(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Bn,i)}function dr(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||Un,i)}function fr(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Fn,i)}function pr(t,e){t.uniform1fv(this.addr,e)}function vr(t,e){var n=Wn(e,this.size,2);t.uniform2fv(this.addr,n)}function mr(t,e){var n=Wn(e,this.size,3);t.uniform3fv(this.addr,n)}function gr(t,e){var n=Wn(e,this.size,4);t.uniform4fv(this.addr,n)}function yr(t,e){var n=Wn(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function _r(t,e){var n=Wn(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function xr(t,e){var n=Wn(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function br(t,e){t.uniform1iv(this.addr,e)}function Tr(t,e){t.uniform2iv(this.addr,e)}function wr(t,e){t.uniform3iv(this.addr,e)}function Er(t,e){t.uniform4iv(this.addr,e)}function Sr(t,e){t.uniform1uiv(this.addr,e)}function Ar(t,e){t.uniform2uiv(this.addr,e)}function Mr(t,e){t.uniform3uiv(this.addr,e)}function Rr(t,e){t.uniform4uiv(this.addr,e)}function Cr(t,e,n){var r=e.length,i=qn(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(e[o]||Dn,i[o])}function Pr(t,e,n){var r=e.length,i=qn(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(e[o]||Un,i[o])}function Ir(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Zn;case 35664:return Qn;case 35665:return Kn;case 35666:return Jn;case 35674:return $n;case 35675:return tr;case 35676:return er;case 5124:case 35670:return nr;case 35667:case 35671:return rr;case 35668:case 35672:return ir;case 35669:case 35673:return or;case 5125:return ar;case 36294:return sr;case 36295:return ur;case 36296:return lr;case 35678:case 36198:case 36298:case 36306:case 35682:return cr;case 35679:case 36299:case 36307:return hr;case 35680:case 36300:case 36308:case 36293:return dr;case 36289:case 36303:case 36311:case 36292:return fr}}(e.type)}function Or(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return pr;case 35664:return vr;case 35665:return mr;case 35666:return gr;case 35674:return yr;case 35675:return _r;case 35676:return xr;case 5124:case 35670:return br;case 35667:case 35671:return Tr;case 35668:case 35672:return wr;case 35669:case 35673:return Er;case 5125:return Sr;case 36294:return Ar;case 36295:return Mr;case 36296:return Rr;case 35678:case 36198:case 36298:case 36306:case 35682:return Cr;case 35680:case 36300:case 36308:case 36293:return Pr}}(e.type)}function kr(t){this.id=t,this.seq=[],this.map={}}Or.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Yn(e,t)},kr.prototype.setValue=function(t,e,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(t,e[a.id],n)}};var Nr=/(\w+)(\])?(\[|\.)?/g;function Lr(t,e){t.seq.push(e),t.map[e.id]=e}function Dr(t,e,n){var r=t.name,i=r.length;for(Nr.lastIndex=0;;){var o=Nr.exec(r),a=Nr.lastIndex,s=o[1],u="]"===o[2],l=o[3];if(u&&(s|=0),void 0===l||"["===l&&a+2===i){Lr(n,void 0===l?new Ir(s,t,e):new Or(s,t,e));break}var c=n.map[s];void 0===c&&Lr(n,c=new kr(s)),n=c}}function Fr(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),r=0;r<n;++r){var i=t.getActiveUniform(e,r);Dr(i,t.getUniformLocation(e,i.name),this)}}function Br(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}Fr.prototype.setValue=function(t,e,n,r){var i=this.map[e];void 0!==i&&i.setValue(t,n,r)},Fr.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},Fr.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var a=e[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,r)}},Fr.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n};var Ur=0;function Gr(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function jr(t,e,n){var r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function Hr(t,e){var n=Gr(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function zr(t,e){var n=Gr(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Vr(t,e){var n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Wr(t){return""!==t}function Xr(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Yr(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var qr=/^[ \t]*#include +<([\w\d./]+)>/gm;function Zr(t){return t.replace(qr,Qr)}function Qr(t,e){var n=gn[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Zr(n)}var Kr=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Jr=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function $r(t){return t.replace(Jr,ei).replace(Kr,ti)}function ti(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ei(t,e,n,r)}function ei(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function ni(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function ri(t,e,n,r){var i,o,a=t.getContext(),s=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(t){var e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(n),h=function(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),d=function(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(n),f=function(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),p=t.gammaFactor>0?t.gammaFactor:1,v=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission>0)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Wr).join("\n")}(n),m=function(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(s),g=a.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[m].filter(Wr).join("\n")).length>0&&(i+="\n"),(o=[v,m].filter(Wr).join("\n")).length>0&&(o+="\n")):(i=[ni(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Wr).join("\n"),o=[v,ni(n),"#define SHADER_NAME "+n.shaderName,m,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?gn.tonemapping_pars_fragment:"",0!==n.toneMapping?Vr("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",gn.encodings_pars_fragment,n.map?Hr("mapTexelToLinear",n.mapEncoding):"",n.matcap?Hr("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Hr("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Hr("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Hr("lightMapTexelToLinear",n.lightMapEncoding):"",zr("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Wr).join("\n")),u=Yr(u=Xr(u=Zr(u),n),n),l=Yr(l=Xr(l=Zr(l),n),n),u=$r(u),l=$r(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",i=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,o=["#define varying in","300 es"===n.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+o);var _,x,b=y+o+l,T=Br(a,35633,y+i+u),w=Br(a,35632,b);if(a.attachShader(g,T),a.attachShader(g,w),void 0!==n.index0AttributeName?a.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(g,0,"position"),a.linkProgram(g),t.debug.checkShaderErrors){var E=a.getProgramInfoLog(g).trim(),S=a.getShaderInfoLog(T).trim(),A=a.getShaderInfoLog(w).trim(),M=!0,R=!0;if(!1===a.getProgramParameter(g,35714)){M=!1;var C=jr(a,T,"vertex"),P=jr(a,w,"fragment");console.error("THREE.WebGLProgram: shader error: ",a.getError(),"35715",a.getProgramParameter(g,35715),"gl.getProgramInfoLog",E,C,P)}else""!==E?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",E):""!==S&&""!==A||(R=!1);R&&(this.diagnostics={runnable:M,programLog:E,vertexShader:{log:S,prefix:i},fragmentShader:{log:A,prefix:o}})}return a.deleteShader(T),a.deleteShader(w),this.getUniforms=function(){return void 0===_&&(_=new Fr(a,g)),_},this.getAttributes=function(){return void 0===x&&(x=function(t,e){for(var n={},r=t.getProgramParameter(e,35721),i=0;i<r;i++){var o=t.getActiveAttrib(e,i).name;n[o]=t.getAttribLocation(e,o)}return n}(a,g)),x},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=Ur++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=T,this.fragmentShader=w,this}function ii(t,e,n,r,i,o){var a=[],s=r.isWebGL2,u=r.logarithmicDepthBuffer,l=r.floatVertexTextures,c=r.maxVertexUniforms,h=r.vertexTextures,d=r.precision,f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function v(t){var e;return t&&t.isTexture?e=t.encoding:t&&t.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=3e3,e}return{getParameters:function(i,a,p,m,g){var y,_,x=m.fog,b=i.isMeshStandardMaterial?m.environment:null,T=e.get(i.envMap||b),w=f[i.type],E=g.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(l)return 1024;var n=c,r=Math.floor((n-20)/4),i=Math.min(r,e.length);return i<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+i+"."),0):i}(g):0;if(null!==i.precision&&((d=r.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead.")),w){var S=_n[w];y=S.vertexShader,_=S.fragmentShader}else y=i.vertexShader,_=i.fragmentShader;var A=t.getRenderTarget();return{isWebGL2:s,shaderID:w,shaderName:i.type,vertexShader:y,fragmentShader:_,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:d,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:h,outputEncoding:null!==A?v(A.texture):t.outputEncoding,map:!!i.map,mapEncoding:v(i.map),matcap:!!i.matcap,matcapEncoding:v(i.matcap),envMap:!!T,envMapMode:T&&T.mapping,envMapEncoding:v(T),envMapCubeUV:!!T&&(306===T.mapping||307===T.mapping),lightMap:!!i.lightMap,lightMapEncoding:v(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:v(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:0===i.normalMapType,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmission:!!i.transmission,transmissionMap:!!i.transmissionMap,thicknessMap:!!i.thicknessMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&g.geometry&&g.geometry.attributes.color&&4===g.geometry.attributes.color.itemSize,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap||i.thicknessMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmission||i.transmissionMap||i.thicknessMap||!i.displacementMap),fog:!!x,useFog:i.fog,fogExp2:x&&x.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===g.isSkinnedMesh&&E>0,maxBones:E,useVertexTexture:l,morphTargets:i.morphTargets,morphNormals:i.morphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:t.shadowMap.enabled&&p.length>0,shadowMapType:t.shadowMap.type,toneMapping:i.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:2===i.side,flipSided:1===i.side,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);if(!1===e.isRawShaderMaterial){for(var i=0;i<p.length;i++)n.push(e[p[i]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){var e,n=f[t.type];if(n){var r=_n[n];e=$e.clone(r.uniforms)}else e=t.uniforms;return e},acquireProgram:function(e,n){for(var r,o=0,s=a.length;o<s;o++){var u=a[o];if(u.cacheKey===n){++(r=u).usedTimes;break}}return void 0===r&&(r=new ri(t,n,e,i),a.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){var e=a.indexOf(t);a[e]=a[a.length-1],a.pop(),t.destroy()}},programs:a}}function oi(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function ai(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function si(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ui(t){var e=[],n=0,r=[],i=[],o=[],a={id:-1};function s(r,i,o,s,u,l){var c=e[n],h=t.get(o);return void 0===c?(c={id:r.id,object:r,geometry:i,material:o,program:h.program||a,groupOrder:s,renderOrder:r.renderOrder,z:u,group:l},e[n]=c):(c.id=r.id,c.object=r,c.geometry=i,c.material=o,c.program=h.program||a,c.groupOrder=s,c.renderOrder=r.renderOrder,c.z=u,c.group=l),n++,c}return{opaque:r,transmissive:i,transparent:o,init:function(){n=0,r.length=0,i.length=0,o.length=0},push:function(t,e,n,a,u,l){var c=s(t,e,n,a,u,l);n.transmission>0?i.push(c):!0===n.transparent?o.push(c):r.push(c)},unshift:function(t,e,n,a,u,l){var c=s(t,e,n,a,u,l);n.transmission>0?i.unshift(c):!0===n.transparent?o.unshift(c):r.unshift(c)},finish:function(){for(var t=n,r=e.length;t<r;t++){var i=e[t];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(t,e){r.length>1&&r.sort(t||ai),i.length>1&&i.sort(e||si),o.length>1&&o.sort(e||si)}}}function li(t){var e=new WeakMap;return{get:function(n,r){var i;return!1===e.has(n)?(i=new ui(t),e.set(n,[i])):r>=e.get(n).length?(i=new ui(t),e.get(n).push(i)):i=e.get(n)[r],i},dispose:function(){e=new WeakMap}}}function ci(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new W,color:new fe};break;case"SpotLight":n={position:new W,direction:new W,color:new fe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new W,color:new fe,distance:0,decay:0};break;case"HemisphereLight":n={direction:new W,skyColor:new fe,groundColor:new fe};break;case"RectAreaLight":n={color:new fe,position:new W,halfWidth:new W,halfHeight:new W}}return t[e.id]=n,n}}}var hi=0;function di(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function fi(t,e){for(var n=new ci,r=function(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new N};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new N,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},o=0;o<9;o++)i.probe.push(new W);var a=new W,s=new Tt,u=new Tt;return{setup:function(o){for(var a=0,s=0,u=0,l=0;l<9;l++)i.probe[l].set(0,0,0);var c=0,h=0,d=0,f=0,p=0,v=0,m=0,g=0;o.sort(di);for(var y=0,_=o.length;y<_;y++){var x=o[y],b=x.color,T=x.intensity,w=x.distance,E=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)a+=b.r*T,s+=b.g*T,u+=b.b*T;else if(x.isLightProbe)for(var S=0;S<9;S++)i.probe[S].addScaledVector(x.sh.coefficients[S],T);else if(x.isDirectionalLight){var A=n.get(x);if(A.color.copy(x.color).multiplyScalar(x.intensity),x.castShadow){var M=x.shadow,R=r.get(x);R.shadowBias=M.bias,R.shadowNormalBias=M.normalBias,R.shadowRadius=M.radius,R.shadowMapSize=M.mapSize,i.directionalShadow[c]=R,i.directionalShadowMap[c]=E,i.directionalShadowMatrix[c]=x.shadow.matrix,v++}i.directional[c]=A,c++}else if(x.isSpotLight){var C=n.get(x);if(C.position.setFromMatrixPosition(x.matrixWorld),C.color.copy(b).multiplyScalar(T),C.distance=w,C.coneCos=Math.cos(x.angle),C.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),C.decay=x.decay,x.castShadow){var P=x.shadow,I=r.get(x);I.shadowBias=P.bias,I.shadowNormalBias=P.normalBias,I.shadowRadius=P.radius,I.shadowMapSize=P.mapSize,i.spotShadow[d]=I,i.spotShadowMap[d]=E,i.spotShadowMatrix[d]=x.shadow.matrix,g++}i.spot[d]=C,d++}else if(x.isRectAreaLight){var O=n.get(x);O.color.copy(b).multiplyScalar(T),O.halfWidth.set(.5*x.width,0,0),O.halfHeight.set(0,.5*x.height,0),i.rectArea[f]=O,f++}else if(x.isPointLight){var k=n.get(x);if(k.color.copy(x.color).multiplyScalar(x.intensity),k.distance=x.distance,k.decay=x.decay,x.castShadow){var N=x.shadow,L=r.get(x);L.shadowBias=N.bias,L.shadowNormalBias=N.normalBias,L.shadowRadius=N.radius,L.shadowMapSize=N.mapSize,L.shadowCameraNear=N.camera.near,L.shadowCameraFar=N.camera.far,i.pointShadow[h]=L,i.pointShadowMap[h]=E,i.pointShadowMatrix[h]=x.shadow.matrix,m++}i.point[h]=k,h++}else if(x.isHemisphereLight){var D=n.get(x);D.skyColor.copy(x.color).multiplyScalar(T),D.groundColor.copy(x.groundColor).multiplyScalar(T),i.hemi[p]=D,p++}}f>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=yn.LTC_FLOAT_1,i.rectAreaLTC2=yn.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=yn.LTC_HALF_1,i.rectAreaLTC2=yn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=s,i.ambient[2]=u;var F=i.hash;F.directionalLength===c&&F.pointLength===h&&F.spotLength===d&&F.rectAreaLength===f&&F.hemiLength===p&&F.numDirectionalShadows===v&&F.numPointShadows===m&&F.numSpotShadows===g||(i.directional.length=c,i.spot.length=d,i.rectArea.length=f,i.point.length=h,i.hemi.length=p,i.directionalShadow.length=v,i.directionalShadowMap.length=v,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=v,i.pointShadowMatrix.length=m,i.spotShadowMatrix.length=g,F.directionalLength=c,F.pointLength=h,F.spotLength=d,F.rectAreaLength=f,F.hemiLength=p,F.numDirectionalShadows=v,F.numPointShadows=m,F.numSpotShadows=g,i.version=hi++)},setupView:function(t,e){for(var n=0,r=0,o=0,l=0,c=0,h=e.matrixWorldInverse,d=0,f=t.length;d<f;d++){var p=t[d];if(p.isDirectionalLight){var v=i.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),a.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(a),v.direction.transformDirection(h),n++}else if(p.isSpotLight){var m=i.spot[o];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),m.direction.setFromMatrixPosition(p.matrixWorld),a.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(a),m.direction.transformDirection(h),o++}else if(p.isRectAreaLight){var g=i.rectArea[l];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),u.identity(),s.copy(p.matrixWorld),s.premultiply(h),u.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(u),g.halfHeight.applyMatrix4(u),l++}else if(p.isPointLight){var y=i.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){var _=i.hemi[c];_.direction.setFromMatrixPosition(p.matrixWorld),_.direction.transformDirection(h),_.direction.normalize(),c++}}},state:i}}function pi(t,e){var n=new fi(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function vi(t,e){var n=new WeakMap;return{get:function(r){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new pi(t,e),n.set(r,[i])):o>=n.get(r).length?(i=new pi(t,e),n.get(r).push(i)):i=n.get(r)[o],i},dispose:function(){n=new WeakMap}}}var mi=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).type="MeshDepthMaterial",r.depthPacking=3200,r.morphTargets=!1,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.depthPacking=t.depthPacking,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}]),n}(ae);mi.prototype.isMeshDepthMaterial=!0;var gi=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).type="MeshDistanceMaterial",r.referencePosition=new W,r.nearDistance=1,r.farDistance=1e3,r.morphTargets=!1,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}]),n}(ae);function yi(t,e,n){var r=new fn,i=new N,o=new N,a=new j,s=[],u=[],l={},c=n.maxTextureSize,h={0:1,1:0,2:2},d=new tn({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new N},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=d.clone();f.defines.HORIZONTAL_PASS=1;var p=new Pe;p.setAttribute("position",new ge(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new qe(p,d),m=this;function g(n,r){var i=e.update(v);d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,d,v,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,f,v,null)}function y(t){var e=t<<0,n=s[e];return void 0===n&&(n=new mi({depthPacking:3201,morphTargets:t}),s[e]=n),n}function _(t){var e=t<<0,n=u[e];return void 0===n&&(n=new gi({morphTargets:t}),u[e]=n),n}function x(e,n,r,i,o,a,s){var u=null,c=y,d=e.customDepthMaterial;if(!0===i.isPointLight&&(c=_,d=e.customDistanceMaterial),void 0===d){var f=!1;!0===r.morphTargets&&(f=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0),u=c(f)}else u=d;if(t.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var p=u.uuid,v=r.uuid,m=l[p];void 0===m&&(m={},l[p]=m);var g=m[v];void 0===g&&(g=u.clone(),m[v]=g),u=g}return u.visible=r.visible,u.wireframe=r.wireframe,u.side=3===s?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],u.clipShadows=r.clipShadows,u.clippingPlanes=r.clippingPlanes,u.clipIntersection=r.clipIntersection,u.wireframeLinewidth=r.wireframeLinewidth,u.linewidth=r.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=o,u.farDistance=a),u}function b(n,i,o,a,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var u=e.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,h=0,d=c.length;h<d;h++){var f=c[h],p=l[f.materialIndex];if(p&&p.visible){var v=x(n,u,p,a,o.near,o.far,s);t.renderBufferDirect(o,null,u,v,n,f)}}else if(l.visible){var m=x(n,u,l,a,o.near,o.far,s);t.renderBufferDirect(o,null,u,m,n,null)}}for(var g=n.children,y=0,_=g.length;y<_;y++)b(g[y],i,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==e.length){var u=t.getRenderTarget(),l=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var f=0,p=e.length;f<p;f++){var v=e[f],y=v.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){i.copy(y.mapSize);var _=y.getFrameExtents();if(i.multiply(_),o.copy(y.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/_.x),i.x=o.x*_.x,y.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/_.y),i.y=o.y*_.y,y.mapSize.y=o.y)),null===y.map&&!y.isPointLightShadow&&3===this.type){var x={minFilter:1006,magFilter:1006,format:1023};y.map=new H(i.x,i.y,x),y.map.texture.name=v.name+".shadowMap",y.mapPass=new H(i.x,i.y,x),y.camera.updateProjectionMatrix()}if(null===y.map){y.map=new H(i.x,i.y,{minFilter:1003,magFilter:1003,format:1023}),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()}t.setRenderTarget(y.map),t.clear();for(var T=y.getViewportCount(),w=0;w<T;w++){var E=y.getViewport(w);a.set(o.x*E.x,o.y*E.y,o.x*E.z,o.y*E.w),d.viewport(a),y.updateMatrices(v,w),r=y.getFrustum(),b(n,s,y.camera,v,this.type)}y.isPointLightShadow||3!==this.type||g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,t.setRenderTarget(u,l,h)}}}function _i(t,e,n){var r=n.isWebGL2,i=new function(){var e=!1,n=new j,r=null,i=new j(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var e=!1,n=null,r=null,i=null;return{setTest:function(t){t?F(2929):B(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},a=new function(){var e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(t){e||(t?F(2960):B(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}},s={},u=null,l={},c=null,h=!1,d=null,f=null,p=null,v=null,m=null,g=null,y=null,_=!1,x=null,b=null,T=null,w=null,E=null,S=t.getParameter(35661),A=!1,M=0,R=t.getParameter(7938);-1!==R.indexOf("WebGL")?(M=parseFloat(/^WebGL (\d)/.exec(R)[1]),A=M>=1):-1!==R.indexOf("OpenGL ES")&&(M=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),A=M>=2);var C=null,P={},I=t.getParameter(3088),O=t.getParameter(2978),k=(new j).fromArray(I),N=(new j).fromArray(O);function L(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var a=0;a<r;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var D={};function F(e){!0!==s[e]&&(t.enable(e),s[e]=!0)}function B(e){!1!==s[e]&&(t.disable(e),s[e]=!1)}D[3553]=L(3553,3553,1),D[34067]=L(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),F(2929),o.setFunc(3),V(!1),W(1),F(2884),z(0);var U={100:32774,101:32778,102:32779};if(r)U[103]=32775,U[104]=32776;else{var G=e.get("EXT_blend_minmax");null!==G&&(U[103]=G.MIN_EXT,U[104]=G.MAX_EXT)}var H={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function z(e,n,r,i,o,a,s,u){if(0!==e){if(!1===h&&(F(3042),h=!0),5===e)o=o||n,a=a||r,s=s||i,n===f&&o===m||(t.blendEquationSeparate(U[n],U[o]),f=n,m=o),r===p&&i===v&&a===g&&s===y||(t.blendFuncSeparate(H[r],H[i],H[a],H[s]),p=r,v=i,g=a,y=s),d=e,_=null;else if(e!==d||u!==_){if(100===f&&100===m||(t.blendEquation(32774),f=100,m=100),u)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}p=null,v=null,g=null,y=null,d=e,_=u}}else!0===h&&(B(3042),h=!1)}function V(e){x!==e&&(e?t.frontFace(2304):t.frontFace(2305),x=e)}function W(e){0!==e?(F(2884),e!==b&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):B(2884),b=e}function X(e,n,r){e?(F(32823),w===n&&E===r||(t.polygonOffset(n,r),w=n,E=r)):B(32823)}function Y(e){void 0===e&&(e=33984+S-1),C!==e&&(t.activeTexture(e),C=e)}return{buffers:{color:i,depth:o,stencil:a},enable:F,disable:B,bindFramebuffer:function(e,n){return null===n&&null!==u&&(n=u),l[e]!==n&&(t.bindFramebuffer(e,n),l[e]=n,r&&(36009===e&&(l[36160]=n),36160===e&&(l[36009]=n)),!0)},bindXRFramebuffer:function(e){e!==u&&(t.bindFramebuffer(36160,e),u=e)},useProgram:function(e){return c!==e&&(t.useProgram(e),c=e,!0)},setBlending:z,setMaterial:function(t,e){2===t.side?B(2884):F(2884);var n=1===t.side;e&&(n=!n),V(n),1===t.blending&&!1===t.transparent?z(0):z(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite);var r=t.stencilWrite;a.setTest(r),r&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),X(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?F(32926):B(32926)},setFlipSided:V,setCullFace:W,setLineWidth:function(e){e!==T&&(A&&t.lineWidth(e),T=e)},setPolygonOffset:X,setScissorTest:function(t){t?F(3089):B(3089)},activeTexture:Y,bindTexture:function(e,n){null===C&&Y();var r=P[C];void 0===r&&(r={type:void 0,texture:void 0},P[C]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||D[e]),r.type=e,r.texture=n)},unbindTexture:function(){var e=P[C];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===k.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),k.copy(e))},viewport:function(e){!1===N.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),N.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),s={},C=null,P={},u=null,l={},c=null,h=!1,d=null,f=null,p=null,v=null,m=null,g=null,y=null,_=!1,x=null,b=null,T=null,w=null,E=null,k.set(0,0,t.canvas.width,t.canvas.height),N.set(0,0,t.canvas.width,t.canvas.height),i.reset(),o.reset(),a.reset()}}}function xi(t,e,n,r,i,o,a){var s,u=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,h=i.maxTextureSize,d=i.maxSamples,f=new WeakMap,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function v(t,e){return p?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function m(t,e,n,r){var i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var o=e?k:Math.floor,a=o(i*t.width),u=o(i*t.height);void 0===s&&(s=v(a,u));var l=n?v(a,u):s;return l.width=a,l.height=u,l.getContext("2d").drawImage(t,0,0,a,u),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+u+")."),l}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function g(t){return O(t.width)&&O(t.height)}function y(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function _(e,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log2(Math.max(i,o,a))}function x(n,r,i){if(!1===u)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||e.get("EXT_color_buffer_float"),o}function b(t){return 1003===t||1004===t||1005===t?9728:9729}function T(e){var n=e.target;n.removeEventListener("dispose",T),function(e){var n=r.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),r.remove(e))}(n),n.isVideoTexture&&f.delete(n),a.memory.textures--}function w(e){var n=e.target;n.removeEventListener("dispose",w),function(e){var n=e.texture,i=r.get(e),o=r.get(n);if(e){if(void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),a.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)t.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[s]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&t.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(var u=0,l=n.length;u<l;u++){var c=r.get(n[u]);c.__webglTexture&&(t.deleteTexture(c.__webglTexture),a.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(e)}}(n)}var E=0;function S(t,e){var i=r.get(t);if(t.isVideoTexture&&function(t){var e=a.render.frame;f.get(t)!==e&&(f.set(t,e),t.update())}(t),t.version>0&&i.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void I(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function A(e,i){var a=r.get(e);e.version>0&&a.__version!==e.version?function(e,r,i){if(6===r.image.length){P(e,r),n.activeTexture(33984+i),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);for(var a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),s=r.image[0]&&r.image[0].isDataTexture,l=[],h=0;h<6;h++)l[h]=a||s?s?r.image[h].image:r.image[h]:m(r.image[h],!1,!0,c);var d,f=l[0],p=g(f)||u,v=o.convert(r.format),b=o.convert(r.type),T=x(r.internalFormat,v,b);if(C(34067,r,p),a){for(var w=0;w<6;w++){d=l[w].mipmaps;for(var E=0;E<d.length;E++){var S=d[E];1023!==r.format&&1022!==r.format?null!==v?n.compressedTexImage2D(34069+w,E,T,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+w,E,T,S.width,S.height,0,v,b,S.data)}}e.__maxMipLevel=d.length-1}else{d=r.mipmaps;for(var A=0;A<6;A++)if(s){n.texImage2D(34069+A,0,T,l[A].width,l[A].height,0,v,b,l[A].data);for(var M=0;M<d.length;M++){var R=d[M].image[A].image;n.texImage2D(34069+A,M+1,T,R.width,R.height,0,v,b,R.data)}}else{n.texImage2D(34069+A,0,T,v,b,l[A]);for(var I=0;I<d.length;I++){var O=d[I];n.texImage2D(34069+A,I+1,T,v,b,O.image[A])}}e.__maxMipLevel=d.length}y(r,p)&&_(34067,r,f.width,f.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}}(a,e,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}var M={1e3:10497,1001:33071,1002:33648},R={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function C(n,o,a){if(a?(t.texParameteri(n,10242,M[o.wrapS]),t.texParameteri(n,10243,M[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,M[o.wrapR]),t.texParameteri(n,10240,R[o.magFilter]),t.texParameteri(n,10241,R[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),1001===o.wrapS&&1001===o.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,b(o.magFilter)),t.texParameteri(n,10241,b(o.minFilter)),1003!==o.minFilter&&1006!==o.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){var s=e.get("EXT_texture_filter_anisotropic");if(1015===o.type&&!1===e.has("OES_texture_float_linear"))return;if(!1===u&&1016===o.type&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function P(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",T),e.__webglTexture=t.createTexture(),a.memory.textures++)}function I(e,r,i){var a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),P(e,r),n.activeTexture(33984+i),n.bindTexture(a,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);var s,l=function(t){return!u&&(1001!==t.wrapS||1001!==t.wrapT||1003!==t.minFilter&&1006!==t.minFilter)}(r)&&!1===g(r.image),c=m(r.image,l,!1,h),d=g(c)||u,f=o.convert(r.format),p=o.convert(r.type),v=x(r.internalFormat,f,p);C(a,r,d);var b=r.mipmaps;if(r.isDepthTexture)v=6402,u?v=1015===r.type?36012:1014===r.type?33190:1020===r.type?35056:33189:1015===r.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===r.format&&6402===v&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1012,p=o.convert(r.type)),1027===r.format&&6402===v&&(v=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,p=o.convert(r.type))),n.texImage2D(3553,0,v,c.width,c.height,0,f,p,null);else if(r.isDataTexture)if(b.length>0&&d){for(var T=0,w=b.length;T<w;T++)s=b[T],n.texImage2D(3553,T,v,s.width,s.height,0,f,p,s.data);r.generateMipmaps=!1,e.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,v,c.width,c.height,0,f,p,c.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(var E=0,S=b.length;E<S;E++)s=b[E],1023!==r.format&&1022!==r.format?null!==f?n.compressedTexImage2D(3553,E,v,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,E,v,s.width,s.height,0,f,p,s.data);e.__maxMipLevel=b.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,v,c.width,c.height,c.depth,0,f,p,c.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,v,c.width,c.height,c.depth,0,f,p,c.data),e.__maxMipLevel=0;else if(b.length>0&&d){for(var A=0,M=b.length;A<M;A++)s=b[A],n.texImage2D(3553,A,v,f,p,s);r.generateMipmaps=!1,e.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,v,f,p,c),e.__maxMipLevel=0;y(r,d)&&_(a,r,c.width,c.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function N(e,i,a,s,u){var l=o.convert(a.format),c=o.convert(a.type),h=x(a.internalFormat,l,c);32879===u||35866===u?n.texImage3D(u,0,h,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,h,i.width,i.height,0,l,c,null),n.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,s,u,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function L(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r){var a=n.depthTexture;a&&a.isDepthTexture&&(1015===a.type?i=36012:1014===a.type&&(i=33190));var s=D(n);t.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){var u=D(n);t.renderbufferStorageMultisample(36161,u,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var l=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,c=o.convert(l.format),h=o.convert(l.type),d=x(l.internalFormat,c,h);if(r){var f=D(n);t.renderbufferStorageMultisample(36161,f,d,n.width,n.height)}else t.renderbufferStorage(36161,d,n.width,n.height)}t.bindRenderbuffer(36161,null)}function D(t){return u&&t.isWebGLMultisampleRenderTarget?Math.min(d,t.samples):0}var F=!1,B=!1;this.allocateTextureUnit=function(){var t=E;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),E+=1,t},this.resetTextureUnits=function(){E=0},this.setTexture2D=S,this.setTexture2DArray=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?I(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?I(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=A,this.setupRenderTarget=function(e){var s=e.texture,l=r.get(e),c=r.get(s);e.addEventListener("dispose",w),!0!==e.isWebGLMultipleRenderTargets&&(c.__webglTexture=t.createTexture(),c.__version=s.version,a.memory.textures++);var h=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,f=!0===e.isWebGLMultisampleRenderTarget,p=s.isDataTexture3D||s.isDataTexture2DArray,v=g(e)||u;if(!u||1022!==s.format||1015!==s.type&&1016!==s.type||(s.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){l.__webglFramebuffer=[];for(var m=0;m<6;m++)l.__webglFramebuffer[m]=t.createFramebuffer()}else if(l.__webglFramebuffer=t.createFramebuffer(),d)if(i.drawBuffers)for(var b=e.texture,T=0,E=b.length;T<E;T++){var A=r.get(b[T]);void 0===A.__webglTexture&&(A.__webglTexture=t.createTexture(),a.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(f)if(u){l.__webglMultisampledFramebuffer=t.createFramebuffer(),l.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,l.__webglColorRenderbuffer);var M=o.convert(s.format),R=o.convert(s.type),P=x(s.internalFormat,M,R),I=D(e);t.renderbufferStorageMultisample(36161,I,P,e.width,e.height),n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,l.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(l.__webglDepthRenderbuffer=t.createRenderbuffer(),L(l.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,c.__webglTexture),C(34067,s,v);for(var O=0;O<6;O++)N(l.__webglFramebuffer[O],e,s,36064,34069+O);y(s,v)&&_(34067,s,e.width,e.height),n.bindTexture(34067,null)}else if(d){for(var k=e.texture,F=0,B=k.length;F<B;F++){var U=k[F],G=r.get(U);n.bindTexture(3553,G.__webglTexture),C(3553,U,v),N(l.__webglFramebuffer,e,U,36064+F,3553),y(U,v)&&_(3553,U,e.width,e.height)}n.bindTexture(3553,null)}else{var j=3553;p&&(u?j=s.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(j,c.__webglTexture),C(j,s,v),N(l.__webglFramebuffer,e,s,36064,j),y(s,v)&&_(j,s,e.width,e.height,e.depth),n.bindTexture(j,null)}e.depthBuffer&&function(e){var i=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),S(i.depthTexture,0);var o=r.get(i.depthTexture).__webglTexture;if(1026===i.depthTexture.format)t.framebufferTexture2D(36160,36096,3553,o,0);else{if(1027!==i.depthTexture.format)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,e)}else if(o){i.__webglDepthbuffer=[];for(var a=0;a<6;a++)n.bindFramebuffer(36160,i.__webglFramebuffer[a]),i.__webglDepthbuffer[a]=t.createRenderbuffer(),L(i.__webglDepthbuffer[a],e,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),L(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}(e)},this.updateRenderTargetMipmap=function(t){for(var e=g(t)||u,i=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=0,a=i.length;o<a;o++){var s=i[o];if(y(s,e)){var l=t.isWebGLCubeRenderTarget?34067:3553,c=r.get(s).__webglTexture;n.bindTexture(l,c),_(l,s,t.width,t.height),n.bindTexture(l,null)}}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(u){var i=e.width,o=e.height,a=16384;e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024);var s=r.get(e);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),t.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),F=!0),t=t.texture),S(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),B=!0),t=t.texture),A(t,e)}}function bi(t,e,n){var r=n.isWebGL2;return{convert:function(t){var n;if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(1015===t)return 5126;if(1016===t)return r?5131:null!==(n=e.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===t)return 6406;if(1022===t)return 6407;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1032===t)return 36248;if(1033===t)return 36249;if(33776===t||33777===t||33778===t||33779===t){if(null===(n=e.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t){if(null===(n=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return null!==(n=e.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===t||37496===t)&&null!==(n=e.get("WEBGL_compressed_texture_etc"))){if(37492===t)return n.COMPRESSED_RGB8_ETC2;if(37496===t)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t||37840===t||37841===t||37842===t||37843===t||37844===t||37845===t||37846===t||37847===t||37848===t||37849===t||37850===t||37851===t||37852===t||37853===t?null!==(n=e.get("WEBGL_compressed_texture_astc"))?t:null:36492===t?null!==(n=e.get("EXT_texture_compression_bptc"))?t:null:1020===t?r?34042:null!==(n=e.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}gi.prototype.isMeshDistanceMaterial=!0;var Ti=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return y(this,n),(t=e.call(this)).cameras=r,t}return _(n)}(nn);Ti.prototype.isArrayCamera=!0;var wi=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.call(this)).type="Group",t}return _(n)}(Yt);wi.prototype.isGroup=!0;var Ei={type:"move"},Si=function(){function t(){y(this,t),this._targetRay=null,this._grip=null,this._hand=null}return _(t,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new wi,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new wi,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new W,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new W),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new wi,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new W,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new W),this._grip}},{key:"dispatchEvent",value:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}},{key:"disconnect",value:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(t,e,n){var r=null,i=null,o=null,a=this._targetRay,s=this._grip,u=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==a&&(null!==(r=e.getPose(t.targetRaySpace,n))&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Ei))),u&&t.hand){o=!0;var c,h=l(t.hand.values());try{for(h.s();!(c=h.n()).done;){var d=c.value,f=e.getJointPose(d,n);if(void 0===u.joints[d.jointName]){var p=new wi;p.matrixAutoUpdate=!1,p.visible=!1,u.joints[d.jointName]=p,u.add(p)}var v=u.joints[d.jointName];null!==f&&(v.matrix.fromArray(f.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=f.radius),v.visible=null!==f}}catch(_){h.e(_)}finally{h.f()}var m=u.joints["index-finger-tip"],g=u.joints["thumb-tip"],y=m.position.distanceTo(g.position);u.inputState.pinching&&y>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&y<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(null!==(i=e.getPose(t.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==o),this}}]),t}(),Ai=function(t){m(n,t);var e=g(n);function n(t,r){var i;y(this,n),i=e.call(this);var o=v(i),a=t.state,l=null,c=1,h=null,d="local-floor",f=null,p=null,m=null,g=null,_=[],x=new Map,b=new nn;b.layers.enable(1),b.viewport=new j;var T=new nn;T.layers.enable(2),T.viewport=new j;var w=[b,T],E=new Ti;E.layers.enable(1),E.layers.enable(2);var S=null,A=null;function M(t){var e=x.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function R(){x.forEach((function(t,e){t.disconnect(e)})),x.clear(),S=null,A=null,a.bindXRFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),N.stop(),o.isPresenting=!1,o.dispatchEvent({type:"sessionend"})}function C(t){for(var e=l.inputSources,n=0;n<_.length;n++)x.set(e[n],_[n]);for(var r=0;r<t.removed.length;r++){var i=t.removed[r],o=x.get(i);o&&(o.dispatchEvent({type:"disconnected",data:i}),x.delete(i))}for(var a=0;a<t.added.length;a++){var s=t.added[a],u=x.get(s);u&&u.dispatchEvent({type:"connected",data:s})}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(t){var e=_[t];return void 0===e&&(e=new Si,_[t]=e),e.getTargetRaySpace()},i.getControllerGrip=function(t){var e=_[t];return void 0===e&&(e=new Si,_[t]=e),e.getGripSpace()},i.getHand=function(t){var e=_[t];return void 0===e&&(e=new Si,_[t]=e),e.getHandSpace()},i.setFramebufferScaleFactor=function(t){c=t,!0===o.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(t){d=t,!0===o.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return h},i.getSession=function(){return l},i.setSession=function(){var t=u(s.mark((function t(e){var n,i,a,u,f;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(l=e)){t.next=23;break}if(l.addEventListener("select",M),l.addEventListener("selectstart",M),l.addEventListener("selectend",M),l.addEventListener("squeeze",M),l.addEventListener("squeezestart",M),l.addEventListener("squeezeend",M),l.addEventListener("end",R),l.addEventListener("inputsourceschange",C),n=r.getContextAttributes(),t.t0=!0!==n.xrCompatible,!t.t0){t.next=7;break}return t.next=7,r.makeXRCompatible();case 7:if(void 0!==l.renderState.layers){t.next=12;break}i={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:c},a=new XRWebGLLayer(l,r,i),l.updateRenderState({baseLayer:a}),t.next=16;break;case 12:u=0,n.depth&&(u=n.stencil?34041:6402),f={colorFormat:n.alpha?6408:6407,depthFormat:u,scaleFactor:c},p=new XRWebGLBinding(l,r),g=p.createProjectionLayer(f),m=r.createFramebuffer(),l.updateRenderState({layers:[g]});case 16:return t.next=18,l.requestReferenceSpace(d);case 18:h=t.sent,N.setContext(l),N.start(),o.isPresenting=!0,o.dispatchEvent({type:"sessionstart"});case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var P=new W,I=new W;function O(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}i.updateCamera=function(t){if(null!==l){E.near=T.near=b.near=t.near,E.far=T.far=b.far=t.far,S===E.near&&A===E.far||(l.updateRenderState({depthNear:E.near,depthFar:E.far}),S=E.near,A=E.far);var e=t.parent,n=E.cameras;O(E,e);for(var r=0;r<n.length;r++)O(n[r],e);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),t.position.copy(E.position),t.quaternion.copy(E.quaternion),t.scale.copy(E.scale),t.matrix.copy(E.matrix),t.matrixWorld.copy(E.matrixWorld);for(var i=t.children,o=0,a=i.length;o<a;o++)i[o].updateMatrixWorld(!0);2===n.length?function(t,e,n){P.setFromMatrixPosition(e.matrixWorld),I.setFromMatrixPosition(n.matrixWorld);var r=P.distanceTo(I),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*c,f=a*h,p=r/(-c+h),v=p*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(v),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();var m=a+p,g=s+p,y=d-v,_=f+(r-v),x=u*s/g*m,b=l*s/g*m;t.projectionMatrix.makePerspective(y,_,x,b,m,g)}(E,b,T):E.projectionMatrix.copy(b.projectionMatrix)}},i.getCamera=function(){return E};var k=null,N=new pn;return N.setAnimationLoop((function(t,e){if(null!==(f=e.getViewerPose(h))){var n=f.views,i=l.renderState.baseLayer;void 0===l.renderState.layers&&a.bindXRFramebuffer(i.framebuffer);var o=!1;n.length!==E.cameras.length&&(E.cameras.length=0,o=!0);for(var s=0;s<n.length;s++){var u=n[s],c=null;if(void 0===l.renderState.layers)c=i.getViewport(u);else{var d=p.getViewSubImage(g,u);a.bindXRFramebuffer(m),r.framebufferTexture2D(36160,36064,3553,d.colorTexture,0),void 0!==d.depthStencilTexture&&r.framebufferTexture2D(36160,36096,3553,d.depthStencilTexture,0),c=d.viewport}var v=w[s];v.matrix.fromArray(u.transform.matrix),v.projectionMatrix.fromArray(u.projectionMatrix),v.viewport.set(c.x,c.y,c.width,c.height),0===s&&E.matrix.copy(v.matrix),!0===o&&E.cameras.push(v)}}for(var y=l.inputSources,x=0;x<_.length;x++){var b=_[x],T=y[x];b.update(T,e,h)}k&&k(t,e)})),i.setAnimationLoop=function(t){k=t},i.dispose=function(){},i}return _(n)}(E);function Mi(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap);var r,i,o=t.get(n).envMap;if(o){e.envMap.value=o,e.flipEnvMap.value=o.isCubeTexture&&o._needsFlipEnvMap?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio;var a=t.get(o).__maxMipLevel;void 0!==a&&(e.maxMipLevel.value=a)}n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(r=n.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),n.aoMap?i=n.aoMap:n.lightMap&&(i=n.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uv2Transform.value.copy(i.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,1===n.side&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),1===n.side&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,i,o,a){r.isMeshBasicMaterial?e(t,r):r.isMeshLambertMaterial?(e(t,r),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,r)):r.isMeshToonMaterial?(e(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshPhongMaterial?(e(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshStandardMaterial?(e(t,r),r.isMeshPhysicalMaterial?function(t,e,r){n(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate()),t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),e.transmission>0&&(t.transmissionSamplerMap.value=r.texture,t.transmissionSamplerSize.value.set(r.width,r.height)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)}(t,r,a):n(t,r)):r.isMeshMatcapMaterial?(e(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDepthMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDistanceMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?(e(t,r),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){var i;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?i=e.map:e.alphaMap&&(i=e.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,r,i,o):r.isSpriteMaterial?function(t,e){var n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Ri(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=void 0!==t.canvas?t.canvas:function(){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,h=null,d=null,f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var v=this,m=!1,g=0,y=0,_=null,x=-1,b=null,T=new j,w=new j,E=null,S=e.width,A=e.height,M=1,R=null,C=null,P=new j(0,0,S,A),I=new j(0,0,S,A),O=!1,k=[],N=new fn,L=!1,D=!1,F=null,B=new Tt,U=new W,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function V(){return null===_?M:1}var X,Y,q,Z,Q,K,J,$,tt,et,nt,rt,it,ot,at,st,ut,lt,ct,ht,dt,ft,pt=n;function vt(t,n){for(var r=0;r<t.length;r++){var i=t[r],o=e.getContext(i,n);if(null!==o)return o}return null}try{var mt={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if(e.addEventListener("webglcontextlost",xt,!1),e.addEventListener("webglcontextrestored",bt,!1),null===pt){var gt=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&gt.shift(),null===(pt=vt(gt,mt)))throw vt(gt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===pt.getShaderPrecisionFormat&&(pt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function yt(){X=new An(pt),Y=new wn(pt,X,t),X.init(Y),dt=new bi(pt,X,Y),q=new _i(pt,X,Y),k[0]=1029,Z=new Cn(pt),Q=new oi,K=new xi(pt,X,q,Q,Y,dt,Z),J=new Sn(v),$=new vn(pt,Y),ft=new bn(pt,X,$,Y),tt=new Mn(pt,$,Z,ft),et=new kn(pt,tt,$,Z),lt=new On(pt),at=new En(Q),nt=new ii(v,J,X,Y,ft,at),rt=new Mi(Q),it=new li(Q),ot=new vi(X,Y),ut=new xn(v,J,q,et,s),st=new yi(v,et,Y),ct=new Tn(pt,X,Z,Y),ht=new Rn(pt,X,Z,Y),Z.programs=nt.programs,v.capabilities=Y,v.extensions=X,v.properties=Q,v.renderLists=it,v.shadowMap=st,v.state=q,v.info=Z}yt();var _t=new Ai(v,pt);function xt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function bt(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var t=Z.autoReset,e=st.enabled,n=st.autoUpdate,r=st.needsUpdate,i=st.type;yt(),Z.autoReset=t,st.enabled=e,st.autoUpdate=n,st.needsUpdate=r,st.type=i}function wt(t){var e=t.target;e.removeEventListener("dispose",wt),function(t){(function(t){var e=Q.get(t).programs;void 0!==e&&e.forEach((function(t){nt.releaseProgram(t)}))})(t),Q.remove(t)}(e)}this.xr=_t,this.getContext=function(){return pt},this.getContextAttributes=function(){return pt.getContextAttributes()},this.forceContextLoss=function(){var t=X.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=X.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return M},this.setPixelRatio=function(t){void 0!==t&&(M=t,this.setSize(S,A,!1))},this.getSize=function(t){return t.set(S,A)},this.setSize=function(t,n,r){_t.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(S=t,A=n,e.width=Math.floor(t*M),e.height=Math.floor(n*M),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(S*M,A*M).floor()},this.setDrawingBufferSize=function(t,n,r){S=t,A=n,M=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(T)},this.getViewport=function(t){return t.copy(P)},this.setViewport=function(t,e,n,r){t.isVector4?P.set(t.x,t.y,t.z,t.w):P.set(t,e,n,r),q.viewport(T.copy(P).multiplyScalar(M).floor())},this.getScissor=function(t){return t.copy(I)},this.setScissor=function(t,e,n,r){t.isVector4?I.set(t.x,t.y,t.z,t.w):I.set(t,e,n,r),q.scissor(w.copy(I).multiplyScalar(M).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(t){q.setScissorTest(O=t)},this.setOpaqueSort=function(t){R=t},this.setTransparentSort=function(t){C=t},this.getClearColor=function(t){return t.copy(ut.getClearColor())},this.setClearColor=function(){ut.setClearColor.apply(ut,arguments)},this.getClearAlpha=function(){return ut.getClearAlpha()},this.setClearAlpha=function(){ut.setClearAlpha.apply(ut,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),pt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",xt,!1),e.removeEventListener("webglcontextrestored",bt,!1),it.dispose(),ot.dispose(),Q.dispose(),J.dispose(),et.dispose(),ft.dispose(),_t.dispose(),_t.removeEventListener("sessionstart",St),_t.removeEventListener("sessionend",At),F&&(F.dispose(),F=null),Mt.stop()},this.renderBufferImmediate=function(t,e){ft.initAttributes();var n=Q.get(t);t.hasPositions&&!n.position&&(n.position=pt.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=pt.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=pt.createBuffer()),t.hasColors&&!n.color&&(n.color=pt.createBuffer());var r=e.getAttributes();t.hasPositions&&(pt.bindBuffer(34962,n.position),pt.bufferData(34962,t.positionArray,35048),ft.enableAttribute(r.position),pt.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(pt.bindBuffer(34962,n.normal),pt.bufferData(34962,t.normalArray,35048),ft.enableAttribute(r.normal),pt.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(pt.bindBuffer(34962,n.uv),pt.bufferData(34962,t.uvArray,35048),ft.enableAttribute(r.uv),pt.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(pt.bindBuffer(34962,n.color),pt.bufferData(34962,t.colorArray,35048),ft.enableAttribute(r.color),pt.vertexAttribPointer(r.color,3,5126,!1,0,0)),ft.disableUnusedAttributes(),pt.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=G);var a=i.isMesh&&i.matrixWorld.determinant()<0,s=Ot(t,e,r,i);q.setMaterial(r,a);var u=n.index,l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;var c,h=1;!0===r.wireframe&&(u=tt.getWireframeAttribute(n),h=2),(r.morphTargets||r.morphNormals)&&lt.update(i,n,r,s),ft.setup(i,r,s,n,u);var d=ct;null!==u&&(c=$.get(u),(d=ht).setIndex(c));var f=null!==u?u.count:l.count,p=n.drawRange.start*h,v=n.drawRange.count*h,m=null!==o?o.start*h:0,g=null!==o?o.count*h:1/0,y=Math.max(p,m),_=Math.min(f,p+v,m+g)-1,x=Math.max(0,_-y+1);if(0!==x){if(i.isMesh)!0===r.wireframe?(q.setLineWidth(r.wireframeLinewidth*V()),d.setMode(1)):d.setMode(4);else if(i.isLine){var b=r.linewidth;void 0===b&&(b=1),q.setLineWidth(b*V()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(y,x,i.count);else if(n.isInstancedBufferGeometry){var T=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,x,T)}else d.render(y,x)}},this.compile=function(t,e){(d=ot.get(t)).init(),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(d.pushLight(t),t.castShadow&&d.pushShadow(t))})),d.setupLights(),t.traverse((function(e){var n=e.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++)Pt(n[r],t,e);else Pt(n,t,e)}))};var Et=null;function St(){Mt.stop()}function At(){Mt.start()}var Mt=new pn;function Rt(t,e,n){for(var r=!0===e.isScene?e.overrideMaterial:null,i=0,o=t.length;i<o;i++){var a=t[i],s=a.object,u=a.geometry,l=null===r?a.material:r,c=a.group;if(n.isArrayCamera)for(var h=n.cameras,f=0,p=h.length;f<p;f++){var v=h[f];s.layers.test(v.layers)&&(q.viewport(T.copy(v.viewport)),d.setupLightsView(v),Ct(s,e,v,u,l,c))}else Ct(s,e,n,u,l,c)}}function Ct(t,e,n,r,i,o){if(t.onBeforeRender(v,e,n,r,i,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var a=Ot(n,e,i,t);q.setMaterial(i),ft.reset(),function(t,e){t.render((function(t){v.renderBufferImmediate(t,e)}))}(t,a)}else!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,v.renderBufferDirect(n,e,r,i,t,o),i.side=0,i.needsUpdate=!0,v.renderBufferDirect(n,e,r,i,t,o),i.side=2):v.renderBufferDirect(n,e,r,i,t,o);t.onAfterRender(v,e,n,r,i,o)}function Pt(t,e,n){!0!==e.isScene&&(e=G);var r=Q.get(t),i=d.state.lights,o=d.state.shadowsArray,a=i.state.version,s=nt.getParameters(t,i.state,o,e,n),u=nt.getProgramCacheKey(s),l=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=J.get(t.envMap||r.environment),void 0===l&&(t.addEventListener("dispose",wt),l=new Map,r.programs=l);var c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return It(t,s),c}else s.uniforms=nt.getUniforms(t),t.onBuild(s,v),t.onBeforeCompile(s,v),c=nt.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;var h=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=at.uniform),It(t,s),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);var f=c.getUniforms(),p=Fr.seqWithValue(f.seq,h);return r.currentProgram=c,r.uniformsList=p,c}function It(t,e){var n=Q.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas}function Ot(t,e,n,r){!0!==e.isScene&&(e=G),K.resetTextureUnits();var i=e.fog,o=n.isMeshStandardMaterial?e.environment:null,a=null===_?v.outputEncoding:_.texture.encoding,s=J.get(n.envMap||o),u=!0===n.vertexColors&&r.geometry&&r.geometry.attributes.color&&4===r.geometry.attributes.color.itemSize,l=Q.get(n),c=d.state.lights;if(!0===L&&(!0===D||t!==b)){var h=t===b&&n.id===x;at.setState(n,t,h)}var f=!1;n.version===l.__version?l.needsLights&&l.lightsStateVersion!==c.state.version||l.outputEncoding!==a||r.isInstancedMesh&&!1===l.instancing?f=!0:r.isInstancedMesh||!0!==l.instancing?r.isSkinnedMesh&&!1===l.skinning?f=!0:r.isSkinnedMesh||!0!==l.skinning?l.envMap!==s||n.fog&&l.fog!==i?f=!0:void 0===l.numClippingPlanes||l.numClippingPlanes===at.numPlanes&&l.numIntersection===at.numIntersection?l.vertexAlphas!==u&&(f=!0):f=!0:f=!0:f=!0:(f=!0,l.__version=n.version);var p=l.currentProgram;!0===f&&(p=Pt(n,e,r));var m,g,y=!1,T=!1,w=!1,E=p.getUniforms(),S=l.uniforms;if(q.useProgram(p.program)&&(y=!0,T=!0,w=!0),n.id!==x&&(x=n.id,T=!0),y||b!==t){if(E.setValue(pt,"projectionMatrix",t.projectionMatrix),Y.logarithmicDepthBuffer&&E.setValue(pt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),b!==t&&(b=t,T=!0,w=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var R=E.map.cameraPosition;void 0!==R&&R.setValue(pt,U.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&E.setValue(pt,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&E.setValue(pt,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){E.setOptional(pt,r,"bindMatrix"),E.setOptional(pt,r,"bindMatrixInverse");var C=r.skeleton;C&&(Y.floatVertexTextures?(null===C.boneTexture&&C.computeBoneTexture(),E.setValue(pt,"boneTexture",C.boneTexture,K),E.setValue(pt,"boneTextureSize",C.boneTextureSize)):E.setOptional(pt,C,"boneMatrices"))}return(T||l.receiveShadow!==r.receiveShadow)&&(l.receiveShadow=r.receiveShadow,E.setValue(pt,"receiveShadow",r.receiveShadow)),T&&(E.setValue(pt,"toneMappingExposure",v.toneMappingExposure),l.needsLights&&(g=w,(m=S).ambientLightColor.needsUpdate=g,m.lightProbe.needsUpdate=g,m.directionalLights.needsUpdate=g,m.directionalLightShadows.needsUpdate=g,m.pointLights.needsUpdate=g,m.pointLightShadows.needsUpdate=g,m.spotLights.needsUpdate=g,m.spotLightShadows.needsUpdate=g,m.rectAreaLights.needsUpdate=g,m.hemisphereLights.needsUpdate=g),i&&n.fog&&rt.refreshFogUniforms(S,i),rt.refreshMaterialUniforms(S,n,M,A,F),Fr.upload(pt,l.uniformsList,S,K)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Fr.upload(pt,l.uniformsList,S,K),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&E.setValue(pt,"center",r.center),E.setValue(pt,"modelViewMatrix",r.modelViewMatrix),E.setValue(pt,"normalMatrix",r.normalMatrix),E.setValue(pt,"modelMatrix",r.matrixWorld),p}Mt.setAnimationLoop((function(t){Et&&Et(t)})),"undefined"!=typeof window&&Mt.setContext(window),this.setAnimationLoop=function(t){Et=t,_t.setAnimationLoop(t),null===t?Mt.stop():Mt.start()},_t.addEventListener("sessionstart",St),_t.addEventListener("sessionend",At),this.render=function(t,e){if(void 0===e||!0===e.isCamera){if(!0!==m){!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===_t.enabled&&!0===_t.isPresenting&&(!0===_t.cameraAutoUpdate&&_t.updateCamera(e),e=_t.getCamera()),!0===t.isScene&&t.onBeforeRender(v,t,e,_),(d=ot.get(t,p.length)).init(),p.push(d),B.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),N.setFromProjectionMatrix(B),D=this.localClippingEnabled,L=at.init(this.clippingPlanes,D,e),(h=it.get(t,f.length)).init(),f.push(h),function t(e,n,r,i){if(!1!==e.visible){if(e.layers.test(n.layers))if(e.isGroup)r=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(n);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||N.intersectsSprite(e)){i&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);var o=et.update(e),a=e.material;a.visible&&h.push(e,o,a,r,U.z,null)}}else if(e.isImmediateRenderObject)i&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B),h.push(e,null,e.material,r,U.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Z.render.frame&&(e.skeleton.update(),e.skeleton.frame=Z.render.frame),!e.frustumCulled||N.intersectsObject(e))){i&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);var s=et.update(e),u=e.material;if(Array.isArray(u))for(var l=s.groups,c=0,f=l.length;c<f;c++){var p=l[c],v=u[p.materialIndex];v&&v.visible&&h.push(e,s,v,r,U.z,p)}else u.visible&&h.push(e,s,u,r,U.z,null)}for(var m=e.children,g=0,y=m.length;g<y;g++)t(m[g],n,r,i)}}(t,e,0,v.sortObjects),h.finish(),!0===v.sortObjects&&h.sort(R,C),!0===L&&at.beginShadows();var n=d.state.shadowsArray;st.render(n,t,e),d.setupLights(),d.setupLightsView(e),!0===L&&at.endShadows(),!0===this.info.autoReset&&this.info.reset(),ut.render(h,t);var r=h.opaque,i=h.transmissive,o=h.transparent;r.length>0&&Rt(r,t,e),i.length>0&&function(t,e,n,r){if(null===F){var i=!0===a&&!0===Y.isWebGL2;F=new(i?z:H)(1024,1024,{generateMipmaps:!0,type:null!==dt.convert(1016)?1016:1009,minFilter:1008,magFilter:1003,wrapS:1001,wrapT:1001})}var o=v.getRenderTarget();v.setRenderTarget(F),v.clear();var s=v.toneMapping;v.toneMapping=0,Rt(t,n,r),v.toneMapping=s,K.updateMultisampleRenderTarget(F),K.updateRenderTargetMipmap(F),v.setRenderTarget(o),Rt(e,n,r)}(r,i,t,e),o.length>0&&Rt(o,t,e),null!==_&&(K.updateMultisampleRenderTarget(_),K.updateRenderTargetMipmap(_)),!0===t.isScene&&t.onAfterRender(v,t,e),q.buffers.depth.setTest(!0),q.buffers.depth.setMask(!0),q.buffers.color.setMask(!0),q.setPolygonOffset(!1),ft.resetDefaultState(),x=-1,b=null,p.pop(),d=p.length>0?p[p.length-1]:null,f.pop(),h=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return _},this.setRenderTarget=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_=t,g=e,y=n,t&&void 0===Q.get(t).__webglFramebuffer&&K.setupRenderTarget(t);var r=null,i=!1,o=!1;if(t){var a=t.texture;(a.isDataTexture3D||a.isDataTexture2DArray)&&(o=!0);var s=Q.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=s[e],i=!0):r=t.isWebGLMultisampleRenderTarget?Q.get(t).__webglMultisampledFramebuffer:s,T.copy(t.viewport),w.copy(t.scissor),E=t.scissorTest}else T.copy(P).multiplyScalar(M).floor(),w.copy(I).multiplyScalar(M).floor(),E=O;if(q.bindFramebuffer(36160,r)&&Y.drawBuffers){var u=!1;if(t)if(t.isWebGLMultipleRenderTargets){var l=t.texture;if(k.length!==l.length||36064!==k[0]){for(var c=0,h=l.length;c<h;c++)k[c]=36064+c;k.length=l.length,u=!0}}else 1===k.length&&36064===k[0]||(k[0]=36064,k.length=1,u=!0);else 1===k.length&&1029===k[0]||(k[0]=1029,k.length=1,u=!0);u&&(Y.isWebGL2?pt.drawBuffers(k):X.get("WEBGL_draw_buffers").drawBuffersWEBGL(k))}if(q.viewport(T),q.scissor(w),q.setScissorTest(E),i){var d=Q.get(t.texture);pt.framebufferTexture2D(36160,36064,34069+e,d.__webglTexture,n)}else if(o){var f=Q.get(t.texture),p=e||0;pt.framebufferTextureLayer(36160,36064,f.__webglTexture,n||0,p)}},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(t&&t.isWebGLRenderTarget){var s=Q.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){q.bindFramebuffer(36160,s);try{var u=t.texture,l=u.format,c=u.type;if(1023!==l&&dt.convert(l)!==pt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=1016===c&&(X.has("EXT_color_buffer_half_float")||Y.isWebGL2&&X.has("EXT_color_buffer_float"));if(!(1009===c||dt.convert(c)===pt.getParameter(35738)||1015===c&&(Y.isWebGL2||X.has("OES_texture_float")||X.has("WEBGL_color_buffer_float"))||h))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===pt.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&pt.readPixels(e,n,r,i,dt.convert(l),dt.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var d=null!==_?Q.get(_).__webglFramebuffer:null;q.bindFramebuffer(36160,d)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r),a=dt.convert(e.format);Y.isWebGL2&&(6407===a&&(a=32849),6408===a&&(a=32856)),K.setTexture2D(e,0),pt.copyTexImage2D(3553,n,a,t.x,t.y,i,o,0),q.unbindTexture()},this.copyTextureToTexture=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=e.image.width,o=e.image.height,a=dt.convert(n.format),s=dt.convert(n.type);K.setTexture2D(n,0),pt.pixelStorei(37440,n.flipY),pt.pixelStorei(37441,n.premultiplyAlpha),pt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?pt.texSubImage2D(3553,r,t.x,t.y,i,o,a,s,e.image.data):e.isCompressedTexture?pt.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):pt.texSubImage2D(3553,r,t.x,t.y,a,s,e.image),0===r&&n.generateMipmaps&&pt.generateMipmap(3553),q.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var o,a=t.max.x-t.min.x+1,s=t.max.y-t.min.y+1,u=t.max.z-t.min.z+1,l=dt.convert(r.format),c=dt.convert(r.type);if(r.isDataTexture3D)K.setTexture3D(r,0),o=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");K.setTexture2DArray(r,0),o=35866}pt.pixelStorei(37440,r.flipY),pt.pixelStorei(37441,r.premultiplyAlpha),pt.pixelStorei(3317,r.unpackAlignment);var h=pt.getParameter(3314),d=pt.getParameter(32878),f=pt.getParameter(3316),p=pt.getParameter(3315),m=pt.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;pt.pixelStorei(3314,g.width),pt.pixelStorei(32878,g.height),pt.pixelStorei(3316,t.min.x),pt.pixelStorei(3315,t.min.y),pt.pixelStorei(32877,t.min.z),n.isDataTexture||n.isDataTexture3D?pt.texSubImage3D(o,i,e.x,e.y,e.z,a,s,u,l,c,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),pt.compressedTexSubImage3D(o,i,e.x,e.y,e.z,a,s,u,l,g.data)):pt.texSubImage3D(o,i,e.x,e.y,e.z,a,s,u,l,c,g),pt.pixelStorei(3314,h),pt.pixelStorei(32878,d),pt.pixelStorei(3316,f),pt.pixelStorei(3315,p),pt.pixelStorei(32877,m),0===i&&r.generateMipmaps&&pt.generateMipmap(o),q.unbindTexture()}},this.initTexture=function(t){K.setTexture2D(t,0),q.unbindTexture()},this.resetState=function(){g=0,y=0,_=null,q.reset(),ft.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(function(t){m(n,t);var e=g(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)})(Ri).prototype.isWebGL1Renderer=!0;var Ci=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;y(this,t),this.name="",this.color=new fe(e),this.density=n}return _(t,[{key:"clone",value:function(){return new t(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),t}();Ci.prototype.isFogExp2=!0;var Pi=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;y(this,t),this.name="",this.color=new fe(e),this.near=n,this.far=r}return _(t,[{key:"clone",value:function(){return new t(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),t}();Pi.prototype.isFog=!0;var Ii=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.call(this)).type="Scene",t.background=null,t.environment=null,t.fog=null,t.overrideMaterial=null,t.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:v(t)})),t}return _(n,[{key:"copy",value:function(t,e){return d(f(n.prototype),"copy",this).call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}},{key:"toJSON",value:function(t){var e=d(f(n.prototype),"toJSON",this).call(this,t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}]),n}(Yt);Ii.prototype.isScene=!0;var Oi=function(){function t(e,n){y(this,t),this.array=e,this.stride=n,this.count=void 0!==e?e.length/n:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=C()}return _(t,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}},{key:"copyAt",value:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"clone",value:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=C()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"toJSON",value:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=C()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),t}();Oi.prototype.isInterleavedBuffer=!0;var ki=new W,Ni=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];y(this,t),this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=!0===i}return _(t,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(t){this.data.needsUpdate=t}},{key:"applyMatrix4",value:function(t){for(var e=0,n=this.data.count;e<n;e++)ki.x=this.getX(e),ki.y=this.getY(e),ki.z=this.getZ(e),ki.applyMatrix4(t),this.setXYZ(e,ki.x,ki.y,ki.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,n=this.count;e<n;e++)ki.x=this.getX(e),ki.y=this.getY(e),ki.z=this.getZ(e),ki.applyNormalMatrix(t),this.setXYZ(e,ki.x,ki.y,ki.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,n=this.count;e<n;e++)ki.x=this.getX(e),ki.y=this.getY(e),ki.z=this.getZ(e),ki.transformDirection(t),this.setXYZ(e,ki.x,ki.y,ki.z);return this}},{key:"setX",value:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}},{key:"setY",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}},{key:"setZ",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}},{key:"setW",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}},{key:"getX",value:function(t){return this.data.array[t*this.data.stride+this.offset]}},{key:"getY",value:function(t){return this.data.array[t*this.data.stride+this.offset+1]}},{key:"getZ",value:function(t){return this.data.array[t*this.data.stride+this.offset+2]}},{key:"getW",value:function(t){return this.data.array[t*this.data.stride+this.offset+3]}},{key:"setXY",value:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}},{key:"setXYZ",value:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}},{key:"setXYZW",value:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}},{key:"clone",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,o=0;o<this.itemSize;o++)n.push(this.data.array[i+o]);return new ge(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new t(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)e.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),t}();Ni.prototype.isInterleavedBufferAttribute=!0;var Li,Di=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).type="SpriteMaterial",r.color=new fe(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}]),n}(ae);Di.prototype.isSpriteMaterial=!0;var Fi=new W,Bi=new W,Ui=new W,Gi=new N,ji=new N,Hi=new Tt,zi=new W,Vi=new W,Wi=new W,Xi=new N,Yi=new N,qi=new N,Zi=function(t){m(n,t);var e=g(n);function n(t){var r;if(y(this,n),(r=e.call(this)).type="Sprite",void 0===Li){Li=new Pe;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),o=new Oi(i,5);Li.setIndex([0,1,2,0,2,3]),Li.setAttribute("position",new Ni(o,3,0,!1)),Li.setAttribute("uv",new Ni(o,2,3,!1))}return r.geometry=Li,r.material=void 0!==t?t:new Di,r.center=new N(.5,.5),h(r)}return _(n,[{key:"raycast",value:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Bi.setFromMatrixScale(this.matrixWorld),Hi.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Ui.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Bi.multiplyScalar(-Ui.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var o=this.center;Qi(zi.set(-.5,-.5,0),Ui,o,Bi,n,r),Qi(Vi.set(.5,-.5,0),Ui,o,Bi,n,r),Qi(Wi.set(.5,.5,0),Ui,o,Bi,n,r),Xi.set(0,0),Yi.set(1,0),qi.set(1,1);var a=t.ray.intersectTriangle(zi,Vi,Wi,!1,Fi);if(null!==a||(Qi(Vi.set(-.5,.5,0),Ui,o,Bi,n,r),Yi.set(0,1),null!==(a=t.ray.intersectTriangle(zi,Wi,Vi,!1,Fi)))){var s=t.ray.origin.distanceTo(Fi);s<t.near||s>t.far||e.push({distance:s,point:Fi.clone(),uv:ie.getUV(Fi,zi,Vi,Wi,Xi,Yi,qi,new N),face:null,object:this})}}},{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}]),n}(Yt);function Qi(t,e,n,r,i,o){Gi.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(ji.x=o*Gi.x-i*Gi.y,ji.y=i*Gi.x+o*Gi.y):ji.copy(Gi),t.copy(e),t.x+=ji.x,t.y+=ji.y,t.applyMatrix4(Hi)}Zi.prototype.isSprite=!0;var Ki=new W,Ji=new j,$i=new j,to=new W,eo=new Tt,no=function(t){m(n,t);var e=g(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t,r)).type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new Tt,i.bindMatrixInverse=new Tt,i}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}},{key:"bind",value:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var t=new j,e=this.geometry.attributes.skinWeight,n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}},{key:"updateMatrixWorld",value:function(t){d(f(n.prototype),"updateMatrixWorld",this).call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(t,e){var n=this.skeleton,r=this.geometry;Ji.fromBufferAttribute(r.attributes.skinIndex,t),$i.fromBufferAttribute(r.attributes.skinWeight,t),Ki.fromBufferAttribute(r.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(var i=0;i<4;i++){var o=$i.getComponent(i);if(0!==o){var a=Ji.getComponent(i);eo.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),e.addScaledVector(to.copy(Ki).applyMatrix4(eo),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}]),n}(qe);no.prototype.isSkinnedMesh=!0,function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.call(this)).type="Bone",t}return _(n)}(Yt).prototype.isBone=!0;var ro=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1003,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1003,f=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return y(this,n),(t=e.call(this,null,u,l,c,h,d,a,s,f,p)).image={data:r,width:i,height:o},t.magFilter=h,t.minFilter=d,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t.needsUpdate=!0,t}return _(n)}(U);ro.prototype.isDataTexture=!0;var io=new Tt,oo=new Tt,ao=[],so=new qe,uo=function(t){m(n,t);var e=g(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t,r)).instanceMatrix=new ge(new Float32Array(16*i),16),o.instanceColor=null,o.count=i,o.frustumCulled=!1,o}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}},{key:"getColorAt",value:function(t,e){e.fromArray(this.instanceColor.array,3*t)}},{key:"getMatrixAt",value:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)}},{key:"raycast",value:function(t,e){var n=this.matrixWorld,r=this.count;if(so.geometry=this.geometry,so.material=this.material,void 0!==so.material)for(var i=0;i<r;i++){this.getMatrixAt(i,io),oo.multiplyMatrices(n,io),so.matrixWorld=oo,so.raycast(t,ao);for(var o=0,a=ao.length;o<a;o++){var s=ao[o];s.instanceId=i,s.object=this,e.push(s)}ao.length=0}}},{key:"setColorAt",value:function(t,e){null===this.instanceColor&&(this.instanceColor=new ge(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)}},{key:"setMatrixAt",value:function(t,e){e.toArray(this.instanceMatrix.array,16*t)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(qe);uo.prototype.isInstancedMesh=!0;var lo=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).type="LineBasicMaterial",r.color=new fe(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.morphTargets=!1,r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this}}]),n}(ae);lo.prototype.isLineBasicMaterial=!0;var co=new W,ho=new W,fo=new Tt,po=new bt,vo=new ft,mo=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Pe,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lo;return y(this,n),(t=e.call(this)).type="Line",t.geometry=r,t.material=i,t.updateMorphTargets(),t}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.material=t.material,this.geometry=t.geometry,this}},{key:"computeLineDistances",value:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],r=1,i=e.count;r<i;r++)co.fromBufferAttribute(e,r-1),ho.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=co.distanceTo(ho);t.setAttribute("lineDistance",new be(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),vo.copy(n.boundingSphere),vo.applyMatrix4(r),vo.radius+=i,!1!==t.ray.intersectsSphere(vo)){fo.copy(r).invert(),po.copy(t.ray).applyMatrix4(fo);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,u=new W,l=new W,c=new W,h=new W,d=this.isLineSegments?2:1;if(n.isBufferGeometry){var f=n.index,p=n.attributes.position;if(null!==f)for(var v=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count)-1;v<m;v+=d){var g=f.getX(v),y=f.getX(v+1);if(u.fromBufferAttribute(p,g),l.fromBufferAttribute(p,y),!(po.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var _=t.ray.origin.distanceTo(h);_<t.near||_>t.far||e.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var x=Math.max(0,o.start),b=Math.min(p.count,o.start+o.count)-1;x<b;x+=d)if(u.fromBufferAttribute(p,x),l.fromBufferAttribute(p,x+1),!(po.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var T=t.ray.origin.distanceTo(h);T<t.near||T>t.far||e.push({distance:T,point:c.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(Yt);mo.prototype.isLine=!0;var go=new W,yo=new W,_o=function(t){m(n,t);var e=g(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t,r)).type="LineSegments",i}return _(n,[{key:"computeLineDistances",value:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],r=0,i=e.count;r<i;r+=2)go.fromBufferAttribute(e,r),yo.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+go.distanceTo(yo);t.setAttribute("lineDistance",new be(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(mo);_o.prototype.isLineSegments=!0;var xo=function(t){m(n,t);var e=g(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t,r)).type="LineLoop",i}return _(n)}(mo);xo.prototype.isLineLoop=!0;var bo=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).type="PointsMaterial",r.color=new fe(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.morphTargets=!1,r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this}}]),n}(ae);bo.prototype.isPointsMaterial=!0;var To=new Tt,wo=new bt,Eo=new ft,So=new W,Ao=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Pe,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new bo;return y(this,n),(t=e.call(this)).type="Points",t.geometry=r,t.material=i,t.updateMorphTargets(),t}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.material=t.material,this.geometry=t.geometry,this}},{key:"raycast",value:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Eo.copy(n.boundingSphere),Eo.applyMatrix4(r),Eo.radius+=i,!1!==t.ray.intersectsSphere(Eo)){To.copy(r).invert(),wo.copy(t.ray).applyMatrix4(To);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){var u=n.index,l=n.attributes.position;if(null!==u)for(var c=Math.max(0,o.start),h=Math.min(u.count,o.start+o.count);c<h;c++){var d=u.getX(c);So.fromBufferAttribute(l,d),Mo(So,d,s,r,t,e,this)}else for(var f=Math.max(0,o.start),p=Math.min(l.count,o.start+o.count);f<p;f++)So.fromBufferAttribute(l,f),Mo(So,f,s,r,t,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(Yt);function Mo(t,e,n,r,i,o,a){var s=wo.distanceSqToPoint(t);if(s<n){var u=new W;wo.closestPointToPoint(t,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:e,face:null,object:a})}}Ao.prototype.isPoints=!0,function(t){m(n,t);var e=g(n);function n(t,r,i,o,a,s,u,l,c){var h;y(this,n),(h=e.call(this,t,r,i,o,a,s,u,l,c)).format=void 0!==u?u:1022,h.minFilter=void 0!==s?s:1006,h.magFilter=void 0!==a?a:1006,h.generateMipmaps=!1;var d=v(h);return"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){d.needsUpdate=!0,t.requestVideoFrameCallback(e)})),h}return _(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(U).prototype.isVideoTexture=!0;var Ro=function(t){m(n,t);var e=g(n);function n(t,r,i,o,a,s,u,l,c,h,d,f){var p;return y(this,n),(p=e.call(this,null,s,u,l,c,h,o,a,d,f)).image={width:r,height:i},p.mipmaps=t,p.flipY=!1,p.generateMipmaps=!1,p}return _(n)}(U);Ro.prototype.isCompressedTexture=!0,function(t){m(n,t);var e=g(n);function n(t,r,i,o,a,s,u,l,c){var h;return y(this,n),(h=e.call(this,t,r,i,o,a,s,u,l,c)).needsUpdate=!0,h}return _(n)}(U).prototype.isCanvasTexture=!0,function(t){m(n,t);var e=g(n);function n(t,r,i,o,a,s,u,l,c,h){var d;if(y(this,n),1026!==(h=void 0!==h?h:1026)&&1027!==h)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&1026===h&&(i=1012),void 0===i&&1027===h&&(i=1020),(d=e.call(this,null,o,a,s,u,l,h,i,c)).image={width:t,height:r},d.magFilter=void 0!==u?u:1003,d.minFilter=void 0!==l?l:1003,d.flipY=!1,d.generateMipmaps=!1,d}return _(n)}(U).prototype.isDepthTexture=!0,new W,new W,new W,new ie;var Co=function(){function t(){y(this,t),this.type="Curve",this.arcLengthDivisions=200}return _(t,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)}},{key:"getPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}},{key:"getSpacedPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}},{key:"getLength",value:function(){var t=this.getLengths();return t[t.length-1]}},{key:"getLengths",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],r=this.getPoint(0),i=0;n.push(0);for(var o=1;o<=t;o++)i+=(e=this.getPoint(o/t)).distanceTo(r),n.push(i),r=e;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e||t*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(o-1)}},{key:"getTangent",value:function(t,e){var n=t-1e-4,r=t+1e-4;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),a=e||(i.isVector2?new N:new W);return a.copy(o).sub(i).normalize(),a}},{key:"getTangentAt",value:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)}},{key:"computeFrenetFrames",value:function(t,e){for(var n=new W,r=[],i=[],o=[],a=new W,s=new Tt,u=0;u<=t;u++){var l=u/t;r[u]=this.getTangentAt(l,new W),r[u].normalize()}i[0]=new W,o[0]=new W;var c=Number.MAX_VALUE,h=Math.abs(r[0].x),d=Math.abs(r[0].y),f=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),d<=c&&(c=d,n.set(0,1,0)),f<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(var p=1;p<=t;p++){if(i[p]=i[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(r[p-1],r[p]),a.length()>Number.EPSILON){a.normalize();var v=Math.acos(P(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(a,v))}o[p].crossVectors(r[p],i[p])}if(!0===e){var m=Math.acos(P(i[0].dot(i[t]),-1,1));m/=t,r[0].dot(a.crossVectors(i[0],i[t]))>0&&(m=-m);for(var g=1;g<=t;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],m*g)),o[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:o}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}},{key:"fromJSON",value:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}]),t}(),Po=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return y(this,n),(t=e.call(this)).type="EllipseCurve",t.aX=r,t.aY=i,t.xRadius=o,t.yRadius=a,t.aStartAngle=s,t.aEndAngle=u,t.aClockwise=l,t.aRotation=c,t}return _(n,[{key:"getPoint",value:function(t,e){for(var n=e||new N,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+t*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,d=u-this.aY;s=h*l-d*c+this.aX,u=h*c+d*l+this.aY}return n.set(s,u)}},{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}},{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}},{key:"fromJSON",value:function(t){return d(f(n.prototype),"fromJSON",this).call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}]),n}(Co);Po.prototype.isEllipseCurve=!0;var Io=function(t){m(n,t);var e=g(n);function n(t,r,i,o,a,s){var u;return y(this,n),(u=e.call(this,t,r,i,i,o,a,s)).type="ArcCurve",u}return _(n)}(Po);function Oo(){var t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){var u=(e-t)/o-(n-t)/(o+a)+(n-e)/a,l=(n-e)/a-(r-e)/(a+s)+(r-n)/s;i(e,n,u*=a,l*=a)},calc:function(i){var o=i*i;return t+e*i+n*o+r*(o*i)}}}Io.prototype.isArcCurve=!0;var ko=new W,No=new Oo,Lo=new Oo,Do=new Oo,Fo=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return y(this,n),(t=e.call(this)).type="CatmullRomCurve3",t.points=r,t.closed=i,t.curveType=o,t.tension=a,t}return _(n,[{key:"getPoint",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new W,i=r,o=this.points,a=o.length,s=(a-(this.closed?0:1))*t,u=Math.floor(s),l=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/a)+1)*a:0===l&&u===a-1&&(u=a-2,l=1),this.closed||u>0?e=o[(u-1)%a]:(ko.subVectors(o[0],o[1]).add(o[0]),e=ko);var c=o[u%a],h=o[(u+1)%a];if(this.closed||u+2<a?n=o[(u+2)%a]:(ko.subVectors(o[a-1],o[a-2]).add(o[a-1]),n=ko),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,f=Math.pow(e.distanceToSquared(c),d),p=Math.pow(c.distanceToSquared(h),d),v=Math.pow(h.distanceToSquared(n),d);p<1e-4&&(p=1),f<1e-4&&(f=p),v<1e-4&&(v=p),No.initNonuniformCatmullRom(e.x,c.x,h.x,n.x,f,p,v),Lo.initNonuniformCatmullRom(e.y,c.y,h.y,n.y,f,p,v),Do.initNonuniformCatmullRom(e.z,c.z,h.z,n.z,f,p,v)}else"catmullrom"===this.curveType&&(No.initCatmullRom(e.x,c.x,h.x,n.x,this.tension),Lo.initCatmullRom(e.y,c.y,h.y,n.y,this.tension),Do.initCatmullRom(e.z,c.z,h.z,n.z,this.tension));return i.set(No.calc(l),Lo.calc(l),Do.calc(l)),i}},{key:"copy",value:function(t){d(f(n.prototype),"copy",this).call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}},{key:"fromJSON",value:function(t){d(f(n.prototype),"fromJSON",this).call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push((new W).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}]),n}(Co);function Bo(t,e,n,r,i){var o=.5*(r-e),a=.5*(i-n),s=t*t;return(2*n-2*r+o+a)*(t*s)+(-3*n+3*r-2*o-a)*s+o*t+n}function Uo(t,e,n,r){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function Go(t,e,n,r,i){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}Fo.prototype.isCatmullRomCurve3=!0;var jo=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new N,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new N,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new N,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new N;return y(this,n),(t=e.call(this)).type="CubicBezierCurve",t.v0=r,t.v1=i,t.v2=o,t.v3=a,t}return _(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new N,n=e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Go(t,r.x,i.x,o.x,a.x),Go(t,r.y,i.y,o.y,a.y)),n}},{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}},{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}},{key:"fromJSON",value:function(t){return d(f(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}]),n}(Co);jo.prototype.isCubicBezierCurve=!0;var Ho=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new W,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new W,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new W,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new W;return y(this,n),(t=e.call(this)).type="CubicBezierCurve3",t.v0=r,t.v1=i,t.v2=o,t.v3=a,t}return _(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new W,n=e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Go(t,r.x,i.x,o.x,a.x),Go(t,r.y,i.y,o.y,a.y),Go(t,r.z,i.z,o.z,a.z)),n}},{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}},{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}},{key:"fromJSON",value:function(t){return d(f(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}]),n}(Co);Ho.prototype.isCubicBezierCurve3=!0;var zo=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new N,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new N;return y(this,n),(t=e.call(this)).type="LineCurve",t.v1=r,t.v2=i,t}return _(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new N,n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}},{key:"getPointAt",value:function(t,e){return this.getPoint(t,e)}},{key:"getTangent",value:function(t,e){var n=e||new N;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return d(f(n.prototype),"fromJSON",this).call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Co);zo.prototype.isLineCurve=!0;var Vo=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new N,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new N,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new N;return y(this,n),(t=e.call(this)).type="QuadraticBezierCurve",t.v0=r,t.v1=i,t.v2=o,t}return _(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new N,n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(Uo(t,r.x,i.x,o.x),Uo(t,r.y,i.y,o.y)),n}},{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return d(f(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Co);Vo.prototype.isQuadraticBezierCurve=!0;var Wo=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new W,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new W,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new W;return y(this,n),(t=e.call(this)).type="QuadraticBezierCurve3",t.v0=r,t.v1=i,t.v2=o,t}return _(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new W,n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(Uo(t,r.x,i.x,o.x),Uo(t,r.y,i.y,o.y),Uo(t,r.z,i.z,o.z)),n}},{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return d(f(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Co);Wo.prototype.isQuadraticBezierCurve3=!0;var Xo=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return y(this,n),(t=e.call(this)).type="SplineCurve",t.points=r,t}return _(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new N,n=e,r=this.points,i=(r.length-1)*t,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],l=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Bo(a,s.x,u.x,l.x,c.x),Bo(a,s.y,u.y,l.y,c.y)),n}},{key:"copy",value:function(t){d(f(n.prototype),"copy",this).call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++){var i=this.points[e];t.points.push(i.toArray())}return t}},{key:"fromJSON",value:function(t){d(f(n.prototype),"fromJSON",this).call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push((new N).fromArray(i))}return this}}]),n}(Co);Xo.prototype.isSplineCurve=!0;var Yo=Object.freeze({__proto__:null,ArcCurve:Io,CatmullRomCurve3:Fo,CubicBezierCurve:jo,CubicBezierCurve3:Ho,EllipseCurve:Po,LineCurve:zo,LineCurve3:function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new W,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new W;return y(this,n),(t=e.call(this)).type="LineCurve3",t.isLineCurve3=!0,t.v1=r,t.v2=i,t}return _(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new W,n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}},{key:"getPointAt",value:function(t,e){return this.getPoint(t,e)}},{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return d(f(n.prototype),"fromJSON",this).call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Co),QuadraticBezierCurve:Vo,QuadraticBezierCurve3:Wo,SplineCurve:Xo});function qo(t,e,n,r,i){var o,a;if(i===function(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}(t,e,n,r)>0)for(o=e;o<n;o+=r)a=va(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=va(o,t[o],t[o+1],a);return a&&la(a,a.next)&&(ma(a),a=a.next),a}function Zo(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!la(r,r.next)&&0!==ua(r.prev,r,r.next))r=r.next;else{if(ma(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Qo(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=ia(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Jo(t,r,i,o):Ko(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),ma(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?Qo(t=$o(Zo(t),e,n),e,n,r,i,o,2):2===a&&ta(t,e,n,r,i,o):Qo(Zo(t),e,n,r,i,o,1);break}}}function Ko(t){var e=t.prev,n=t,r=t.next;if(ua(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(aa(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&ua(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Jo(t,e,n,r){var i=t.prev,o=t,a=t.next;if(ua(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=ia(s,u,e,n,r),d=ia(l,c,e,n,r),f=t.prevZ,p=t.nextZ;f&&f.z>=h&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&aa(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&ua(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&aa(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ua(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&aa(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&ua(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&aa(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ua(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function $o(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!la(i,o)&&ca(i,r,r.next,o)&&fa(i,o)&&fa(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),ma(r),ma(r.next),r=t=o),r=r.next}while(r!==t);return Zo(r)}function ta(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&sa(a,s)){var u=pa(a,s);return a=Zo(a,a.next),u=Zo(u,u.next),Qo(a,e,n,r,i,o),void Qo(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function ea(t,e){return t.x-e.x}function na(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,l=n,c=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&aa(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),fa(r,t)&&(u<d||u===d&&(r.x>n.x||r.x===n.x&&ra(n,r)))&&(n=r,d=u)),r=r.next}while(r!==l);return n}(t,e)){var n=pa(e,t);Zo(e,e.next),Zo(n,n.next)}}function ra(t,e){return ua(t.prev,t,e.prev)<0&&ua(e.next,t,t.next)<0}function ia(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function oa(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function aa(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function sa(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ca(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(fa(t,e)&&fa(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(ua(t.prev,t,e.prev)||ua(t,e.prev,e))||la(t,e)&&ua(t.prev,t,t.next)>0&&ua(e.prev,e,e.next)>0)}function ua(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function la(t,e){return t.x===e.x&&t.y===e.y}function ca(t,e,n,r){var i=da(ua(t,e,n)),o=da(ua(t,e,r)),a=da(ua(n,r,t)),s=da(ua(n,r,e));return i!==o&&a!==s||!(0!==i||!ha(t,n,e))||!(0!==o||!ha(t,r,e))||!(0!==a||!ha(n,t,r))||!(0!==s||!ha(n,e,r))}function ha(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function da(t){return t>0?1:t<0?-1:0}function fa(t,e){return ua(t.prev,t,t.next)<0?ua(t,e,t.next)>=0&&ua(t,t.prev,e)>=0:ua(t,e,t.prev)<0||ua(t,t.next,e)<0}function pa(t,e){var n=new ga(t.i,t.x,t.y),r=new ga(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function va(t,e,n,r){var i=new ga(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ma(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ga(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var ya=function(){function t(){y(this,t)}return _(t,null,[{key:"area",value:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n}},{key:"isClockWise",value:function(e){return t.area(e)<0}},{key:"triangulateShape",value:function(t,e){var n=[],r=[],i=[];_a(t),xa(n,t);var o=t.length;e.forEach(_a);for(var a=0;a<e.length;a++)r.push(o),o+=e[a].length,xa(n,e[a]);for(var s=function(t,e){var n,r,i,o,a,s,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=e&&e.length,h=c?e[0]*l:t.length,d=qo(t,0,h,l,!0),f=[];if(!d||d.next===d.prev)return f;if(c&&(d=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=qo(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(oa(a));for(s.sort(ea),i=0;i<s.length;i++)na(s[i],n),n=Zo(n,n.next);return n}(t,e,d,l)),t.length>80*l){n=i=t[0],r=o=t[1];for(var p=l;p<h;p+=l)(a=t[p])<n&&(n=a),(s=t[p+1])<r&&(r=s),a>i&&(i=a),s>o&&(o=s);u=0!==(u=Math.max(i-n,o-r))?1/u:0}return Qo(d,f,l,n,r,u),f}(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}}]),t}();function _a(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function xa(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}var ba=function(t){m(n,t);var e=g(n);function n(t,r){var i;y(this,n),(i=e.call(this)).type="ExtrudeGeometry",i.parameters={shapes:t,options:r},t=Array.isArray(t)?t:[t];for(var o=v(i),a=[],s=[],u=0,l=t.length;u<l;u++)c(t[u]);function c(t){var e=[],n=void 0!==r.curveSegments?r.curveSegments:12,i=void 0!==r.steps?r.steps:1,u=void 0!==r.depth?r.depth:100,l=void 0===r.bevelEnabled||r.bevelEnabled,c=void 0!==r.bevelThickness?r.bevelThickness:6,h=void 0!==r.bevelSize?r.bevelSize:c-2,d=void 0!==r.bevelOffset?r.bevelOffset:0,f=void 0!==r.bevelSegments?r.bevelSegments:3,p=r.extrudePath,v=void 0!==r.UVGenerator?r.UVGenerator:Ta;void 0!==r.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=r.amount);var m,g,y,_,x,b=!1;p&&(m=p.getSpacedPoints(i),b=!0,l=!1,g=p.computeFrenetFrames(i,!1),y=new W,_=new W,x=new W),l||(f=0,c=0,h=0,d=0);var T=t.extractPoints(n),w=T.shape,E=T.holes;if(!ya.isClockWise(w)){w=w.reverse();for(var S=0,A=E.length;S<A;S++){var M=E[S];ya.isClockWise(M)&&(E[S]=M.reverse())}}for(var R=ya.triangulateShape(w,E),C=w,P=0,I=E.length;P<I;P++){var O=E[P];w=w.concat(O)}function k(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var L=w.length,D=R.length;function F(t,e,n){var r,i,o,a=t.x-e.x,s=t.y-e.y,u=n.x-t.x,l=n.y-t.y,c=a*a+s*s,h=a*l-s*u;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(c),f=Math.sqrt(u*u+l*l),p=e.x-s/d,v=e.y+a/d,m=((n.x-l/f-p)*l-(n.y+u/f-v)*u)/(a*l-s*u),g=(r=p+a*m-t.x)*r+(i=v+s*m-t.y)*i;if(g<=2)return new N(r,i);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?u>Number.EPSILON&&(y=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new N(r/o,i/o)}for(var B=[],U=0,G=C.length,j=G-1,H=U+1;U<G;U++,j++,H++)j===G&&(j=0),H===G&&(H=0),B[U]=F(C[U],C[j],C[H]);for(var z,V=[],X=B.concat(),Y=0,q=E.length;Y<q;Y++){var Z=E[Y];z=[];for(var Q=0,K=Z.length,J=K-1,$=Q+1;Q<K;Q++,J++,$++)J===K&&(J=0),$===K&&($=0),z[Q]=F(Z[Q],Z[J],Z[$]);V.push(z),X=X.concat(z)}for(var tt=0;tt<f;tt++){for(var et=tt/f,nt=c*Math.cos(et*Math.PI/2),rt=h*Math.sin(et*Math.PI/2)+d,it=0,ot=C.length;it<ot;it++){var at=k(C[it],B[it],rt);kt(at.x,at.y,-nt)}for(var st=0,ut=E.length;st<ut;st++){var lt=E[st];z=V[st];for(var ct=0,ht=lt.length;ct<ht;ct++){var dt=k(lt[ct],z[ct],rt);kt(dt.x,dt.y,-nt)}}}for(var ft=h+d,pt=0;pt<L;pt++){var vt=l?k(w[pt],X[pt],ft):w[pt];b?(_.copy(g.normals[0]).multiplyScalar(vt.x),y.copy(g.binormals[0]).multiplyScalar(vt.y),x.copy(m[0]).add(_).add(y),kt(x.x,x.y,x.z)):kt(vt.x,vt.y,0)}for(var mt=1;mt<=i;mt++)for(var gt=0;gt<L;gt++){var yt=l?k(w[gt],X[gt],ft):w[gt];b?(_.copy(g.normals[mt]).multiplyScalar(yt.x),y.copy(g.binormals[mt]).multiplyScalar(yt.y),x.copy(m[mt]).add(_).add(y),kt(x.x,x.y,x.z)):kt(yt.x,yt.y,u/i*mt)}for(var _t=f-1;_t>=0;_t--){for(var xt=_t/f,bt=c*Math.cos(xt*Math.PI/2),Tt=h*Math.sin(xt*Math.PI/2)+d,wt=0,Et=C.length;wt<Et;wt++){var St=k(C[wt],B[wt],Tt);kt(St.x,St.y,u+bt)}for(var At=0,Mt=E.length;At<Mt;At++){var Rt=E[At];z=V[At];for(var Ct=0,Pt=Rt.length;Ct<Pt;Ct++){var It=k(Rt[Ct],z[Ct],Tt);b?kt(It.x,It.y+m[i-1].y,m[i-1].x+bt):kt(It.x,It.y,u+bt)}}}function Ot(t,e){for(var n=t.length;--n>=0;){var r=n,o=n-1;o<0&&(o=t.length-1);for(var a=0,s=i+2*f;a<s;a++){var u=L*a,l=L*(a+1);Lt(e+r+u,e+o+u,e+o+l,e+r+l)}}}function kt(t,n,r){e.push(t),e.push(n),e.push(r)}function Nt(t,e,n){Dt(t),Dt(e),Dt(n);var r=a.length/3,i=v.generateTopUV(o,a,r-3,r-2,r-1);Ft(i[0]),Ft(i[1]),Ft(i[2])}function Lt(t,e,n,r){Dt(t),Dt(e),Dt(r),Dt(e),Dt(n),Dt(r);var i=a.length/3,s=v.generateSideWallUV(o,a,i-6,i-3,i-2,i-1);Ft(s[0]),Ft(s[1]),Ft(s[3]),Ft(s[1]),Ft(s[2]),Ft(s[3])}function Dt(t){a.push(e[3*t+0]),a.push(e[3*t+1]),a.push(e[3*t+2])}function Ft(t){s.push(t.x),s.push(t.y)}!function(){var t=a.length/3;if(l){for(var e=0,n=L*e,r=0;r<D;r++){var s=R[r];Nt(s[2]+n,s[1]+n,s[0]+n)}n=L*(e=i+2*f);for(var u=0;u<D;u++){var c=R[u];Nt(c[0]+n,c[1]+n,c[2]+n)}}else{for(var h=0;h<D;h++){var d=R[h];Nt(d[2],d[1],d[0])}for(var p=0;p<D;p++){var v=R[p];Nt(v[0]+L*i,v[1]+L*i,v[2]+L*i)}}o.addGroup(t,a.length/3-t,0)}(),function(){var t=a.length/3,e=0;Ot(C,e),e+=C.length;for(var n=0,r=E.length;n<r;n++){var i=E[n];Ot(i,e),e+=i.length}o.addGroup(t,a.length/3-t,1)}()}return i.setAttribute("position",new be(a,3)),i.setAttribute("uv",new be(s,2)),i.computeVertexNormals(),i}return _(n,[{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,t)}}],[{key:"fromJSON",value:function(t,e){for(var r=[],i=0,o=t.shapes.length;i<o;i++){var a=e[t.shapes[i]];r.push(a)}var s=t.options.extrudePath;return void 0!==s&&(t.options.extrudePath=(new Yo[s.type]).fromJSON(s)),new n(r,t.options)}}]),n}(Pe),Ta={generateTopUV:function(t,e,n,r,i){var o=e[3*n],a=e[3*n+1],s=e[3*r],u=e[3*r+1],l=e[3*i],c=e[3*i+1];return[new N(o,a),new N(s,u),new N(l,c)]},generateSideWallUV:function(t,e,n,r,i,o){var a=e[3*n],s=e[3*n+1],u=e[3*n+2],l=e[3*r],c=e[3*r+1],h=e[3*r+2],d=e[3*i],f=e[3*i+1],p=e[3*i+2],v=e[3*o],m=e[3*o+1],g=e[3*o+2];return Math.abs(s-c)<Math.abs(a-l)?[new N(a,1-u),new N(l,1-h),new N(d,1-p),new N(v,1-g)]:[new N(s,1-u),new N(c,1-h),new N(f,1-p),new N(m,1-g)]}},wa=function(t){m(n,t);var e=g(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;y(this,n),(r=e.call(this)).type="ShapeGeometry",r.parameters={shapes:t,curveSegments:i};var o=[],a=[],s=[],u=[],l=0,c=0;if(!1===Array.isArray(t))d(t);else for(var h=0;h<t.length;h++)d(t[h]),r.addGroup(l,c,h),l+=c,c=0;function d(t){var e=a.length/3,n=t.extractPoints(i),r=n.shape,l=n.holes;!1===ya.isClockWise(r)&&(r=r.reverse());for(var h=0,d=l.length;h<d;h++){var f=l[h];!0===ya.isClockWise(f)&&(l[h]=f.reverse())}for(var p=ya.triangulateShape(r,l),v=0,m=l.length;v<m;v++){var g=l[v];r=r.concat(g)}for(var y=0,_=r.length;y<_;y++){var x=r[y];a.push(x.x,x.y,0),s.push(0,0,1),u.push(x.x,x.y)}for(var b=0,T=p.length;b<T;b++){var w=p[b],E=w[0]+e,S=w[1]+e,A=w[2]+e;o.push(E,S,A),c+=3}}return r.setIndex(o),r.setAttribute("position",new be(a,3)),r.setAttribute("normal",new be(s,3)),r.setAttribute("uv",new be(u,2)),r}return _(n,[{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}],[{key:"fromJSON",value:function(t,e){for(var r=[],i=0,o=t.shapes.length;i<o;i++){var a=e[t.shapes[i]];r.push(a)}return new n(r,t.curveSegments)}}]),n}(Pe),Ea=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).type="ShadowMaterial",r.color=new fe(0),r.transparent=!0,r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this}}]),n}(ae);Ea.prototype.isShadowMaterial=!0;var Sa=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).type="RawShaderMaterial",r}return _(n)}(tn);Sa.prototype.isRawShaderMaterial=!0;var Aa=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new fe(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new fe(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new N(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.vertexTangents=!1,r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this.vertexTangents=t.vertexTangents,this}}]),n}(ae);Aa.prototype.isMeshStandardMaterial=!0;var Ma=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoat=0,r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new N(1,1),r.clearcoatNormalMap=null,r.reflectivity=.5,Object.defineProperty(v(r),"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=P(2.5*(t-1)/(t+1),0,1)}}),r.sheen=null,r.transmission=0,r.transmissionMap=null,r.thickness=.01,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationColor=new fe(1,1,1),r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new fe).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this}}]),n}(Aa);Ma.prototype.isMeshPhysicalMaterial=!0;var Ra=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).type="MeshPhongMaterial",r.color=new fe(16777215),r.specular=new fe(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new fe(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new N(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}]),n}(ae);Ra.prototype.isMeshPhongMaterial=!0;var Ca=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).defines={TOON:""},r.type="MeshToonMaterial",r.color=new fe(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new fe(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new N(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}}]),n}(ae);Ca.prototype.isMeshToonMaterial=!0;var Pa=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new N(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}]),n}(ae);Pa.prototype.isMeshNormalMaterial=!0;var Ia=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).type="MeshLambertMaterial",r.color=new fe(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new fe(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}}]),n}(ae);Ia.prototype.isMeshLambertMaterial=!0;var Oa=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new fe(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new N(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}]),n}(ae);Oa.prototype.isMeshMatcapMaterial=!0;var ka=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(t),r}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}]),n}(lo);ka.prototype.isLineDashedMaterial=!0;var Na={arraySlice:function(t,e,n){return Na.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),r=0;r!==e;++r)n[r]=r;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*e,u=0;u!==e;++u)i[a++]=t[s+u];return i},flattenJSON:function(t,e,n,r){for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)}},subclip:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,o=t.clone();o.name=e;for(var a=[],s=0;s<o.tracks.length;++s){for(var u=o.tracks[s],l=u.getValueSize(),c=[],h=[],d=0;d<u.times.length;++d){var f=u.times[d]*i;if(!(f<n||f>=r)){c.push(u.times[d]);for(var p=0;p<l;++p)h.push(u.values[d*l+p])}}0!==c.length&&(u.times=Na.convertArray(c,u.times.constructor),u.values=Na.convertArray(h,u.values.constructor),a.push(u))}o.tracks=a;for(var v=1/0,m=0;m<o.tracks.length;++m)v>o.tracks[m].times[0]&&(v=o.tracks[m].times[0]);for(var g=0;g<o.tracks.length;++g)o.tracks[g].shift(-1*v);return o.resetDuration(),o},makeClipAdditive:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,o=e/r,a=function(e){var r=n.tracks[e],i=r.ValueTypeName;if("bool"===i||"string"===i)return"continue";var a=t.tracks.find((function(t){return t.name===r.name&&t.ValueTypeName===i}));if(void 0===a)return"continue";var s=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var l=0,c=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);var h=r.times.length-1,d=void 0;if(o<=r.times[0]){var f=s,p=u-s;d=Na.arraySlice(r.values,f,p)}else if(o>=r.times[h]){var v=h*u+s,m=v+u-s;d=Na.arraySlice(r.values,v,m)}else{var g=r.createInterpolant(),y=s,_=u-s;g.evaluate(o),d=Na.arraySlice(g.resultBuffer,y,_)}"quaternion"===i&&(new V).fromArray(d).normalize().conjugate().toArray(d);for(var x=a.times.length,b=0;b<x;++b){var T=b*c+l;if("quaternion"===i)V.multiplyQuaternionsFlat(a.values,T,d,0,a.values,T);else for(var w=c-2*l,E=0;E<w;++E)a.values[T+E]-=d[E]}},s=0;s<i;++s)a(s);return t.blendMode=2501,t}},La=function(){function t(e,n,r,i){y(this,t),this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return _(t,[{key:"evaluate",value:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var o;n:{r:if(!(t<r)){for(var a=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===a)break;if(i=r,t<(r=e[++n]))break e}o=e.length;break n}if(t>=i)break t;var s=e[1];t<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===u)break;if(r=i,t>=(i=e[--n-1]))break e}o=n,n=0}for(;n<o;){var l=n+o>>>1;t<e[l]?o=l:n=l+1}if(r=e[n],void 0===(i=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),t}();La.prototype.beforeStart_=La.prototype.copySampleValue_,La.prototype.afterEnd_=La.prototype.copySampleValue_;var Da=function(t){m(n,t);var e=g(n);function n(t,r,i,o){var a;return y(this,n),(a=e.call(this,t,r,i,o))._weightPrev=-0,a._offsetPrev=-0,a._weightNext=-0,a._offsetNext=-0,a.DefaultSettings_={endingStart:2400,endingEnd:2400},a}return _(n,[{key:"intervalChanged_",value:function(t,e,n){var r=this.parameterPositions,i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=t,a=2*e-n;break;case 2402:a=e+r[i=r.length-2]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=t,s=2*n-e;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}var u=.5*(n-e),l=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l}},{key:"interpolate_",value:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-e)/(r-e),p=f*f,v=p*f,m=-h*v+2*h*p-h*f,g=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*v+(1.5+d)*p+.5*f,_=d*v-d*p,x=0;x!==a;++x)i[x]=m*o[l+x]+g*o[u+x]+y*o[s+x]+_*o[c+x];return i}}]),n}(La),Fa=function(t){m(n,t);var e=g(n);function n(t,r,i,o){return y(this,n),e.call(this,t,r,i,o)}return _(n,[{key:"interpolate_",value:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=(n-e)/(r-e),c=1-l,h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}]),n}(La),Ba=function(t){m(n,t);var e=g(n);function n(t,r,i,o){return y(this,n),e.call(this,t,r,i,o)}return _(n,[{key:"interpolate_",value:function(t){return this.copySampleValue_(t-1)}}]),n}(La),Ua=function(){function t(e,n,r,i){if(y(this,t),void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Na.convertArray(n,this.TimeBufferType),this.values=Na.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return _(t,[{key:"InterpolantFactoryMethodDiscrete",value:function(t){return new Ba(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodLinear",value:function(t){return new Fa(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodSmooth",value:function(t){return new Da(this.times,this.values,this.getValueSize(),t)}},{key:"setInterpolation",value:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this}},{key:"scale",value:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this}},{key:"trim",value:function(t,e){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=Na.arraySlice(n,i,o),this.values=Na.arraySlice(this.values,i*a,o*a)}return this}},{key:"validate",value:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==r&&Na.isTypedArray(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),t=!1;break}}return t}},{key:"optimize",value:function(){for(var t=Na.arraySlice(this.times),e=Na.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=t.length-1,o=1,a=1;a<i;++a){var s=!1,u=t[a];if(u!==t[a+1]&&(1!==a||u!==t[0]))if(r)s=!0;else for(var l=a*n,c=l-n,h=l+n,d=0;d!==n;++d){var f=e[l+d];if(f!==e[c+d]||f!==e[h+d]){s=!0;break}}if(s){if(a!==o){t[o]=t[a];for(var p=a*n,v=o*n,m=0;m!==n;++m)e[v+m]=e[p+m]}++o}}if(i>0){t[o]=t[i];for(var g=i*n,y=o*n,_=0;_!==n;++_)e[y+_]=e[g+_];++o}return o!==t.length?(this.times=Na.arraySlice(t,0,o),this.values=Na.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this}},{key:"clone",value:function(){var t=Na.arraySlice(this.times,0),e=Na.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(t){var e,n=t.constructor;if(n.toJSON!==this.toJSON)e=n.toJSON(t);else{e={name:t.name,times:Na.convertArray(t.times,Array),values:Na.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e}}]),t}();Ua.prototype.TimeBufferType=Float32Array,Ua.prototype.ValueBufferType=Float32Array,Ua.prototype.DefaultInterpolation=2301;var Ga=function(t){m(n,t);var e=g(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(Ua);Ga.prototype.ValueTypeName="bool",Ga.prototype.ValueBufferType=Array,Ga.prototype.DefaultInterpolation=2300,Ga.prototype.InterpolantFactoryMethodLinear=void 0,Ga.prototype.InterpolantFactoryMethodSmooth=void 0;var ja=function(t){m(n,t);var e=g(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(Ua);ja.prototype.ValueTypeName="color";var Ha=function(t){m(n,t);var e=g(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(Ua);Ha.prototype.ValueTypeName="number";var za=function(t){m(n,t);var e=g(n);function n(t,r,i,o){return y(this,n),e.call(this,t,r,i,o)}return _(n,[{key:"interpolate_",value:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(r-e),u=t*a,l=u+a;u!==l;u+=4)V.slerpFlat(i,0,o,u-a,o,u,s);return i}}]),n}(La),Va=function(t){m(n,t);var e=g(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"InterpolantFactoryMethodLinear",value:function(t){return new za(this.times,this.values,this.getValueSize(),t)}}]),n}(Ua);Va.prototype.ValueTypeName="quaternion",Va.prototype.DefaultInterpolation=2301,Va.prototype.InterpolantFactoryMethodSmooth=void 0;var Wa=function(t){m(n,t);var e=g(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(Ua);Wa.prototype.ValueTypeName="string",Wa.prototype.ValueBufferType=Array,Wa.prototype.DefaultInterpolation=2300,Wa.prototype.InterpolantFactoryMethodLinear=void 0,Wa.prototype.InterpolantFactoryMethodSmooth=void 0;var Xa=function(t){m(n,t);var e=g(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(Ua);Xa.prototype.ValueTypeName="vector";var Ya=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;y(this,t),this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=C(),this.duration<0&&this.resetDuration()}return _(t,[{key:"resetDuration",value:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var r=this.tracks[e];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}},{key:"trim",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}},{key:"optimize",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},{key:"clone",value:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,o=n.length;i!==o;++i)e.push(qa(n[i]).scale(r));var a=new this(t.name,t.duration,e,t.blendMode);return a.uuid=t.uuid,a}},{key:"toJSON",value:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},i=0,o=n.length;i!==o;++i)e.push(Ua.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(t,e,n,r){for(var i=e.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var l=Na.getKeyframeOrder(s);s=Na.sortedArray(s,1,l),u=Na.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new Ha(".morphTargetInfluences["+e[a].name+"]",s,u).scale(1/n))}return new this(t,-1,o)}},{key:"findByName",value:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],u=s.name.match(i);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(s)}}var h=[];for(var d in r)h.push(this.CreateFromMorphTargetSequence(d,r[d],e,n));return h}},{key:"parseAnimation",value:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,r,i){if(0!==n.length){var o=[],a=[];Na.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.fps||30,a=t.blendMode,s=t.length||-1,u=t.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},d=void 0;for(d=0;d<c.length;d++)if(c[d].morphTargets)for(var f=0;f<c[d].morphTargets.length;f++)h[c[d].morphTargets[f]]=-1;for(var p in h){for(var v=[],m=[],g=0;g!==c[d].morphTargets.length;++g){var y=c[d];v.push(y.time),m.push(y.morphTarget===p?1:0)}r.push(new Ha(".morphTargetInfluence["+p+"]",v,m))}s=h.length*(o||1)}else{var _=".bones["+e[l].name+"]";n(Xa,_+".position",c,"pos",r),n(Va,_+".quaternion",c,"rot",r),n(Xa,_+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,s,r,a)}}]),t}();function qa(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ha;case"vector":case"vector2":case"vector3":case"vector4":return Xa;case"color":return ja;case"quaternion":return Va;case"bool":case"boolean":return Ga;case"string":return Wa}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],r=[];Na.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}var Za={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Qa=_((function t(e,n,r){y(this,t);var i=this,o=!1,a=0,s=0,u=void 0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(t){s++,!1===o&&void 0!==i.onStart&&i.onStart(t,a,s),o=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,s),a===s&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return u?u(t):t},this.setURLModifier=function(t){return u=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){var e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=l.length;e<n;e+=2){var r=l[e],i=l[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return i}return null}})),Ka=new Qa,Ja=function(){function t(e){y(this,t),this.manager=void 0!==e?e:Ka,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return _(t,[{key:"load",value:function(){}},{key:"loadAsync",value:function(t,e){var n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(t){return this.crossOrigin=t,this}},{key:"setWithCredentials",value:function(t){return this.withCredentials=t,this}},{key:"setPath",value:function(t){return this.path=t,this}},{key:"setResourcePath",value:function(t){return this.resourcePath=t,this}},{key:"setRequestHeader",value:function(t){return this.requestHeader=t,this}}]),t}(),$a={},ts=function(t){m(n,t);var e=g(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:"load",value:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Za.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;if(void 0===$a[t]){var a,s=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var u=s[1],l=!!s[2],c=s[3];c=decodeURIComponent(c),l&&(c=atob(c));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var f=new Uint8Array(c.length),p=0;p<c.length;p++)f[p]=c.charCodeAt(p);h="blob"===d?new Blob([f.buffer],{type:u}):f.buffer;break;case"document":var v=new DOMParser;h=v.parseFromString(c,u);break;case"json":h=JSON.parse(c);break;default:h=c}setTimeout((function(){e&&e(h),i.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}),0)}}else{for(var m in $a[t]=[],$a[t].push({onLoad:e,onProgress:n,onError:r}),(a=new XMLHttpRequest).open("GET",t,!0),a.addEventListener("load",(function(e){var n=this.response,r=$a[t];if(delete $a[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Za.add(t,n);for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(t)}else{for(var u=0,l=r.length;u<l;u++){var c=r[u];c.onError&&c.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}}),!1),a.addEventListener("progress",(function(e){for(var n=$a[t],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(e)}}),!1),a.addEventListener("error",(function(e){var n=$a[t];delete $a[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),a.addEventListener("abort",(function(e){var n=$a[t];delete $a[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(a.responseType=this.responseType),void 0!==this.withCredentials&&(a.withCredentials=this.withCredentials),a.overrideMimeType&&a.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)a.setRequestHeader(m,this.requestHeader[m]);a.send(null)}return i.manager.itemStart(t),a}$a[t].push({onLoad:e,onProgress:n,onError:r})}},{key:"setResponseType",value:function(t){return this.responseType=t,this}},{key:"setMimeType",value:function(t){return this.mimeType=t,this}}]),n}(Ja),es=function(t){m(n,t);var e=g(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:"load",value:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Za.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),Za.add(t,this),e&&e(this),i.manager.itemEnd(t)}function u(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}]),n}(Ja),ns=function(t){m(n,t);var e=g(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:"load",value:function(t,e,n,r){var i=new on,o=new es(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(t[n],(function(t){i.images[n]=t,6===++a&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(var u=0;u<t.length;++u)s(u);return i}}]),n}(Ja),rs=function(t){m(n,t);var e=g(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:"load",value:function(t,e,n,r){var i=new U,o=new es(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(n){i.image=n;var r=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?1022:1023,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}]),n}(Ja),is=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.call(this)).type="CurvePath",t.curves=[],t.autoClose=!1,t}return _(n,[{key:"add",value:function(t){this.curves.push(t)}},{key:"closePath",value:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new zo(e,t))}},{key:"getPoint",value:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null}},{key:"getLength",value:function(){var t=this.getCurveLengths();return t[t.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}},{key:"getSpacedPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}},{key:"getPoints",value:function(){for(var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),u=0;u<s.length;u++){var l=s[u];t&&t.equals(l)||(n.push(l),t=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(t){d(f(n.prototype),"copy",this).call(this,t),this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}},{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,r=this.curves.length;e<r;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t}},{key:"fromJSON",value:function(t){d(f(n.prototype),"fromJSON",this).call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var i=t.curves[e];this.curves.push((new Yo[i.type]).fromJSON(i))}return this}}]),n}(Co),os=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).type="Path",r.currentPoint=new N,t&&r.setFromPoints(t),r}return _(n,[{key:"setFromPoints",value:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}},{key:"moveTo",value:function(t,e){return this.currentPoint.set(t,e),this}},{key:"lineTo",value:function(t,e){var n=new zo(this.currentPoint.clone(),new N(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}},{key:"quadraticCurveTo",value:function(t,e,n,r){var i=new Vo(this.currentPoint.clone(),new N(t,e),new N(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(t,e,n,r,i,o){var a=new jo(this.currentPoint.clone(),new N(t,e),new N(n,r),new N(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}},{key:"splineThru",value:function(t){var e=[this.currentPoint.clone()].concat(t),n=new Xo(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}},{key:"arc",value:function(t,e,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,r,i,o),this}},{key:"absarc",value:function(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this}},{key:"ellipse",value:function(t,e,n,r,i,o,a,s){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(t+u,e+l,n,r,i,o,a,s),this}},{key:"absellipse",value:function(t,e,n,r,i,o,a,s){var u=new Po(t,e,n,r,i,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.currentPoint.copy(t.currentPoint),this}},{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);return t.currentPoint=this.currentPoint.toArray(),t}},{key:"fromJSON",value:function(t){return d(f(n.prototype),"fromJSON",this).call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}]),n}(is),as=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).uuid=C(),r.type="Shape",r.holes=[],r}return _(n,[{key:"getPointsHoles",value:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}},{key:"extractPoints",value:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}},{key:"copy",value:function(t){d(f(n.prototype),"copy",this).call(this,t),this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var i=t.holes[e];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,r=this.holes.length;e<r;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t}},{key:"fromJSON",value:function(t){d(f(n.prototype),"fromJSON",this).call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var i=t.holes[e];this.holes.push((new os).fromJSON(i))}return this}}]),n}(os),ss=function(t){m(n,t);var e=g(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return y(this,n),(r=e.call(this)).type="Light",r.color=new fe(t),r.intensity=i,r}return _(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this}},{key:"toJSON",value:function(t){var e=d(f(n.prototype),"toJSON",this).call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}]),n}(Yt);ss.prototype.isLight=!0;var us=function(t){m(n,t);var e=g(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t,i)).type="HemisphereLight",o.position.copy(Yt.DefaultUp),o.updateMatrix(),o.groundColor=new fe(r),o}return _(n,[{key:"copy",value:function(t){return ss.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}]),n}(ss);us.prototype.isHemisphereLight=!0;var ls=new Tt,cs=new W,hs=new W,ds=function(){function t(e){y(this,t),this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new N(512,512),this.map=null,this.mapPass=null,this.matrix=new Tt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fn,this._frameExtents=new N(1,1),this._viewportCount=1,this._viewports=[new j(0,0,1,1)]}return _(t,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(t){var e=this.camera,n=this.matrix;cs.setFromMatrixPosition(t.matrixWorld),e.position.copy(cs),hs.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(hs),e.updateMatrixWorld(),ls.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ls),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}},{key:"getViewport",value:function(t){return this._viewports[t]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}]),t}(),fs=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.call(this,new nn(50,1,.5,500))).focus=1,t}return _(n,[{key:"updateMatrices",value:function(t){var e=this.camera,r=2*R*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=t.distance||e.far;r===e.fov&&i===e.aspect&&o===e.far||(e.fov=r,e.aspect=i,e.far=o,e.updateProjectionMatrix()),d(f(n.prototype),"updateMatrices",this).call(this,t)}},{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.focus=t.focus,this}}]),n}(ds);fs.prototype.isSpotLightShadow=!0;var ps=function(t){m(n,t);var e=g(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return y(this,n),(i=e.call(this,t,r)).type="SpotLight",i.position.copy(Yt.DefaultUp),i.updateMatrix(),i.target=new Yt,i.distance=o,i.angle=a,i.penumbra=s,i.decay=u,i.shadow=new fs,i}return _(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}]),n}(ss);ps.prototype.isSpotLight=!0;var vs=new Tt,ms=new W,gs=new W,ys=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.call(this,new nn(90,1,.5,500)))._frameExtents=new N(4,2),t._viewportCount=6,t._viewports=[new j(2,1,1,1),new j(0,1,1,1),new j(3,1,1,1),new j(1,1,1,1),new j(3,0,1,1),new j(1,0,1,1)],t._cubeDirections=[new W(1,0,0),new W(-1,0,0),new W(0,0,1),new W(0,0,-1),new W(0,1,0),new W(0,-1,0)],t._cubeUps=[new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,0,1),new W(0,0,-1)],t}return _(n,[{key:"updateMatrices",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),ms.setFromMatrixPosition(t.matrixWorld),n.position.copy(ms),gs.copy(n.position),gs.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(gs),n.updateMatrixWorld(),r.makeTranslation(-ms.x,-ms.y,-ms.z),vs.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vs)}}]),n}(ds);ys.prototype.isPointLightShadow=!0;var _s=function(t){m(n,t);var e=g(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return y(this,n),(i=e.call(this,t,r)).type="PointLight",i.distance=o,i.decay=a,i.shadow=new ys,i}return _(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}]),n}(ss);_s.prototype.isPointLight=!0;var xs=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return y(this,n),(t=e.call(this)).type="OrthographicCamera",t.zoom=1,t.view=null,t.left=r,t.right=i,t.top=o,t.bottom=a,t.near=s,t.far=u,t.updateProjectionMatrix(),t}return _(n,[{key:"copy",value:function(t,e){return d(f(n.prototype),"copy",this).call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}},{key:"setViewOffset",value:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(i+=u*this.view.offsetX)+u*this.view.width,s=(a-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(t){var e=d(f(n.prototype),"toJSON",this).call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}]),n}(en);xs.prototype.isOrthographicCamera=!0;var bs=function(t){m(n,t);var e=g(n);function n(){return y(this,n),e.call(this,new xs(-5,5,5,-5,.5,500))}return _(n)}(ds);bs.prototype.isDirectionalLightShadow=!0;var Ts=function(t){m(n,t);var e=g(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t,r)).type="DirectionalLight",i.position.copy(Yt.DefaultUp),i.updateMatrix(),i.target=new Yt,i.shadow=new bs,i}return _(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}]),n}(ss);Ts.prototype.isDirectionalLight=!0;var ws=function(t){m(n,t);var e=g(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t,r)).type="AmbientLight",i}return _(n)}(ss);ws.prototype.isAmbientLight=!0;var Es=function(t){m(n,t);var e=g(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return y(this,n),(i=e.call(this,t,r)).type="RectAreaLight",i.width=o,i.height=a,i}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.width=t.width,this.height=t.height,this}},{key:"toJSON",value:function(t){var e=d(f(n.prototype),"toJSON",this).call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}]),n}(ss);Es.prototype.isRectAreaLight=!0;var Ss=function(){function t(){y(this,t),this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new W)}return _(t,[{key:"set",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}},{key:"zero",value:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}},{key:"getAt",value:function(t,e){var n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*i),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*r*1.092548),e.addScaledVector(o[5],r*i*1.092548),e.addScaledVector(o[6],.315392*(3*i*i-1)),e.addScaledVector(o[7],n*i*1.092548),e.addScaledVector(o[8],.546274*(n*n-r*r)),e}},{key:"getIrradianceAt",value:function(t,e){var n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*i),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*r),e.addScaledVector(o[5],.858086*r*i),e.addScaledVector(o[6],.743125*i*i-.247708),e.addScaledVector(o[7],.858086*n*i),e.addScaledVector(o[8],.429043*(n*n-r*r)),e}},{key:"add",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}},{key:"addScaledSH",value:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}},{key:"scale",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}},{key:"lerp",value:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}},{key:"equals",value:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}},{key:"copy",value:function(t){return this.set(t.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}}],[{key:"getBasisAt",value:function(t,e){var n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}]),t}();Ss.prototype.isSphericalHarmonics3=!0;var As=function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ss,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return y(this,n),(t=e.call(this,void 0,i)).sh=r,t}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.sh.copy(t.sh),this}},{key:"fromJSON",value:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}},{key:"toJSON",value:function(t){var e=d(f(n.prototype),"toJSON",this).call(this,t);return e.object.sh=this.sh.toArray(),e}}]),n}(ss);As.prototype.isLightProbe=!0;var Ms=function(){function t(){y(this,t)}return _(t,null,[{key:"decodeText",value:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}},{key:"extractUrlBase",value:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}}]),t}(),Rs=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.call(this)).type="InstancedBufferGeometry",t.instanceCount=1/0,t}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.instanceCount=t.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this,this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}]),n}(Pe);Rs.prototype.isInstancedBufferGeometry=!0;var Cs=function(t){m(n,t);var e=g(n);function n(t,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return y(this,n),"number"==typeof i&&(a=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(o=e.call(this,t,r,i)).meshPerAttribute=a,o}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}},{key:"toJSON",value:function(){var t=d(f(n.prototype),"toJSON",this).call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}]),n}(ge);Cs.prototype.isInstancedBufferAttribute=!0,function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),r=e.call(this,t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return _(n,[{key:"setOptions",value:function(t){return this.options=t,this}},{key:"load",value:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Za.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;var a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Za.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}]),n}(Ja).prototype.isImageBitmapLoader=!0;var Ps,Is=function(){function t(){y(this,t),this.type="ShapePath",this.color=new fe,this.subPaths=[],this.currentPath=null}return _(t,[{key:"moveTo",value:function(t,e){return this.currentPath=new os,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}},{key:"lineTo",value:function(t,e){return this.currentPath.lineTo(t,e),this}},{key:"quadraticCurveTo",value:function(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}},{key:"bezierCurveTo",value:function(t,e,n,r,i,o){return this.currentPath.bezierCurveTo(t,e,n,r,i,o),this}},{key:"splineThru",value:function(t){return this.currentPath.splineThru(t),this}},{key:"toShapes",value:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],o=new as;o.curves=i.curves,e.push(o)}return e}function r(t,e){for(var n=e.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=e[i],s=e[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=e[o],u=-u,s=e[i],l=-l),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var c=l*(t.x-a.x)-u*(t.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return r}var i,o,a,s=ya.isClockWise,u=this.subPaths;if(0===u.length)return[];if(!0===e)return n(u);var l=[];if(1===u.length)return o=u[0],(a=new as).curves=o.curves,l.push(a),l;var c=!s(u[0].getPoints());c=t?!c:c;var h,d,f=[],p=[],v=[],m=0;p[m]=void 0,v[m]=[];for(var g=0,y=u.length;g<y;g++)i=s(h=(o=u[g]).getPoints()),(i=t?!i:i)?(!c&&p[m]&&m++,p[m]={s:new as,p:h},p[m].s.curves=o.curves,c&&m++,v[m]=[]):v[m].push({h:o,p:h[0]});if(!p[0])return n(u);if(p.length>1){for(var _=!1,x=[],b=0,T=p.length;b<T;b++)f[b]=[];for(var w=0,E=p.length;w<E;w++)for(var S=v[w],A=0;A<S.length;A++){for(var M=S[A],R=!0,C=0;C<p.length;C++)r(M.p,p[C].p)&&(w!==C&&x.push({froms:w,tos:C,hole:A}),R?(R=!1,f[C].push(M)):_=!0);R&&f[w].push(M)}x.length>0&&(_||(v=f))}for(var P=0,I=p.length;P<I;P++){a=p[P].s,l.push(a);for(var O=0,k=(d=v[P]).length;O<k;O++)a.holes.push(d[O].h)}return l}}]),t}(),Os=function(){function t(e){y(this,t),this.type="Font",this.data=e}return _(t,[{key:"generateShapes",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=[],r=function(t,e,n){for(var r=Array.from(t),i=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)s=0,u-=o;else{var h=ks(c,i,s,u,n);s+=h.offsetX,a.push(h.path)}}return a}(t,e,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}]),t}();function ks(t,e,n,r,i){var o=i.glyphs[t]||i.glyphs["?"];if(o){var a,s,u,l,c,h,d,f,p=new Is;if(o.o)for(var v=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),m=0,g=v.length;m<g;)switch(v[m++]){case"m":a=v[m++]*e+n,s=v[m++]*e+r,p.moveTo(a,s);break;case"l":a=v[m++]*e+n,s=v[m++]*e+r,p.lineTo(a,s);break;case"q":u=v[m++]*e+n,l=v[m++]*e+r,c=v[m++]*e+n,h=v[m++]*e+r,p.quadraticCurveTo(c,h,u,l);break;case"b":u=v[m++]*e+n,l=v[m++]*e+r,c=v[m++]*e+n,h=v[m++]*e+r,d=v[m++]*e+n,f=v[m++]*e+r,p.bezierCurveTo(c,h,d,f,u,l)}return{offsetX:o.ha*e,path:p}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".")}Os.prototype.isFont=!0;var Ns=function(t){m(n,t);var e=g(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:"load",value:function(t,e,n,r){var i=this,o=new ts(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{var o=n.slice(0);(void 0===Ps&&(Ps=new(window.AudioContext||window.webkitAudioContext)),Ps).decodeAudioData(o,(function(t){e(t)}))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)}}]),n}(Ja);(function(t){m(n,t);var e=g(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;y(this,n),i=e.call(this,void 0,o);var a=(new fe).set(t),s=(new fe).set(r),u=new W(a.r,a.g,a.b),l=new W(s.r,s.g,s.b),c=Math.sqrt(Math.PI),h=c*Math.sqrt(.75);return i.sh.coefficients[0].copy(u).add(l).multiplyScalar(c),i.sh.coefficients[1].copy(u).sub(l).multiplyScalar(h),i}return _(n)})(As).prototype.isHemisphereLightProbe=!0,function(t){m(n,t);var e=g(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;y(this,n),r=e.call(this,void 0,i);var o=(new fe).set(t);return r.sh.coefficients[0].set(o.r,o.g,o.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return _(n)}(As).prototype.isAmbientLightProbe=!0;var Ls=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).type="Audio",r.listener=t,r.context=t.context,r.gain=r.context.createGain(),r.gain.connect(t.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return _(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}},{key:"setMediaElementSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}},{key:"setMediaStreamSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}},{key:"setBuffer",value:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}},{key:"setDetune",value:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(t){return this.setFilters(t?[t]:[])}},{key:"setPlaybackRate",value:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(t){return this.loopStart=t,this}},{key:"setLoopEnd",value:function(t){return this.loopEnd=t,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}]),n}(Yt),Ds=function(){function t(e,n,r){var i,o,a;switch(y(this,t),this.binding=e,this.valueSize=r,n){case"quaternion":i=this._slerp,o=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,o=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return _(t,[{key:"accumulate",value:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=e}else{var s=e/(o+=e);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o}},{key:"accumulateAdditive",value:function(t){var e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}},{key:"apply",value:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=e*this._origIndex;this._mixBufferRegion(n,r,s,1-i,e)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(var u=e,l=e+e;u!==l;++u)if(n[u]!==n[u+e]){a.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(var i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,n=t;n<e;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}},{key:"_select",value:function(t,e,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)t[e+o]=t[n+o]}},{key:"_slerp",value:function(t,e,n,r){V.slerpFlat(t,e,t,e,t,n,r)}},{key:"_slerpAdditive",value:function(t,e,n,r,i){var o=this._workIndex*i;V.multiplyQuaternionsFlat(t,o,t,e,t,n),V.slerpFlat(t,e,t,e,t,o,r)}},{key:"_lerp",value:function(t,e,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*r}}},{key:"_lerpAdditive",value:function(t,e,n,r,i){for(var o=0;o!==i;++o){var a=e+o;t[a]=t[a]+t[n+o]*r}}}]),t}(),Fs=new RegExp("[\\[\\]\\.:\\/]","g"),Bs="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Us=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Gs=/(WCOD+)?/.source.replace("WCOD",Bs),js=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Hs=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),zs=new RegExp("^"+Us+Gs+js+Hs+"$"),Vs=["material","materials","bones"],Ws=function(){function t(e,n,r){y(this,t),this.path=n,this.parsedPath=r||t.parseTrackName(n),this.node=t.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return _(t,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(t,e){t[e]=this.node[this.propertyName]}},{key:"_getValue_array",value:function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]}},{key:"_getValue_arrayElement",value:function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(t,e){this.resolvedProperty.toArray(t,e)}},{key:"_setValue_direct",value:function(t,e){this.targetObject[this.propertyName]=t[e]}},{key:"_setValue_direct_setNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]}},{key:"_setValue_array_setNeedsUpdate",value:function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(t,e){this.resolvedProperty.fromArray(t,e)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(t,e){this.bind(),this.getValue(t,e)}},{key:"_setValue_unbound",value:function(t,e){this.bind(),this.setValue(t,e)}},{key:"bind",value:function(){var e=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,o=n.propertyIndex;if(e||(e=t.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(r){var a=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===a){a=s;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var u=e[i];if(void 0!==u){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=o}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(e,n,r){return e&&e.isAnimationObjectGroup?new t.Composite(e,n,r):new t(e,n,r)}},{key:"sanitizeNodeName",value:function(t){return t.replace(/\s/g,"_").replace(Fs,"")}},{key:"parseTrackName",value:function(t){var e=zs.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Vs.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}},{key:"findNode",value:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function t(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===e||i.uuid===e)return i;var o=t(i.children);if(o)return o}return null}(t.children);if(r)return r}return null}}]),t}();Ws.Composite=function(){function t(e,n,r){y(this,t);var i=r||Ws.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}return _(t,[{key:"getValue",value:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}},{key:"setValue",value:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}},{key:"bind",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}},{key:"unbind",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}]),t}(),Ws.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ws.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ws.prototype.GetterByBindingType=[Ws.prototype._getValue_direct,Ws.prototype._getValue_array,Ws.prototype._getValue_arrayElement,Ws.prototype._getValue_toArray],Ws.prototype.SetterByBindingTypeAndVersioning=[[Ws.prototype._setValue_direct,Ws.prototype._setValue_direct_setNeedsUpdate,Ws.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ws.prototype._setValue_array,Ws.prototype._setValue_array_setNeedsUpdate,Ws.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ws.prototype._setValue_arrayElement,Ws.prototype._setValue_arrayElement_setNeedsUpdate,Ws.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ws.prototype._setValue_fromArray,Ws.prototype._setValue_fromArray_setNeedsUpdate,Ws.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],function(){function t(){y(this,t),this.uuid=C(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return _(t,[{key:"add",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length,a=void 0,s=t.length,u=this.nCachedObjects_,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],d=h.uuid,f=e[d];if(void 0===f){f=s++,e[d]=f,t.push(h);for(var p=0,v=o;p!==v;++p)i[p].push(new Ws(h,n[p],r[p]))}else if(f<u){a=t[f];var m=--u,g=t[m];e[g.uuid]=f,t[f]=g,e[d]=m,t[m]=h;for(var y=0,_=o;y!==_;++y){var x=i[y],b=x[m],T=x[f];x[f]=b,void 0===T&&(T=new Ws(h,n[y],r[y])),x[m]=T}}else t[f]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}},{key:"remove",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,l=e[u];if(void 0!==l&&l>=i){var c=i++,h=t[c];e[h.uuid]=l,t[l]=h,e[u]=c,t[c]=s;for(var d=0,f=r;d!==f;++d){var p=n[d],v=p[c],m=p[l];p[l]=v,p[c]=m}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,o=t.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a].uuid,l=e[u];if(void 0!==l)if(delete e[u],l<i){var c=--i,h=t[c],d=--o,f=t[d];e[h.uuid]=l,t[l]=h,e[f.uuid]=c,t[c]=f,t.pop();for(var p=0,v=r;p!==v;++p){var m=n[p],g=m[c],y=m[d];m[l]=g,m[c]=y,m.pop()}}else{var _=--o,x=t[_];_>0&&(e[x.uuid]=l),t[l]=x,t.pop();for(var b=0,T=r;b!==T;++b){var w=n[b];w[l]=w[_],w.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[t]=r,o.push(t),a.push(e),i.push(c);for(var h=l,d=s.length;h!==d;++h){var f=s[h];c[h]=new Ws(f,t,e)}return c}},{key:"unsubscribe_",value:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}]),t}().prototype.isAnimationObjectGroup=!0;var Xs=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;y(this,t),this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;for(var o=n.tracks,a=o.length,s=new Array(a),u={endingStart:2400,endingEnd:2400},l=0;l!==a;++l){var c=o[l].createInterpolant(null);s[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return _(t,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(t){return this._startTime=t,this}},{key:"setLoop",value:function(t,e){return this.loop=t,this.repetitions=e,this}},{key:"setEffectiveWeight",value:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(t){return this._scheduleFading(t,0,1)}},{key:"fadeOut",value:function(t){return this._scheduleFading(t,1,0)}},{key:"crossFadeFrom",value:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,o=i/r,a=r/i;t.warp(1,o,e),this.warp(a,1,e)}return this}},{key:"crossFadeTo",value:function(t,e,n){return t.crossFadeFrom(this,e,n)}},{key:"stopFading",value:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"setEffectiveTimeScale",value:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}},{key:"syncWith",value:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}},{key:"halt",value:function(t){return this.warp(this._effectiveTimeScale,0,t)}},{key:"warp",value:function(t,e,n){var r=this._mixer,i=r.time,o=this.timeScale,a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+n,u[0]=t/o,u[1]=e/o,this}},{key:"stopWarping",value:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(t,e,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(t-i)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0){var u=this._interpolants,l=this._propertyBindings;if(2501===this.blendMode)for(var c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulateAdditive(s);else for(var d=0,f=u.length;d!==f;++d)u[d].evaluate(a),l[d].accumulate(r,s)}}else this._updateWeight(t)}},{key:"_updateWeight",value:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}},{key:"_updateTimeScale",value:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}},{key:"_updateTime",value:function(t){var e=this._clip.duration,n=this.loop,r=this.time+t,i=this._loopCount,o=2202===n;if(0===t)return-1===i?r:o&&1==(1&i)?e-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){var a=Math.floor(r/e);r-=e*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var u=t<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&i))return e-r}return r}},{key:"_setEndings",value:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)}},{key:"_scheduleFading",value:function(t,e,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}]),t}();(function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this))._root=t,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return _(n,[{key:"_bindAction",value:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var h=r[c],d=h.name,f=l[d];if(void 0!==f)o[c]=f;else{if(void 0!==(f=o[c])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,d));continue}var p=e&&e._propertyBindings[c].binding.parsedPath;++(f=new Ds(Ws.create(n,d,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(f,s,d),o[c]=f}a[c].resultBuffer=f.buffer}}},{key:"_activateAction",value:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}},{key:"_deactivateAction",value:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions}},{key:"_addInactiveAction",value:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t}},{key:"_removeInactiveAction",value:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=t._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)}},{key:"_removeInactiveBindingsForAction",value:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}},{key:"_takeBackAction",value:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}},{key:"_addInactiveBinding",value:function(t,e,n){var r=this._bindingsByRootAndName,i=this._bindings,o=r[e];void 0===o&&(o={},r[e]=o),o[n]=t,t._cacheIndex=i.length,i.push(t)}},{key:"_removeInactiveBinding",value:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}},{key:"_lendBinding",value:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}},{key:"_takeBackBinding",value:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}},{key:"_lendControlInterpolant",value:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new Fa(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n}},{key:"_takeBackControlInterpolant",value:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i}},{key:"clipAction",value:function(t,e,n){var r=e||this._root,i=r.uuid,o="string"==typeof t?Ya.findByName(r,t):t,a=null!==o?o.uuid:t,s=this._actionsByClip[a],u=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==s){var l=s.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===o&&(o=u._clip)}if(null===o)return null;var c=new Xs(this,o,e,n);return this._bindAction(c,u),this._addInactiveAction(c,a,i),c}},{key:"existingAction",value:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?Ya.findByName(n,t):t,o=i?i.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var t=this._actions,e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}},{key:"update",value:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a)e[a]._update(r,t,i,o);for(var s=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)s[l].apply(o);return this}},{key:"setTime",value:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,e[l]=c,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[e];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n})(E).prototype._controlInterpolantsResultBuffer=new Float32Array(1);var Ys=function(){function t(e){y(this,t),"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}return _(t,[{key:"clone",value:function(){return new t(void 0===this.value.clone?this.value:this.value.clone())}}]),t}();(function(t){m(n,t);var e=g(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return y(this,n),(i=e.call(this,t,r)).meshPerAttribute=o,i}return _(n,[{key:"copy",value:function(t){return d(f(n.prototype),"copy",this).call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}},{key:"clone",value:function(t){var e=d(f(n.prototype),"clone",this).call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e}},{key:"toJSON",value:function(t){var e=d(f(n.prototype),"toJSON",this).call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}]),n})(Oi).prototype.isInstancedInterleavedBuffer=!0,function(){function t(e,n,r,i,o){y(this,t),this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=o,this.version=0}return _(t,[{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setBuffer",value:function(t){return this.buffer=t,this}},{key:"setType",value:function(t,e){return this.type=t,this.elementSize=e,this}},{key:"setItemSize",value:function(t){return this.itemSize=t,this}},{key:"setCount",value:function(t){return this.count=t,this}}]),t}().prototype.isGLBufferAttribute=!0;var qs=new N,Zs=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new N(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new N(-1/0,-1/0);y(this,t),this.min=e,this.max=n}return _(t,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var n=qs.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}},{key:"getParameter",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}},{key:"clampPoint",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return qs.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}();Zs.prototype.isBox2=!0;var Qs=new W,Ks=new W;(function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this)).material=t,r.render=function(){},r.hasPositions=!1,r.hasNormals=!1,r.hasColors=!1,r.hasUvs=!1,r.positionArray=null,r.normalArray=null,r.colorArray=null,r.uvArray=null,r.count=0,r}return _(n)})(Yt).prototype.isImmediateRenderObject=!0;var Js=new W,$s=new Tt,tu=new Tt,eu=new Float32Array(1);new Int32Array(eu.buffer),Math.pow(2,8);var nu=[.125,.215,.35,.446,.526,.582],ru=5+nu.length,iu=new pe({side:1,depthWrite:!1,depthTest:!1}),ou=(new qe(new Qe,iu),function(){for(var t=[],e=[],n=[],r=8,i=0;i<ru;i++){var o=Math.pow(2,r);e.push(o);var a=1/o;i>4?a=nu[i-8+4-1]:0==i&&(a=0),n.push(a);for(var s=1/(o-1),u=-s/2,l=1+s/2,c=[u,u,l,u,l,l,u,u,l,l,u,l],h=new Float32Array(108),d=new Float32Array(72),f=new Float32Array(36),p=0;p<6;p++){var v=p%3*2/3-1,m=p>2?0:-1,g=[v,m,0,v+2/3,m,0,v+2/3,m+1,0,v,m,0,v+2/3,m+1,0,v,m+1,0];h.set(g,18*p),d.set(c,12*p);var y=[p,p,p,p,p,p];f.set(y,6*p)}var _=new Pe;_.setAttribute("position",new ge(h,3)),_.setAttribute("uv",new ge(d,2)),_.setAttribute("faceIndex",new ge(f,1)),t.push(_),r>4&&r--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}());ou._lodPlanes,ou._sizeLods,ou._sigmas;Math.sqrt(5),Co.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Co.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},os.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},function(t){m(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;y(this,n),o=new fe(o),a=new fe(a);for(var s=i/2,u=r/i,l=r/2,c=[],h=[],d=0,f=0,p=-l;d<=i;d++,p+=u){c.push(-l,0,p,l,0,p),c.push(p,0,-l,p,0,l);var v=d===s?o:a;v.toArray(h,f),f+=3,v.toArray(h,f),f+=3,v.toArray(h,f),f+=3,v.toArray(h,f),f+=3}var m=new Pe;return m.setAttribute("position",new be(c,3)),m.setAttribute("color",new be(h,3)),(t=e.call(this,m,new lo({vertexColors:!0,toneMapped:!1}))).type="GridHelper",t}return _(n)}(_o).prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},function(t){m(n,t);var e=g(n);function n(t){var r;y(this,n);for(var i=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var r=0;r<e.children.length;r++)n.push.apply(n,t(e.children[r]));return n}(t),o=new Pe,a=[],s=[],u=new fe(0,0,1),l=new fe(0,1,0),c=0;c<i.length;c++){var h=i[c];h.parent&&h.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(u.r,u.g,u.b),s.push(l.r,l.g,l.b))}return o.setAttribute("position",new be(a,3)),o.setAttribute("color",new be(s,3)),(r=e.call(this,o,new lo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}))).type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=t,r.bones=i,r.matrix=t.matrixWorld,r.matrixAutoUpdate=!1,r}return _(n,[{key:"updateMatrixWorld",value:function(t){var e=this.bones,r=this.geometry,i=r.getAttribute("position");tu.copy(this.root.matrixWorld).invert();for(var o=0,a=0;o<e.length;o++){var s=e[o];s.parent&&s.parent.isBone&&($s.multiplyMatrices(tu,s.matrixWorld),Js.setFromMatrixPosition($s),i.setXYZ(a,Js.x,Js.y,Js.z),$s.multiplyMatrices(tu,s.parent.matrixWorld),Js.setFromMatrixPosition($s),i.setXYZ(a+1,Js.x,Js.y,Js.z),a+=2)}r.getAttribute("position").needsUpdate=!0,d(f(n.prototype),"updateMatrixWorld",this).call(this,t)}}]),n}(_o).prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Ja.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Ms.extractUrlBase(t)},Ja.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Zs.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},Zs.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Zs.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Zs.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},q.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},q.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},q.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},q.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},q.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},ft.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},fn.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new W,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new W;y(this,t),this.start=e,this.end=n}return _(t,[{key:"set",value:function(t,e){return this.start.copy(t),this.end.copy(e),this}},{key:"copy",value:function(t){return this.start.copy(t.start),this.end.copy(t.end),this}},{key:"getCenter",value:function(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(t){return t.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}},{key:"closestPointToPointParameter",value:function(t,e){Qs.subVectors(t,this.start),Ks.subVectors(this.end,this.start);var n=Ks.dot(Ks),r=Ks.dot(Qs)/n;return e&&(r=P(r,0,1)),r}},{key:"closestPointToPoint",value:function(t,e,n){var r=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}},{key:"equals",value:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}().prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},D.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},D.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},D.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},D.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},D.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},D.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Tt.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},Tt.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Tt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new W).setFromMatrixColumn(this,3)},Tt.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},Tt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Tt.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Tt.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Tt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Tt.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},Tt.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Tt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Tt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Tt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Tt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Tt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Tt.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Tt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Tt.prototype.makeFrustum=function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)},Tt.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},cn.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},V.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},V.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},bt.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},bt.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},bt.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},ie.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},ie.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},ie.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},ie.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},ie.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},ie.barycoordFromPoint=function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ie.getBarycoord(t,e,n,r,i)},ie.normal=function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ie.getNormal(t,e,n,r)},as.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},as.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ba(this,t)},as.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new wa(this,t)},N.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},N.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},N.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},W.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},W.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},W.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},W.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},W.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},W.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},W.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},W.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},W.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},j.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},j.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Yt.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},Yt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Yt.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},Yt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Yt.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Yt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),qe.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(qe.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),no.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},nn.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(ss.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(ge.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),ge.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?35048:35044),this},ge.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},ge.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Pe.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},Pe.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new ge(arguments[1],arguments[2])))},Pe.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},Pe.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Pe.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Pe.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},Pe.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Pe.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Oi.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?35048:35044),this},Oi.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ba.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},ba.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},ba.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Ii.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Ys.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(ae.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new fe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(tn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Ri.prototype.clearTarget=function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},Ri.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},Ri.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Ri.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Ri.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Ri.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Ri.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Ri.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Ri.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Ri.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Ri.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Ri.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Ri.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Ri.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Ri.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},Ri.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Ri.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Ri.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Ri.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Ri.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Ri.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Ri.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Ri.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Ri.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Ri.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Ri.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?3001:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(yi.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(H.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Ls.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Ns).load(t,(function(t){e.setBuffer(t)})),this},function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;y(this,t),this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}return _(t,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}]),t}().prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},rn.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},rn.prototype.clear=function(t,e,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,r)},F.crossOrigin=void 0,F.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new rs;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},F.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new ns;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},F.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},F.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"130"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="130");var au=n(6),su=n.n(au),uu=n(33),lu=n.n(uu),cu=n(11),hu=n.n(cu),du=function(){function t(){y(this,t),this.camera=new xs(10,10,10,10),this.camera.position.z=100,this.camera.position.x=0,this.camera.position.y=0}return _(t,[{key:"focus",value:function(t,e){t.position.z=50}},{key:"updateAspect",value:function(t,e){this.camera.left=-1*t/2,this.camera.right=t/2,this.camera.top=e/2,this.camera.bottom=-1*e/2,this.camera.updateProjectionMatrix()}}]),t}(),fu={linear:function(t,e,n,r){return n*t/r+e},easeIn:function(t,e,n,r){return n*(t/=r)*t+e},strongEaseIn:function(t,e,n,r){return n*(t/=r)*t*t*t*t+e},strongEaseOut:function(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},sineaseIn:function(t,e,n,r){return n*(t/=r)*t*t+e},sineaseOut:function(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}},pu=new U,vu=function(){function t(){y(this,t),this.camera=new du,this.mesh=new qe,this.material=null,this.geometry=null}return _(t,[{key:"applyOptions",value:function(t){}},{key:"addObjects",value:function(t){this.mesh.position.z=50,t.add(this.mesh)}},{key:"setSize",value:function(t,e){this.camera.updateAspect(t,e),this.geometry=new mn(t,e,1,1),this.material=new tn({fragmentShader:this.fragmentShader,vertexShader:"\nvarying vec2 vUv;\nvoid main(){\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"}),this.material.uniforms={width:{value:t},height:{value:e},timePercent:{value:0},texturePrev:{value:pu},textureNext:{value:pu}},this.applyOptions(this.options),this.mesh.geometry=this.geometry,this.mesh.material=this.material}},{key:"setPrevTexture",value:function(t){this.material.uniforms.texturePrev.value=t}},{key:"setNextTexture",value:function(t){this.material.uniforms.textureNext.value=t}},{key:"updateAnimation",value:function(t){this.material.uniforms.timePercent.value=t}},{key:"dispose",value:function(){var t,e;null===(t=this.geometry)||void 0===t||t.dispose(),null===(e=this.material)||void 0===e||e.dispose()}}]),t}(),mu=n(70),gu=n.n(mu),yu=n(71),_u=n.n(yu),xu=n(72),bu=n.n(xu),Tu=n(73),wu=n.n(Tu),Eu=n(74),Su=n.n(Eu),Au=n(75),Mu=n.n(Au),Ru=n(76),Cu=n.n(Ru),Pu=n(77),Iu=n.n(Pu),Ou=n(78),ku=n.n(Ou),Nu=n(79),Lu=n.n(Nu),Du=n(80),Fu=n.n(Du),Bu=n(81),Uu=n.n(Bu),Gu=n(82),ju=n.n(Gu),Hu=n(83),zu=n.n(Hu),Vu=function(){function t(){y(this,t),this.camera=new nn(60,1,1,2e3),this.camera.position.z=1e3,this.camera.position.x=0,this.camera.position.y=0}return _(t,[{key:"updateAspect",value:function(t,e){this.camera.aspect=t/e,this.camera.updateProjectionMatrix()}},{key:"focus",value:function(t,e){var n=.5*e/Math.tan(Math.PI/6);t.position.z=1e3-n}}]),t}(),Wu=function(){function t(){y(this,t),this.prevTexture=pu,this.nextTexture=pu,this.geometry=new Pe,this.material=null,this.camera=new Vu,this.mesh=new qe,this.textureWidth=0,this.textureHeight=0}return _(t,[{key:"horizontalSegments",value:function(){return Math.ceil(this.verticalSegments*this.textureWidth/this.textureHeight)}},{key:"applyOptions",value:function(t){this.options=t}},{key:"initMesh",value:function(t,e){for(var n=this,r=[],i=[],o=[],s=this.verticalSegments,u=this.horizontalSegments(),l=t/2,c=e/2,h=t/u,d=e/s,f=this.extraAttributes(),p=Object.keys(f),v=p.reduce((function(t,e){return t[e]=[],t}),{}),m=function(t){for(var e=t*d-c,n=function(n){var r=n*h-l;i.push(r,-e,0),o.push(1*n/u,1-1*t/s),p.forEach((function(e){var r;return(r=v[e]).push.apply(r,a(f[e].generator(t,n)))})),i.push(r+h,-e,0),o.push(1*(n+1)/u,1-1*t/s),p.forEach((function(e){var r;return(r=v[e]).push.apply(r,a(f[e].generator(t,n)))})),i.push(r,-e-d,0),o.push(1*n/u,1-1*(t+1)/s),p.forEach((function(e){var r;return(r=v[e]).push.apply(r,a(f[e].generator(t,n)))})),i.push(r+h,-e-d,0),o.push(1*(n+1)/u,1-1*(t+1)/s),p.forEach((function(e){var r;return(r=v[e]).push.apply(r,a(f[e].generator(t,n)))}))},r=0;r<u;r++)n(r)},g=0;g<s;g++)m(g);for(var y=0;y<s*u;y++){var _=4*y,x=_+1,b=_+2,T=_+3;r.push(x,_,T),r.push(_,b,T)}return this.geometry.setIndex(r),this.geometry.setAttribute("position",new be(i,3)),this.geometry.setAttribute("uv",new be(new Float32Array(o),2)),p.forEach((function(t){var e=f[t],r=e.threeType,i=e.jsType,o=e.itemSize;n.geometry.setAttribute(t,new r(new i(v[t]),o))})),{verticalSegments:s,horizontalSegments:u,segmentWidth:h,segmentHeight:d}}},{key:"setSize",value:function(t,e){this.textureWidth=t,this.textureHeight=e,this.camera.updateAspect(t,e),this.camera.focus(this.mesh,e),this.material=new tn({fragmentShader:this.fragmentShader,vertexShader:this.vertexShader,side:2}),this.mesh.geometry=this.geometry,this.material.transparent=!0,this.mesh.material=this.material;var n=this.initMesh(t,e),r=n.verticalSegments,i=n.horizontalSegments,o=n.segmentWidth,a=n.segmentHeight;this.material.uniforms={segmentWidth:{value:o},segmentHeight:{value:a},verticalSegments:{value:r},horizontalSegments:{value:i},timePercent:{value:0},texturePrev:{value:pu},textureNext:{value:pu}},this.applyOptions(this.options)}},{key:"setPrevTexture",value:function(t){this.prevTexture=t,this.material.uniforms.texturePrev.value=t}},{key:"setNextTexture",value:function(t){this.nextTexture=t,this.material.uniforms.textureNext.value=t}},{key:"addObjects",value:function(t){t.add(this.mesh)}},{key:"updateAnimation",value:function(t){this.material.uniforms.timePercent.value=t}},{key:"dispose",value:function(){var t,e;null===(t=this.geometry)||void 0===t||t.dispose(),null===(e=this.material)||void 0===e||e.dispose()}}]),t}(),Xu=n(84),Yu=n.n(Xu),qu=n(85),Zu=n.n(qu),Qu=n(86),Ku=n.n(Qu),Ju=n(87),$u=n.n(Ju),tl=n(88),el=n.n(tl),nl=n(89),rl=n.n(nl),il=n(90),ol=n.n(il),al=n(91),sl=n.n(al),ul=n(92),ll=n.n(ul),cl=n(93),hl=n.n(cl),dl=n(94),fl=n.n(dl),pl=n(95),vl=n.n(pl),ml=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=1250,t.options=[],t.fragmentShader=vl.a,t.vertexShader=fl.a,t.verticalSegments=100,t}return _(n,[{key:"addObjects",value:function(t){t.add(this.mesh),t.background=this.nextTexture}},{key:"extraAttributes",value:function(){return{}}},{key:"applyOptions",value:function(t){d(f(n.prototype),"applyOptions",this).call(this,t);var e=this.options.find((function(t){return"invX"===t.name}));this.material.uniforms.option={value:(null==e?void 0:e.value)?Number(e.value):0}}}]),n}(Wu),gl=n(96),yl=n.n(gl),_l=n(97),xl=n.n(_l),bl=n(98),Tl=n.n(bl),wl=n(99),El=n.n(wl),Sl=n(100),Al=n.n(Sl),Ml=n(101),Rl=n.n(Ml),Cl=n(102),Pl=n.n(Cl),Il=n(103),Ol=n.n(Il),kl={RandomLines:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=1e3,t.fragmentShader=_u.a,t.options=[{name:"dir",value:"horz"}],t}return _(n,[{key:"genRandomLines",value:function(){for(var t=[1],e=20;e--;){var n=t.sort((function(t,e){return e-t}))[0],r=t.indexOf(n),i=Math.random(),o=n*i,a=n*(1-i);t.splice(r,1),t.push(o,a)}for(var s=t.length;s;){var u=Math.floor(Math.random()*s--),l=[t[s],t[u]];t[u]=l[0],t[s]=l[1]}return t}},{key:"applyOptions",value:function(t){d(f(n.prototype),"applyOptions",this).call(this,t),this.material.uniforms.direction={value:"horz"===this.options[0].value?1:0}}},{key:"setSize",value:function(t,e){d(f(n.prototype),"setSize",this).call(this,t,e),this.material.uniforms.lines={value:this.genRandomLines()},this.material.vertexShader=gu.a}}]),n}(vu),Shape:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=800,t.fragmentShader=bu.a,t.options=[],t}return _(n)}(vu),Ripples:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=1400,t.fragmentShader=wu.a,t.options=[{name:"dir",value:"center"}],t.optionsMap={center:0,ru:1,lu:2,ld:3,rd:4},t}return _(n,[{key:"applyOptions",value:function(t){var e,r,i,o;d(f(n.prototype),"applyOptions",this).call(this,t);var a=this.options.find((function(t){return"dir"===t.name}));console.log(null===(e=this.optionsMap)||void 0===e?void 0:e[null!==(r=null==a?void 0:a.value)&&void 0!==r?r:"center"]),this.material.uniforms.option={value:null===(i=this.optionsMap)||void 0===i?void 0:i[null!==(o=null==a?void 0:a.value)&&void 0!==o?o:"center"]}}}]),n}(vu),Erase:function(t){m(n,t);var e=g(n);function n(){var t,r;return y(this,n),(r=e.apply(this,arguments)).duration=1e3,r.fragmentShader=Su.a,r.options=[],r.defaultDir="right",r.optionsMap=(o(t={},r.defaultDir,0),o(t,"d",1),o(t,"r",2),o(t,"u",3),t),r}return _(n,[{key:"applyOptions",value:function(t){var e,r;d(f(n.prototype),"applyOptions",this).call(this,t);var i=this.options.find((function(t){return"dir"===t.name}));this.material.uniforms.option={value:null===(e=this.optionsMap)||void 0===e?void 0:e[null!==(r=null==i?void 0:i.value)&&void 0!==r?r:this.defaultDir]}}}]),n}(vu),Dissolve:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=1200,t.fragmentShader=Mu.a,t.options=[],t.dissolveIndices={},t}return _(n,[{key:"random40",value:function(){return Math.ceil(40*Math.random())}},{key:"setSize",value:function(t,e){d(f(n.prototype),"setSize",this).call(this,t,e);for(var r=0;r<1600;r++){for(var i=this.random40(),o=this.random40();void 0!==this.dissolveIndices["".concat(i,"_").concat(o)];)i=this.random40(),o=this.random40();this.dissolveIndices["".concat(i,"_").concat(o)]=0}this.material.uniforms.dissolveTexture={value:this.genDissolveToTexture()}}},{key:"genDissolveToTexture",value:function(){for(var t=new Uint8Array(4800),e=0;e<1600;e++){var n=e%40+1,r=Math.floor(e/40)+1,i=3*e;0===this.dissolveIndices["".concat(n,"_").concat(r)]?(t[i]=0,t[i+1]=0,t[i+2]=0):(t[i]=255,t[i+1]=255,t[i+2]=255)}return new ro(t,40,40,1022)}},{key:"updateAnimation",value:function(t){for(var e=this,n=1600*t-Object.keys(this.dissolveIndices).filter((function(t){return 1===e.dissolveIndices[t]})).length,r=0;r<n;r++){var i=Object.keys(this.dissolveIndices).filter((function(t){return 0===e.dissolveIndices[t]})),o=Math.ceil(Math.random()*i.length)-1;this.dissolveIndices[i[o]]=1}this.material.uniforms.dissolveTexture.value=this.genDissolveToTexture()}}]),n}(vu),Smooth:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=2e3,t.fragmentShader=Cu.a,t.options=[],t}return _(n)}(vu),FadeInOut:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=700,t.fragmentShader=Iu.a,t.options=[],t}return _(n,[{key:"applyOptions",value:function(t){d(f(n.prototype),"applyOptions",this).call(this,t);var e=this.options.find((function(t){return"thruBlk"===t.name}));this.material.uniforms.option={value:"1"===(null==e?void 0:e.value)?1:0}}}]),n}(vu),Push:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=1e3,t.fragmentShader=ku.a,t.options=[],t.optionsMap={u:0,r:1,d:2,l:3},t}return _(n,[{key:"applyOptions",value:function(t){var e,r;d(f(n.prototype),"applyOptions",this).call(this,t);var i=this.options.find((function(t){return"dir"===t.name}));this.material.uniforms.option={value:null===(e=this.optionsMap)||void 0===e?void 0:e[null!==(r=null==i?void 0:i.value)&&void 0!==r?r:"l"]}}}]),n}(vu),Separation:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=1500,t.fragmentShader=Lu.a,t.options=[],t}return _(n,[{key:"applyOptions",value:function(t){d(f(n.prototype),"applyOptions",this).call(this,t);var e=this.options.find((function(t){return"orient"===t.name})),r=this.options.find((function(t){return"dir"===t.name}));this.material.uniforms.orient={value:"vert"===(null==e?void 0:e.value)},this.material.uniforms.direction={value:"in"===(null==r?void 0:r.value)}}}]),n}(vu),Display:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=3400,t.fragmentShader=Fu.a,t.options=[],t}return _(n,[{key:"applyOptions",value:function(t){var e=this.options.find((function(t){return"dir"===t.name})),n=this.options.find((function(t){return"thruBlk"===t.name}));this.material.uniforms.direction={value:"r"===(null==e?void 0:e.value)},this.material.uniforms.thruBlk={value:"1"===(null==n?void 0:n.value)}}}]),n}(vu),Uncover:function(t){m(n,t);var e=g(n);function n(){var t,r;return y(this,n),(r=e.apply(this,arguments)).duration=750,r.fragmentShader=Uu.a,r.options=[],r.defaultDir="right",r.optionsMap=(o(t={},r.defaultDir,0),o(t,"d",1),o(t,"r",2),o(t,"u",3),o(t,"ld",4),o(t,"lu",5),o(t,"rd",6),o(t,"ru",7),t),r.selfOptionsList=[{x:-1,y:0},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:-1,y:-1},{x:-1,y:1},{x:1,y:-1},{x:1,y:1}],r}return _(n,[{key:"applyOptions",value:function(t){var e;d(f(n.prototype),"applyOptions",this).call(this,t);var r=this.options.find((function(t){return"dir"===t.name})),i=this.optionsMap[null!==(e=null==r?void 0:r.value)&&void 0!==e?e:this.defaultDir],o=this.selfOptionsList[i];this.material.uniforms.optionX={value:o.x},this.material.uniforms.optionY={value:o.y}}}]),n}(vu),Cover:function(t){m(n,t);var e=g(n);function n(){var t,r;return y(this,n),(r=e.apply(this,arguments)).duration=1e3,r.fragmentShader=ju.a,r.options=[],r.defaultDir="right",r.optionsMap=(o(t={},r.defaultDir,0),o(t,"d",1),o(t,"r",2),o(t,"u",3),o(t,"ld",4),o(t,"lu",5),o(t,"rd",6),o(t,"ru",7),t),r.selfOptionsList=[{x:-1,y:0},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:-1,y:-1},{x:-1,y:1},{x:1,y:-1},{x:1,y:1}],r}return _(n,[{key:"applyOptions",value:function(t){var e;d(f(n.prototype),"applyOptions",this).call(this,t);var r=this.options.find((function(t){return"dir"===t.name})),i=this.optionsMap[null!==(e=null==r?void 0:r.value)&&void 0!==e?e:this.defaultDir],o=this.selfOptionsList[i];this.material.uniforms.optionX={value:o.x},this.material.uniforms.optionY={value:o.y}}}]),n}(vu),Flash:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=1e3,t.fragmentShader=zu.a,t.options=[],t}return _(n)}(vu),Checkerboard:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=2500,t.options=[{name:"dir",value:"horz"}],t.fragmentShader=Zu.a,t.vertexShader=Yu.a,t.vIndex="",t.delay=0,t.verticalSegments=5,t}return _(n,[{key:"extraAttributes",value:function(){var t=this;return{times:{threeType:be,jsType:Float32Array,itemSize:1,generator:function(e,n){return t.vIndex!=="".concat(e).concat(n)&&(t.delay=.3*Math.random(),t.vIndex="".concat(e).concat(n)),[t.delay]}},segment:{threeType:be,jsType:Float32Array,itemSize:2,generator:function(t,e){return[e,t]}},option:{threeType:_e,jsType:Int32Array,itemSize:1,generator:function(){return[t.options.find((function(t){return"dir"===t.name&&"horz"===t.value}))?0:1]}}}}}]),n}(Wu),Vortex:function(){function t(){y(this,t),this.duration=4e3,this.geometry=new Pe,this.material=new tn({fragmentShader:$u.a,vertexShader:Ku.a,side:2}),this.camera=new Vu,this.mesh=new qe}return _(t,[{key:"initData",value:function(t,e){for(var n=[],r=[],i=[],o=[],a=[],s=[],u=Math.ceil(124*t/e),l=t/2,c=e/2,h=t/u,d=e/124,f=0;f<124;f++)for(var p=f*d-c,v=0;v<u;v++){var m=v*h-l,g=Math.ceil((v+1)/((u+1)/12)),y=.4/g,_=(g-1)*y+Math.random()*y;r.push(m,-p,0),o.push(1*v/u,1-1*f/124),i.push(0,0,1),a.push(v,f),s.push(_),r.push(m+h,-p,0),o.push(1*(v+1)/u,1-1*f/124),i.push(0,0,1),a.push(v,f),s.push(_),r.push(m,-p-d,0),o.push(1*v/u,1-1*(f+1)/124),i.push(0,0,1),a.push(v,f),s.push(_),r.push(m+h,-p-d,0),o.push(1*(v+1)/u,1-1*(f+1)/124),i.push(0,0,1),a.push(v,f),s.push(_)}for(var x=0;x<124*u;x++){var b=4*x,T=b+1,w=b+2,E=b+3;n.push(T,b,E),n.push(b,w,E)}return this.geometry.setIndex(n),this.geometry.setAttribute("position",new be(r,3)),this.geometry.setAttribute("normal",new be(i,3)),this.geometry.setAttribute("uv",new be(new Float32Array(o),2)),this.geometry.setAttribute("segment",new be(new Float32Array(a),2)),this.geometry.setAttribute("times",new be(new Float32Array(s),1)),{verticalSegments:124,horizontalSegments:u,segmentWidth:h,segmentHeight:d}}},{key:"setSize",value:function(t,e){var n=this.initData(t,e),r=n.verticalSegments,i=n.horizontalSegments,o=n.segmentWidth,a=n.segmentHeight;this.material.uniforms={duration:{value:this.duration},segmentWidth:{value:o},segmentHeight:{value:a},verticalSegments:{value:r},horizontalSegments:{value:i},timePercent:{value:0},texturePrev:{value:pu},textureNext:{value:pu}},this.camera.updateAspect(t,e),this.camera.focus(this.mesh,e),this.mesh.geometry=this.geometry,new Ra({side:2,vertexColors:!0}).wireframe=!0,this.material.transparent=!0,this.mesh.material=this.material}},{key:"setPrevTexture",value:function(t){this.material.uniforms.texturePrev.value=t}},{key:"setNextTexture",value:function(t){this.material.uniforms.textureNext.value=t}},{key:"addObjects",value:function(t){t.add(this.mesh)}},{key:"updateAnimation",value:function(t){var e=(t-.4)/.2;e<0?e=0:e>1&&(e=1),this.material.uniforms.timePercent.value=t}},{key:"dispose",value:function(){var t,e;null===(t=this.geometry)||void 0===t||t.dispose(),null===(e=this.material)||void 0===e||e.dispose()}}]),t}(),WindowShades:function(){function t(){y(this,t),this.duration=1600,this.geometry=new Pe,this.material=new tn({fragmentShader:rl.a,vertexShader:el.a,side:2}),this.horizontalSegments=16,this.meshToCameraDistance=0,this.camera=new Vu,this.mesh=new qe}return _(t,[{key:"initData",value:function(t,e){for(var n=[],r=[],i=[],o=[],a=[],s=[],u=t/2,l=e/2,c=t/this.horizontalSegments,h=0;h<this.horizontalSegments;h++){var d=Math.abs(h-Math.ceil(this.horizontalSegments/2))*(.3/Math.ceil(this.horizontalSegments/2)),f=h*c-u;r.push(f,l,0),i.push(0),o.push(h/this.horizontalSegments,1),a.push(h),s.push(d),r.push(f+c,l,0),i.push(0),o.push((h+1)/this.horizontalSegments,1),a.push(h),s.push(d),r.push(f,-1*l,0),i.push(0),o.push(h/this.horizontalSegments,0),a.push(h),s.push(d),r.push(f+c,-1*l,0),o.push((h+1)/this.horizontalSegments,0),i.push(0),a.push(h),s.push(d),r.push(f+c,l,0),i.push(1),o.push(h/this.horizontalSegments,1),a.push(h),s.push(d),r.push(f+c,l,-1*c),i.push(1),o.push((h+1)/this.horizontalSegments,1),a.push(h),s.push(d),r.push(f+c,-1*l,0),i.push(1),o.push(h/this.horizontalSegments,0),a.push(h),s.push(d),r.push(f+c,-1*l,-1*c),o.push((h+1)/this.horizontalSegments,0),i.push(1),a.push(h),s.push(d)}for(var p=0;p<this.horizontalSegments;p++){var v=8*p,m=v+1,g=v+2,y=v+3,_=v+4,x=v+5,b=v+6,T=v+7;n.push(m,v,y),n.push(v,g,y),n.push(x,_,T),n.push(_,b,T)}this.geometry.setIndex(n),this.geometry.setAttribute("position",new be(r,3)),this.geometry.setAttribute("uv",new be(new Float32Array(o),2)),this.geometry.setAttribute("index",new be(new Float32Array(a),1)),this.geometry.setAttribute("type",new be(new Float32Array(i),1)),this.geometry.setAttribute("delay",new be(new Float32Array(s),1))}},{key:"setPrevTexture",value:function(t){this.material.uniforms.texturePrev.value=t}},{key:"setNextTexture",value:function(t){this.material.uniforms.textureNext.value=t}},{key:"setSize",value:function(t,e){this.initData(t,e),this.material.uniforms={segments:{value:this.horizontalSegments},segmentWidth:{value:t/this.horizontalSegments},timePercent:{value:0},texturePrev:{value:pu},textureNext:{value:pu}},this.meshToCameraDistance=.5*e/Math.tan(Math.PI/6),this.camera.updateAspect(t,e),this.camera.focus(this.mesh,e),this.mesh.geometry=this.geometry,this.material.transparent=!0,this.mesh.material=this.material}},{key:"addObjects",value:function(t){t.add(this.mesh)}},{key:"updateAnimation",value:function(t){this.material.uniforms.timePercent.value=t}},{key:"dispose",value:function(){var t,e;null===(t=this.geometry)||void 0===t||t.dispose(),null===(e=this.material)||void 0===e||e.dispose()}}]),t}(),Curtain:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=6e3,t.options=[],t.fragmentShader=sl.a,t.vertexShader=ol.a,t.verticalSegments=100,t}return _(n,[{key:"extraAttributes",value:function(){var t=this;return{isLeft:{threeType:be,jsType:Float32Array,itemSize:1,generator:function(e,n){return[n<t.horizontalSegments()/2?1:0]}}}}},{key:"addObjects",value:function(t){d(f(n.prototype),"addObjects",this).call(this,t),this.mesh.position.z+=20,t.background=this.nextTexture}}]),n}(Wu),Fall:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).zCurveLimit=100,t.duration=2e3,t.options=[{name:"invX",value:"0"}],t.verticalSegments=100,t.fragmentShader=hl.a,t.vertexShader=ll.a,t}return _(n,[{key:"extraAttributes",value:function(){return{}}},{key:"setSize",value:function(t,e){var r;d(f(n.prototype),"setSize",this).call(this,t,e);var i=this.options.find((function(t){return"invX"===t.name}));this.material.uniforms.zCurveLimit={value:this.zCurveLimit},this.material.uniforms.aCoefficient={value:this.zCurveLimit/(this.textureHeight/2*(this.textureHeight/2))},this.material.uniforms.option={value:null!==(r=null==i?void 0:i.value)&&void 0!==r?r:0}}},{key:"addObjects",value:function(t){t.add(this.mesh),t.background=this.nextTexture}},{key:"updateAnimation",value:function(t){this.material.uniforms.timePercent.value=t}}]),n}(Wu),Suspension:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=2e3,t.fragmentShader=xl.a,t.vertexShader=yl.a,t}return _(n,[{key:"addObjects",value:function(t){t.add(this.mesh),t.background=this.prevTexture}}]),n}(ml),Clock:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=1e3,t.fragmentShader=Tl.a,t.options=[],t}return _(n)}(vu),Combing:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=1e3,t.fragmentShader=El.a,t.options=[],t}return _(n,[{key:"applyOptions",value:function(t){d(f(n.prototype),"applyOptions",this).call(this,t);var e=this.options.find((function(t){return"dir"===t.name}));this.material.uniforms.option={value:"vert"===(null==e?void 0:e.value)?1:0}}}]),n}(vu),Scale:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=900,t.fragmentShader=Al.a,t.options=[],t}return _(n,[{key:"applyOptions",value:function(t){d(f(n.prototype),"applyOptions",this).call(this,t);var e=this.options.find((function(t){return"dir"===t.name}));this.material.uniforms.option={value:"in"===(null==e?void 0:e.value)?0:1}}}]),n}(vu),PeelOff:ml,Flip:function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).duration=1250,t.options=[],t.fragmentShader=Pl.a,t.vertexShader=Rl.a,t.verticalSegments=1,t}return _(n,[{key:"extraAttributes",value:function(){return{}}},{key:"applyOptions",value:function(t){var e=this.options.find((function(t){return"dir"===t.name}));this.material.uniforms.option={value:"l"===(null==e?void 0:e.value)?1:0}}}]),n}(Wu),Strips:function(t){m(n,t);var e=g(n);function n(){var t,r;return y(this,n),(r=e.apply(this,arguments)).duration=1e3,r.fragmentShader=Ol.a,r.options=[],r.defaultDir="lu",r.optionsMap=(o(t={},r.defaultDir,0),o(t,"ld",1),o(t,"rd",2),o(t,"ru",3),t),r}return _(n,[{key:"applyOptions",value:function(t){var e,r;d(f(n.prototype),"applyOptions",this).call(this,t);var i=this.options.find((function(t){return"dir"===t.name}));this.material.uniforms.option={value:null===(e=this.optionsMap)||void 0===e?void 0:e[null!==(r=null==i?void 0:i.value)&&void 0!==r?r:this.defaultDir]}}}]),n}(vu)},Nl=function(){function t(){var e=this;y(this,t),this.startTime=0,this.lastTime=0,this.lastFPSTime=0,this.renderingDuration=16,this.reverse=!1,this.scene=new Ii,this.delay=0,this.easeFn=fu.linear,this.preset=null,this.onTransactionEnd=function(){},this.isTransactionStartApplied=!1,this.prevTexture=null,this.nextTexture=null,this.animationId=null,this.config=null,this.renderer=new Ri({alpha:!0,premultipliedAlpha:!0}),this.isPlaying=!1,this.animate=function(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(e.fps(i)){e.renderer.clear(),i>e.delay&&0===e.lastTime&&(e.lastTime=i,e.startTime=i);var o=0;e.lastTime>0&&o<1&&(o=e.easeFn(i-e.startTime,0,1,null!==(n=null===(t=e.preset)||void 0===t?void 0:t.duration)&&void 0!==n?n:0)),o>1&&(o=1),null===(r=e.preset)||void 0===r||r.updateAnimation(e.reverse?1-o:o),e.rerender(),e.isTransactionStartApplied||(e.isTransactionStartApplied=!0),o<1?e.animationId=window.requestAnimationFrame(e.animate):e.onTransactionEnd()}else e.animationId=window.requestAnimationFrame(e.animate)}}return _(t,[{key:"initPlayer",value:function(t){this.config=t,this.reverse=t.reverse,t.delay&&Number.isInteger(t.delay)&&(this.delay=t.delay),t.easeFn&&(this.easeFn=fu[t.easeFn]),t.maxFPS&&Number.isInteger(t.maxFPS)&&t.maxFPS>0&&(this.renderingDuration=Math.ceil(1e3/t.maxFPS)),this.startTime=0,this.lastTime=0,this.scene.clear(),this.renderer.shadowMap.enabled=!0,this.renderer.autoClear=!1,this.renderer.setClearColor(t.clearColor||0),this.isTransactionStartApplied=!1,this.renderer.setSize(t.stageWidth,t.stageHeight),this.preset=new kl[t.presetType],t.options&&(this.preset.options=t.options),t.duration&&Number.isInteger(t.duration)&&(this.preset.duration=t.duration),this.preset.setSize(t.stageWidth,t.stageHeight)}},{key:"setPrevTexture",value:function(t){var e,n,r,i;t.needsUpdate=!0,this.reverse?(this.nextTexture=t,null===(e=this.preset)||void 0===e||e.setNextTexture(t)):(this.prevTexture=t,null===(n=this.preset)||void 0===n||n.setPrevTexture(t)),null===(r=this.preset)||void 0===r||r.addObjects(this.scene),null===(i=this.preset)||void 0===i||i.updateAnimation(this.reverse?1:0),this.rerender()}},{key:"setNextTexture",value:function(t){var e,n;t.needsUpdate=!0,this.reverse?(this.prevTexture=t,null===(e=this.preset)||void 0===e||e.setPrevTexture(t)):(this.nextTexture=t,null===(n=this.preset)||void 0===n||n.setNextTexture(t))}},{key:"play",value:function(){var t=this;return new Promise((function(e){t.onTransactionEnd=e,t.animate(),t.isPlaying=!0}))}},{key:"rerender",value:function(){var t;this.renderer.clear(),(null===(t=this.preset)||void 0===t?void 0:t.camera.camera)&&this.renderer.render(this.scene,this.preset.camera.camera)}},{key:"fps",value:function(t){return t<=0||(this.lastFPSTime<0||t-this.lastFPSTime>=this.renderingDuration)&&(this.lastFPSTime=t,!0)}},{key:"skip",value:function(){var t;null===(t=this.preset)||void 0===t||t.updateAnimation(this.reverse?0:1),this.rerender(),this.dispose(),this.onTransactionEnd()}},{key:"dispose",value:function(){var t,e,n;window.cancelAnimationFrame(this.animationId),this.renderer.clear(),this.isPlaying=!1,null===(t=this.preset)||void 0===t||t.dispose(),null===(e=this.prevTexture)||void 0===e||e.dispose(),null===(n=this.nextTexture)||void 0===n||n.dispose();for(var r=this.scene.children.length-1;r>=0;r--){var i=this.scene.children[r];this.scene.remove(i)}this.scene.background=null}},{key:"destroy",value:function(){this.dispose(),this.renderer.forceContextLoss(),this.renderer.dispose()}}]),t}();n(135);var Ll=n(3),Dl=n(5);Dl.c.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var Fl=function(){function t(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ll.isMobile.tablet||Ll.isMobile.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(t=this.renderer.view.parentNode)||void 0===t||t.appendChild(this.div))},t.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(t=this.div.parentNode)||void 0===t||t.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var e=t.children;if(e)for(var n=0;n<e.length;n++)this.updateAccessibleObjects(e[n])}},t.prototype.update=function(){var t=performance.now();if(!(Ll.isMobile.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),n=e.left,r=e.top,i=e.width,o=e.height,a=this.renderer,s=a.width,u=a.height,l=a.resolution,c=i/s*l,h=o/u*l,d=this.div;d.style.left=n+"px",d.style.top=r+"px",d.style.width=s+"px",d.style.height=u+"px";for(var f=0;f<this.children.length;f++){var p=this.children[f];if(p.renderId!==this.renderId)p._accessibleActive=!1,Object(Ll.removeItems)(this.children,f,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,f--;else{d=p._accessibleDiv;var v=p.hitArea,m=p.worldTransform;p.hitArea?(d.style.left=(m.tx+v.x*m.a)*c+"px",d.style.top=(m.ty+v.y*m.d)*h+"px",d.style.width=v.width*m.a*c+"px",d.style.height=v.height*m.d*h+"px"):(v=p.getBounds(),this.capHitArea(v),d.style.left=v.x*c+"px",d.style.top=v.y*h+"px",d.style.width=v.width*c+"px",d.style.height=v.height*h+"px",d.title!==p.accessibleTitle&&null!==p.accessibleTitle&&(d.title=p.accessibleTitle),d.getAttribute("aria-label")!==p.accessibleHint&&null!==p.accessibleHint&&d.setAttribute("aria-label",p.accessibleHint)),p.accessibleTitle===d.title&&p.tabIndex===d.tabIndex||(d.title=p.accessibleTitle,d.tabIndex=p.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,n=e.width,r=e.height;t.x+t.width>n&&(t.width=n-t.x),t.y+t.height>r&&(t.height=r-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,n=t.target.displayObject,r=e.eventData;e.dispatchEvent(n,"click",r),e.dispatchEvent(n,"pointertap",r),e.dispatchEvent(n,"tap",r)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,n=t.target.displayObject,r=e.eventData;e.dispatchEvent(n,"mouseover",r)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,n=t.target.displayObject,r=e.eventData;e.dispatchEvent(n,"mouseout",r)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}(),Bl=n(1),Ul=n(7),Gl=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Bl.g,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),jl=function(t,e){return(jl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Hl=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),zl=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),Vl=function(){function t(){this._tempPoint=new Bl.g}return t.prototype.recursiveFindHit=function(t,e,n,r,i){if(!e||!e.visible)return!1;var o=t.data.global,a=!1,s=i=e.interactive||i,u=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(r=!1,u=!1)),s=!1):e._mask&&r&&(e._mask.containsPoint&&e._mask.containsPoint(o)||(r=!1)),u&&e.interactiveChildren&&e.children)for(var l=e.children,c=l.length-1;c>=0;c--){var h=l[c],d=this.recursiveFindHit(t,h,n,r,s);if(d){if(!h.parent)continue;s=!1,d&&(t.target&&(r=!1),a=!0)}}return i&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(a=!0),e.interactive&&(a&&!t.target&&(t.target=e),n&&n(t,e,!!a))),a},t.prototype.findHit=function(t,e,n,r){this.recursiveFindHit(t,e,n,r,!1)},t}(),Wl={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Dl.c.mixin(Wl);var Xl={target:null,data:{global:null}},Yl=function(t){function e(e,n){var r=t.call(this)||this;return n=n||{},r.renderer=e,r.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,r.interactionFrequency=n.interactionFrequency||10,r.mouse=new Gl,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new Hl,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!("PointerEvent"in globalThis),r.supportsTouchEvents="ontouchstart"in globalThis,r.supportsPointerEvents=!!globalThis.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new Vl,r._tempDisplayObject=new Dl.d,r._eventListenerOptions={capture:!0,passive:!1},r._useSystemTicker=void 0===n.useSystemTicker||n.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,e){function n(){this.constructor=t}jl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return Xl.target=null,Xl.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(Xl,e,null,!0),Xl.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(Ul.a.system.add(this.tickerUpdate,this,Ul.c.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(Ul.a.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var n=this.cursorStyles[t];if(n)switch(typeof n){case"string":e&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,n)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,n){n.stopPropagationHint&&t!==n.stopsPropagatingAt||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},e.prototype.delayDispatchEvent=function(t,e,n){this.delayedEvents.push({displayObject:t,eventString:e,eventData:n})},e.prototype.mapPositionToPoint=function(t,e,n){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var i=1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*i,t.y=(n-r.top)*(this.interactionDOMElement.height/r.height)*i},e.prototype.processInteractive=function(t,e,n,r){var i=this.search.findHit(t,e,n,r),o=this.delayedEvents;if(!o.length)return i;t.stopPropagationHint=!1;var a=o.length;this.delayedEvents=[];for(var s=0;s<a;s++){var u=o[s],l=u.displayObject,c=u.eventString,h=u.eventData;h.stopsPropagatingAt===l&&(h.stopPropagationHint=!0),this.dispatchEvent(l,c,h)}return i},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var n=e.length,r=0;r<n;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(a.data.originalEvent=t,this.processInteractive(a,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===i.pointerType)this.emit("touchstart",a);else if("mouse"===i.pointerType||"pen"===i.pointerType){var s=2===i.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,n){var r=t.data,i=t.data.identifier;if(n)if(e.trackedPointers[i]||(e.trackedPointers[i]=new zl(i)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?e.trackedPointers[i].rightDown=!0:e.trackedPointers[i].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,n){for(var r=this.normalizeToPointerData(t),i=r.length,o=t.target!==this.interactionDOMElement?"outside":"",a=0;a<i;a++){var s=r[a],u=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,u);if(l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,n,e||!o),this.emit(e?"pointercancel":"pointerup"+o,l),"mouse"===s.pointerType||"pen"===s.pointerType){var c=2===s.button;this.emit(c?"rightup"+o:"mouseup"+o,l)}else"touch"===s.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,l),this.releaseInteractionDataForPointerId(s.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var n=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===n.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,n){var r=t.data,i=t.data.identifier,o=e.trackedPointers[i],a="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType,u=!1;if(s){var l=2===r.button,c=zl.FLAGS,h=l?c.RIGHT_DOWN:c.LEFT_DOWN,d=void 0!==o&&o.flags&h;n?(this.dispatchEvent(e,l?"rightup":"mouseup",t),d&&(this.dispatchEvent(e,l?"rightclick":"click",t),u=!0)):d&&this.dispatchEvent(e,l?"rightupoutside":"mouseupoutside",t),o&&(l?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),a&&this.dispatchEvent(e,"touchend",t),o&&(s&&!u||this.dispatchEvent(e,"pointertap",t),a&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),a&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[i]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var n=e.length,r=0;r<n;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=t,this.processInteractive(a,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",a),"touch"===i.pointerType&&this.emit("touchmove",a),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",a)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,n){var r=t.data,i="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(t,e,n),this.moveWhenInside&&!n||(this.dispatchEvent(e,"pointermove",t),i&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,n);r.data.originalEvent=e,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,n){var r=t.data,i=t.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,a=e.trackedPointers[i];n&&!a&&(a=e.trackedPointers[i]=new zl(i)),void 0!==a&&(n&&this.mouseOverRenderer?(a.over||(a.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):a.over&&(a.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),a.none&&delete e.trackedPointers[i]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],n=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,n);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e,n=t.pointerId;return 1===n||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[n]?e=this.activeInteractionData[n]:((e=this.interactionDataPool.pop()||new Gl).identifier=n,this.activeInteractionData[n]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,r=t.changedTouches.length;n<r;n++){var i=t.changedTouches[n];void 0===i.button&&(i.button=t.touches.length?1:0),void 0===i.buttons&&(i.buttons=t.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,e.push(i)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof globalThis.PointerEvent)){var o=t;void 0===o.isPrimary&&(o.isPrimary=!0),void 0===o.width&&(o.width=1),void 0===o.height&&(o.height=1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="mouse"),void 0===o.pointerId&&(o.pointerId=1),void 0===o.pressure&&(o.pressure=.5),void 0===o.twist&&(o.twist=0),void 0===o.tangentialPressure&&(o.tangentialPressure=0),o.isNormalized=!0,e.push(o)}else e.push(t);return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(Ll.EventEmitter),ql=n(2),Zl=function(){function t(e){var n=this;this.stage=new Dl.b,e=Object.assign({forceCanvas:!1},e),this.renderer=Object(ql.y)(e),t._plugins.forEach((function(t){t.init.call(n,e)}))}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,n){var r=this,i=t._plugins.slice(0);i.reverse(),i.forEach((function(t){t.destroy.call(r)})),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}(),Ql=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,n;if(e.cancelResize(),e._resizeTo===globalThis.window)t=globalThis.innerWidth,n=globalThis.innerHeight;else{var r=e._resizeTo;t=r.clientWidth,n=r.clientHeight}e.renderer.resize(t,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();Zl.registerPlugin(Ql);var Kl,Jl,$l,tc,ec,nc,rc,ic,oc,ac,sc,uc,lc,cc,hc,dc,fc,pc,vc,mc=/iPhone/i,gc=/iPod/i,yc=/iPad/i,_c=/\biOS-universal(?:.+)Mac\b/i,xc=/\bAndroid(?:.+)Mobile\b/i,bc=/Android/i,Tc=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,wc=/Silk/i,Ec=/Windows Phone/i,Sc=/\bWindows(?:.+)ARM\b/i,Ac=/BlackBerry/i,Mc=/BB10/i,Rc=/Opera Mini/i,Cc=/\b(CriOS|Chrome)(?:.+)Mobile/i,Pc=/Mobile(?:.+)Firefox\b/i,Ic=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream},Oc=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,r=n.split("[FBAN");void 0!==r[1]&&(n=r[0]),void 0!==(r=n.split("Twitter"))[1]&&(n=r[0]);var i=function(t){return function(e){return e.test(t)}}(n),o={apple:{phone:i(mc)&&!i(Ec),ipod:i(gc),tablet:!i(mc)&&(i(yc)||Ic(e))&&!i(Ec),universal:i(_c),device:(i(mc)||i(gc)||i(yc)||i(_c)||Ic(e))&&!i(Ec)},amazon:{phone:i(Tc),tablet:!i(Tc)&&i(wc),device:i(Tc)||i(wc)},android:{phone:!i(Ec)&&i(Tc)||!i(Ec)&&i(xc),tablet:!i(Ec)&&!i(Tc)&&!i(xc)&&(i(wc)||i(bc)),device:!i(Ec)&&(i(Tc)||i(wc)||i(xc)||i(bc))||i(/\bokhttp\b/i)},windows:{phone:i(Ec),tablet:i(Sc),device:i(Ec)||i(Sc)},other:{blackberry:i(Ac),blackberry10:i(Mc),opera:i(Rc),firefox:i(Pc),chrome:i(Cc),device:i(Ac)||i(Mc)||i(Rc)||i(Pc)||i(Cc)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(globalThis.navigator);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Kl||(Kl={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Jl||(Jl={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}($l||($l={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(tc||(tc={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(ec||(ec={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(nc||(nc={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(rc||(rc={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(ic||(ic={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(oc||(oc={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(ac||(ac={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(sc||(sc={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(uc||(uc={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(lc||(lc={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(cc||(cc={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(hc||(hc={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(dc||(dc={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(fc||(fc={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(pc||(pc={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(vc||(vc={}));uc.POW2,pc.NONE,function(t){var e,n=!0;(Oc.tablet||Oc.phone)&&(Oc.apple.device&&(e=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(e[1],10)<11&&(n=!1),Oc.android.device&&(e=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(e[1],10)<7&&(n=!1))}(),hc.AUTO,sc.CLAMP,ac.LINEAR,dc.HIGH,Oc.apple.device?dc.HIGH:dc.MEDIUM,Oc.apple.device;var kc=!1,Nc=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Bl.j.EMPTY:((t=t||new Bl.j(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var n=t.a,r=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,u=n*e.x+i*e.y+a,l=r*e.x+o*e.y+s;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},t.prototype.addQuad=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=t[0],a=t[1];e=o<e?o:e,n=a<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[2])<e?o:e,n=(a=t[3])<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[4])<e?o:e,n=(a=t[5])<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[6])<e?o:e,n=(a=t[7])<n?a:n,r=o>r?o:r,i=a>i?a:i,this.minX=e,this.minY=n,this.maxX=r,this.maxY=i},t.prototype.addFrame=function(t,e,n,r,i){this.addFrameMatrix(t.worldTransform,e,n,r,i)},t.prototype.addFrameMatrix=function(t,e,n,r,i){var o=t.a,a=t.b,s=t.c,u=t.d,l=t.tx,c=t.ty,h=this.minX,d=this.minY,f=this.maxX,p=this.maxY,v=o*e+s*n+l,m=a*e+u*n+c;h=v<h?v:h,d=m<d?m:d,f=v>f?v:f,p=m>p?m:p,h=(v=o*r+s*n+l)<h?v:h,d=(m=a*r+u*n+c)<d?m:d,f=v>f?v:f,p=m>p?m:p,h=(v=o*e+s*i+l)<h?v:h,d=(m=a*e+u*i+c)<d?m:d,f=v>f?v:f,p=m>p?m:p,h=(v=o*r+s*i+l)<h?v:h,d=(m=a*r+u*i+c)<d?m:d,f=v>f?v:f,p=m>p?m:p,this.minX=h,this.minY=d,this.maxX=f,this.maxY=p},t.prototype.addVertexData=function(t,e,n){for(var r=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=e;s<n;s+=2){var u=t[s],l=t[s+1];r=u<r?u:r,i=l<i?l:i,o=u>o?u:o,a=l>a?l:a}this.minX=r,this.minY=i,this.maxX=o,this.maxY=a},t.prototype.addVertices=function(t,e,n,r){this.addVerticesMatrix(t.worldTransform,e,n,r)},t.prototype.addVerticesMatrix=function(t,e,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=i);for(var a=t.a,s=t.b,u=t.c,l=t.d,c=t.tx,h=t.ty,d=this.minX,f=this.minY,p=this.maxX,v=this.maxY,m=n;m<r;m+=2){var g=e[m],y=e[m+1],_=a*g+u*y+c,x=l*y+s*g+h;d=Math.min(d,_-i),p=Math.max(p,_+i),f=Math.min(f,x-o),v=Math.max(v,x+o)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=v},t.prototype.addBounds=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(n<=i&&r<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(n<=i&&r<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,n,r,i,o){t-=i,e-=o,n+=i,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},t}(),Lc=function(t,e){return(Lc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Dc(t,e){function n(){this.constructor=t}Lc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Fc,Bc,Uc,Gc,jc,Hc,zc,Vc,Wc,Xc,Yc,qc,Zc,Qc,Kc,Jc,$c,th,eh,nh=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new Bl.m,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new Nc,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return Dc(e,t),e.mixin=function(t){for(var n=Object.keys(t),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Bl.j),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Bl.j),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Nc);var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=n,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-i,o},e.prototype.toGlobal=function(t,e,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,n,r){return e&&(t=e.toGlobal(t,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),this.position.x=t,this.position.y=e,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=u,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new rh),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*Bl.i},set:function(t){this.transform.rotation=t*Bl.b},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask!==t&&(this._mask&&((e=this._mask.maskObject||this._mask)._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1)),this._mask=t,this._mask&&(0===(e=this._mask.maskObject||this._mask)._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++))},enumerable:!1,configurable:!0}),e}(Ll.EventEmitter),rh=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return Dc(e,t),e}(nh);function ih(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}nh.prototype.displayObjectUpdateTransform=nh.prototype.updateTransform,function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Fc||(Fc={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Bc||(Bc={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Uc||(Uc={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Gc||(Gc={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(jc||(jc={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Hc||(Hc={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(zc||(zc={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Vc||(Vc={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(Wc||(Wc={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Xc||(Xc={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Yc||(Yc={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(qc||(qc={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Zc||(Zc={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Qc||(Qc={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Kc||(Kc={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Jc||(Jc={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}($c||($c={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(th||(th={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(eh||(eh={}));var oh=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=kc,e.sortDirty=!1,e}return Dc(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var i=e[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);Object(Ll.removeItems)(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var i=e[0],o=this.children.indexOf(i);if(-1===o)return null;i.parent=null,i.transform._parentID=-1,Object(Ll.removeItems)(this.children,o,1),this._boundsID++,this.onChildrenChange(o),i.emit("removed",this),this.emit("childRemoved",i,this,o)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Object(Ll.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var n,r=t,i=e-r;if(i>0&&i<=e){n=this.children.splice(r,i);for(var o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,n=this.children.length;e<n;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(ih),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var n=e._mask.maskObject||e._mask;n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,n){void 0===n&&(n=!1);var r=t.prototype.getLocalBounds.call(this,e);if(!n)for(var i=0,o=this.children.length;i<o;++i){var a=this.children[i];a.visible&&a.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var n=t.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var r,i;if(this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==e.prototype._render&&(r=this.getBounds(!0)),r&&n.intersects(r,i))this._render(t);else if(this.cullArea)return;for(var o=0,a=this.children.length;o<a;++o){var s=this.children[o],u=s.cullable;s.cullable=u||!this.cullArea,s.render(t),s.cullable=u}}},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){var e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r])}var i=e&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==$c.NONE));if(i&&t.batch.flush(),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t),r=0;for(var o=this.children.length;r<o;++r)this.children[r].render(t)}i&&t.batch.flush(),n&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(nh);oh.prototype.containerUpdateTransform=oh.prototype.updateTransform;var ah=new Bl.j,sh=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,n){var r=new Image;return r.src=this.base64(t,e,n),r},t.prototype.base64=function(t,e,n){return this.canvas(t).toDataURL(e,n)},t.prototype.canvas=function(e){var n,r,i,o=this.renderer,a=!1,s=!1;e&&(e instanceof ql.p?i=e:(i=this.renderer.generateTexture(e),s=!0)),i?(n=i.baseTexture.resolution,r=i.frame,a=!1,o.renderTexture.bind(i)):(n=this.renderer.resolution,a=!0,(r=ah).width=this.renderer.width,r.height=this.renderer.height,o.renderTexture.bind(null));var u=Math.floor(r.width*n+1e-4),l=Math.floor(r.height*n+1e-4),c=new Ll.CanvasRenderTarget(u,l,1),h=new Uint8Array(4*u*l),d=o.gl;d.readPixels(r.x*n,r.y*n,u,l,d.RGBA,d.UNSIGNED_BYTE,h);var f=c.context.getImageData(0,0,u,l);if(t.arrayPostDivide(h,f.data),c.context.putImageData(f,0,0),a){var p=new Ll.CanvasRenderTarget(c.width,c.height,1);p.context.scale(1,-1),p.context.drawImage(c.canvas,0,-l),c.destroy(),c=p}return s&&i.destroy(!0),c.canvas},t.prototype.pixels=function(e,n){var r,i,o,a=this.renderer,s=!1;e&&(e instanceof ql.p?o=e:e instanceof nh&&(o=this.renderer.generateTexture(e),s=!0)),o?n?(r=n.resolution,i=o.frame,a.renderTexture.bind(o)):(r=o.baseTexture.resolution,i=o.frame,a.renderTexture.bind(o)):n?(r=n.resolution,(i=ah).width=n.width,i.height=n.height,a.renderTexture.bind(null)):(r=a.resolution,(i=ah).width=a.width,i.height=a.height,a.renderTexture.bind(null));var u=i.width*r,l=i.height*r,c=new Uint8Array(4*u*l),h=a.gl;return h.readPixels(i.x*r,i.y*r,u,l,h.RGBA,h.UNSIGNED_BYTE,c),s&&o.destroy(!0),t.arrayPostDivide(c,c),c},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(t,e){for(var n=0;n<t.length;n+=4){var r=e[n+3]=t[n+3];0!==r?(e[n]=Math.round(Math.min(255*t[n]/r,255)),e[n+1]=Math.round(Math.min(255*t[n+1]/r,255)),e[n+2]=Math.round(Math.min(255*t[n+2]/r,255))):(e[n]=t[n],e[n+1]=t[n+1],e[n+2]=t[n+2])}},t}(),uh=function(){function t(t,e,n){void 0===e&&(e=!1),this._fn=t,this._once=e,this._thisArg=n,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},t}();function lh(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var ch,hh=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(t){void 0===t&&(t=!1);var e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n},t.prototype.has=function(t){if(!(t instanceof uh))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},t.prototype.dispatch=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,e),r=r._next;return!0},t.prototype.add=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return lh(this,new uh(t,!1,e))},t.prototype.once=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return lh(this,new uh(t,!0,e))},t.prototype.detach=function(t){if(!(t instanceof uh))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this},t.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},t}();function dh(t,e){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,(function(t,e,r){e&&(i[n.q.name][e]=r)})),i}var fh=null;function ph(){}function vh(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}function mh(t){return t.toString().replace("object ","")}var gh=function(){function t(e,n,r){if(this._dequeue=ph,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof e||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=e,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=ph,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new hh,this.onProgress=new hh,this.onComplete=new hh,this.onAfterMiddleware=new hh}return t.setExtensionLoadType=function(e,n){vh(t._loadTypeMap,e,n)},t.setExtensionXhrType=function(e,n){vh(t._xhrTypeMap,e,n)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var n=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(n)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:void 0===ch&&(ch=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest)),ch&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==globalThis.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==globalThis.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else e=this.metadata.mimeType,this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},t.prototype._createSource=function(t,e,n){n||(n=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=n,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(mh(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(mh(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(mh(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,n="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(n=e.responseText),0===r&&(n.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var i=new DOMParser;this.data=i.parseFromString(n,"text/xml")}else{var o=document.createElement("div");o.innerHTML=n,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||n;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";e=e||globalThis.location,fh||(fh=document.createElement("a")),fh.href=t;var n=dh(fh.href,{strictMode:!0}),r=!n.port&&""===e.port||n.port===e.port,i=n.protocol?n.protocol+":":"";return n.host===e.hostname&&r&&i===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(t){void 0===t&&(t=this.url);var e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var r=t.indexOf("?"),i=t.indexOf("#"),o=Math.min(r>-1?r:t.length,i>-1?i:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();function yh(){}function _h(t){return function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++)n[r]=e[r];if(null===t)throw new Error("Callback was already called.");var i=t;t=null,i.apply(this,n)}}!function(t){var e,n,r,i;(e=t.STATUS_FLAGS||(t.STATUS_FLAGS={}))[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING",(n=t.TYPE||(t.TYPE={}))[n.UNKNOWN=0]="UNKNOWN",n[n.JSON=1]="JSON",n[n.XML=2]="XML",n[n.IMAGE=3]="IMAGE",n[n.AUDIO=4]="AUDIO",n[n.VIDEO=5]="VIDEO",n[n.TEXT=6]="TEXT",(r=t.LOAD_TYPE||(t.LOAD_TYPE={}))[r.XHR=1]="XHR",r[r.IMAGE=2]="IMAGE",r[r.AUDIO=3]="AUDIO",r[r.VIDEO=4]="VIDEO",(i=t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})).DEFAULT="text",i.BUFFER="arraybuffer",i.BLOB="blob",i.DOCUMENT="document",i.JSON="json",i.TEXT="text",t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}(gh||(gh={}));var xh=function(t,e){this.data=t,this.callback=e},bh=function(){function t(t,e){var n=this;if(void 0===e&&(e=1),this.workers=0,this.saturated=yh,this.unsaturated=yh,this.empty=yh,this.drain=yh,this.error=yh,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(t,e,r){if(r&&"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,null==t&&n.idle())setTimeout((function(){return n.drain()}),1);else{var i=new xh(t,"function"==typeof r?r:yh);e?n._tasks.unshift(i):n._tasks.push(i),setTimeout(n.process,1)}},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var t=n._tasks.shift();0===n._tasks.length&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(t.data,_h(n._next(t)))}},this._worker=t,0===e)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return t.prototype._next=function(t){var e=this;return function(){for(var n=arguments,r=[],i=0;i<arguments.length;i++)r[i]=n[i];e.workers-=1,t.callback.apply(t,r),null!=r[0]&&e.error(r[0],t.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},t.prototype.push=function(t,e){this._insert(t,!1,e)},t.prototype.kill=function(){this.workers=0,this.drain=yh,this.started=!1,this._tasks=[]},t.prototype.unshift=function(t,e){this._insert(t,!0,e)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},t.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},t.eachSeries=function(t,e,n,r){var i=0,o=t.length;!function a(s){s||i===o?n&&n(s):r?setTimeout((function(){e(t[i++],a)}),1):e(t[i++],a)}()},t.queue=function(e,n){return new t(e,n)},t}(),Th=/(#[\w-]+)?$/,wh=function(){function t(e,n){var r=this;void 0===e&&(e=""),void 0===n&&(n=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=bh.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new hh,this.onError=new hh,this.onLoad=new hh,this.onStart=new hh,this.onComplete=new hh;for(var i=0;i<t._plugins.length;++i){var o=t._plugins[i],a=o.pre,s=o.use;a&&this.pre(a),s&&this.use(s)}this._protected=!1}return t.prototype._add=function(t,e,n,r){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new gh(t,e,n),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var i=n.parentResource,o=[],a=0;a<i.children.length;++a)i.children[a].isComplete||o.push(i.children[a]);var s=i.progressChunk*(o.length+1)/(o.length+2);for(i.children.push(this.resources[t]),i.progressChunk=s,a=0;a<o.length;++a)o[a].progressChunk=s;this.resources[t].progressChunk=s}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(t){var e,n=dh(t,{strictMode:!0});if(e=n.protocol||!n.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=Th.exec(e)[0];-1!==(e=e.slice(0,e.length-r.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=r}return e},t.prototype._loadResource=function(t,e){var n=this;t._dequeue=e,bh.eachSeries(this._beforeMiddleware,(function(e,r){e.call(n,t,(function(){r(t.isComplete?{}:null)}))}),(function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())}),!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),bh.eachSeries(this._afterMiddleware,(function(n,r){n.call(e,t,r)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||((e=new t)._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}();wh.prototype.add=function(t,e,n,r){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"==typeof t&&(n=t,r=e||n.callback||n.onComplete,e=n.url,t=n.name||n.key||n.url),"string"!=typeof e&&(r=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");return"function"==typeof n&&(r=n,n=null),this._add(t,e,n,r)};var Eh=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?wh.shared:new wh},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),Sh=function(){function t(){}return t.add=function(){gh.setExtensionLoadType("svg",gh.LOAD_TYPE.XHR),gh.setExtensionXhrType("svg",gh.XHR_RESPONSE_TYPE.TEXT)},t.use=function(t,e){if(!t.data||t.type!==gh.TYPE.IMAGE&&"svg"!==t.extension)e();else{var n=t.data,r=t.url,i=t.name,o=t.metadata;ql.t.fromLoader(n,r,i,o).then((function(n){t.texture=n,e()})).catch(e)}},t}();wh.registerPlugin({use:function(t,e){if(t.data){if(t.xhr&&t.xhrType===gh.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var n=globalThis.URL||globalThis.webkitURL,r=n.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=gh.TYPE.IMAGE,void(t.data.onload=function(){n.revokeObjectURL(r),t.data.onload=null,e()})}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+function(t){for(var e="",n=0;n<t.length;){for(var r=[0,0,0],i=[0,0,0,0],o=0;o<r.length;++o)n<t.length?r[o]=255&t.charCodeAt(n++):r[o]=0;switch(i[0]=r[0]>>2,i[1]=(3&r[0])<<4|r[1]>>4,i[2]=(15&r[1])<<2|r[2]>>6,i[3]=63&r[2],n-(t.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(o=0;o<i.length;++o)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i[o])}return e}(t.xhr.responseText),t.type=gh.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}}),wh.registerPlugin(Sh);var Ah,Mh,Rh=n(0);!function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"}(Mh||(Mh={}));var Ch=((Ah={})[Mh.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,Ah[Mh.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,Ah[Mh.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,Ah[Mh.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,Ah[Mh.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,Ah[Mh.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,Ah[Mh.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,Ah[Mh.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,Ah[Mh.COMPRESSED_R11_EAC]=.5,Ah[Mh.COMPRESSED_SIGNED_R11_EAC]=.5,Ah[Mh.COMPRESSED_RG11_EAC]=1,Ah[Mh.COMPRESSED_SIGNED_RG11_EAC]=1,Ah[Mh.COMPRESSED_RGB8_ETC2]=.5,Ah[Mh.COMPRESSED_RGBA8_ETC2_EAC]=1,Ah[Mh.COMPRESSED_SRGB8_ETC2]=.5,Ah[Mh.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,Ah[Mh.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Ah[Mh.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Ah[Mh.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,Ah[Mh.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,Ah[Mh.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,Ah[Mh.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,Ah[Mh.COMPRESSED_RGB_ETC1_WEBGL]=.5,Ah[Mh.COMPRESSED_RGB_ATC_WEBGL]=.5,Ah[Mh.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,Ah[Mh.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,Ah),Ph=function(t,e){return(Ph=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ih(t,e){function n(){this.constructor=t}Ph(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Oh,kh,Nh=function(t){function e(n,r){var i=t.call(this,n,r)||this;return i.format=r.format,i.levels=r.levels||1,i._width=r.width,i._height=r.height,i._extension=e._formatToExtension(i.format),(r.levelBuffers||i.buffer)&&(i._levelBuffers=r.levelBuffers||e._createLevelBuffers(n instanceof Uint8Array?n:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return Ih(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var i=0,o=this.levels;i<o;i++){var a=this._levelBuffers[i],s=a.levelID,u=a.levelWidth,l=a.levelHeight,c=a.levelBuffer;r.compressedTexImage2D(r.TEXTURE_2D,s,this.format,u,l,0,c)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,e,n,r,i,o,a){for(var s=new Array(n),u=t.byteOffset,l=o,c=a,h=l+r-1&~(r-1),d=c+i-1&~(i-1),f=h*d*Ch[e],p=0;p<n;p++)s[p]={levelID:p,levelWidth:n>1?l:h,levelHeight:n>1?c:d,levelBuffer:new Uint8Array(t.buffer,u,f)},u+=f,f=(h=(l=l>>1||1)+r-1&~(r-1))*(d=(c=c>>1||1)+i-1&~(i-1))*Ch[e];return s},e}(function(t){function e(e,n){void 0===n&&(n={width:1,height:1,autoLoad:!0});var r,i,o=this;return"string"==typeof e?(r=e,i=new Uint8Array):(r=null,i=e),(o=t.call(this,i,n)||this).origin=r,o.buffer=i?new ql.x(i):null,o.origin&&!1!==n.autoLoad&&o.load(),i&&i.length&&(o.loaded=!0,o.onBlobLoaded(o.buffer.rawBinaryData)),o}return Ih(e,t),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return t=this,void 0,n=function(){var t;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new ql.x(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}}))},new((e=Promise)||(e=Promise))((function(r,i){function o(t){try{s(n.next(t))}catch(t){i(t)}}function a(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){t.done?r(t.value):new e((function(e){e(t.value)})).then(o,a)}s((n=n.apply(t,[])).next())}));var t,e,n},e}(ql.i)),Lh=function(){function t(){}return t.use=function(e,n){var r=e.data;if(e.type===gh.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var i=r.textures,o=void 0,a=void 0,s=0,u=i.length;s<u;s++){var l=i[s],c=l.src,h=l.format;if(h||(a=c),t.textureFormats[h]){o=c;break}}if(!(o=o||a))return void n(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(o===e.url)return void n(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},f=Ll.url.resolve(e.url.replace(this.baseUrl,""),o),p=r.cacheID;this.add(p,f,d,(function(t){if(t.error)n(t.error);else{var r=t.texture,i=void 0===r?null:r,o=t.textures,a=void 0===o?{}:o;Object.assign(e,{texture:i,textures:a}),n()}}))}else n()},Object.defineProperty(t,"textureExtensions",{get:function(){if(!t._textureExtensions){var e=document.createElement("canvas").getContext("webgl");if(!e)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};t._textureExtensions=n}return t._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(t,"textureFormats",{get:function(){if(!t._textureFormats){var e=t.textureExtensions;for(var n in t._textureFormats={},e){var r=e[n];r&&Object.assign(t._textureFormats,Object.getPrototypeOf(r))}}return t._textureFormats},enumerable:!1,configurable:!0}),t}();function Dh(t,e,n){var r={textures:{},texture:null};return e?(e.map((function(t){return new ql.t(new ql.c(t,Object.assign({mipmap:Rh.k.OFF,alphaMode:Rh.a.NO_PREMULTIPLIED_ALPHA},n)))})).forEach((function(e,n){var i=e.baseTexture,o=t+"-"+(n+1);ql.c.addToCache(i,o),ql.t.addToCache(e,o),0===n&&(ql.c.addToCache(i,t),ql.t.addToCache(e,t),r.texture=e),r.textures[o]=e})),r):r}gh.setExtensionXhrType("dds",gh.XHR_RESPONSE_TYPE.BUFFER);var Fh,Bh;!function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(Fh||(Fh={})),function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(Bh||(Bh={}));var Uh,Gh,jh,Hh=((Oh={})[827611204]=Mh.COMPRESSED_RGBA_S3TC_DXT1_EXT,Oh[861165636]=Mh.COMPRESSED_RGBA_S3TC_DXT3_EXT,Oh[894720068]=Mh.COMPRESSED_RGBA_S3TC_DXT5_EXT,Oh),zh=((kh={})[Fh.DXGI_FORMAT_BC1_TYPELESS]=Mh.COMPRESSED_RGBA_S3TC_DXT1_EXT,kh[Fh.DXGI_FORMAT_BC1_UNORM]=Mh.COMPRESSED_RGBA_S3TC_DXT1_EXT,kh[Fh.DXGI_FORMAT_BC2_TYPELESS]=Mh.COMPRESSED_RGBA_S3TC_DXT3_EXT,kh[Fh.DXGI_FORMAT_BC2_UNORM]=Mh.COMPRESSED_RGBA_S3TC_DXT3_EXT,kh[Fh.DXGI_FORMAT_BC3_TYPELESS]=Mh.COMPRESSED_RGBA_S3TC_DXT5_EXT,kh[Fh.DXGI_FORMAT_BC3_UNORM]=Mh.COMPRESSED_RGBA_S3TC_DXT5_EXT,kh[Fh.DXGI_FORMAT_BC1_UNORM_SRGB]=Mh.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,kh[Fh.DXGI_FORMAT_BC2_UNORM_SRGB]=Mh.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,kh[Fh.DXGI_FORMAT_BC3_UNORM_SRGB]=Mh.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,kh),Vh=function(){function t(){}return t.use=function(e,n){if("dds"===e.extension&&e.data)try{Object.assign(e,Dh(e.name||e.url,t.parse(e.data),e.metadata))}catch(t){return void n(t)}n()},t.parse=function(t){var e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var n=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),r=n[3],i=n[4],o=n[7],a=new Uint32Array(t,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),s=a[1];if(4&s){var u=a[2];if(808540228!==u){var l=Hh[u],c=new Uint8Array(t,128);return[new Nh(c,{format:l,width:i,height:r,levels:o})]}var h=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),d=h[0],f=h[1],p=h[2],v=h[3],m=zh[d];if(void 0===m)throw new Error("DDSLoader cannot parse texture data with DXGI format "+d);if(4===p)throw new Error("DDSLoader does not support cubemap textures");if(f===Bh.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var g=new Array;if(1===v)g.push(new Uint8Array(t,148));else{for(var y=Ch[m],_=0,x=i,b=r,T=0;T<o;T++)_+=Math.max(1,x+3&-4)*Math.max(1,b+3&-4)*y,x>>>=1,b>>>=1;var w=148;for(T=0;T<v;T++)g.push(new Uint8Array(t,w,_)),w+=_}return g.map((function(t){return new Nh(t,{format:m,width:i,height:r,levels:o})}))}if(64&s)throw new Error("DDSLoader does not support uncompressed texture data.");if(512&s)throw new Error("DDSLoader does not supported YUV uncompressed texture data.");if(131072&s)throw new Error("DDSLoader does not support single-channel (lumninance) texture data!");if(2&s)throw new Error("DDSLoader does not support single-channel (alpha) texture data!");throw new Error("DDSLoader failed to load a texture file due to an unknown reason!")},t}();gh.setExtensionXhrType("ktx",gh.XHR_RESPONSE_TYPE.BUFFER);var Wh=[171,75,84,88,32,49,49,187,13,10,26,10],Xh=((Uh={})[Rh.r.UNSIGNED_BYTE]=1,Uh[Rh.r.UNSIGNED_SHORT]=2,Uh[Rh.r.INT]=4,Uh[Rh.r.UNSIGNED_INT]=4,Uh[Rh.r.FLOAT]=4,Uh[Rh.r.HALF_FLOAT]=8,Uh),Yh=((Gh={})[Rh.h.RGBA]=4,Gh[Rh.h.RGB]=3,Gh[Rh.h.RG]=2,Gh[Rh.h.RED]=1,Gh[Rh.h.LUMINANCE]=1,Gh[Rh.h.LUMINANCE_ALPHA]=2,Gh[Rh.h.ALPHA]=1,Gh),qh=((jh={})[Rh.r.UNSIGNED_SHORT_4_4_4_4]=2,jh[Rh.r.UNSIGNED_SHORT_5_5_5_1]=2,jh[Rh.r.UNSIGNED_SHORT_5_6_5]=2,jh),Zh=function(){function t(){}return t.use=function(e,n){if("ktx"===e.extension&&e.data)try{var r=e.name||e.url,i=t.parse(r,e.data),o=i.compressed,a=i.uncompressed,s=i.kvData;if(o){var u=Dh(r,o,e.metadata);if(s&&u.textures)for(var l in u.textures)u.textures[l].baseTexture.ktxKeyValueData=s;Object.assign(e,u)}else if(a){var c={};a.forEach((function(t,e){var n=new ql.t(new ql.c(t.resource,{mipmap:Rh.k.OFF,alphaMode:Rh.a.NO_PREMULTIPLIED_ALPHA,type:t.type,format:t.format})),i=r+"-"+(e+1);s&&(n.baseTexture.ktxKeyValueData=s),ql.c.addToCache(n.baseTexture,i),ql.t.addToCache(n,i),0===e&&(c[r]=n,ql.c.addToCache(n.baseTexture,r),ql.t.addToCache(n,r)),c[i]=n})),Object.assign(e,{textures:c})}}catch(t){return void n(t)}n()},t.parse=function(e,n){var r=new DataView(n);if(!t.validate(e,r))return null;var i=67305985===r.getUint32(12,!0),o=r.getUint32(16,i),a=r.getUint32(24,i),s=r.getUint32(28,i),u=r.getUint32(36,i),l=r.getUint32(40,i)||1,c=r.getUint32(44,i)||1,h=r.getUint32(48,i)||1,d=r.getUint32(52,i),f=r.getUint32(56,i),p=r.getUint32(60,i);if(0===l||1!==c)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==h)throw new Error("WebGL does not support array textures");var v,m=u+3&-4,g=l+3&-4,y=new Array(h),_=u*l;if(0===o&&(_=m*g),void 0===(v=0!==o?Xh[o]?Xh[o]*Yh[a]:qh[o]:Ch[s]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var x=t.loadKeyValueData?t.parseKvData(r,p,i):null,b=_*v,T=u,w=l,E=m,S=g,A=64+p,M=0;M<f;M++){for(var R=r.getUint32(A,i),C=A+4,P=0;P<h;P++){var I=y[P];I||(I=y[P]=new Array(f)),I[M]={levelID:M,levelWidth:f>1||0!==o?T:E,levelHeight:f>1||0!==o?w:S,levelBuffer:new Uint8Array(n,C,b)},C+=b}A=(A+=R+4)%4!=0?A+4-A%4:A,b=(E=(T=T>>1||1)+4-1&-4)*(S=(w=w>>1||1)+4-1&-4)*v}return 0!==o?{uncompressed:y.map((function(e){var n=e[0].levelBuffer,r=!1;return o===Rh.r.FLOAT?n=new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4):o===Rh.r.UNSIGNED_INT?(r=!0,n=new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)):o===Rh.r.INT&&(r=!0,n=new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)),{resource:new ql.i(n,{width:e[0].levelWidth,height:e[0].levelHeight}),type:o,format:r?t.convertFormatToInteger(a):a}})),kvData:x}:{compressed:y.map((function(t){return new Nh(null,{format:s,width:u,height:l,levels:f,levelBuffers:t})})),kvData:x}},t.validate=function(t,e){for(var n=0;n<Wh.length;n++)if(e.getUint8(n)!==Wh[n])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},t.convertFormatToInteger=function(t){switch(t){case Rh.h.RGBA:return Rh.h.RGBA_INTEGER;case Rh.h.RGB:return Rh.h.RGB_INTEGER;case Rh.h.RG:return Rh.h.RG_INTEGER;case Rh.h.RED:return Rh.h.RED_INTEGER;default:return t}},t.parseKvData=function(t,e,n){for(var r=new Map,i=0;i<e;){var o=t.getUint32(64+i,n),a=64+i+4,s=3-(o+3)%4;if(0===o||o>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var u=0;u<o&&0!==t.getUint8(a+u);u++);if(-1===u){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var l=(new TextDecoder).decode(new Uint8Array(t.buffer,a,u)),c=new DataView(t.buffer,a+u+1,o-u-1);r.set(l,c),i+=4+o+s}return r},t.loadKeyValueData=!1,t}(),Qh=function(t,e){return(Qh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Kh(t,e){function n(){this.constructor=t}Qh(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Jh,$h,td=function(t){function e(e,n,r,i){void 0===e&&(e=1500),void 0===r&&(r=16384),void 0===i&&(i=!1);var o=t.call(this)||this;return r>16384&&(r=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=e,o._batchSize=r,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=Rh.b.NORMAL,o.autoResize=i,o.roundPixels=!0,o.baseTexture=null,o.setProperties(n),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return Kh(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Object(Ll.hex2rgb)(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(Dl.b),ed=function(){function t(t,e,n){this.geometry=new ql.l,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<t.length;++r){var i=t[r];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||Rh.r.FLOAT,offset:i.offset},e[r]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new ql.h(Object(Ll.createIndicesForQuads)(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n)(a=this.dynamicProperties[n]).offset=e,e+=a.size,this.dynamicStride+=a.size;var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new ql.h(this.dynamicData,!1,!1);var i=0;for(this.staticStride=0,n=0;n<this.staticProperties.length;++n)(a=this.staticProperties[n]).offset=i,i+=a.size,this.staticStride+=a.size;var o=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new ql.h(this.staticData,!0,!1),n=0;n<this.dynamicProperties.length;++n){var a=this.dynamicProperties[n];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Rh.r.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(n=0;n<this.staticProperties.length;++n)a=this.staticProperties[n],t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Rh.r.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)},t.prototype.uploadDynamic=function(t,e,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(t,e,n,i.type===Rh.r.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(t,e,n,i.type===Rh.r.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),nd=function(t){function e(e){var n=t.call(this,e)||this;return n.shader=null,n.properties=null,n.tempMatrix=new Bl.d,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Rh.r.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=ql.r.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),n.state=ql.s.for2d(),n}return Kh(e,t),e.prototype.render=function(t){var e=t.children,n=t._maxSize,r=t._batchSize,i=this.renderer,o=e.length;if(0!==o){o>n&&!t.autoResize&&(o=n);var a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));var s=e[0]._texture.baseTexture;this.state.blendMode=Object(Ll.correctBlendMode)(t.blendMode,s.alphaMode),i.state.set(this.state);var u=i.gl,l=t.worldTransform.copyTo(this.tempMatrix);l.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=l.toArray(!0),this.shader.uniforms.uColor=Object(Ll.premultiplyRgba)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,s.alphaMode),this.shader.uniforms.uSampler=s,this.renderer.shader.bind(this.shader);for(var c=!1,h=0,d=0;h<o;h+=r,d+=1){var f=o-h;f>r&&(f=r),d>=a.length&&a.push(this._generateOneMoreBuffer(t));var p=a[d];p.uploadDynamic(e,h,f);var v=t._bufferUpdateIDs[d]||0;(c=c||p._updateID<v)&&(p._updateID=t._updateID,p.uploadStatic(e,h,f)),i.geometry.bind(p.geometry),u.drawElements(u.TRIANGLES,6*f,u.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],n=t._maxSize,r=t._batchSize,i=t._properties,o=0;o<n;o+=r)e.push(new ed(this.properties,i,r));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,n=t._properties;return new ed(this.properties,n,e)},e.prototype.uploadVertices=function(t,e,n,r,i,o){for(var a=0,s=0,u=0,l=0,c=0;c<n;++c){var h=t[e+c],d=h._texture,f=h.scale.x,p=h.scale.y,v=d.trim,m=d.orig;v?(a=(s=v.x-h.anchor.x*m.width)+v.width,u=(l=v.y-h.anchor.y*m.height)+v.height):(a=m.width*(1-h.anchor.x),s=m.width*-h.anchor.x,u=m.height*(1-h.anchor.y),l=m.height*-h.anchor.y),r[o]=s*f,r[o+1]=l*p,r[o+i]=a*f,r[o+i+1]=l*p,r[o+2*i]=a*f,r[o+2*i+1]=u*p,r[o+3*i]=s*f,r[o+3*i+1]=u*p,o+=4*i}},e.prototype.uploadPosition=function(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=t[e+a].position;r[o]=s.x,r[o+1]=s.y,r[o+i]=s.x,r[o+i+1]=s.y,r[o+2*i]=s.x,r[o+2*i+1]=s.y,r[o+3*i]=s.x,r[o+3*i+1]=s.y,o+=4*i}},e.prototype.uploadRotation=function(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=t[e+a].rotation;r[o]=s,r[o+i]=s,r[o+2*i]=s,r[o+3*i]=s,o+=4*i}},e.prototype.uploadUvs=function(t,e,n,r,i,o){for(var a=0;a<n;++a){var s=t[e+a]._texture._uvs;s?(r[o]=s.x0,r[o+1]=s.y0,r[o+i]=s.x1,r[o+i+1]=s.y1,r[o+2*i]=s.x2,r[o+2*i+1]=s.y2,r[o+3*i]=s.x3,r[o+3*i+1]=s.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},e.prototype.uploadTint=function(t,e,n,r,i,o){for(var a=0;a<n;++a){var s=t[e+a],u=s._texture.baseTexture.alphaMode>0,l=s.alpha,c=l<1&&u?Object(Ll.premultiplyTint)(s._tintRGB,l):s._tintRGB+(255*l<<24);r[o]=c,r[o+i]=c,r[o+2*i]=c,r[o+3*i]=c,o+=4*i}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(ql.m),rd=n(4);!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}(Jh||(Jh={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}($h||($h={}));var id={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},od=function(){function t(){this.color=16777215,this.alpha=1,this.texture=ql.t.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=ql.t.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),ad=function(t,e){return(ad=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function sd(t,e){function n(){this.constructor=t}ad(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function ud(t,e){var n,r;void 0===e&&(e=!1);var i=t.length;if(!(i<6)){for(var o=0,a=0,s=t[i-2],u=t[i-1];a<i;a+=2){var l=t[a],c=t[a+1];o+=(l-s)*(c+u),s=l,u=c}if(!e&&o>0||e&&o<=0){var h=i/2;for(a=h+h%2;a<i;a+=2){var d=i-a-2,f=i-a-1,p=a,v=a+1;n=[t[p],t[d]],t[d]=n[0],t[p]=n[1],r=[t[v],t[f]],t[f]=r[0],t[v]=r[1]}}}}var ld={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var n=t.points,r=t.holes,i=e.points,o=e.indices;if(n.length>=6){ud(n,!1);for(var a=[],s=0;s<r.length;s++){var u=r[s];ud(u.points,!0),a.push(n.length/2),n=n.concat(u.points)}var l=Object(Ll.earcut)(n,a,2);if(!l)return;var c=i.length/2;for(s=0;s<l.length;s+=3)o.push(l[s]+c),o.push(l[s+1]+c),o.push(l[s+2]+c);for(s=0;s<n.length;s++)i.push(n[s])}}},cd={build:function(t){var e,n,r,i,o,a,s=t.points;if(t.type===Bl.l.CIRC){var u=t.shape;e=u.x,n=u.y,o=a=u.radius,r=i=0}else if(t.type===Bl.l.ELIP){var l=t.shape;e=l.x,n=l.y,o=l.width,a=l.height,r=i=0}else{var c=t.shape,h=c.width/2,d=c.height/2;e=c.x+h,n=c.y+d,r=h-(o=a=Math.max(0,Math.min(c.radius,Math.min(h,d)))),i=d-a}if(o>=0&&a>=0&&r>=0&&i>=0){var f=Math.ceil(2.3*Math.sqrt(o+a)),p=8*f+(r?4:0)+(i?4:0);if(s.length=p,0!==p){if(0===f)return s.length=8,s[0]=s[6]=e+r,s[1]=s[3]=n+i,s[2]=s[4]=e-r,void(s[5]=s[7]=n-i);var v,m,g=0,y=4*f+(r?2:0)+2,_=y,x=p,b=e+(v=r+o),T=e-v,w=n+(m=i);if(s[g++]=b,s[g++]=w,s[--y]=w,s[--y]=T,i){var E=n-m;s[_++]=T,s[_++]=E,s[--x]=E,s[--x]=b}for(var S=1;S<f;S++){var A=Math.PI/2*(S/f);b=e+(v=r+Math.cos(A)*o),T=e-v,w=n+(m=i+Math.sin(A)*a),E=n-m,s[g++]=b,s[g++]=w,s[--y]=w,s[--y]=T,s[_++]=T,s[_++]=E,s[--x]=E,s[--x]=b}b=e+(v=r),T=e-v,w=n+(m=i+a),E=n-m,s[g++]=b,s[g++]=w,s[--x]=E,s[--x]=b,r&&(s[g++]=T,s[g++]=w,s[--x]=E,s[--x]=T)}}else s.length=0},triangulate:function(t,e){var n,r,i=t.points,o=e.points,a=e.indices,s=o.length/2,u=s;if(t.type!==Bl.l.RREC){var l=t.shape;n=l.x,r=l.y}else{var c=t.shape;n=c.x+c.width/2,r=c.y+c.height/2}var h=t.matrix;o.push(t.matrix?h.a*n+h.c*r+h.tx:n,t.matrix?h.b*n+h.d*r+h.ty:r),s++,o.push(i[0],i[1]);for(var d=2;d<i.length;d+=2)o.push(i[d],i[d+1]),a.push(s++,u,s);a.push(u+1,u,s)}};function hd(t,e,n){return t+(e-t)*n}function dd(t,e,n,r,i,o,a){void 0===a&&(a=[]);for(var s=a,u=0,l=0,c=0,h=0,d=0,f=0,p=0,v=0;p<=20;++p)u=hd(t,n,v=p/20),l=hd(e,r,v),c=hd(n,i,v),h=hd(r,o,v),d=hd(u,c,v),f=hd(l,h,v),0===p&&s[s.length-2]===d&&s[s.length-1]===f||s.push(d,f);return s}var fd={build:function(t){if(kd.nextRoundedRectBehavior)cd.build(t);else{var e=t.shape,n=t.points,r=e.x,i=e.y,o=e.width,a=e.height,s=Math.max(0,Math.min(e.radius,Math.min(o,a)/2));n.length=0,s?(dd(r,i+s,r,i,r+s,i,n),dd(r+o-s,i,r+o,i,r+o,i+s,n),dd(r+o,i+a-s,r+o,i+a,r+o-s,i+a,n),dd(r+s,i+a,r,i+a,r,i+a-s,n)):n.push(r,i,r+o,i,r+o,i+a,r,i+a)}},triangulate:function(t,e){if(kd.nextRoundedRectBehavior)cd.triangulate(t,e);else{for(var n=t.points,r=e.points,i=e.indices,o=r.length/2,a=Object(Ll.earcut)(n,null,2),s=0,u=a.length;s<u;s+=3)i.push(a[s]+o),i.push(a[s+1]+o),i.push(a[s+2]+o);for(s=0,u=n.length;s<u;s++)r.push(n[s],n[++s])}}};function pd(t,e,n,r,i,o,a,s){var u,l;a?(u=r,l=-n):(u=-r,l=n);var c=t-n*i+u,h=e-r*i+l,d=t+n*o+u,f=e+r*o+l;return s.push(c,h),s.push(d,f),2}function vd(t,e,n,r,i,o,a,s){var u=n-t,l=r-e,c=Math.atan2(u,l),h=Math.atan2(i-t,o-e);s&&c<h?c+=2*Math.PI:!s&&c>h&&(h+=2*Math.PI);var d=c,f=h-c,p=Math.abs(f),v=Math.sqrt(u*u+l*l),m=1+(15*p*Math.sqrt(v)/Math.PI>>0),g=f/m;if(d+=g,s){a.push(t,e),a.push(n,r);for(var y=1,_=d;y<m;y++,_+=g)a.push(t,e),a.push(t+Math.sin(_)*v,e+Math.cos(_)*v);a.push(t,e),a.push(i,o)}else{for(a.push(n,r),a.push(t,e),y=1,_=d;y<m;y++,_+=g)a.push(t+Math.sin(_)*v,e+Math.cos(_)*v),a.push(t,e);a.push(i,o),a.push(t,e)}return 2*m}function md(t,e){t.lineStyle.native?function(t,e){var n=0,r=t.shape,i=t.points||r.points,o=r.type!==Bl.l.POLY||r.closeStroke;if(0!==i.length){var a=e.points,s=e.indices,u=i.length/2,l=a.length/2,c=l;for(a.push(i[0],i[1]),n=1;n<u;n++)a.push(i[2*n],i[2*n+1]),s.push(c,c+1),c++;o&&s.push(c,l)}}(t,e):function(t,e){var n=t.shape,r=t.points||n.points.slice(),i=e.closePointEps;if(0!==r.length){var o=t.lineStyle,a=new Bl.g(r[0],r[1]),s=new Bl.g(r[r.length-2],r[r.length-1]),u=n.type!==Bl.l.POLY||n.closeStroke,l=Math.abs(a.x-s.x)<i&&Math.abs(a.y-s.y)<i;if(u){r=r.slice(),l&&(r.pop(),r.pop(),s.set(r[r.length-2],r[r.length-1]));var c=.5*(a.x+s.x),h=.5*(s.y+a.y);r.unshift(c,h),r.push(c,h)}var d=e.points,f=r.length/2,p=r.length,v=d.length/2,m=o.width/2,g=m*m,y=o.miterLimit*o.miterLimit,_=r[0],x=r[1],b=r[2],T=r[3],w=0,E=0,S=-(x-T),A=_-b,M=0,R=0,C=Math.sqrt(S*S+A*A);S/=C,A/=C,S*=m,A*=m;var P=o.alignment,I=2*(1-P),O=2*P;u||(o.cap===$h.ROUND?p+=vd(_-S*(I-O)*.5,x-A*(I-O)*.5,_-S*I,x-A*I,_+S*O,x+A*O,d,!0)+2:o.cap===$h.SQUARE&&(p+=pd(_,x,S,A,I,O,!0,d))),d.push(_-S*I,x-A*I),d.push(_+S*O,x+A*O);for(var k=1;k<f-1;++k){_=r[2*(k-1)],x=r[2*(k-1)+1],b=r[2*k],T=r[2*k+1],w=r[2*(k+1)],E=r[2*(k+1)+1],S=-(x-T),A=_-b,S/=C=Math.sqrt(S*S+A*A),A/=C,S*=m,A*=m,M=-(T-E),R=b-w,M/=C=Math.sqrt(M*M+R*R),R/=C,M*=m,R*=m;var N=b-_,L=x-T,D=b-w,F=E-T,B=L*D-F*N,U=B<0;if(Math.abs(B)<.1)d.push(b-S*I,T-A*I),d.push(b+S*O,T+A*O);else{var G=(-S+_)*(-A+T)-(-S+b)*(-A+x),j=(-M+w)*(-R+T)-(-M+b)*(-R+E),H=(N*j-D*G)/B,z=(F*G-L*j)/B,V=(H-b)*(H-b)+(z-T)*(z-T),W=b+(H-b)*I,X=T+(z-T)*I,Y=b-(H-b)*O,q=T-(z-T)*O,Z=U?I:O;V<=Math.min(N*N+L*L,D*D+F*F)+Z*Z*g?o.join===Jh.BEVEL||V/g>y?(U?(d.push(W,X),d.push(b+S*O,T+A*O),d.push(W,X),d.push(b+M*O,T+R*O)):(d.push(b-S*I,T-A*I),d.push(Y,q),d.push(b-M*I,T-R*I),d.push(Y,q)),p+=2):o.join===Jh.ROUND?U?(d.push(W,X),d.push(b+S*O,T+A*O),p+=vd(b,T,b+S*O,T+A*O,b+M*O,T+R*O,d,!0)+4,d.push(W,X),d.push(b+M*O,T+R*O)):(d.push(b-S*I,T-A*I),d.push(Y,q),p+=vd(b,T,b-S*I,T-A*I,b-M*I,T-R*I,d,!1)+4,d.push(b-M*I,T-R*I),d.push(Y,q)):(d.push(W,X),d.push(Y,q)):(d.push(b-S*I,T-A*I),d.push(b+S*O,T+A*O),o.join===Jh.ROUND?p+=U?vd(b,T,b+S*O,T+A*O,b+M*O,T+R*O,d,!0)+2:vd(b,T,b-S*I,T-A*I,b-M*I,T-R*I,d,!1)+2:o.join===Jh.MITER&&V/g<=y&&(U?(d.push(Y,q),d.push(Y,q)):(d.push(W,X),d.push(W,X)),p+=2),d.push(b-M*I,T-R*I),d.push(b+M*O,T+R*O),p+=2)}}_=r[2*(f-2)],x=r[2*(f-2)+1],b=r[2*(f-1)],S=-(x-(T=r[2*(f-1)+1])),A=_-b,S/=C=Math.sqrt(S*S+A*A),A/=C,S*=m,A*=m,d.push(b-S*I,T-A*I),d.push(b+S*O,T+A*O),u||(o.cap===$h.ROUND?p+=vd(b-S*(I-O)*.5,T-A*(I-O)*.5,b-S*I,T-A*I,b+S*O,T+A*O,d,!1)+2:o.cap===$h.SQUARE&&(p+=pd(b,T,S,A,I,O,!1,d)));var Q=e.indices,K=id.epsilon*id.epsilon;for(k=v;k<p+v-2;++k)_=d[2*k],x=d[2*k+1],b=d[2*(k+1)],T=d[2*(k+1)+1],w=d[2*(k+2)],E=d[2*(k+2)+1],Math.abs(_*(T-E)+b*(E-x)+w*(x-T))<K||Q.push(k,k+1,k+2)}}(t,e)}var gd,yd,_d=function(){function t(){}return t.curveTo=function(t,e,n,r,i,o){var a=o[o.length-2],s=o[o.length-1]-e,u=a-t,l=r-e,c=n-t,h=Math.abs(s*c-u*l);if(h<1e-8||0===i)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var d=s*s+u*u,f=l*l+c*c,p=s*l+u*c,v=i*Math.sqrt(d)/h,m=i*Math.sqrt(f)/h,g=v*p/d,y=m*p/f,_=v*c+m*u,x=v*l+m*s,b=u*(m+g),T=s*(m+g),w=c*(v+y),E=l*(v+y);return{cx:_+t,cy:x+e,radius:i,startAngle:Math.atan2(T-x,b-_),endAngle:Math.atan2(E-x,w-_),anticlockwise:u*l>c*s}},t.arc=function(t,e,n,r,i,o,a,s,u){for(var l=a-o,c=id._segmentsCount(Math.abs(l)*i,40*Math.ceil(Math.abs(l)/Bl.f)),h=l/(2*c),d=2*h,f=Math.cos(h),p=Math.sin(h),v=c-1,m=v%1/v,g=0;g<=v;++g){var y=h+o+d*(g+m*g),_=Math.cos(y),x=-Math.sin(y);u.push((f*_+p*x)*i+n,(f*-x+p*_)*i+r)}},t}(),xd=function(){function t(){}return t.curveLength=function(t,e,n,r,i,o,a,s){for(var u=0,l=0,c=0,h=0,d=0,f=0,p=0,v=0,m=0,g=0,y=0,_=t,x=e,b=1;b<=10;++b)g=_-(v=(p=(f=(d=1-(l=b/10))*d)*d)*t+3*f*l*n+3*d*(c=l*l)*i+(h=c*l)*a),y=x-(m=p*e+3*f*l*r+3*d*c*o+h*s),_=v,x=m,u+=Math.sqrt(g*g+y*y);return u},t.curveTo=function(e,n,r,i,o,a,s){var u=s[s.length-2],l=s[s.length-1];s.length-=2;var c=id._segmentsCount(t.curveLength(u,l,e,n,r,i,o,a)),h=0,d=0,f=0,p=0,v=0;s.push(u,l);for(var m=1,g=0;m<=c;++m)f=(d=(h=1-(g=m/c))*h)*h,v=(p=g*g)*g,s.push(f*u+3*d*g*e+3*h*p*r+v*o,f*l+3*d*g*n+3*h*p*i+v*a)},t}(),bd=function(){function t(){}return t.curveLength=function(t,e,n,r,i,o){var a=t-2*n+i,s=e-2*r+o,u=2*n-2*t,l=2*r-2*e,c=4*(a*a+s*s),h=4*(a*u+s*l),d=u*u+l*l,f=2*Math.sqrt(c+h+d),p=Math.sqrt(c),v=2*c*p,m=2*Math.sqrt(d),g=h/p;return(v*f+p*h*(f-m)+(4*d*c-h*h)*Math.log((2*p+g+f)/(g+m)))/(4*v)},t.curveTo=function(e,n,r,i,o){for(var a=o[o.length-2],s=o[o.length-1],u=id._segmentsCount(t.curveLength(a,s,e,n,r,i)),l=0,c=0,h=1;h<=u;++h){var d=h/u;l=a+(e-a)*d,c=s+(n-s)*d,o.push(l+(e+(r-e)*d-l)*d,c+(n+(i-n)*d-c)*d)}},t}(),Td=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,n){this.reset(),this.style=t,this.start=e,this.attribStart=n},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),wd=((gd={})[Bl.l.POLY]=ld,gd[Bl.l.CIRC]=cd,gd[Bl.l.ELIP]=cd,gd[Bl.l.RECT]={build:function(t){var e=t.shape,n=e.x,r=e.y,i=e.width,o=e.height,a=t.points;a.length=0,a.push(n,r,n+i,r,n+i,r+o,n,r+o)},triangulate:function(t,e){var n=t.points,r=e.points,i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},gd[Bl.l.RREC]=fd,gd),Ed=[],Sd=[],Ad=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=e,this.matrix=r,this.type=t.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),Md=new Bl.g,Rd=new Dl.a,Cd=function(t){function e(){var e=t.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new Dl.a,e.boundsDirty=-1,e}return sd(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Sd.push(this.drawCalls[t]);for(this.drawCalls.length=0,t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),Ed.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null);var i=new Ad(t,e,n,r);return this.graphicsData.push(i),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var n=new Ad(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,n=0;n<e.length;++n){var r=e[n];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(t,Md):Md.copyFrom(t),r.shape.contains(Md.x,Md.y))){var i=!1;if(r.holes)for(var o=0;o<r.holes.length;o++)if(r.holes[o].shape.contains(Md.x,Md.y)){i=!0;break}if(!i)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,n=this.graphicsData,r=null,i=null;this.batches.length>0&&(i=(r=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var a=n[o],s=a.fillStyle,u=a.lineStyle;wd[a.type].build(a),a.matrix&&this.transformPoints(a.points,a.matrix),(s.visible||u.visible)&&this.processHoles(a.holes);for(var l=0;l<2;l++){var c=0===l?s:u;if(c.visible){var h=c.texture.baseTexture,d=this.indices.length,f=this.points.length/2;h.wrapMode=Rh.s.REPEAT,0===l?this.processFill(a):this.processLine(a);var p=this.points.length/2-f;0!==p&&(r&&!this._compareStyles(i,c)&&(r.end(d,f),r=null),r||((r=Ed.pop()||new Td).begin(c,d,f),this.batches.push(r),i=c),this.addUvs(this.points,e,c.texture,f,p,c.matrix))}}}var v=this.indices.length,m=this.points.length/2;if(r&&r.end(v,m),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var g=m>65535&&t;this.indicesUint16=g?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&t.texture.baseTexture===e.texture.baseTexture&&t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var n=this.graphicsData[t],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(i&&!i.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,n=t.length;e<n;e++)for(var r=t[e],i=0;i<r.size;i++){var o=r.start+i;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,n=0;n<t.length;n++)if(t[n].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++ql.c._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Sd.push(this.drawCalls[e]);this.drawCalls.length=0;var n=this.colors,r=this.textureIds,i=Sd.pop();i||((i=new ql.d).texArray=new ql.g),i.texArray.count=0,i.start=0,i.size=0,i.type=Rh.f.TRIANGLES;var o=0,a=null,s=0,u=!1,l=Rh.f.TRIANGLES,c=0;for(this.drawCalls.push(i),e=0;e<this.batches.length;e++){var h=this.batches[e],d=h.style,f=d.texture.baseTexture;u!==!!d.native&&(l=(u=!!d.native)?Rh.f.LINES:Rh.f.TRIANGLES,a=null,o=8,t++),a!==f&&(a=f,f._batchEnabled!==t&&(8===o&&(t++,o=0,i.size>0&&((i=Sd.pop())||((i=new ql.d).texArray=new ql.g),this.drawCalls.push(i)),i.start=c,i.size=0,i.texArray.count=0,i.type=l),f.touched=1,f._batchEnabled=t,f._batchLocation=o,f.wrapMode=Rh.s.REPEAT,i.texArray.elements[i.texArray.count++]=f,o++)),i.size+=h.size,c+=h.size,s=f._batchLocation,this.addColors(n,d.color,d.alpha,h.attribSize,h.attribStart),this.addTextureIds(r,s,h.attribSize,h.attribStart)}ql.c._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(3*t.length*4),o=new Float32Array(i),a=new Uint32Array(i),s=0,u=0;u<t.length/2;u++)o[s++]=t[2*u],o[s++]=t[2*u+1],o[s++]=e[2*u],o[s++]=e[2*u+1],a[s++]=n[u],o[s++]=r[u];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?ld.triangulate(t,this):wd[t.type].triangulate(t,this)},e.prototype.processLine=function(t){md(t,this);for(var e=0;e<t.holes.length;e++)md(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var n=t[e];wd[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=Rd,n=Bl.d.IDENTITY;this._bounds.clear(),e.clear();for(var r=0;r<this.graphicsData.length;r++){var i=this.graphicsData[r],o=i.shape,a=i.type,s=i.lineStyle,u=i.matrix||Bl.d.IDENTITY,l=0;if(s&&s.visible&&(l=s.width,a!==Bl.l.POLY||i.fillStyle.visible?l*=Math.max(0,s.alignment):l*=Math.max(s.alignment,1-s.alignment)),n!==u&&(e.isEmpty()||(t.addBoundsMatrix(e,n),e.clear()),n=u),a===Bl.l.RECT||a===Bl.l.RREC){var c=o;e.addFramePad(c.x,c.y,c.x+c.width,c.y+c.height,l,l)}else if(a===Bl.l.CIRC){var h=o;e.addFramePad(h.x,h.y,h.x,h.y,h.radius+l,h.radius+l)}else if(a===Bl.l.ELIP){var d=o;e.addFramePad(d.x,d.y,d.x,d.y,d.width+l,d.height+l)}else{var f=o;t.addVerticesMatrix(n,f.points,0,f.points.length,l,l)}}e.isEmpty()||t.addBoundsMatrix(e,n),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var n=0;n<t.length/2;n++){var r=t[2*n],i=t[2*n+1];t[2*n]=e.a*r+e.c*i+e.tx,t[2*n+1]=e.b*r+e.d*i+e.ty}},e.prototype.addColors=function(t,e,n,r,i){void 0===i&&(i=0);var o=(e>>16)+(65280&e)+((255&e)<<16),a=Object(Ll.premultiplyTint)(o,n);t.length=Math.max(t.length,i+r);for(var s=0;s<r;s++)t[i+s]=a},e.prototype.addTextureIds=function(t,e,n,r){void 0===r&&(r=0),t.length=Math.max(t.length,r+n);for(var i=0;i<n;i++)t[r+i]=e},e.prototype.addUvs=function(t,e,n,r,i,o){void 0===o&&(o=null);for(var a=0,s=e.length,u=n.frame;a<i;){var l=t[2*(r+a)],c=t[2*(r+a)+1];if(o){var h=o.a*l+o.c*c+o.tx;c=o.b*l+o.d*c+o.ty,l=h}a++,e.push(l/u.width,c/u.height)}var d=n.baseTexture;(u.width<d.width||u.height<d.height)&&this.adjustUvs(e,n,s,i)},e.prototype.adjustUvs=function(t,e,n,r){for(var i=e.baseTexture,o=1e-6,a=n+2*r,s=e.frame,u=s.width/i.width,l=s.height/i.height,c=s.x/s.width,h=s.y/s.height,d=Math.floor(t[n]+o),f=Math.floor(t[n+1]+o),p=n+2;p<a;p+=2)d=Math.min(d,Math.floor(t[p]+o)),f=Math.min(f,Math.floor(t[p+1]+o));for(c-=d,h-=f,p=n;p<a;p+=2)t[p]=(t[p]+c)*u,t[p+1]=(t[p+1]+h)*l},e.BATCHABLE_SIZE=100,e}(ql.e),Pd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=$h.BUTT,e.join=Jh.MITER,e.miterLimit=10,e}return sd(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(od),Id=new Float32Array(3),Od={},kd=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new od,n._lineStyle=new Pd,n._matrix=null,n._holeMode=!1,n.state=ql.s.for2d(),n._geometry=e||new Cd,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=Rh.b.NORMAL,n}return sd(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,e,n,r,i){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=.5),void 0===i&&(i=!1),"number"==typeof t&&(t={width:t,color:e,alpha:n,alignment:r,native:i}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:ql.t.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:$h.BUTT,join:Jh.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Bl.h,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Bl.h,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,r=n[n.length-2],i=n[n.length-1];return r===t&&i===e||n.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,n,r){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),bd.curveTo(t,e,n,r,i),this},e.prototype.bezierCurveTo=function(t,e,n,r,i,o){return this._initCurve(),xd.curveTo(t,e,n,r,i,o,this.currentPath.points),this},e.prototype.arcTo=function(t,e,n,r,i){this._initCurve(t,e);var o=this.currentPath.points,a=_d.curveTo(t,e,n,r,i,o);if(a){var s=a.cx,u=a.cy,l=a.radius,c=a.startAngle,h=a.endAngle,d=a.anticlockwise;this.arc(s,u,l,c,h,d)}return this},e.prototype.arc=function(t,e,n,r,i,o){if(void 0===o&&(o=!1),r===i)return this;if(!o&&i<=r?i+=Bl.f:o&&r<=i&&(r+=Bl.f),0===i-r)return this;var a=t+Math.cos(r)*n,s=e+Math.sin(r)*n,u=this._geometry.closePointEps,l=this.currentPath?this.currentPath.points:null;if(l){var c=Math.abs(l[l.length-2]-a),h=Math.abs(l[l.length-1]-s);c<u&&h<u||l.push(a,s)}else this.moveTo(a,s),l=this.currentPath.points;return _d.arc(a,s,t,e,n,r,i,o,l),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:ql.t.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:ql.t.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,n,r){return this.drawShape(new Bl.j(t,e,n,r))},e.prototype.drawRoundedRect=function(t,e,n,r,i){return this.drawShape(new Bl.k(t,e,n,r,i))},e.prototype.drawCircle=function(t,e,n){return this.drawShape(new Bl.a(t,e,n))},e.prototype.drawEllipse=function(t,e,n,r){return this.drawShape(new Bl.c(t,e,n,r))},e.prototype.drawPolygon=function(){for(var t,e=arguments,n=[],r=0;r<arguments.length;r++)n[r]=e[r];var i=!0,o=n[0];o.points?(i=o.closeStroke,t=o.points):t=Array.isArray(n[0])?n[0]:n;var a=new Bl.h(t);return a.closeStroke=i,this.drawShape(a),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==Bl.l.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry,n=t.context.supports.uint32Indices;e.updateBatches(n),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(var r=0;r<n;r++){var i=t.batches[r],o=i.style.color,a=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),s=new Float32Array(t.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),u={vertexData:a,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*i.start,i.size),uvs:s,_batchRGB:Object(Ll.hex2rgb)(o),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=u}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,n=this.batches.length;e<n;e++){var r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),n=this._geometry,r=this.tint,i=this.worldAlpha,o=e.uniforms,a=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(r>>16&255)/255*i,o.tint[1]=(r>>8&255)/255*i,o.tint[2]=(255&r)/255*i,o.tint[3]=i,t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(var s=0,u=a.length;s<u;s++)this._renderDrawCallDirect(t,n.drawCalls[s])},e.prototype._renderDrawCallDirect=function(t,e){for(var n=e.texArray,r=e.type,i=e.size,o=e.start,a=n.count,s=0;s<a;s++)t.texture.bind(n.elements[s],s);t.geometry.draw(r,i,o)},e.prototype._resolveDirectShader=function(t){var e=this.shader,n=this.pluginName;if(!e){if(!Od[n]){for(var r=t.plugins[n].MAX_TEXTURES,i=new Int32Array(r),o=0;o<r;o++)i[o]=o;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new Bl.d,default:ql.v.from({uSamplers:i},!0)},s=t.plugins[n]._shader.program;Od[n]=new ql.r(s,a)}e=Od[n]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,n=e.minX,r=e.minY,i=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,n,r,i,o)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Object(Ll.hex2rgb)(this.tint,Id),e=0;e<this.batches.length;e++){var n=this.batches[e],r=n._batchRGB,i=(t[0]*r[0]*255<<16)+(t[1]*r[1]*255<<8)+(0|t[2]*r[2]*255);n._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,u=this._geometry.points,l=this.vertexData,c=0,h=0;h<u.length;h+=2){var d=u[h],f=u[h+1];l[c++]=n*d+i*f+a,l[c++]=o*f+r*d+s}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new Bl.g,e}(Dl.b),Nd=function(t,e){return(Nd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Ld=new Bl.g,Dd=new Uint16Array([0,1,2,0,2,3]),Fd=function(t){function e(e){var n=t.call(this)||this;return n._anchor=new Bl.e(n._onAnchorUpdate,n,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=Rh.b.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=e||ql.t.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=Dd,n.pluginName="batch",n.isSprite=!0,n._roundPixels=rd.b.ROUND_PIXELS,n}return function(t,e){function n(){this.constructor=t}Nd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Object(Ll.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Object(Ll.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,u=this.vertexData,l=t.trim,c=t.orig,h=this._anchor,d=0,f=0,p=0,v=0;if(l?(d=(f=l.x-h._x*c.width)+l.width,p=(v=l.y-h._y*c.height)+l.height):(d=(f=-h._x*c.width)+c.width,p=(v=-h._y*c.height)+c.height),u[0]=n*f+i*v+a,u[1]=o*v+r*f+s,u[2]=n*d+i*v+a,u[3]=o*v+r*d+s,u[4]=n*d+i*p+a,u[5]=o*p+r*d+s,u[6]=n*f+i*p+a,u[7]=o*p+r*f+s,this._roundPixels)for(var m=rd.b.RESOLUTION,g=0;g<u.length;++g)u[g]=Math.round((u[g]*m|0)/m)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,n=t.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,l=i.tx,c=i.ty,h=-r._x*n.width,d=h+n.width,f=-r._y*n.height,p=f+n.height;e[0]=o*h+s*f+l,e[1]=u*f+a*h+c,e[2]=o*d+s*f+l,e[3]=u*f+a*d+c,e[4]=o*d+s*p+l,e[5]=u*p+a*d+c,e[6]=o*h+s*p+l,e[7]=u*p+a*h+c},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new Dl.a),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Bl.j),e=this._localBoundsRect),this._localBounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Ld);var e=this._texture.orig.width,n=this._texture.orig.height,r=-e*this.anchor.x,i=0;return Ld.x>=r&&Ld.x<r+e&&(i=-n*this.anchor.y,Ld.y>=i&&Ld.y<i+n)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var n="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},e.from=function(t,n){return new e(t instanceof ql.t?t:ql.t.from(t,n))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Object(Ll.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Object(Ll.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ql.t.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(Dl.b),Bd=function(t,e){return(Bd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(yd||(yd={}));var Ud={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:yd.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Gd=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],jd=function(){function t(t){this.styleID=0,this.reset(),Vd(this,t,t)}return t.prototype.clone=function(){var e={};return Vd(e,this,Ud),new t(e)},t.prototype.reset=function(){Vd(this,Ud,Ud)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=zd(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=zd(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=zd(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var n=e.length-1;n>=0;n--){var r=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&Gd.indexOf(r)<0&&(r='"'+r+'"'),e[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function Hd(t){return"number"==typeof t?Object(Ll.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function zd(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Hd(t[e]);return t}return Hd(t)}function Vd(t,e,n){for(var r in n)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}var Wd=function(){function t(t,e,n,r,i,o,a,s,u){this.text=t,this.style=e,this.width=n,this.height=r,this.lines=i,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=u}return t.measureText=function(e,n,r,i){void 0===i&&(i=t._canvas),r=null==r?n.wordWrap:r;var o=n.toFontString(),a=t.measureFont(o);0===a.fontSize&&(a.fontSize=n.fontSize,a.ascent=n.fontSize);var s=i.getContext("2d");s.font=o;for(var u=(r?t.wordWrap(e,n,i):e).split(/(?:\r\n|\r|\n)/),l=new Array(u.length),c=0,h=0;h<u.length;h++){var d=s.measureText(u[h]).width+(u[h].length-1)*n.letterSpacing;l[h]=d,c=Math.max(c,d)}var f=c+n.strokeThickness;n.dropShadow&&(f+=n.dropShadowDistance);var p=n.lineHeight||a.fontSize+n.strokeThickness,v=Math.max(p,a.fontSize+n.strokeThickness)+(u.length-1)*(p+n.leading);return n.dropShadow&&(v+=n.dropShadowDistance),new t(e,n,f,v,u,l,p+n.leading,c,a)},t.wordWrap=function(e,n,r){void 0===r&&(r=t._canvas);for(var i=r.getContext("2d"),o=0,a="",s="",u=Object.create(null),l=n.letterSpacing,c=n.whiteSpace,h=t.collapseSpaces(c),d=t.collapseNewlines(c),f=!h,p=n.wordWrapWidth+l,v=t.tokenize(e),m=0;m<v.length;m++){var g=v[m];if(t.isNewline(g)){if(!d){s+=t.addLine(a),f=!h,a="",o=0;continue}g=" "}if(h){var y=t.isBreakingSpace(g),_=t.isBreakingSpace(a[a.length-1]);if(y&&_)continue}var x=t.getFromCache(g,l,u,i);if(x>p)if(""!==a&&(s+=t.addLine(a),a="",o=0),t.canBreakWords(g,n.breakWords))for(var b=t.wordWrapSplit(g),T=0;T<b.length;T++){for(var w=b[T],E=1;b[T+E];){var S=b[T+E],A=w[w.length-1];if(t.canBreakChars(A,S,g,T,n.breakWords))break;w+=S,E++}T+=w.length-1;var M=t.getFromCache(w,l,u,i);M+o>p&&(s+=t.addLine(a),f=!1,a="",o=0),a+=w,o+=M}else{a.length>0&&(s+=t.addLine(a),a="",o=0);var R=m===v.length-1;s+=t.addLine(g,!R),f=!1,a="",o=0}else x+o>p&&(f=!1,s+=t.addLine(a),a="",o=0),(a.length>0||!t.isBreakingSpace(g)||f)&&(a+=g,o+=x)}return s+t.addLine(a,!1)},t.addLine=function(e,n){return void 0===n&&(n=!0),e=t.trimRight(e),n?e+"\n":e},t.getFromCache=function(t,e,n,r){var i=n[t];if("number"!=typeof i){var o=t.length*e;i=r.measureText(t).width+o,n[t]=i}return i},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var n=e.length-1;n>=0;n--){var r=e[n];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,n){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var n=[],r="";if("string"!=typeof e)return n;for(var i=0;i<e.length;i++){var o=e[i],a=e[i+1];t.isBreakingSpace(o,a)||t.isNewline(o)?(""!==r&&(n.push(r),r=""),n.push(o)):r+=o}return""!==r&&n.push(r),n},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,n,r,i){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var n={ascent:0,descent:0,fontSize:0},r=t._canvas,i=t._context;i.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),u=Math.ceil(t.HEIGHT_MULTIPLIER*s);s=s*t.BASELINE_MULTIPLIER|0,r.width=a,r.height=u,i.fillStyle="#f00",i.fillRect(0,0,a,u),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var l=i.getImageData(0,0,a,u).data,c=l.length,h=4*a,d=0,f=0,p=!1;for(d=0;d<s;++d){for(var v=0;v<h;v+=4)if(255!==l[f+v]){p=!0;break}if(p)break;f+=h}for(n.ascent=s-d,f=c-h,p=!1,d=u;d>s;--d){for(v=0;v<h;v+=4)if(255!==l[f+v]){p=!0;break}if(p)break;f-=h}return n.descent=d-s,n.fontSize=n.ascent+n.descent,t._fonts[e]=n,n},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var e=void 0;try{var n=new OffscreenCanvas(0,0),r=n.getContext("2d");if(r&&r.measureText)return t.__canvas=n,n;e=document.createElement("canvas")}catch(t){e=document.createElement("canvas")}e.width=e.height=10,t.__canvas=e}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d")),t.__context},enumerable:!1,configurable:!0}),t}();Wd._fonts={},Wd.METRICS_STRING="|\xc9q\xc5",Wd.BASELINE_SYMBOL="M",Wd.BASELINE_MULTIPLIER=1.4,Wd.HEIGHT_MULTIPLIER=2,Wd._newlines=[10,13],Wd._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Xd={texture:!0,children:!1,baseTexture:!0},Yd=function(t){function e(e,n,r){var i=this,o=!1;r||(r=document.createElement("canvas"),o=!0),r.width=3,r.height=3;var a=ql.t.from(r);return a.orig=new Bl.j,a.trim=new Bl.j,(i=t.call(this,a)||this)._ownCanvas=o,i.canvas=r,i.context=i.canvas.getContext("2d"),i._resolution=rd.b.RESOLUTION,i._autoResolution=!0,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=e,i.style=n,i.localStyleID=-1,i}return function(t,e){function n(){this.constructor=t}Bd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.updateText=function(t){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),this.dirty||!t){this._font=this._style.toFontString();var r,i,o=this.context,a=Wd.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=a.width,u=a.height,l=a.lines,c=a.lineHeight,h=a.lineWidths,d=a.maxLineWidth,f=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+2*n.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,u)+2*n.padding)*this._resolution),o.scale(this._resolution,this._resolution),o.clearRect(0,0,this.canvas.width,this.canvas.height),o.font=this._font,o.lineWidth=n.strokeThickness,o.textBaseline=n.textBaseline,o.lineJoin=n.lineJoin,o.miterLimit=n.miterLimit;for(var p=n.dropShadow?2:1,v=0;v<p;++v){var m=n.dropShadow&&0===v,g=m?Math.ceil(Math.max(1,u)+2*n.padding):0,y=g*this._resolution;if(m){o.fillStyle="black",o.strokeStyle="black";var _=n.dropShadowColor,x=Object(Ll.hex2rgb)("number"==typeof _?_:Object(Ll.string2hex)(_)),b=n.dropShadowBlur*this._resolution,T=n.dropShadowDistance*this._resolution;o.shadowColor="rgba("+255*x[0]+","+255*x[1]+","+255*x[2]+","+n.dropShadowAlpha+")",o.shadowBlur=b,o.shadowOffsetX=Math.cos(n.dropShadowAngle)*T,o.shadowOffsetY=Math.sin(n.dropShadowAngle)*T+y}else o.fillStyle=this._generateFillStyle(n,l,a),o.strokeStyle=n.stroke,o.shadowColor="black",o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0;var w=(c-f.fontSize)/2;(!e.nextLineHeightBehavior||c-f.fontSize<0)&&(w=0);for(var E=0;E<l.length;E++)r=n.strokeThickness/2,i=n.strokeThickness/2+E*c+f.ascent+w,"right"===n.align?r+=d-h[E]:"center"===n.align&&(r+=(d-h[E])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(l[E],r+n.padding,i+n.padding-g,!0),n.fill&&this.drawLetterSpacing(l[E],r+n.padding,i+n.padding-g)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,n,r,i){void 0===i&&(i=!1);var o=this._style.letterSpacing,a=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===o||a)return a&&(this.context.letterSpacing=o,this.context.textLetterSpacing=o),void(i?this.context.strokeText(t,n,r):this.context.fillText(t,n,r));for(var s=n,u=Array.from?Array.from(t):t.split(""),l=this.context.measureText(t).width,c=0,h=0;h<u.length;++h){var d=u[h];i?this.context.strokeText(d,s,r):this.context.fillText(d,s,r);for(var f="",p=h+1;p<u.length;++p)f+=u[p];s+=l-(c=this.context.measureText(f).width)+o,l=c}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=Object(Ll.trimCanvas)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var n=this._texture,r=this._style,i=r.trim?0:r.padding,o=n.baseTexture;n.trim.width=n._frame.width=t.width/this._resolution,n.trim.height=n._frame.height=t.height/this._resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),n.updateUvs(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.updateTransform=function(){this.updateText(!0),t.prototype.updateTransform.call(this)},e.prototype.getBounds=function(e,n){return this.updateText(!0),-1===this._textureID&&(e=!1),t.prototype.getBounds.call(this,e,n)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,n){var r,i=t.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];var o=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,s=this.canvas.width/this._resolution-o-2*a,u=this.canvas.height/this._resolution-o-2*a,l=i.slice(),c=t.fillGradientStops.slice();if(!c.length)for(var h=l.length+1,d=1;d<h;++d)c.push(d/h);if(l.unshift(i[0]),c.unshift(0),l.push(i[i.length-1]),c.push(1),t.fillGradientType===yd.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,a,s/2,u+a);var f=n.fontProperties.fontSize+t.strokeThickness;for(d=0;d<e.length;d++){var p=n.lineHeight*(d-1)+f,v=n.lineHeight*d,m=v;d>0&&p>v&&(m=(v+p)/2);var g=v+f,y=n.lineHeight*(d+1),_=g;d+1<e.length&&y<g&&(_=(g+y)/2);for(var x=(_-m)/u,b=0;b<l.length;b++){var T;T="number"==typeof c[b]?c[b]:b/l.length;var w=Math.min(1,Math.max(0,m/u+T*x));w=Number(w.toFixed(5)),r.addColorStop(w,l[b])}}}else{r=this.context.createLinearGradient(a,u/2,s+a,u/2);var E=l.length+1,S=1;for(d=0;d<l.length;d++){var A;A="number"==typeof c[d]?c[d]:S/E,r.addColorStop(A,l[d]),S++}}return r},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},Xd,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=Object(Ll.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=Object(Ll.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof jd?t:new jd(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(Fd);rd.b.UPLOADS_PER_FRAME=4;var qd=function(t,e){return(qd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Zd=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function Qd(t,e){var n=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof ql.t){var i=t._textures[r].baseTexture;-1===e.indexOf(i)&&(e.push(i),n=!0)}return n}function Kd(t,e){if(t.baseTexture instanceof ql.c){var n=t.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function Jd(t,e){if(t._texture&&t._texture instanceof ql.t){var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function $d(t,e){return e instanceof Yd&&(e.updateText(!0),!0)}function tf(t,e){if(e instanceof jd){var n=e.toFontString();return Wd.measureFont(n),!0}return!1}function ef(t,e){if(t instanceof Yd){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function nf(t,e){return t instanceof jd&&(-1===e.indexOf(t)&&e.push(t),!0)}var rf=function(){function t(t){var e=this;this.limiter=new Zd(rd.b.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(ef),this.registerFindHook(nf),this.registerFindHook(Qd),this.registerFindHook(Kd),this.registerFindHook(Jd),this.registerUploadHook($d),this.registerUploadHook(tf)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,Ul.a.system.addOnce(this.tick,this,Ul.c.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)Ul.a.system.addOnce(this.tick,this,Ul.c.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);for(this.completes.length=0,n=0,r=i.length;n<r;n++)i[n]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Dl.b)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&Ul.a.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function of(t,e){return e instanceof ql.c&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function af(t,e){if(!(e instanceof kd))return!1;var n=e.geometry;e.finishPoly(),n.updateBatches();for(var r=n.batches,i=0;i<r.length;i++){var o=r[i].style.texture;o&&of(t,o.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function sf(t,e){return t instanceof kd&&(e.push(t),!0)}var uf=function(t){function e(e){var n=t.call(this,e)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(sf),n.registerUploadHook(of),n.registerUploadHook(af),n}return function(t,e){function n(){this.constructor=t}qd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(rf),lf=(function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds}}(),function(){function t(t,e,n){void 0===n&&(n=null),this._texture=t instanceof ql.t?t:null,this.baseTexture=t instanceof ql.c?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,n=Object(Ll.getResolutionOfUrl)(t,null);return null===n&&(n=void 0!==e?parseFloat(e):1),1!==n&&this.baseTexture.setResolution(n),n},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var n=e,r=t.BATCH_SIZE;n-e<r&&n<this._frameKeys.length;){var i=this._frameKeys[n],o=this._frames[i],a=o.frame;if(a){var s,u=null,l=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,c=new Bl.j(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s=o.rotated?new Bl.j(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new Bl.j(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(u=new Bl.j(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new ql.t(this.baseTexture,s,c,u,o.rotated?2:0,o.anchor),ql.t.addToCache(this.textures[i],i)}n++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var n=0;n<t[e].length;n++){var r=t[e][n];this.animations[e].push(this.textures[r])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var n in void 0===t&&(t=!1),this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}()),cf=function(){function t(){}return t.use=function(e,n){var r,i,o=this,a=e.name+"_image";if(e.data&&e.type===gh.TYPE.JSON&&e.data.frames&&!o.resources[a]){var s=null===(i=null===(r=e.data)||void 0===r?void 0:r.meta)||void 0===i?void 0:i.related_multi_packs;if(Array.isArray(s))for(var u=function(t){if("string"!=typeof t)return"continue";var n=t.replace(".json",""),r=Ll.url.resolve(e.url.replace(o.baseUrl,""),t);if(o.resources[n]||Object.values(o.resources).some((function(t){return Ll.url.format(Ll.url.parse(t.url))===r})))return"continue";var i={crossOrigin:e.crossOrigin,loadType:gh.LOAD_TYPE.XHR,xhrType:gh.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};o.add(n,r,i)},l=0,c=s;l<c.length;l++)u(c[l]);var h={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},d=t.getResourcePath(e,o.baseUrl);o.add(a,d,h,(function(t){if(t.error)n(t.error);else{var r=new lf(t.texture,e.data,e.url);r.parse((function(){e.spritesheet=r,e.textures=r.textures,n()}))}}))}else n()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:Ll.url.resolve(t.url.replace(e,""),t.data.meta.image)},t}(),hf=function(t,e){return(hf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function df(t,e){function n(){this.constructor=t}hf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ff=new Bl.g,pf=function(t){function e(e,n,r){void 0===n&&(n=100),void 0===r&&(r=100);var i=t.call(this,e)||this;return i.tileTransform=new Bl.m,i._width=n,i._height=r,i.uvMatrix=i.texture.uvMatrix||new ql.u(e),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}return df(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,n,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Bl.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,ff);var e=this._width,n=this._height,r=-e*this.anchor._x;if(ff.x>=r&&ff.x<r+e){var i=-n*this.anchor._y;if(ff.y>=i&&ff.y<i+n)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,n){return new e(t instanceof ql.t?t:ql.t.from(t,n),n.width,n.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(Fd),vf="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",mf=new Bl.d,gf=function(t){function e(e){var n=t.call(this,e)||this;return e.runners.contextChange.add(n),n.quad=new ql.o,n.state=ql.s.for2d(),n}return df(e,t),e.prototype.contextChange=function(){var t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=ql.r.from(vf,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",e),this.shader=t.context.webGLVersion>1?ql.r.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",e):ql.r.from(vf,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",e)},e.prototype.render=function(t){var e=this.renderer,n=this.quad,r=n.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y);var i=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;(r=n.uvs)[0]=r[6]=-i,r[1]=r[3]=-o,r[2]=r[4]=1-i,r[5]=r[7]=1-o,n.invalidate();var a=t._texture,s=a.baseTexture,u=t.tileTransform.localTransform,l=t.uvMatrix,c=s.isPowerOfTwo&&a.frame.width===s.width&&a.frame.height===s.height;c&&(s._glTextures[e.CONTEXT_UID]?c=s.wrapMode!==Rh.s.CLAMP:s.wrapMode===Rh.s.CLAMP&&(s.wrapMode=Rh.s.REPEAT));var h=c?this.simpleShader:this.shader,d=a.width,f=a.height,p=t._width,v=t._height;mf.set(u.a*d/p,u.b*d/v,u.c*f/p,u.d*f/v,u.tx/p,u.ty/v),mf.invert(),c?mf.prepend(l.mapCoord):(h.uniforms.uMapCoord=l.mapCoord.toArray(!0),h.uniforms.uClampFrame=l.uClampFrame,h.uniforms.uClampOffset=l.uClampOffset),h.uniforms.uTransform=mf.toArray(!0),h.uniforms.uColor=Object(Ll.premultiplyTintToRgba)(t.tint,t.worldAlpha,h.uniforms.uColor,s.alphaMode),h.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),h.uniforms.uSampler=a,e.shader.bind(h),e.geometry.bind(n),this.state.blendMode=Object(Ll.correctBlendMode)(t.blendMode,s.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(ql.m),yf=n(8),_f=function(t,e){return(_f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},xf=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},bf=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var r in e){var i=e[r].match(/^[a-z]+/gm)[0],o=e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var s in o){var u=o[s].split("="),l=u[0],c=u[1].replace(/"/gm,""),h=parseFloat(c),d=isNaN(h)?c:h;a[l]=d}n[i].push(a)}var f=new xf;return n.info.forEach((function(t){return f.info.push({face:t.face,size:parseInt(t.size,10)})})),n.common.forEach((function(t){return f.common.push({lineHeight:parseInt(t.lineHeight,10)})})),n.page.forEach((function(t){return f.page.push({id:parseInt(t.id,10),file:t.file})})),n.char.forEach((function(t){return f.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),n.kerning.forEach((function(t){return f.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),n.distanceField.forEach((function(t){return f.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType})})),f},t}(),Tf=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new xf,n=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),i=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),s=t.getElementsByTagName("distanceField"),u=0;u<n.length;u++)e.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(u=0;u<r.length;u++)e.common.push({lineHeight:parseInt(r[u].getAttribute("lineHeight"),10)});for(u=0;u<i.length;u++)e.page.push({id:parseInt(i[u].getAttribute("id"),10)||0,file:i[u].getAttribute("file")});for(u=0;u<o.length;u++){var l=o[u];e.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(u=0;u<a.length;u++)e.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(u=0;u<s.length;u++)e.distanceField.push({fieldType:s[u].getAttribute("fieldType"),distanceRange:parseInt(s[u].getAttribute("distanceRange"),10)});return e},t}(),wf=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return Tf.test(e)}return!1},t.parse=function(t){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return Tf.parse(e)},t}(),Ef=[bf,Tf,wf];function Sf(t){for(var e=0;e<Ef.length;e++)if(Ef[e].test(t))return Ef[e];return null}function Af(t,e,n,r,i,o,a){var s=n.text,u=n.fontProperties;e.translate(r,i),e.scale(o,o);var l=a.strokeThickness/2,c=-a.strokeThickness/2;if(e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=function(t,e,n,r,i,o){var a,s=n.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var u=n.dropShadow?n.dropShadowDistance:0,l=n.padding||0,c=t.width/r-u-2*l,h=t.height/r-u-2*l,d=s.slice(),f=n.fillGradientStops.slice();if(!f.length)for(var p=d.length+1,v=1;v<p;++v)f.push(v/p);if(d.unshift(s[0]),f.unshift(0),d.push(s[s.length-1]),f.push(1),n.fillGradientType===yd.LINEAR_VERTICAL){a=e.createLinearGradient(c/2,l,c/2,h+l);var m=0,g=(o.fontProperties.fontSize+n.strokeThickness)/h;for(v=0;v<i.length;v++)for(var y=o.lineHeight*v,_=0;_<d.length;_++){var x=y/h+("number"==typeof f[_]?f[_]:_/d.length)*g,b=Math.max(m,x);b=Math.min(b,1),a.addColorStop(b,d[_]),m=b}}else{a=e.createLinearGradient(l,h/2,c+l,h/2);var T=d.length+1,w=1;for(v=0;v<d.length;v++){var E;E="number"==typeof f[v]?f[v]:w/T,a.addColorStop(E,d[v]),w++}}return a}(t,e,a,o,[s],n),e.strokeStyle=a.stroke,a.dropShadow){var h=a.dropShadowColor,d=Object(Ll.hex2rgb)("number"==typeof h?h:Object(Ll.string2hex)(h)),f=a.dropShadowBlur*o,p=a.dropShadowDistance*o;e.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+a.dropShadowAlpha+")",e.shadowBlur=f,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*p,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;a.stroke&&a.strokeThickness&&e.strokeText(s,l,c+n.lineHeight-u.descent),a.fill&&e.fillText(s,l,c+n.lineHeight-u.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Mf(t){return Array.from?Array.from(t):t.split("")}function Rf(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var Cf=function(){function t(t,e,n){var r,i,o=t.info[0],a=t.common[0],s=t.page[0],u=t.distanceField[0],l=Object(Ll.getResolutionOfUrl)(s.file),c={};this._ownsTextures=n,this.font=o.face,this.size=o.size,this.lineHeight=a.lineHeight/l,this.chars={},this.pageTextures=c;for(var h=0;h<t.page.length;h++){var d=t.page[h],f=d.id,p=d.file;c[f]=e instanceof Array?e[h]:e[p],(null==u?void 0:u.fieldType)&&"none"!==u.fieldType&&(c[f].baseTexture.alphaMode=Rh.a.NO_PREMULTIPLIED_ALPHA)}for(h=0;h<t.char.length;h++){var v=t.char[h],m=(f=v.id,v.page),g=t.char[h],y=g.x,_=g.y,x=g.width,b=g.height,T=g.xoffset,w=g.yoffset,E=g.xadvance;y/=l,_/=l,x/=l,b/=l,T/=l,w/=l,E/=l;var S=new Bl.j(y+c[m].frame.x/l,_+c[m].frame.y/l,x,b);this.chars[f]={xOffset:T,yOffset:w,xAdvance:E,kerning:{},texture:new ql.t(c[m].baseTexture,S),page:m}}for(h=0;h<t.kerning.length;h++){var A=t.kerning[h],M=A.first,R=A.second,C=A.amount;M/=l,R/=l,C/=l,this.chars[R]&&(this.chars[R].kerning[M]=C)}this.distanceFieldRange=null==u?void 0:u.distanceRange,this.distanceFieldType=null!==(i=null===(r=null==u?void 0:u.fieldType)||void 0===r?void 0:r.toLowerCase())&&void 0!==i?i:"none"}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,n,r){var i;if(e instanceof xf)i=e;else{var o=Sf(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}n instanceof ql.t&&(n=[n]);var a=new t(i,n,r);return t.available[a.font]=a,a},t.uninstall=function(e){var n=t.available[e];if(!n)throw new Error("No font found named '"+e+"'");n.destroy(),delete t.available[e]},t.from=function(e,n,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},t.defaultOptions,r),o=i.chars,a=i.padding,s=i.resolution,u=i.textureWidth,l=i.textureHeight,c=function(t){"string"==typeof t&&(t=[t]);for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var s=o,u=a;s<=u;s++)e.push(String.fromCharCode(s))}else e.push.apply(e,Mf(i))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(o),h=n instanceof jd?n:new jd(n),d=u,f=new xf;f.info[0]={face:h.fontFamily,size:h.fontSize},f.common[0]={lineHeight:h.fontSize};for(var p,v,m,g=0,y=0,_=0,x=[],b=0;b<c.length;b++){p||((p=document.createElement("canvas")).width=u,p.height=l,v=p.getContext("2d"),m=new ql.c(p,{resolution:s}),x.push(new ql.t(m)),f.page.push({id:x.length-1,file:""}));var T=Wd.measureText(c[b],h,!1,p),w=T.width,E=Math.ceil(T.height),S=Math.ceil(("italic"===h.fontStyle?2:1)*w);if(y>=l-E*s){if(0===y)throw new Error("[BitmapFont] textureHeight "+l+"px is too small for "+h.fontSize+"px fonts");--b,p=null,v=null,m=null,y=0,g=0,_=0}else if(_=Math.max(E+T.fontProperties.descent,_),S*s+g>=d)--b,y+=_*s,y=Math.ceil(y),g=0,_=0;else{Af(p,v,T,g,y,s,h);var A=Rf(T.text);f.char.push({id:A,page:x.length-1,x:g/s,y:y/s,width:S,height:E,xoffset:0,yoffset:0,xadvance:Math.ceil(w-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0))}),g+=(S+2*a)*s,g=Math.ceil(g)}}b=0;for(var M=c.length;b<M;b++)for(var R=c[b],C=0;C<M;C++){var P=c[C],I=v.measureText(R).width,O=v.measureText(P).width,k=v.measureText(R+P).width-(I+O);k&&f.kerning.push({first:Rf(R),second:Rf(P),amount:k})}var N=new t(f,x,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=N,N},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),Pf=[],If=[],Of=[],kf=(function(t){function e(n,r){void 0===r&&(r={});var i=t.call(this)||this;i._tint=16777215;var o=Object.assign({},e.styleDefaults,r),a=o.align,s=o.tint,u=o.maxWidth,l=o.letterSpacing,c=o.fontName,h=o.fontSize;if(!Cf.available[c])throw new Error('Missing BitmapFont "'+c+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=a,i._tint=s,i._fontName=c,i._fontSize=h||Cf.available[c].size,i.text=n,i._maxWidth=u,i._maxLineHeight=0,i._letterSpacing=l,i._anchor=new Bl.e((function(){i.dirty=!0}),i,0,0),i._roundPixels=rd.b.ROUND_PIXELS,i.dirty=!0,i._resolution=rd.b.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}(function(t,e){function n(){this.constructor=t}_f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.updateText=function(){for(var t,e=Cf.available[this._fontName],n=this._fontSize/e.size,r=new Bl.g,i=[],o=[],a=[],s=Mf(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),u=this._maxWidth*e.size/this._fontSize,l="none"===e.distanceFieldType?Pf:If,c=null,h=0,d=0,f=0,p=-1,v=0,m=0,g=0,y=0,_=0;_<s.length;_++){var x=Rf(G=s[_]);if(/(?:\s)/.test(G)&&(p=_,v=h,y++),"\r"!==G&&"\n"!==G){var b=e.chars[x];if(b){c&&b.kerning[c]&&(r.x+=b.kerning[c]);var T=Of.pop()||{texture:ql.t.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Bl.g};T.texture=b.texture,T.line=f,T.charCode=x,T.position.x=r.x+b.xOffset+this._letterSpacing/2,T.position.y=r.y+b.yOffset,T.prevSpaces=y,i.push(T),h=T.position.x+Math.max(b.xAdvance,b.texture.orig.width),r.x+=b.xAdvance+this._letterSpacing,g=Math.max(g,b.yOffset+b.texture.height),c=x,-1!==p&&u>0&&r.x>u&&(++m,Object(Ll.removeItems)(i,1+p-m,1+_-p),_=p,p=-1,o.push(v),a.push(i.length>0?i[i.length-1].prevSpaces:0),d=Math.max(d,v),f++,r.x=0,r.y+=e.lineHeight,c=null,y=0)}}else o.push(h),a.push(-1),d=Math.max(d,h),++f,++m,r.x=0,r.y+=e.lineHeight,c=null,y=0}var w=s[s.length-1];"\r"!==w&&"\n"!==w&&(/(?:\s)/.test(w)&&(h=v),o.push(h),d=Math.max(d,h),a.push(-1));var E=[];for(_=0;_<=f;_++){var S=0;"right"===this._align?S=d-o[_]:"center"===this._align?S=(d-o[_])/2:"justify"===this._align&&(S=a[_]<0?0:(d-o[_])/a[_]),E.push(S)}var A=i.length,M={},R=[],C=this._activePagesMeshData;for(_=0;_<C.length;_++)l.push(C[_]);for(_=0;_<A;_++){var P=(H=i[_].texture).baseTexture.uid;if(!M[P]){if(!(Z=l.pop())){var I=new yf.b,O=void 0,k=void 0;"none"===e.distanceFieldType?(O=new yf.c(ql.t.EMPTY),k=Rh.b.NORMAL):(O=new yf.c(ql.t.EMPTY,{program:ql.n.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),k=Rh.b.NORMAL_NPM);var N=new yf.a(I,O);N.blendMode=k,Z={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:N,vertices:null,uvs:null,indices:null}}Z.index=0,Z.indexCount=0,Z.vertexCount=0,Z.uvsCount=0,Z.total=0;var L=this._textureCache;L[P]=L[P]||new ql.t(H.baseTexture),Z.mesh.texture=L[P],Z.mesh.tint=this._tint,R.push(Z),M[P]=Z}M[P].total++}for(_=0;_<C.length;_++)-1===R.indexOf(C[_])&&this.removeChild(C[_].mesh);for(_=0;_<R.length;_++)R[_].mesh.parent!==this&&this.addChild(R[_].mesh);for(var _ in this._activePagesMeshData=R,M){var D=(Z=M[_]).total;if(!((null===(t=Z.indices)||void 0===t?void 0:t.length)>6*D)||Z.vertices.length<2*yf.a.BATCHABLE_SIZE)Z.vertices=new Float32Array(8*D),Z.uvs=new Float32Array(8*D),Z.indices=new Uint16Array(6*D);else for(var F=Z.total,B=Z.vertices,U=4*F*2;U<B.length;U++)B[U]=0;Z.mesh.size=6*D}for(_=0;_<A;_++){var G,j=(G=i[_]).position.x+E[G.line]*("justify"===this._align?G.prevSpaces:1);this._roundPixels&&(j=Math.round(j));var H,z=j*n,V=G.position.y*n,W=M[(H=G.texture).baseTexture.uid],X=H.frame,Y=H._uvs,q=W.index++;W.indices[6*q+0]=0+4*q,W.indices[6*q+1]=1+4*q,W.indices[6*q+2]=2+4*q,W.indices[6*q+3]=0+4*q,W.indices[6*q+4]=2+4*q,W.indices[6*q+5]=3+4*q,W.vertices[8*q+0]=z,W.vertices[8*q+1]=V,W.vertices[8*q+2]=z+X.width*n,W.vertices[8*q+3]=V,W.vertices[8*q+4]=z+X.width*n,W.vertices[8*q+5]=V+X.height*n,W.vertices[8*q+6]=z,W.vertices[8*q+7]=V+X.height*n,W.uvs[8*q+0]=Y.x0,W.uvs[8*q+1]=Y.y0,W.uvs[8*q+2]=Y.x1,W.uvs[8*q+3]=Y.y1,W.uvs[8*q+4]=Y.x2,W.uvs[8*q+5]=Y.y2,W.uvs[8*q+6]=Y.x3,W.uvs[8*q+7]=Y.y3}for(var _ in this._textWidth=d*n,this._textHeight=(r.y+e.lineHeight)*n,M){var Z=M[_];if(0!==this.anchor.x||0!==this.anchor.y)for(var Q=0,K=this._textWidth*this.anchor.x,J=this._textHeight*this.anchor.y,$=0;$<Z.total;$++)Z.vertices[Q++]-=K,Z.vertices[Q++]-=J,Z.vertices[Q++]-=K,Z.vertices[Q++]-=J,Z.vertices[Q++]-=K,Z.vertices[Q++]-=J,Z.vertices[Q++]-=K,Z.vertices[Q++]-=J;this._maxLineHeight=g*n;var tt=Z.mesh.geometry.getBuffer("aVertexPosition"),et=Z.mesh.geometry.getBuffer("aTextureCoord"),nt=Z.mesh.geometry.getIndex();tt.data=Z.vertices,et.data=Z.uvs,nt.data=Z.indices,tt.update(),et.update(),nt.update()}for(_=0;_<i.length;_++)Of.push(i[_])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);var n=Cf.available[this._fontName],r=n.distanceFieldRange,i=n.distanceFieldType,o=n.size;if("none"!==i)for(var a=this.worldTransform,s=a.a,u=a.b,l=a.c,c=a.d,h=Math.sqrt(s*s+u*u),d=Math.sqrt(l*l+c*c),f=(Math.abs(h)+Math.abs(d))/2,p=this._fontSize/o,v=0,m=this._activePagesMeshData;v<m.length;v++)m[v].mesh.shader.uniforms.uFWidth=f*r*p*this._resolution;t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Cf.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){var n=this._textureCache;for(var r in n)n[r].destroy(),delete n[r];this._textureCache=null,t.prototype.destroy.call(this,e)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(Dl.b),function(){function t(){}return t.add=function(){gh.setExtensionXhrType("fnt",gh.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,n){var r=Sf(e.data);if(r)for(var i=t.getBaseUrl(this,e),o=r.parse(e.data),a={},s=function(t){a[t.metadata.pageFile]=t.texture,Object.keys(a).length===o.page.length&&(e.bitmapFont=Cf.install(o,a,!0),n())},u=0;u<o.page.length;++u){var l=o.page[u].file,c=i+l,h=!1;for(var d in this.resources){var f=this.resources[d];if(f.url===c){f.metadata.pageFile=l,f.texture?s(f):f.onAfterMiddleware.add(s),h=!0;break}}if(!h){var p={crossOrigin:e.crossOrigin,loadType:gh.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e};this.add(c,p,s)}}else n()},t.getBaseUrl=function(e,n){var r=n.isDataUrl?"":t.dirname(n.url);return n.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}()),Nf=function(t,e){return(Nf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Lf=function(t){function e(e){void 0===e&&(e=1);var n=t.call(this,ql.A,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return n.alpha=e,n}return function(t,e){function n(){this.constructor=t}Nf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(ql.k),Df=function(t,e){return(Df=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ff(t,e){function n(){this.constructor=t}Df(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Bf,Uf,Gf,jf,Hf,zf,Vf,Wf,Xf,Yf,qf,Zf,Qf,Kf,Jf,$f,tp,ep,np,rp={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},ip=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Bf||(Bf={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Uf||(Uf={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Gf||(Gf={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(jf||(jf={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Hf||(Hf={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(zf||(zf={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Vf||(Vf={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Wf||(Wf={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(Xf||(Xf={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Yf||(Yf={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(qf||(qf={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Zf||(Zf={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Qf||(Qf={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Kf||(Kf={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Jf||(Jf={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}($f||($f={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(tp||(tp={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(ep||(ep={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(np||(np={}));var op=function(t){function e(e,n,r,i,o){void 0===n&&(n=8),void 0===r&&(r=4),void 0===i&&(i=rd.b.FILTER_RESOLUTION),void 0===o&&(o=5);var a=this,s=function(t,e){var n,r=Math.ceil(t/2),i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";n=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var s=n.replace("%index%",a.toString());o+=s=s.replace("%sampleIndex%",a-(r-1)+".0"),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",t.toString())}(o,e),u=function(t){for(var e,n=rp[t],r=n.length,i=ip,o="",a=0;a<t;a++){var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString());e=a,a>=r&&(e=t-a-1),o+=s=s.replace("%value%",n[e].toString()),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",t.toString())}(o);return(a=t.call(this,s,u)||this).horizontal=e,a.resolution=i,a._quality=0,a.quality=r,a.blur=n,a}return Ff(e,t),e.prototype.apply=function(t,e,n,r){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/e.width):this.uniforms.strength=1/n.height*(n.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,r);else{var i=t.getFilterTexture(),o=t.renderer,a=e,s=i;this.state.blend=!1,t.applyFilter(this,a,s,Kf.CLEAR);for(var u=1;u<this.passes-1;u++){t.bindAndClear(a,Kf.BLIT),this.uniforms.uSampler=s;var l=s;s=a,a=l,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,s,n,r),t.returnFilterTexture(i)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(ql.k),ap=function(t){function e(e,n,r,i){void 0===e&&(e=8),void 0===n&&(n=4),void 0===r&&(r=rd.b.FILTER_RESOLUTION),void 0===i&&(i=5);var o=t.call(this)||this;return o.blurXFilter=new op(!0,e,n,r,i),o.blurYFilter=new op(!1,e,n,r,i),o.resolution=r,o.quality=n,o.blur=e,o.repeatEdgePixels=!1,o}return Ff(e,t),e.prototype.apply=function(t,e,n,r){var i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(i&&o){var a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,Kf.CLEAR),this.blurYFilter.apply(t,a,n,r),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,e,n,r):this.blurXFilter.apply(t,e,n,r)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(ql.k),sp=function(t,e){return(sp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},up=function(t){function e(){var e=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,ql.z,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",n)||this).alpha=1,e}return function(t,e){function n(){this.constructor=t}sp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var n=t;e&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.tint=function(t,e){var n=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.greyscale=function(t,e){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),i=1/3,o=(0,Math.sqrt)(i),a=[n+(1-n)*i,i*(1-n)-o*r,i*(1-n)+o*r,0,0,i*(1-n)+o*r,n+i*(1-n),i*(1-n)-o*r,0,0,i*(1-n)-o*r,i*(1-n)+o*r,n+i*(1-n),0,0,0,0,0,1,0];this._loadMatrix(a,e)},e.prototype.contrast=function(t,e){var n=(t||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var n=2*t/3+1,r=-.5*(n-1),i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,n,r,i){var o=((n=n||16770432)>>16&255)/255,a=(n>>8&255)/255,s=(255&n)/255,u=((r=r||3375104)>>16&255)/255,l=(r>>8&255)/255,c=(255&r)/255,h=[.3,.59,.11,0,0,o,a,s,t=t||.2,0,u,l,c,e=e||.15,0,o-u,a-l,s-c,0,0];this._loadMatrix(h,i)},e.prototype.night=function(t,e){var n=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.predator=function(t,e){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(ql.k);up.prototype.grayscale=up.prototype.greyscale;var lp,cp,hp,dp,fp,pp,vp,mp,gp,yp,_p,xp,bp,Tp,wp,Ep,Sp,Ap,Mp,Rp=function(t,e){return(Rp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Cp=function(t){function e(e,n){var r=this,i=new Bl.d;return e.renderable=!1,(r=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,r.maskMatrix=i,null==n&&(n=20),r.scale=new Bl.g(n,n),r}return function(t,e){function n(){this.constructor=t}Rp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.apply=function(t,e,n,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),a=Math.sqrt(i.c*i.c+i.d*i.d);0!==o&&0!==a&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/a,this.uniforms.rotation[3]=i.d/a),t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(ql.k),Pp=function(t,e){return(Pp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Ip=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function n(){this.constructor=t}Pp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(ql.k),Op=function(t,e){return(Op=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},kp=function(t){function e(e,n){void 0===e&&(e=.5),void 0===n&&(n=Math.random());var r=t.call(this,ql.z,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=e,r.seed=n,r}return function(t,e){function n(){this.constructor=t}Op(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(ql.k);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(lp||(lp={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(cp||(cp={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(hp||(hp={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(dp||(dp={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(fp||(fp={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(pp||(pp={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(vp||(vp={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(mp||(mp={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(gp||(gp={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(yp||(yp={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(_p||(_p={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(xp||(xp={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(bp||(bp={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Tp||(Tp={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(wp||(wp={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Ep||(Ep={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(Sp||(Sp={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Ap||(Ap={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Mp||(Mp={}));var Np=new Bl.d;Dl.c.prototype._cacheAsBitmap=!1,Dl.c.prototype._cacheData=null,Dl.c.prototype._cacheAsBitmapResolution=null,Dl.c.prototype._cacheAsBitmapMultisample=Ap.NONE;var Lp=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(Dl.c.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Lp),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),Dl.c.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},Dl.c.prototype._initCachedDisplayObject=function(t){var e;if(!this._cacheData||!this._cacheData.sprite){var n=this.alpha;this.alpha=1,t.batch.flush();var r=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var i=this.filters[0].padding;r.pad(i)}r.ceil(rd.b.RESOLUTION);var o=t.renderTexture.current,a=t.renderTexture.sourceFrame.clone(),s=t.renderTexture.destinationFrame.clone(),u=t.projection.transform,l=ql.p.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:null!==(e=this.cacheAsBitmapMultisample)&&void 0!==e?e:t.multisample}),c="cacheAsBitmap_"+Object(Ll.uid)();this._cacheData.textureCacheId=c,ql.c.addToCache(l.baseTexture,c),ql.t.addToCache(l,c);var h=this.transform.localTransform.copyTo(Np).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:h,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=u,t.renderTexture.bind(o,a,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var d=new Fd(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-r.x/r.width,d.anchor.y=-r.y/r.height,d.alpha=n,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}},Dl.c.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},Dl.c.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var r=t.context,i=t._projTransform;e.ceil(rd.b.RESOLUTION);var o=ql.p.create({width:e.width,height:e.height}),a="cacheAsBitmap_"+Object(Ll.uid)();this._cacheData.textureCacheId=a,ql.c.addToCache(o.baseTexture,a),ql.t.addToCache(o,a);var s=Np;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:s,skipUpdateTransform:!1}),t.context=r,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var u=new Fd(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-e.x/e.width,u.anchor.y=-e.y/e.height,u.alpha=n,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},Dl.c.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Dl.c.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Dl.c.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ql.c.removeFromCache(this._cacheData.textureCacheId),ql.t.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Dl.c.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},Dl.c.prototype.name=null,Dl.b.prototype.getChildByName=function(t,e){for(var n=0,r=this.children.length;n<r;n++)if(this.children[n].name===t)return this.children[n];if(e)for(n=0,r=this.children.length;n<r;n++)if(this.children[n].getChildByName){var i=this.children[n].getChildByName(t,!0);if(i)return i}return null},Dl.c.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new Bl.g),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t},n(16),n(12);var Dp=function(t,e){return(Dp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Fp=function(t){function e(e,n){void 0===n&&(n=!0);var r=t.call(this,e[0]instanceof ql.t?e[0]:e[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=n,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=e,r}return function(t,e){function n(){this.constructor=t}Dp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ul.a.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ul.a.shared.add(this.update,this,Ul.c.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var n=[],r=0;r<t.length;++r)n.push(ql.t.from(t[r]));return new e(n)},e.fromImages=function(t){for(var n=[],r=0;r<t.length;++r)n.push(ql.t.from(t[r]));return new e(n)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof ql.t)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ul.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ul.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(Fd);ql.q.registerPlugin("accessibility",Fl),ql.q.registerPlugin("extract",sh),ql.q.registerPlugin("interaction",Yl),ql.q.registerPlugin("particle",nd),ql.q.registerPlugin("prepare",uf),ql.q.registerPlugin("batch",ql.f),ql.q.registerPlugin("tilingSprite",gf),wh.registerPlugin(kf),wh.registerPlugin(Lh),wh.registerPlugin(Vh),wh.registerPlugin(Zh),wh.registerPlugin(cf),Zl.registerPlugin(Ul.b),Zl.registerPlugin(Eh);var Bp,Up={AlphaFilter:Lf,BlurFilter:ap,BlurFilterPass:op,ColorMatrixFilter:up,DisplacementFilter:Cp,FXAAFilter:Ip,NoiseFilter:kp},Gp=n(10),jp=n(34),Hp=function(){function t(){}return t.offsetPolygon=function(e,n){var r=[],i=e.length;n=t.isPolygonClockwise(e)?n:-1*n;for(var o=0;o<i;o+=2){var a=o-2;a<0&&(a+=i);var s=(o+2)%i,u=e[o]-e[a],l=e[o+1]-e[a+1],c=Math.sqrt(u*u+l*l);u/=c,l/=c;var h=-(l*=n),d=u*=n,f=[e[a]+h,e[a+1]+d],p=[e[o]+h,e[o+1]+d],v=e[s]-e[o],m=e[s+1]-e[o+1];v/=c=Math.sqrt(v*v+m*m),m/=c;var g=-(m*=n),y=v*=n,_=[e[o]+g,e[o+1]+y],x=[e[s]+g,e[s+1]+y],b=t.findIntersection(f[0],f[1],p[0],p[1],_[0],_[1],x[0],x[1]);b&&r.push.apply(r,b)}return r},t.findIntersection=function(t,e,n,r,i,o,a,s){var u=(s-o)*(n-t)-(a-i)*(r-e),l=(a-i)*(e-o)-(s-o)*(t-i);if(0===u)return 0===l&&0===(n-t)*(e-o)-(r-e)*(t-i)?[(t+n)/2,(e+r)/2]:null;var c=l/u;return[t+c*(n-t),e+c*(r-e)]},t.isPolygonClockwise=function(t){for(var e=0,n=0,r=t.length-2;n<t.length;r=n,n+=2)e+=(t[n]-t[r])*(t[n+1]+t[r+1]);return e>0},t}(),zp=function(){function t(t){this._svgMatrix=null,this._tempMatrix=new Bl.d,this.renderer=t}return t.prototype._calcCanvasStyle=function(t,e){var n;return t.texture&&t.texture.baseTexture!==ql.t.WHITE.baseTexture?t.texture.valid?(n=Gp.b.getTintedPattern(t.texture,e),this.setPatternTransform(n,t.matrix||Bl.d.IDENTITY)):n="#808080":n="#"+("00000"+(0|e).toString(16)).slice(-6),n},t.prototype.render=function(t){var e=this.renderer,n=e.context,r=t.worldAlpha,i=t.transform.worldTransform;e.setContextTransform(i),e.setBlendMode(t.blendMode);for(var o,a,s=t.geometry.graphicsData,u=(t.tint>>16&255)/255,l=(t.tint>>8&255)/255,c=(255&t.tint)/255,h=0;h<s.length;h++){var d=s[h],f=d.shape,p=d.fillStyle,v=d.lineStyle,m=0|d.fillStyle.color,g=0|d.lineStyle.color;if(d.matrix&&e.setContextTransform(i.copyTo(this._tempMatrix).append(d.matrix)),p.visible){var y=((m>>16&255)/255*u*255<<16)+((m>>8&255)/255*l*255<<8)+(255&m)/255*c*255;o=this._calcCanvasStyle(p,y)}if(v.visible){var _=((g>>16&255)/255*u*255<<16)+((g>>8&255)/255*l*255<<8)+(255&g)/255*c*255;a=this._calcCanvasStyle(v,_)}if(n.lineWidth=v.width,n.lineCap=v.cap,n.lineJoin=v.join,n.miterLimit=v.miterLimit,d.type===Bl.l.POLY){n.beginPath();var x=(C=f).points,b=d.holes,T=void 0,w=void 0,E=void 0,S=void 0,A=void 0;n.moveTo(x[0],x[1]);for(var M=2;M<x.length;M+=2)n.lineTo(x[M],x[M+1]);if(C.closeStroke&&n.closePath(),b.length>0){for(A=[],T=0,E=x[0],S=x[1],M=2;M+2<x.length;M+=2)T+=(x[M]-E)*(x[M+3]-S)-(x[M+2]-E)*(x[M+1]-S);for(var R=0;R<b.length;R++)if(x=b[R].shape.points){for(w=0,E=x[0],S=x[1],M=2;M+2<x.length;M+=2)w+=(x[M]-E)*(x[M+3]-S)-(x[M+2]-E)*(x[M+1]-S);if(w*T<0)for(n.moveTo(x[0],x[1]),M=2;M<x.length;M+=2)n.lineTo(x[M],x[M+1]);else for(n.moveTo(x[x.length-2],x[x.length-1]),M=x.length-4;M>=0;M-=2)n.lineTo(x[M],x[M+1]);b[R].shape.closeStroke&&n.closePath(),A[R]=w*T<0}}p.visible&&(n.globalAlpha=p.alpha*r,n.fillStyle=o,n.fill()),v.visible&&this.paintPolygonStroke(C,v,a,b,A,r,n)}else if(d.type===Bl.l.RECT){var C=f;if(p.visible&&(n.globalAlpha=p.alpha*r,n.fillStyle=o,n.fillRect(C.x,C.y,C.width,C.height)),v.visible){var P=v.width*(.5-(1-v.alignment)),I=C.width+2*P,O=C.height+2*P;n.globalAlpha=v.alpha*r,n.strokeStyle=a,n.strokeRect(C.x-P,C.y-P,I,O)}}else if(d.type===Bl.l.CIRC)C=f,n.beginPath(),n.arc(C.x,C.y,C.radius,0,2*Math.PI),n.closePath(),p.visible&&(n.globalAlpha=p.alpha*r,n.fillStyle=o,n.fill()),v.visible&&(.5!==v.alignment&&(P=v.width*(.5-(1-v.alignment)),n.beginPath(),n.arc(C.x,C.y,C.radius+P,0,2*Math.PI),n.closePath()),n.globalAlpha=v.alpha*r,n.strokeStyle=a,n.stroke());else if(d.type===Bl.l.ELIP){if(C=f,(z=1===v.alignment)||this.paintEllipse(C,p,v,o,r,n),v.visible){if(.5!==v.alignment){P=v.width*(.5-(1-v.alignment));var k=2*(C.width+P),N=2*(C.height+P),L=C.x-k/2,D=C.y-N/2,F=k/2*.5522848,B=N/2*.5522848,U=L+k,G=D+N,j=L+k/2,H=D+N/2;n.beginPath(),n.moveTo(L,H),n.bezierCurveTo(L,H-B,j-F,D,j,D),n.bezierCurveTo(j+F,D,U,H-B,U,H),n.bezierCurveTo(U,H+B,j+F,G,j,G),n.bezierCurveTo(j-F,G,L,H+B,L,H),n.closePath()}n.globalAlpha=v.alpha*r,n.strokeStyle=a,n.stroke()}z&&this.paintEllipse(C,p,v,o,r,n)}else if(d.type===Bl.l.RREC){var z;if(C=f,(z=1===v.alignment)||this.paintRoundedRectangle(C,p,v,o,r,n),v.visible){if(.5!==v.alignment){I=C.width,O=C.height,P=v.width*(.5-(1-v.alignment));var V=C.x-P,W=C.y-P,X=C.width+2*P,Y=C.height+2*P,q=P*(v.alignment>=1?Math.min(X/I,Y/O):Math.min(I/X,O/Y)),Z=C.radius+q,Q=Math.min(X,Y)/2;Z=Z>Q?Q:Z,n.beginPath(),n.moveTo(V,W+Z),n.lineTo(V,W+Y-Z),n.quadraticCurveTo(V,W+Y,V+Z,W+Y),n.lineTo(V+X-Z,W+Y),n.quadraticCurveTo(V+X,W+Y,V+X,W+Y-Z),n.lineTo(V+X,W+Z),n.quadraticCurveTo(V+X,W,V+X-Z,W),n.lineTo(V+Z,W),n.quadraticCurveTo(V,W,V,W+Z),n.closePath()}n.globalAlpha=v.alpha*r,n.strokeStyle=a,n.stroke()}z&&this.paintRoundedRectangle(C,p,v,o,r,n)}}},t.prototype.paintPolygonStroke=function(t,e,n,r,i,o,a){if(.5!==e.alignment){var s=e.width*(.5-(1-e.alignment)),u=Hp.offsetPolygon(t.points,s),l=void 0;a.beginPath(),a.moveTo(u[0],u[1]);for(var c=2;c<u.length;c+=2)a.lineTo(u[c],u[c+1]);t.closeStroke&&a.closePath();for(var h=0;h<r.length;h++){if(l=r[h].shape.points,u=Hp.offsetPolygon(l,s),i[h])for(a.moveTo(u[0],u[1]),c=2;c<u.length;c+=2)a.lineTo(u[c],u[c+1]);else for(a.moveTo(u[u.length-2],u[u.length-1]),c=u.length-4;c>=0;c-=2)a.lineTo(u[c],u[c+1]);r[h].shape.closeStroke&&a.closePath()}}a.globalAlpha=e.alpha*o,a.strokeStyle=n,a.stroke()},t.prototype.paintEllipse=function(t,e,n,r,i,o){var a=2*t.width,s=2*t.height,u=t.x-a/2,l=t.y-s/2,c=a/2*.5522848,h=s/2*.5522848,d=u+a,f=l+s,p=u+a/2,v=l+s/2;0===n.alignment&&o.save(),o.beginPath(),o.moveTo(u,v),o.bezierCurveTo(u,v-h,p-c,l,p,l),o.bezierCurveTo(p+c,l,d,v-h,d,v),o.bezierCurveTo(d,v+h,p+c,f,p,f),o.bezierCurveTo(p-c,f,u,v+h,u,v),o.closePath(),0===n.alignment&&o.clip(),e.visible&&(o.globalAlpha=e.alpha*i,o.fillStyle=r,o.fill()),0===n.alignment&&o.restore()},t.prototype.paintRoundedRectangle=function(t,e,n,r,i,o){var a=t.x,s=t.y,u=t.width,l=t.height,c=t.radius,h=Math.min(u,l)/2;c=c>h?h:c,0===n.alignment&&o.save(),o.beginPath(),o.moveTo(a,s+c),o.lineTo(a,s+l-c),o.quadraticCurveTo(a,s+l,a+c,s+l),o.lineTo(a+u-c,s+l),o.quadraticCurveTo(a+u,s+l,a+u,s+l-c),o.lineTo(a+u,s+c),o.quadraticCurveTo(a+u,s,a+u-c,s),o.lineTo(a+c,s),o.quadraticCurveTo(a,s,a,s+c),o.closePath(),0===n.alignment&&o.clip(),e.visible&&(o.globalAlpha=e.alpha*i,o.fillStyle=r,o.fill()),0===n.alignment&&o.restore()},t.prototype.setPatternTransform=function(t,e){if(!1!==this._svgMatrix){if(!this._svgMatrix){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(n&&n.createSVGMatrix&&(this._svgMatrix=n.createSVGMatrix()),!this._svgMatrix||!t.setTransform)return void(this._svgMatrix=!1)}this._svgMatrix.a=e.a,this._svgMatrix.b=e.b,this._svgMatrix.c=e.c,this._svgMatrix.d=e.d,this._svgMatrix.e=e.tx,this._svgMatrix.f=e.ty,t.setTransform(this._svgMatrix.inverse())}},t.prototype.destroy=function(){this.renderer=null,this._svgMatrix=null,this._tempMatrix=null},t}(),Vp=new Bl.d;kd.prototype.generateCanvasTexture=function(t,e){void 0===e&&(e=1);var n=this.getLocalBounds(),r=ql.p.create({width:n.width,height:n.height,scaleMode:t,resolution:e});Bp||(Bp=new Gp.a),this.transform.updateLocalTransform(),this.transform.localTransform.copyTo(Vp),Vp.invert(),Vp.tx-=n.x,Vp.ty-=n.y,Bp.render(this,{renderTexture:r,clear:!0,transform:Vp});var i=ql.t.from(r.baseTexture._canvasRenderTarget.canvas,{scaleMode:t});return i.baseTexture.setResolution(e),i},kd.prototype.cachedGraphicsData=[],kd.prototype._renderCanvas=function(t){!0!==this.isMask&&(this.finishPoly(),t.plugins.graphics.render(this))};var Wp=new Bl.d,Xp=function(){function t(t){this.renderer=t}return t.prototype.render=function(t){var e=t._texture,n=this.renderer,r=n.context;if(e.valid){var i=e._frame.width,o=e._frame.height,a=t.transform.worldTransform,s=0,u=0,l=e.baseTexture.getDrawableSource();if(!(e.orig.width<=0||e.orig.height<=0)&&e.valid&&l){n.setBlendMode(t.blendMode,!0),n.context.globalAlpha=t.worldAlpha;var c=e.baseTexture.scaleMode===Rh.p.LINEAR;n.smoothProperty&&n.context[n.smoothProperty]!==c&&(r[n.smoothProperty]=c),e.trim?(s=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,u=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(s=(.5-t.anchor.x)*e.orig.width,u=(.5-t.anchor.y)*e.orig.height),e.rotate&&(a.copyTo(Wp),a=Wp,Bl.n.matrixAppendRotationInv(a,e.rotate,s,u),s=0,u=0),s-=i/2,u-=o/2,n.setContextTransform(a,t.roundPixels,1),t.roundPixels&&(s|=0,u|=0);var h=e.baseTexture.resolution,d=n._outerBlend;d&&(r.save(),r.beginPath(),r.rect(s*n.resolution,u*n.resolution,i*n.resolution,o*n.resolution),r.clip()),16777215!==t.tint?(t._cachedTint===t.tint&&t._tintedCanvas.tintId===t._texture._updateID||(t._cachedTint=t.tint,t._tintedCanvas=Gp.b.getTintedCanvas(t,t.tint)),r.drawImage(t._tintedCanvas,0,0,Math.floor(i*h),Math.floor(o*h),Math.floor(s*n.resolution),Math.floor(u*n.resolution),Math.floor(i*n.resolution),Math.floor(o*n.resolution))):r.drawImage(l,e._frame.x*h,e._frame.y*h,Math.floor(i*h),Math.floor(o*h),Math.floor(s*n.resolution),Math.floor(u*n.resolution),Math.floor(i*n.resolution),Math.floor(o*n.resolution)),d&&r.restore(),n.setBlendMode(Rh.b.NORMAL)}}},t.prototype.destroy=function(){this.renderer=null},t}();Fd.prototype._tintedCanvas=null,Fd.prototype._renderCanvas=function(t){t.plugins.sprite.render(this)};var Yp=new Bl.j,qp=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,n){var r=new Image;return r.src=this.base64(t,e,n),r},t.prototype.base64=function(t,e,n){return this.canvas(t).toDataURL(e,n)},t.prototype.canvas=function(t){var e,n,r,i,o=this.renderer;t&&(i=t instanceof ql.p?t:o.generateTexture(t)),i?(e=i.baseTexture._canvasRenderTarget.context,n=i.baseTexture._canvasRenderTarget.resolution,r=i.frame):(e=o.rootContext,n=o.resolution,(r=Yp).width=this.renderer.width,r.height=this.renderer.height);var a=Math.floor(r.width*n+1e-4),s=Math.floor(r.height*n+1e-4),u=new Ll.CanvasRenderTarget(a,s,1),l=e.getImageData(r.x*n,r.y*n,a,s);return u.context.putImageData(l,0,0),u.canvas},t.prototype.pixels=function(t){var e,n,r,i,o=this.renderer;t&&(i=t instanceof ql.p?t:o.generateTexture(t)),i?(e=i.baseTexture._canvasRenderTarget.context,n=i.baseTexture._canvasRenderTarget.resolution,r=i.frame):(e=o.rootContext,n=o.resolution,(r=Yp).width=o.width,r.height=o.height);var a=r.x*n,s=r.y*n,u=r.width*n,l=r.height*n;return e.getImageData(a,s,u,l).data},t.prototype.destroy=function(){this.renderer=null},t}(),Zp=function(t,e){return(Zp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Qp(t,e){var n=t;if(e instanceof ql.c){var r=e.source,i=0===r.width?n.canvas.width:Math.min(n.canvas.width,r.width),o=0===r.height?n.canvas.height:Math.min(n.canvas.height,r.height);return n.ctx.drawImage(r,0,0,i,o,0,0,n.canvas.width,n.canvas.height),!0}return!1}var Kp,Jp=function(t){function e(e){var n=t.call(this,e)||this;return n.uploadHookHelper=n,n.canvas=document.createElement("canvas"),n.canvas.width=16,n.canvas.height=16,n.ctx=n.canvas.getContext("2d"),n.registerUploadHook(Qp),n}return function(t,e){function n(){this.constructor=t}Zp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(rf),$p=new Bl.d,tv=new Bl.d,ev=[new Bl.g,new Bl.g,new Bl.g,new Bl.g];pf.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.valid){var n=t.context,r=this.worldTransform,i=e.baseTexture,o=i.getDrawableSource(),a=i.resolution;if(this._textureID!==this._texture._updateID||this._cachedTint!==this.tint){this._textureID=this._texture._updateID;var s=new Ll.CanvasRenderTarget(e._frame.width,e._frame.height,a);16777215!==this.tint?(this._tintedCanvas=Gp.b.getTintedCanvas(this,this.tint),s.context.drawImage(this._tintedCanvas,0,0)):s.context.drawImage(o,-e._frame.x*a,-e._frame.y*a),this._cachedTint=this.tint,this._canvasPattern=s.context.createPattern(s.canvas,"repeat")}n.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),this.tileTransform.updateLocalTransform();var u=this.tileTransform.localTransform,l=this._width,c=this._height;$p.identity(),tv.copyFrom(u),this.uvRespectAnchor||tv.translate(-this.anchor.x*l,-this.anchor.y*c),tv.scale(this.tileScale.x/a,this.tileScale.y/a),$p.prepend(tv),$p.prepend(r),t.setContextTransform($p),n.fillStyle=this._canvasPattern;var h=this.anchor.x*-l,d=this.anchor.y*-c;ev[0].set(h,d),ev[1].set(h+l,d),ev[2].set(h+l,d+c),ev[3].set(h,d+c);for(var f=0;f<4;f++)tv.applyInverse(ev[f],ev[f]);for(n.beginPath(),n.moveTo(ev[0].x,ev[0].y),f=1;f<4;f++)n.lineTo(ev[f].x,ev[f].y);n.closePath(),n.fill()}},td.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,n=this.worldTransform,r=!0,i=0,o=0,a=0,s=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var l=this.children[u];if(l.visible&&l._texture.valid){var c=l._texture.frame;if(e.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)==0)r&&(t.setContextTransform(n,!1,1),r=!1),i=l.anchor.x*(-c.width*l.scale.x)+l.position.x+.5,o=l.anchor.y*(-c.height*l.scale.y)+l.position.y+.5,a=c.width*l.scale.x,s=c.height*l.scale.y;else{r||(r=!0),l.displayObjectUpdateTransform();var h=l.worldTransform;t.setContextTransform(h,this.roundPixels,1),i=l.anchor.x*-c.width+.5,o=l.anchor.y*-c.height+.5,a=c.width,s=c.height}var d=l._texture.baseTexture.resolution;e.drawImage(l._texture.baseTexture.getDrawableSource(),c.x*d,c.y*d,c.width*d,c.height*d,i*t.resolution,o*t.resolution,a*t.resolution,s*t.resolution)}}}},Dl.b.prototype._renderCanvas=function(t){},Dl.b.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},Dl.c.prototype.renderCanvas=function(t){},Yd.prototype._renderCanvas=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),Fd.prototype._renderCanvas.call(this,t)},Gp.a.registerPlugin("accessibility",Fl),Gp.a.registerPlugin("extract",qp),Gp.a.registerPlugin("graphics",zp),Gp.a.registerPlugin("interaction",Yl),Gp.a.registerPlugin("mesh",jp.a),Gp.a.registerPlugin("prepare",Jp),Gp.a.registerPlugin("sprite",Xp);var nv=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.call(this)).prevTime=-1,t.times=0,t.valueTotal=0,t.destroyed=!1,t.value=0,t.calcFps(),t}return _(n,[{key:"calcFps",value:function(){var t=this;requestAnimationFrame((function(e){var n=e-t.prevTime;t.valueTotal+=n,t.times+=1,t.times>20&&(t.value=Math.floor(1e3*t.times/t.valueTotal),t.valueTotal=0,t.times=0,t.destroyed||t.emit("update",t.value)),t.prevTime=e,t.destroyed||t.calcFps()}))}},{key:"destroy",value:function(){this.destroyed=!0}}]),n}(su.a);!function(t){t.ResourceError="RESOURCE_ERROR",t.RuntimeError="RUNTIME_ERROR",t.RuntimeWarn="RUNTIME_WARN",t.CanvasCrash="CANVAS_CRASH"}(Kp||(Kp={}));var rv=function(t){m(n,t);var e=g(n);function n(t,r){var i,o,a;return y(this,n),i=e.call(this,r),o=v(i),a=(this instanceof n?this.constructor:void 0).prototype,Object.setPrototypeOf?Object.setPrototypeOf(o,a):o.__proto__&&(o.__proto__=a),i.errorType=t,i.errorMsg=r,i}return _(n,null,[{key:"transform",value:function(t){return t instanceof n?t:new n(Kp.RuntimeError,t.message)}}]),n}(i(Error));function iv(){return function(t,e,n){var r=n.value;n.value=function(){try{for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.apply(this,e)}catch(e){throw new rv(Kp.RuntimeWarn,e.message)}}}}var ov=n(46),av=n.n(ov),sv=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function uv(){return T()}var lv="__delay_resolve_result__";function cv(t){return new Promise((function(e){setTimeout((function(){e(lv)}),t)}))}function hv(t,e){return sv(this,void 0,void 0,s.mark((function n(){var r;return s.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.race([t(),cv(e)]);case 2:return r=n.sent,n.abrupt("return",r===lv?lv:r);case 4:case"end":return n.stop()}}),n)})))}var dv=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function fv(t,e){return dv(this,void 0,void 0,s.mark((function n(){var r;return s.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,hv((function(){return fetch(t)}),e);case 2:if((r=n.sent)!==lv){n.next=5;break}throw new rv(Kp.ResourceError,'"'.concat(t,'" loaded timeout"'));case 5:if(r.ok){n.next=7;break}throw new rv(Kp.ResourceError,'"'.concat(t,'" loaded failed with status "').concat(r.status,'"'));case 7:return n.abrupt("return",r);case 8:case"end":return n.stop()}}),n)})))}var pv=function(){function t(e,n,r,i,o){y(this,t),this.timeout=15e3,this.useCache=!1,this.taskId="",this.delegate=null,this.useCache=n,this.localStorage=e,this.logger=r,this.timeout=i,this.delegate=o||null}return _(t,[{key:"attachTaskId",value:function(t){this.taskId=t}},{key:"fetchJson",value:function(t){return dv(this,void 0,void 0,s.mark((function e(){var n,r,i,o=this;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.useCache,!e.t0){e.next=6;break}return this.logger.info("load resource from cache. "+t,this.taskId||""),e.next=5,this.localStorage.getItem(t);case 5:n=e.sent;case 6:if(!n){e.next=8;break}return e.abrupt("return",(this.logger.info("cache hit. "+t,this.taskId||""),n));case 8:if(!this.delegate){e.next=18;break}return this.logger.info("load resource by delegate. "+t,this.taskId||""),e.next=12,hv((function(){return o.delegate.loadJson(t)}),this.timeout);case 12:if((i=e.sent)!==lv){e.next=15;break}throw new rv(Kp.ResourceError,'"'.concat(t,'" loaded timeout"'));case 15:r=JSON.parse(i),e.next=24;break;case 18:return this.logger.info("load resource from server. "+t,this.taskId||""),e.next=21,fv(""+t,this.timeout);case 21:return e.next=23,e.sent.json();case 23:r=e.sent;case 24:return e.abrupt("return",(this.logger.info("load end. "+t,this.taskId||""),this.useCache&&this.localStorage.setItem(t,r).catch((function(){})),r));case 25:case"end":return e.stop()}}),e,this)})))}},{key:"fetchPng",value:function(t,e){return dv(this,void 0,void 0,s.mark((function n(){var r,i,o,a,u,l,c,h,d,f,p,v,m,g,y,_,x,b=this;return s.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t+"-v2",n.t0=this.useCache,!n.t0){n.next=7;break}return this.logger.info("load resource from cache. "+t,this.taskId||""),n.next=6,this.localStorage.getItem(i);case 6:r=n.sent;case 7:if(!r){n.next=11;break}return a=(o=r).scale,u=o.scaledBase64,this.logger.info("cache hit. "+t,this.taskId||""),n.abrupt("return",{baseTexture:new ql.c(u,{resolution:1}),scale:a});case 11:if(!this.delegate){n.next=20;break}return this.logger.info("load resource by delegate. "+t,this.taskId||""),n.next=15,hv((function(){return b.delegate.loadImage(t)}),this.timeout);case 15:if((l=n.sent)!==lv){n.next=18;break}throw new rv(Kp.ResourceError,'"'.concat(t,'" loaded timeout"'));case 18:n.next=27;break;case 20:return this.logger.info("load resource from server. "+t,this.taskId||""),n.next=23,fv(t,this.timeout);case 23:return c=n.sent,n.next=26,c.blob();case 26:l=n.sent;case 27:return n.next=29,function(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=function(){n(new rv(Kp.ResourceError,"Failed parse blob data."))},r.readAsDataURL(t)}))}(l);case 29:return r=n.sent,(h=document.createElement("img")).src=r,n.next=34,new Promise((function(t,e){h.onload=function(){return t("")},h.onerror=function(){return e(new Error("load sprite image failed"))}}));case 34:return d=e,f=h.width||1,p=h.height||1,2048,2048,(f>2048||p>2048)&&(v=(d*=2048/f)*p)>2048&&(d*=p/v),m=document.createElement("canvas"),g=Math.ceil(h.width*d),y=Math.ceil(h.height*d),m.width=g,m.height=y,m.getContext("2d").drawImage(h,0,0,g,y),_=m.toDataURL("image/png"),x=new ql.c(_,{resolution:1}),n.abrupt("return",(this.logger.info("load end. "+t,this.taskId||""),this.useCache&&this.localStorage.setItem(i,{scale:d,scaledBase64:_}).catch((function(){})),{baseTexture:x,scale:d}));case 42:case"end":return n.stop()}}),n,this)})))}},{key:"destroy",value:function(){}}]),t}(),vv=function(){function t(e){var n=this;y(this,t),this.isPaused=!1,this.timestamp=0,this.callbackList=[],this.onTimeUpdate=function(t){var e=t/(rd.b.TARGET_FPMS||.06);if(!n.isPaused){n.timestamp+=e,n.callbackList=n.callbackList.filter((function(t){return t&&!t.applied}));for(var r=n.callbackList.length,i=0;i<r;i++){var o=n.callbackList[i];if(o&&!o.applied){if(!(o.triggerTime<=n.timestamp))break;o.running=!0,o.fn(),o.applied=!0,r=n.callbackList.length}}}},this.ticker=e,this.ticker.add(this.onTimeUpdate)}return _(t,[{key:"setTimeout",value:function(t,e){var n=uv(),r=this.timestamp+Math.max(e||16,16);return this.callbackList.push({fn:t,triggerTime:r,id:n,applied:!1,running:!1}),this.callbackList.sort((function(t,e){return t.triggerTime-e.triggerTime})),n}},{key:"clearTimeout",value:function(t){var e=this.callbackList.findIndex((function(e){return e.id===t}));e>=0&&!this.callbackList[e].running&&this.callbackList.splice(e,1)}},{key:"delay",value:function(t){var e=this;return new Promise((function(n){e.setTimeout(n,t)}))}},{key:"waitUntil",value:function(t,e){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,s.mark((function n(){var r;return s.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=this.timestamp;case 1:if(t()||!(this.timestamp-r<e)){n.next=6;break}return n.next=4,this.delay(50);case 4:n.next=1;break;case 6:case"end":return n.stop()}}),n,this)})))}},{key:"pause",value:function(){this.isPaused=!0}},{key:"resume",value:function(){this.isPaused=!1}}]),t}();function mv(t,e,n){return n?Math.floor(parseFloat(t)*e):Math.ceil(parseFloat(t)*e)}var gv={w:!0,h:!0,x:!0,y:!0},yv=function(){function t(e){y(this,t),this.gifs=Object.create(null),this.textures=Object.create(null),this.frames=Object.create(null),this.spriteSheets=[],this.loader=e}return _(t,[{key:"getTexture",value:function(t){return this.textures[t]||null}},{key:"getFrameData",value:function(t){return this.frames[t]}},{key:"getGifFrames",value:function(t){return this.gifs[t]?this.gifs[t].filter((function(t){return!!t})):[]}},{key:"loadSpriteSheetItem",value:function(t,e,n,r){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,s.mark((function i(){var o,a,u,l,c,h=this;return s.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.loader.fetchJson("".concat(t,"/").concat(e,"/jsonOutput/").concat(n,".json"));case 2:return o=i.sent,i.next=5,this.loader.fetchPng("".concat(t,"/").concat(e,"/jsonOutput/").concat(n,".png"),r);case 5:return a=i.sent,u=a.baseTexture,l=a.scale,function(t,e){t.meta&&t.meta.size&&["w","h"].forEach((function(n){t.meta.size[n]=mv(t.meta.size[n],e,gv[n])})),t.frames&&Object.keys(t.frames).forEach((function(n){t.frames[n].frame&&["x","y","w","h"].forEach((function(r){t.frames[n].frame[r]=mv(t.frames[n].frame[r],e,gv[r])})),t.frames[n].spriteSourceSize&&["x","y","w","h"].forEach((function(r){t.frames[n].spriteSourceSize[r]=mv(t.frames[n].spriteSourceSize[r],e,gv[r])})),t.frames[n].sourceSize&&["w","h"].forEach((function(r){t.frames[n].sourceSize[r]=mv(t.frames[n].sourceSize[r],e,gv[r])}))}))}(o,l),c=new lf(u,o),i.next=12,new Promise((function(t){c.parse((function(){return t("")}))}));case 12:this.spriteSheets.push(c),Object.keys(c.textures).forEach((function(t){var e=t.match(/^(.+)_gif_(\d+)$/);if(e&&e[1]&&e[2]){var n=e[1];h.gifs[n]||(h.gifs[n]=[]);var r=parseInt(e[2],10);h.gifs[n][r]=c.textures[t]}else h.frames[t]=o.frames[t],h.textures[t]=c.textures[t]}));case 14:case"end":return i.stop()}}),i,this)})))}},{key:"destroy",value:function(){this.spriteSheets.forEach((function(t){return t.destroy(!0)})),this.spriteSheets=[],this.gifs=Object.create(null),this.textures=Object.create(null),this.frames=Object.create(null)}}]),t}(),_v=n(18),xv=n.n(_v),bv=n(13),Tv=n.n(bv);function wv(t,e,n){var r,i,o=Math.round(t)%360;if(o%180==0)r=Math.cos(o*(Math.PI/180))*e,i=0;else if(o%90==0)r=0,i=Math.sin(o*(Math.PI/180))*n;else{var a=function(t){var e=t*Math.PI/180;return Math.tan(e)}(o);r=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e*a,2)),(o>90&&o<270||o<-90&&o>-270)&&(r=-r),i=a*r}return{x:r,y:i}}function Ev(t,e,n,r,i,o){var a,s,u,l,c,h=t,d=e;if(0===Math.round(r))a=i,s=o,c=0;else if(Math.round(r)>=360)a=i,s=o,u=i+2*t*Math.abs(Math.cos(-n/180*Math.PI)),l=o+2*e*Math.sin(-n/180*Math.PI),c=1;else{var f=-(n+r),p=wv(-n,h,d),v=i-p.x,m=o+p.y,g=wv(f,h,d);a=g.x+v,s=m-g.y,c=r>=-360&&r<-180?1:r>=-180&&r<0||r>0&&r<180?0:1}return{radiusX:h,radiusY:d,xAxisRotation:0,largeArcFlag:c,sweepFlag:r>0?1:0,endX:a,endY:s,middleX:u,middleY:l}}var Sv=function(){function t(){y(this,t),this.pool=[]}return _(t,[{key:"getObject",value:function(t){var e=this.pool.find((function(t){return!t.isUsed}));if(e)return e.isUsed=!0,e.obj;var n={obj:this.createObject(),isUsed:!0,group:t};return this.pool.push(n),n.obj}},{key:"collectObject",value:function(t){var e=this.pool.find((function(e){return e.obj===t}));e&&(e.isUsed=!1,this.resetObject(e.obj))}},{key:"collectObjectByGroup",value:function(t){var e=this;this.pool.filter((function(e){return e.group===t})).forEach((function(t){return e.collectObject(t.obj)}))}}]),t}(),Av=new(function(t){m(n,t);var e=g(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"createObject",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("version","1.1"),t}},{key:"resetObject",value:function(t){t.removeAttribute("viewBox"),t.removeAttribute("width"),t.removeAttribute("height"),t.innerHTML=""}}]),n}(Sv)),Mv=new(function(t){m(n,t);var e=g(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"createObject",value:function(){return document.createElement("img")}},{key:"resetObject",value:function(t){t.removeAttribute("src")}}]),n}(Sv)),Rv=function(){function t(){y(this,t),this.imgElements=[],this.svgElements=[],this.idToHashMap=Object.create(null),this.textures=Object.create(null),this.graphics=[],this.hashToIdMap=Object.create(null)}return _(t,[{key:"render",value:function(t,e,n){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,s.mark((function e(){var r,i,o,a,u,l,h,d,f,p,v=this;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.items,i=t.width,o=t.height,a=Mv.getObject(n),u=new ql.c(a,{width:i,height:o,resolution:1}),l=Av.getObject(n),this.imgElements.push(a),this.svgElements.push(l),l.setAttribute("viewBox","0 0 ".concat(i," ").concat(o)),l.setAttribute("width",""+i),l.setAttribute("height",""+o),h={},d={},r.forEach((function(t){var e=t.item,n=t.x,r=t.y,i=n+2,o=r+2;e.pathsData.forEach((function(t){var e="";t.cmds.forEach((function(n){var r=c(n,2),a=r[0],s=r[1];e+=a+" ",e+=s.map((function(e){return Tv()(e)||(e.x=e.x+t.offset.x+i,e.y=e.y+t.offset.y+o),e})).reduce((function(t,e){return Tv()(e)?t+=e+" ":t+="".concat(e.x," ").concat(e.y," "),t}),""),e+=" "})),t.pathElement.setAttribute("d",e),l.appendChild(t.pathElement)}));var a=e.width-4-2*e.padding,s=e.height-4-2*e.padding;v.textures[e.hash]={texture:new ql.t(u,new Bl.j(i+2,o+2,a,s)),pivot:e.pivot},h[e.hash]={x:i+2,y:o+2,w:a,h:s,pivot:e.pivot},d[e.hash]=v.hashToIdMap[e.hash]})),p='<?xml version="1.0" encoding="utf-8"?>'+l.outerHTML,f="data:image/svg+xml,"+encodeURIComponent(p).replace(/'/g,"%27").replace(/"/g,"%22"),a.src=f,e.next=8,new Promise((function(t,e){a.onload=function(){return t("")},a.onerror=function(){return e()}}));case 8:case"end":return e.stop()}}),e,this)})))}},{key:"getGraphicsData",value:function(t){var e=this.idToHashMap[t]||"";return this.textures[e]||null}},{key:"addGraphics",value:function(t,e,n,r,i,o,a,s,u,l,h){var d,f;if(!a&&!u)return t;var p=xv()(n+(null!==(f=null===(d=null==a?void 0:a.width)||void 0===d?void 0:d.toString())&&void 0!==f?f:0)+u+l+h);if(this.hashToIdMap[p]||(this.hashToIdMap[p]=[]),this.hashToIdMap[p].push(t),this.idToHashMap[t]=p,this.graphics.findIndex((function(t){return t.hash===p}))<0){var v=function(t,e,n,r,i,o,a,s,u){var l,h=[],d={x:Math.abs(i.x),y:Math.abs(i.y)},f=0,p=0,v=0,m=0,g=0,y="none",_=null!==(l=null==r?void 0:r.width)&&void 0!==l?l:0;return a?(f=e,p=n,g=0):(y=u||"#ff0000",g=_,v=.5*_,m=.5*_,f=e+_,p=n+_,d.x+=.5*_,d.y+=.5*_),f+=Math.abs(i.x),p+=Math.abs(i.y),v+=Math.abs(i.x),m+=Math.abs(i.y),f+=4,p+=4,v+=2,m+=2,f=Math.ceil(f),p=Math.ceil(p),t.forEach((function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","path");"none"!==t.fill&&a?e.setAttribute("fill",s||"#ff0000"):e.setAttribute("fill","none"),t.hasStroke&&!a&&(e.setAttribute("stroke-linecap",(null==r?void 0:r.cap)||"butt"),e.setAttribute("stroke-linejoin",(null==r?void 0:r.join)||"miter"),e.setAttribute("stroke-width",g.toString()),e.setAttribute("stroke",y),(null==r?void 0:r.dash)&&e.setAttribute("stroke-dasharray",r.dash));for(var n=t.scale,i=t.path.trim().split(" "),o={x:0,y:0},u={offset:{x:v,y:m},cmds:[],pathElement:e},l=0;l<i.length;l+=2){var d=i[l],f=i[l+1];if("M"===d){var p=f.split(",").map((function(t){return Number(t)})),_=c(p,2),x=_[0],b=_[1];o={x:x,y:b},x=x/9525*n.x,b=b/9525*n.y,u.cmds.push(["M",[{x:x,y:b}]])}else if("A"===d){var T=f.split(",").map((function(t){return Number(t)})),w=c(T,4),E=w[0],S=w[1],A=w[2],M=w[3],R=A/Math.PI*180,C=M/Math.PI*180,P=Ev(E,S,R,C,o.x,o.y);Math.round(C)>=360?(o={x:P.endX,y:P.endY},u.cmds.push(["A",[P.radiusX/9525*n.x,P.radiusY/9525*n.y,P.xAxisRotation,P.largeArcFlag,P.sweepFlag,{x:P.middleX/9525*n.x,y:P.middleY/9525*n.y}]]),u.cmds.push(["A",[P.radiusX/9525*n.x,P.radiusY/9525*n.y,P.xAxisRotation,P.largeArcFlag,P.sweepFlag,{x:P.endX/9525*n.x,y:P.endY/9525*n.y}]])):(o={x:P.endX,y:P.endY},u.cmds.push(["A",[P.radiusX/9525*n.x,P.radiusY/9525*n.y,P.xAxisRotation,P.largeArcFlag,P.sweepFlag,{x:P.endX/9525*n.x,y:P.endY/9525*n.y}]]))}else if("L"===d){var I=f.split(",").map((function(t){return Number(t)})),O=c(I,2),k=O[0],N=O[1];o={x:k,y:N},k=k/9525*n.x,N=N/9525*n.y,u.cmds.push(["L",[{x:k,y:N}]])}else if("QB"===d){var L=f.split(",").map((function(t){return Number(t)})),D=c(L,4),F=D[0],B=D[1],U=D[2],G=D[3];o={x:U,y:G},F=F/9525*n.x,B=B/9525*n.y,U=U/9525*n.x,G=G/9525*n.y,u.cmds.push(["Q",[{x:F,y:B},{x:U,y:G}]])}else if("CB"===d){var j=f.split(",").map((function(t){return Number(t)})),H=c(j,6),z=H[0],V=H[1],W=H[2],X=H[3],Y=H[4],q=H[5];o={x:Y,y:q},z=z/9525*n.x,V=V/9525*n.y,W=W/9525*n.x,X=X/9525*n.y,Y=Y/9525*n.x,q=q/9525*n.y,u.cmds.push(["C",[{x:z,y:V},{x:W,y:X},{x:Y,y:q}]])}else"C"===d&&u.cmds.push(["Z",[]])}h.push(u)})),{graphicsWidth:f,graphicsHeight:p,pivot:d,padding:2,pathsData:h}}(e,i,o,a,r,0,u,l,h),m=v.graphicsWidth,g=v.graphicsHeight,y=v.pathsData,_=v.pivot,x=v.padding;this.graphics.push({hash:p,pathsData:y,pivot:_,width:m,height:g,padding:x})}return t}},{key:"pack",value:function(){return this.graphics.forEach((function(t){t.width+=4,t.height+=4})),function t(e){for(var n=[],r=e.filter((function(t){var e=t.width<2048&&t.height<2048;return e||n.push(t),e})).sort((function(t,e){return t.width*t.height-e.width*e.height})),i=r.length+1,o=2050,a=2050,s=[],u=null;(o>2048||a>2048)&&r.length>0;)i-=1,o=(u=av()(r.slice(0,i))).width,a=u.height;return u&&s.push(u),n.forEach((function(t){var e=av()([t]);s.push(e)})),i<r.length?s.concat(t(r.slice(i))):s}(this.graphics)}},{key:"destroy",value:function(){var t=this;Object.keys(this.textures).forEach((function(e){var n;null===(n=t.textures[e])||void 0===n||n.texture.destroy(!0)})),this.textures=Object.create(null),this.imgElements.forEach((function(t){return Mv.collectObject(t)})),this.svgElements.forEach((function(t){return Av.collectObject(t)})),this.graphics=[]}}]),t}(),Cv=function(){function t(){y(this,t),this.runningTimeNodes={}}return _(t,[{key:"addRunningTimeNode",value:function(t,e,n){var r="".concat(e,"_").concat(t);if(this.runningTimeNodes[r])try{this.runningTimeNodes[r].dispose(!0)}catch(t){}this.runningTimeNodes[r]=n}},{key:"removeRunningTimeNode",value:function(t,e){var n="".concat(e,"_").concat(t);delete this.runningTimeNodes[n]}}]),t}(),Pv=function(){function t(e){y(this,t),this.eventHub=e,this.targets=Object.create(null)}return _(t,[{key:"getTargets",value:function(){var t=this;return Object.keys(this.targets).map((function(e){return t.targets[e]}))}},{key:"addTarget",value:function(t,e){this.targets[t]=e}},{key:"getTargetById",value:function(t){return this.targets[t]}},{key:"getTarget",value:function(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"el",index:0,id:""},o=this.targets[t.id];return"shape"!==t.type?o:("shape"===t.type&&t.txEl&&(o=null!==(n=null==o?void 0:o.getTextElement(t.txEl.type,t.txEl.range))&&void 0!==n?n:null),"shape"===t.type&&t.bg&&0===i.index&&(e=!1,o=null!==(r=null==o?void 0:o.getBgElement())&&void 0!==r?r:null,this.eventHub.emit("IterateTimeNodeEnd",i.id)),e&&o?o.getIterateEntry(i.type,i.index,i.id):(o||this.eventHub.emit("IterateTimeNodeEnd",i.id),o))}},{key:"clearTargets",value:function(){this.targets=Object.create(null)}}]),t}(),Iv=function(){function t(e){y(this,t),this.target=e}return _(t,[{key:"color",get:function(){return this.target.strokeColorFilter.currentColor},set:function(t){this.target.strokeColorFilter.color=t}},{key:"on",get:function(){return this.target.strokeActive?"true":"false"},set:function(t){this.target.strokeActive="true"===t}}]),t}(),Ov=_((function t(e){var n=this;y(this,t),this.applyCommand=function(t,e){n.target.applyCommand(t,e)},this.target=e})),kv=function(){function t(e){y(this,t),this.target=e}return _(t,[{key:"color",get:function(){return this.target.pptColorFilter.currentColor},set:function(t){this.target.pptColorActive&&(this.target.pptColorFilter.color=t)}},{key:"on",get:function(){return this.target.pptColorActive?"true":"false"},set:function(t){this.target.pptColorActive="true"===t}},{key:"designColor",get:function(){return this.target.pptColorFilter.designColor}},{key:"toString",value:function(){return this.color}}]),t}(),Nv=function(){function t(e){y(this,t),this.target=e}return _(t,[{key:"color",get:function(){return this.target.fillColorFilter.currentColor},set:function(t){this.target.fillActive&&(this.target.fillColorFilter.color=t)}},{key:"on",get:function(){return this.target.fillActive?"true":"false"},set:function(t){this.target.fillActive="true"===t}},{key:"designColor",get:function(){return this.target.fillColorFilter.designColor}}]),t}(),Lv=function(){function t(e,n,r){y(this,t),this.hardHidden=!1,this.designRotation=0,this.target=e,!0===n&&(this.hardHidden=!0),this.designRotation=r}return _(t,[{key:"opacity",get:function(){return this.target.alpha},set:function(t){this.target.alpha=t}},{key:"rotation",get:function(){return this.target.rotation/Math.PI*180},set:function(t){this.target.rotation=t/180*Math.PI+this.designRotation}},{key:"visibility",get:function(){return this.target.visible?"visible":"hidden"},set:function(t){this.visibility===t||this.hardHidden||(this.target.visible="visible"===t)}}]),t}(),Dv=function(){function t(e,n){y(this,t),this.actions=[],this.ctx=n,this.object=e,this.object.interactive=!0}return _(t,[{key:"reset",value:function(t){this.object.interactive=!1,this.object.removeAllListeners(),this.object=t,this.object.interactive=!0}},{key:"addAction",value:function(t,e){var n=this;this.actions.push([t,e]),"click"===e?(this.object.addListener("click",(function(){return n.handleAction(t)})),this.object.cursor="pointer"):"hover"===e&&this.object.addListener("mouseover",(function(){return n.handleAction(t)}))}},{key:"addProxy",value:function(t){var e=this;this.proxy=t,this.hitArea=this.getOriginHitArea(),this.proxy.interactive=!0,this.actions.forEach((function(t){var n,r,i=c(t,2),o=i[0],a=i[1];"click"===a?null===(n=e.proxy)||void 0===n||n.addListener("click",(function(t){return e.handleProxyAction(t,o)})):"hover"===a&&(null===(r=e.proxy)||void 0===r||r.addListener("mouseover",(function(t){return e.handleProxyAction(t,o)})))}))}},{key:"handleProxyAction",value:function(t,e){var n,r=t.data.global,i=this.object.getGlobalPosition(),o=r.x-i.x+this.object.pivot.x,a=r.y-i.y+this.object.pivot.y;(null===(n=this.hitArea)||void 0===n?void 0:n.contains(o,a))&&this.object.visible&&this.handleAction(e,!0)}},{key:"getOriginHitArea",value:function(){return this.object.hitArea?this.object.hitArea:new Bl.k(0,0,this.object.width,this.object.height)}},{key:"handleAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.proxy&&!e||(this.ctx.eventHub.emit(e_.hyperlinkTrigger,t),this.execAction(t))}},{key:"execAction",value:function(t){var e;if(this.ctx.eventHub.emit(e_.userInput),"ppaction://hlinksldjump"===t.action){var n=(null!==(e=null==t?void 0:t.target)&&void 0!==e?e:"").match(/slide(\d+)\.xml/);n&&n[1]&&this.ctx.eventHub.emit(e_.requestGotoSlide,Number(n[1]))}else if("ppaction://hlinkshowjump?jump=nextslide"===t.action)this.ctx.eventHub.emit(e_.requestNextSlide);else if("ppaction://hlinkshowjump?jump=previousslide"===t.action)this.ctx.eventHub.emit(e_.requestPrevSlide);else if("ppaction://hlinkshowjump?jump=firstslide"===t.action)this.ctx.eventHub.emit(e_.requestGotoSlide,1);else if("ppaction://hlinkshowjump?jump=lastslide"===t.action)this.ctx.eventHub.emit(e_.requestGotoSlide,-1);else if("ppaction://hlinkshowjump?jump=lastslideviewed"===t.action){var r=this.ctx.lastViewedIndex;this.ctx.eventHub.emit(e_.requestGotoSlide,r)}else"ppaction://hlinkshowjump?jump=endshow"===t.action&&this.ctx.eventHub.emit(e_.requestGotoSlide,-1)}}]),t}();function Fv(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return Math.abs(t-e)<=Math.pow(10,-n)}function Bv(t){return Math.floor(1e6*t)/1e6}var Uv=function(){function t(){y(this,t),this.point={x:0,y:0},this.slope=Math.PI/4}return _(t,[{key:"resolveY",value:function(t){return Math.tan(this.slope)*(t-this.point.x)+this.point.y}},{key:"distanceToLinearEquation",value:function(t){return Fv(this.slope,t.slope)?this.distanceToPoint(t.point):-1}},{key:"distanceToPoint",value:function(e){var n;if(Math.tan(this.slope)*(e.x-this.point.x)+this.point.y===e.y)return 0;n=this.slope>=Math.PI/2?this.slope-Math.PI/2:Math.PI/2+this.slope;var r=t.fromPointSlope(e,n),i=this.crossPoint(r);return i?Math.ceil(Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))):0}},{key:"crossPoint",value:function(t){if(Fv(t.slope,this.slope))return null;var e=0,n=0,r=Math.tan(t.slope),i=Math.tan(this.slope),o=this.point,a=o.x,s=o.y,u=t.point,l=u.x,c=u.y;return Fv(this.slope,Math.PI/2)?n=r*((e=this.point.x)-l)+c:Fv(t.slope,Math.PI/2)?n=i*((e=t.point.x)-a)+s:Fv(this.slope,Math.PI)||Fv(this.slope,0)?e=((n=this.point.y)-c)/r+l:Fv(t.slope,Math.PI)||Fv(t.slope,0)?e=((n=t.point.y)-s)/i+a:n=i*((e=(r*l-c+s-i*a)/(r-i))-a)+s,{x:e,y:n}}}],[{key:"fromPointSlope",value:function(e,n){var r=new t;return r.point=e,r.slope=n,r}}]),t}(),Gv=function(){function t(e,n,r){var i,o,a,s,u,l,c=this;y(this,t),this.scaleExt={x:1,y:1},this.scaleOrigin={x:1,y:1},this.designScale={x:1,y:1},this.bound=new Bl.j(0,0,1,1),this.pptX=0,this.pptY=0,this.presetSubType=0,this.designWidth=0,this.designHeight=0,this.designX=0,this.designY=0,this.hasPreset=!1,this.container=new Dl.b,this.animationFilterQueue=[],this.ctx=n,this.style=new Lv(this.container,!!e.hardHidden,e.rotation||0),this.designGlobalPosition={x:r.x+(null!==(o=null===(i=e.position)||void 0===i?void 0:i.x)&&void 0!==o?o:0),y:r.y+(null!==(s=null===(a=e.position)||void 0===a?void 0:a.y)&&void 0!==s?s:0)},this.container.interactive=!0,(e.hlinkClick||e.hlinkHover)&&(this.hyperlink=new Dv(this.container,this.ctx),e.hlinkHover&&(null===(u=this.hyperlink)||void 0===u||u.addAction(e.hlinkHover,"hover")),e.hlinkClick&&(null===(l=this.hyperlink)||void 0===l||l.addAction(e.hlinkClick,"click"))),this.ctx.clock.waitUntil((function(){try{return!!c.container.width}catch(e){return!1}}),3e3).then((function(){try{c.designWidth=c.designWidth||c.container.width}catch(e){}})),this.ctx.clock.waitUntil((function(){try{return!!c.container.height}catch(e){return!1}}),3e3).then((function(){try{c.designHeight=c.designHeight||c.container.height}catch(e){}}))}return _(t,[{key:"updateScale",value:function(){this.container&&(this.container.scale.x=this.designScale.x*this.scaleExt.x*this.scaleOrigin.x,this.container.scale.y=this.designScale.y*this.scaleExt.y*this.scaleOrigin.y)}},{key:"updateTransform",value:function(t){var e,n,r,i,o,a,s,u;this.designWidth=t.width,this.designHeight=t.height,this.designX=null!==(n=null===(e=t.position)||void 0===e?void 0:e.x)&&void 0!==n?n:0,this.designY=null!==(i=null===(r=t.position)||void 0===r?void 0:r.y)&&void 0!==i?i:0;var l=this.designWidth/2,c=this.designHeight/2;this.container.width=this.designWidth,this.container.height=this.designHeight,this.container.pivot.x=l,this.container.pivot.y=c;var h=null!==(a=null===(o=t.position)||void 0===o?void 0:o.x)&&void 0!==a?a:0,d=null!==(u=null===(s=t.position)||void 0===s?void 0:s.y)&&void 0!==u?u:0;this.container.x=h+l,this.container.y=d+c,t.scale&&(this.designScale={x:t.scale.x,y:t.scale.y},this.container.scale.x=t.scale.x,this.container.scale.y=t.scale.y),t.rotation&&(this.container.rotation=t.rotation);var f=new kd;f.drawRect(0,0,this.designWidth,this.designHeight),this.container.addChild(f),this.json.hardHidden&&(this.container.visible=!1),this.bound.x=h,this.bound.y=d,this.bound.width=this.designWidth,this.bound.height=this.designHeight}},{key:"addToAnimationFilterQueue",value:function(t){this.animationFilterQueue.push(t)}},{key:"removeAnimationFilterQueue",value:function(t){var e=this.animationFilterQueue.findIndex((function(e){return e===t}));e<0||this.animationFilterQueue.splice(e,1)}},{key:"getFirstAnimationFilter",value:function(){return this.animationFilterQueue.length>0?this.animationFilterQueue[0]:null}},{key:"scale",get:function(){return this.scaleOrigin},set:function(t){this.scaleOrigin.x=t.x,this.scaleOrigin.y=t.y,this.updateScale()}},{key:"design_ppt_w",get:function(){return Bv(this.designWidth/this.ctx.stageWidth)}},{key:"design_ppt_h",get:function(){return Bv((this.designHeight||this.container.height)/this.ctx.stageHeight)}},{key:"design_ppt_x",get:function(){return Bv(this.designX/this.ctx.stageWidth)}},{key:"design_ppt_y",get:function(){return Bv(this.designY/this.ctx.stageHeight)}},{key:"ppt_w",get:function(){return this.scaleExt.x*this.scaleOrigin.x*this.designWidth/this.ctx.stageWidth},set:function(t){this.designWidth&&(this.scaleExt.x=t*this.ctx.stageWidth/this.designWidth,this.updateScale())}},{key:"ppt_h",get:function(){var t=this.designHeight||this.container.height;return this.scaleExt.y*this.scaleOrigin.y*t/this.ctx.stageHeight},set:function(t){this.designHeight&&(this.scaleExt.y=t*this.ctx.stageHeight/this.designHeight,this.updateScale())}},{key:"ppt_x",get:function(){return(this.container.position.x-this.container.pivot.x)/this.ctx.stageWidth},set:function(t){this.pptX=t;var e=544===this.presetSubType?this.scaleExt.x:1;this.container.position.x=t*this.ctx.stageWidth+this.container.pivot.x*e}},{key:"ppt_y",get:function(){return(this.container.position.y-this.container.pivot.y)/this.ctx.stageHeight},set:function(t){this.pptY=t;var e=544===this.presetSubType?this.scaleExt.y:1;this.container.position.y=t*this.ctx.stageHeight+this.container.pivot.y*e}},{key:"r",get:function(){return this.container.rotation},set:function(t){this.container.rotation=t}},{key:"xshear",get:function(){return this.container.skew.x},set:function(t){this.container.skew.x=t}},{key:"yshear",get:function(){return this.container.skew.y},set:function(t){this.container.skew.y=t}}]),t}(),jv=n(108),Hv=n.n(jv),zv=function(){function t(e){if(y(this,t),this._isInit=!1,this.h=0,this.s=0,this.l=0,this.a=1,e){this._isInit=!0;var n=e.match(/-?[0-9]+/g);n&&(this.h=parseInt(n[0],10),this.s=parseInt(n[1],10)/100,this.l=parseInt(n[2],10)/100)}}return _(t,[{key:"isInit",value:function(){return this._isInit}},{key:"by",value:function(t,e){e.h=Math.max(Math.min(this.h+t.h,359),0),e.s=Math.max(Math.min(this.s+t.s,1),0),e.l=Math.max(Math.min(this.l+t.l,1),0),e.a=Math.max(Math.min(this.a+t.a,1),0)}},{key:"fromHexString",value:function(t){var e,n,r=Xv(t),i=c(r,4),o=i[0],a=i[1],s=i[2],u=i[3],l=0,h=Math.max(o,a,s),d=Math.min(o,a,s),f=h-d;n=(h+d)/2,0===f?l=0:h===o?l=(a-s)/f%6*60:h===a?l=60*((s-o)/f+2):h===s&&(l=60*((o-a)/f+4)),e=0===f?0:f/(1-Math.abs(2*n-1)),this.h=l,this.s=e,this.l=n,this.a=u}},{key:"interpolationFrom",value:function(t,e,n){var r=t.h+(this.h-t.h)*e,i=t.s+(this.s-t.s)*e,o=t.l+(this.l-t.l)*e,a=t.a+(this.a-t.a)*e;n.h=Math.max(Math.min(r,359),0),n.s=Math.max(Math.min(i,1),0),n.l=Math.max(Math.min(o,1),0),n.a=Math.max(Math.min(a,1),0)}},{key:"toHexString",value:function(){var t=[0,0,0,0],e=this.h,n=this.s,r=this.l;if(e<360&&e>=0&&n<=1&&n>=0&&r<=1&&r>=0){var i,o=(1-Math.abs(2*r-1))*n,a=o*(1-Math.abs(e/60%2-1)),s=r-o/2;t=[(i=c(e>=0&&e<60?[o,a,0]:e>=60&&e<120?[a,o,0]:e>=120&&e<180?[0,o,a]:e>=180&&e<240?[0,a,o]:e>=240&&e<300?[a,0,o]:[o,0,a],3))[0]+s,i[1]+s,i[2]+s,this.a]}return Yv(t)}}]),t}(),Vv=function(){function t(e){y(this,t),this._isInit=!1,this.r=0,this.g=0,this.b=0,this.a=0,e&&(this._isInit=!0,this.fromHexString(e))}return _(t,[{key:"fromHexString",value:function(t){var e=Xv(t),n=c(e,4),r=n[0],i=n[1],o=n[2],a=n[3];this.r=r,this.g=i,this.b=o,this.a=a}},{key:"isInit",value:function(){return this._isInit}},{key:"interpolationFrom",value:function(t,e,n){n.r=t.r+(this.r-t.r)*e,n.g=t.g+(this.g-t.g)*e,n.b=t.b+(this.b-t.b)*e,n.a=t.a+(this.a-t.a)*e}},{key:"by",value:function(t,e){e.r=Math.min(Math.max(this.r+t.r,0),255),e.g=Math.min(Math.max(this.g+t.g,0),255),e.b=Math.min(Math.max(this.b+t.b,0),255),e.a=Math.min(Math.max(this.a+t.a,0),1)}},{key:"toHexString",value:function(){return Yv([this.r,this.g,this.b,this.a])}}]),t}();function Wv(t){var e=t.substring(1);return[parseInt(e.substring(0,6),16),parseInt(e.substring(6,8),16)/255]}function Xv(t){return 0===(t=t.replace(/^#/,"")).substring(6,8).length&&(t+="FF"),[parseInt(t.substring(0,2).padStart(8,"0"),16)/255,parseInt(t.substring(2,4).padStart(8,"0"),16)/255,parseInt(t.substring(4,6).padStart(8,"0"),16)/255,parseInt(t.substring(6,8).padStart(8,"0"),16)/255]}function Yv(t){return"#"+Math.round(255*t[0]).toString(16).padStart(2,"0")+Math.round(255*t[1]).toString(16).padStart(2,"0")+Math.round(255*t[2]).toString(16).padStart(2,"0")+Math.round(255*t[3]).toString(16).padStart(2,"0")}function qv(t,e,n){var r=Xv(t),i=Xv(e),o=Math.round(255*(r[0]+(i[0]-r[0])*n)),a=Math.round(255*(r[1]+(i[1]-r[1])*n)),s=Math.round(255*(r[2]+(i[2]-r[2])*n)),u=Math.round(255*(r[3]+(i[3]-r[3])*n));return"#"+o.toString(16).padStart(2,"0")+a.toString(16).padStart(2,"0")+s.toString(16).padStart(2,"0")+u.toString(16).padStart(2,"0")}var Zv=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.call(this,void 0,"\nvarying vec2 vTextureCoord;\n\nuniform vec4 color;\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n\n    if (texColor.a > 0.0) {\n        vec4 resultColor = color;\n        resultColor = resultColor * texColor.a;\n        gl_FragColor = resultColor;\n    } else {\n        gl_FragColor = texColor;\n    }\n}\n",{color:new Float32Array([0,0,0,0]),active:0})).currentColor="#FFFFFFFF",t.designColor="#FFFFFFFF",t}return _(n,[{key:"color",get:function(){return this.currentColor},set:function(t){this.currentColor=t;var e=Xv(t);this.uniforms.color=Float32Array.from(e)}}]),n}(ql.k),Qv=new Up.ColorMatrixFilter;Qv.matrix=[1,0,0,0,-.2,0,1,0,0,-.2,0,0,1,0,-.2,0,0,0,1,0];var Kv=new Up.ColorMatrixFilter;Kv.matrix=[1,0,0,0,-.1,0,1,0,0,-.1,0,0,1,0,-.1,0,0,0,1,0];var Jv=new Up.ColorMatrixFilter;Jv.matrix=[1,0,0,0,.2,0,1,0,0,.2,0,0,1,0,.2,0,0,0,1,0];var $v=new Up.ColorMatrixFilter;$v.matrix=[1,0,0,0,.1,0,1,0,0,.1,0,0,1,0,.1,0,0,0,1,0];var tm={darken:Qv,darkenLess:Kv,lightenLess:$v,lighten:Jv},em=function(t){m(n,t);var e=g(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,{position:{x:t.x,y:t.y},width:t.width,height:t.height},r,i)).fillColorFilter=new Zv,o.fill=new Nv(v(o)),o.json=t,o.ctx=r,o.parentGlobalPos=i,o.global={x:i.x+t.x,y:i.y+t.y},o.updateTransform({position:{x:t.x,y:t.y},width:t.width,height:t.height}),o}return _(n,[{key:"fillActive",get:function(){var t,e;return(null!==(e=null===(t=this.container.filters)||void 0===t?void 0:t.length)&&void 0!==e?e:-1)>0},set:function(t){var e,n;t?(null!==(n=null===(e=this.container.filters)||void 0===e?void 0:e.indexOf(this.fillColorFilter))&&void 0!==n?n:-1)<0&&(this.container.filters=[this.fillColorFilter]):this.container.filters=[]}},{key:"renderContainer",get:function(){return this.container}},{key:"interactiveContainer",get:function(){return this.container}},{key:"clearOnSlideChange",value:function(){}},{key:"initOnReuse",value:function(){}},{key:"getTextElement",value:function(){return null}},{key:"getBgElement",value:function(){return null}},{key:"ppt_x",get:function(){return this.global.x/this.ctx.stageWidth},set:function(t){var e=t*this.ctx.stageWidth-this.global.x,n=544===this.presetSubType?this.scaleExt.x:1;this.container.position.x=this.designX+e+this.container.pivot.x*n}},{key:"ppt_y",get:function(){return this.global.y/this.ctx.stageHeight},set:function(t){var e=t*this.ctx.stageHeight-this.global.y,n=544===this.presetSubType?this.scaleExt.y:1;this.container.position.y=this.designY+e+this.container.pivot.y*n}},{key:"design_ppt_x",get:function(){return Bv(this.global.x/this.ctx.stageWidth)}},{key:"design_ppt_y",get:function(){return Bv(this.global.y/this.ctx.stageHeight)}}]),n}(Gv),nm=function(){function t(e,n,r,i,o,a,s,u,l,c,h){y(this,t),this.ctx=e,this.type=n,this.lineWidth=r,this.width=i,this.height=o,this.fillColor=a,this.isHorz=s,this.renderContainer=new Dl.b,this.ghcTextureId="".concat(u,"-text-p").concat(l,"-l").concat(c,"-u").concat(h,"-underLine")}return _(t,[{key:"createPaths",value:function(){if("ww"===this.type)return null;var t,e="M 0,0 L ".concat(9525*this.width,",0"),n=[this.width,this.lineWidth],r=n[0],i=n[1];return this.isHorz||(e="M 0,0 L 0,"+9525*this.height,r=(t=[this.lineWidth,this.height])[0],i=t[1]),{paths:[{id:uv(),path:e,fill:"norm",hasStroke:!0,scale:{x:1,y:1},hash:xv()(e)}],width:r,height:i}}},{key:"getLineStyle",value:function(){var t={width:this.lineWidth};return"dotted"===this.type&&(t.dash=""+this.lineWidth),t}},{key:"preRender",value:function(){var t=this.createPaths();if(t){var e=t.paths,n=t.width,r=t.height,i=e.reduce((function(t,e){return t+e.hash}),"");this.ctx.graphicsTexture.addGraphics(this.ghcTextureId,e,i,{x:0,y:0},n,r,this.getLineStyle(),this.ctx.objectPoolGroup,!1,null,this.fillColor)}}},{key:"render",value:function(){if(this.ghcTextureId){var t=this.ctx.graphicsTexture.getGraphicsData(this.ghcTextureId);t&&(this.sprite=new Fd,this.sprite.texture=t.texture,this.sprite.pivot.x=t.pivot.x)}}},{key:"destroy",value:function(){var t;null===(t=this.sprite)||void 0===t||t.destroy({texture:!0})}}]),t}(),rm=134217729;function im(t,e,n,r,i){var o,a,s,u,l=e[0],c=r[0],h=0,d=0;c>l==c>-l?(o=l,l=e[++h]):(o=c,c=r[++d]);var f=0;if(h<t&&d<n)for(c>l==c>-l?(s=o-((a=l+o)-l),l=e[++h]):(s=o-((a=c+o)-c),c=r[++d]),o=a,0!==s&&(i[f++]=s);h<t&&d<n;)c>l==c>-l?(s=o-((a=o+l)-(u=a-o))+(l-u),l=e[++h]):(s=o-((a=o+c)-(u=a-o))+(c-u),c=r[++d]),o=a,0!==s&&(i[f++]=s);for(;h<t;)s=o-((a=o+l)-(u=a-o))+(l-u),l=e[++h],o=a,0!==s&&(i[f++]=s);for(;d<n;)s=o-((a=o+c)-(u=a-o))+(c-u),c=r[++d],o=a,0!==s&&(i[f++]=s);return 0===o&&0!==f||(i[f++]=o),f}function om(t){return new Float64Array(t)}var am=om(4),sm=om(8),um=om(12),lm=om(16),cm=om(4);function hm(t,e,n,r,i,o){var a=(e-o)*(n-i),s=(t-i)*(r-o),u=a-s;if(0===a||0===s||a>0!=s>0)return u;var l=Math.abs(a+s);return Math.abs(u)>=33306690738754716e-32*l?u:-function(t,e,n,r,i,o,a){var s,u,l,c,h,d,f,p,v,m,g,y,_,x,b,T,w,E,S=t-i,A=n-i,M=e-o,R=r-o;h=(b=(p=S-(f=(d=rm*S)-(d-S)))*(m=R-(v=(d=rm*R)-(d-R)))-((x=S*R)-f*v-p*v-f*m))-(g=b-(w=(p=M-(f=(d=rm*M)-(d-M)))*(m=A-(v=(d=rm*A)-(d-A)))-((T=M*A)-f*v-p*v-f*m))),am[0]=b-(g+h)+(h-w),h=(_=x-((y=x+g)-(h=y-x))+(g-h))-(g=_-T),am[1]=_-(g+h)+(h-T),h=(E=y+g)-y,am[2]=y-(E-h)+(g-h),am[3]=E;var C=function(t,e){for(var n=e[0],r=1;r<t;r++)n+=e[r];return n}(4,am),P=22204460492503146e-32*a;if(C>=P||-C>=P)return C;if(s=t-(S+(h=t-S))+(h-i),l=n-(A+(h=n-A))+(h-i),u=e-(M+(h=e-M))+(h-o),c=r-(R+(h=r-R))+(h-o),0===s&&0===u&&0===l&&0===c)return C;if(P=11093356479670487e-47*a+33306690738754706e-32*Math.abs(C),(C+=S*c+R*s-(M*l+A*u))>=P||-C>=P)return C;h=(b=(p=s-(f=(d=rm*s)-(d-s)))*(m=R-(v=(d=rm*R)-(d-R)))-((x=s*R)-f*v-p*v-f*m))-(g=b-(w=(p=u-(f=(d=rm*u)-(d-u)))*(m=A-(v=(d=rm*A)-(d-A)))-((T=u*A)-f*v-p*v-f*m))),cm[0]=b-(g+h)+(h-w),h=(_=x-((y=x+g)-(h=y-x))+(g-h))-(g=_-T),cm[1]=_-(g+h)+(h-T),h=(E=y+g)-y,cm[2]=y-(E-h)+(g-h),cm[3]=E;var I=im(4,am,4,cm,sm);h=(b=(p=S-(f=(d=rm*S)-(d-S)))*(m=c-(v=(d=rm*c)-(d-c)))-((x=S*c)-f*v-p*v-f*m))-(g=b-(w=(p=M-(f=(d=rm*M)-(d-M)))*(m=l-(v=(d=rm*l)-(d-l)))-((T=M*l)-f*v-p*v-f*m))),cm[0]=b-(g+h)+(h-w),h=(_=x-((y=x+g)-(h=y-x))+(g-h))-(g=_-T),cm[1]=_-(g+h)+(h-T),h=(E=y+g)-y,cm[2]=y-(E-h)+(g-h),cm[3]=E;var O=im(I,sm,4,cm,um);h=(b=(p=s-(f=(d=rm*s)-(d-s)))*(m=c-(v=(d=rm*c)-(d-c)))-((x=s*c)-f*v-p*v-f*m))-(g=b-(w=(p=u-(f=(d=rm*u)-(d-u)))*(m=l-(v=(d=rm*l)-(d-l)))-((T=u*l)-f*v-p*v-f*m))),cm[0]=b-(g+h)+(h-w),h=(_=x-((y=x+g)-(h=y-x))+(g-h))-(g=_-T),cm[1]=_-(g+h)+(h-T),h=(E=y+g)-y,cm[2]=y-(E-h)+(g-h),cm[3]=E;var k=im(O,um,4,cm,lm);return lm[k-1]}(t,e,n,r,i,o,l)}om(4),om(4),om(4),om(4),om(4),om(4),om(4),om(4),om(4),om(8),om(8),om(8),om(4),om(8),om(8),om(8),om(12),om(192),om(192),om(4),om(4),om(4),om(4),om(4),om(4),om(4),om(4),om(8),om(8),om(8),om(8),om(8),om(8),om(8),om(8),om(8),om(4),om(4),om(4),om(8),om(16),om(16),om(16),om(32),om(32),om(48),om(64),om(1152),om(1152),om(4),om(4),om(4),om(4),om(4),om(4),om(4),om(4),om(4),om(4),om(24),om(24),om(24),om(24),om(24),om(24),om(24),om(24),om(24),om(24),om(1152),om(1152),om(1152),om(1152),om(1152),om(2304),om(2304),om(3456),om(5760),om(8),om(8),om(8),om(16),om(24),om(48),om(48),om(96),om(192),om(384),om(384),om(384),om(768),om(96),om(96),om(96),om(1152);var dm=Math.pow(2,-52),fm=new Uint32Array(512),pm=function(){function t(e){y(this,t);var n=e.length>>1;if(n>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;var r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}return _(t,[{key:"update",value:function(){for(var t=this.coords,e=this._hullPrev,n=this._hullNext,r=this._hullTri,i=this._hullHash,o=t.length>>1,a=1/0,s=1/0,u=-1/0,l=-1/0,c=0;c<o;c++){var h=t[2*c],d=t[2*c+1];h<a&&(a=h),d<s&&(s=d),h>u&&(u=h),d>l&&(l=d),this._ids[c]=c}for(var f,p,v,m=(a+u)/2,g=(s+l)/2,y=1/0,_=0;_<o;_++){var x=vm(m,g,t[2*_],t[2*_+1]);x<y&&(f=_,y=x)}var b=t[2*f],T=t[2*f+1];y=1/0;for(var w=0;w<o;w++)if(w!==f){var E=vm(b,T,t[2*w],t[2*w+1]);E<y&&E>0&&(p=w,y=E)}for(var S=t[2*p],A=t[2*p+1],M=1/0,R=0;R<o;R++)if(R!==f&&R!==p){var C=gm(b,T,S,A,t[2*R],t[2*R+1]);C<M&&(v=R,M=C)}var P=t[2*v],I=t[2*v+1];if(M===1/0){for(var O=0;O<o;O++)this._dists[O]=t[2*O]-t[0]||t[2*O+1]-t[1];ym(this._ids,this._dists,0,o-1);for(var k=new Uint32Array(o),N=0,L=0,D=-1/0;L<o;L++){var F=this._ids[L];this._dists[F]>D&&(k[N++]=F,D=this._dists[F])}return this.hull=k.subarray(0,N),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(hm(b,T,S,A,P,I)<0){var B=p,U=S,G=A;p=v,S=P,A=I,v=B,P=U,I=G}var j=function(t,e,n,r,i,o){var a=n-t,s=r-e,u=i-t,l=o-e,c=a*a+s*s,h=u*u+l*l,d=.5/(a*l-s*u);return{x:t+(l*c-s*h)*d,y:e+(a*h-u*c)*d}}(b,T,S,A,P,I);this._cx=j.x,this._cy=j.y;for(var H=0;H<o;H++)this._dists[H]=vm(t[2*H],t[2*H+1],j.x,j.y);ym(this._ids,this._dists,0,o-1),this._hullStart=f;var z=3;n[f]=e[v]=p,n[p]=e[f]=v,n[v]=e[p]=f,r[f]=0,r[p]=1,r[v]=2,i.fill(-1),i[this._hashKey(b,T)]=f,i[this._hashKey(S,A)]=p,i[this._hashKey(P,I)]=v,this.trianglesLen=0,this._addTriangle(f,p,v,-1,-1,-1);for(var V,W,X=0;X<this._ids.length;X++){var Y=this._ids[X],q=t[2*Y],Z=t[2*Y+1];if(!(X>0&&Math.abs(q-V)<=dm&&Math.abs(Z-W)<=dm)&&(V=q,W=Z,Y!==f&&Y!==p&&Y!==v)){for(var Q=0,K=0,J=this._hashKey(q,Z);K<this._hashSize&&(-1===(Q=i[(J+K)%this._hashSize])||Q===n[Q]);K++);for(var $=void 0,tt=Q=e[Q];$=n[tt],hm(q,Z,t[2*tt],t[2*tt+1],t[2*$],t[2*$+1])>=0;)if((tt=$)===Q){tt=-1;break}if(-1!==tt){var et=this._addTriangle(tt,Y,n[tt],-1,-1,r[tt]);r[Y]=this._legalize(et+2),r[tt]=et,z++;for(var nt=n[tt];$=n[nt],hm(q,Z,t[2*nt],t[2*nt+1],t[2*$],t[2*$+1])<0;)et=this._addTriangle(nt,Y,$,r[Y],-1,r[nt]),r[Y]=this._legalize(et+2),n[nt]=nt,z--,nt=$;if(tt===Q)for(;hm(q,Z,t[2*($=e[tt])],t[2*$+1],t[2*tt],t[2*tt+1])<0;)et=this._addTriangle($,Y,tt,-1,r[tt],r[$]),this._legalize(et+2),r[$]=et,n[tt]=tt,z--,tt=$;this._hullStart=e[Y]=tt,n[tt]=e[nt]=Y,n[Y]=nt,i[this._hashKey(q,Z)]=Y,i[this._hashKey(t[2*tt],t[2*tt+1])]=tt}}}this.hull=new Uint32Array(z);for(var rt=0,it=this._hullStart;rt<z;rt++)this.hull[rt]=it,it=n[it];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(t,e){return Math.floor(function(t,e){var n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(t){for(var e=this._triangles,n=this._halfedges,r=this.coords,i=0,o=0;;){var a=n[t],s=t-t%3;if(o=s+(t+2)%3,-1!==a){var u=a-a%3,l=s+(t+1)%3,c=u+(a+2)%3,h=e[o],d=e[t],f=e[l],p=e[c];if(mm(r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*f],r[2*f+1],r[2*p],r[2*p+1])){e[t]=p,e[a]=h;var v=n[c];if(-1===v){var m=this._hullStart;do{if(this._hullTri[m]===c){this._hullTri[m]=t;break}m=this._hullPrev[m]}while(m!==this._hullStart)}this._link(t,v),this._link(a,n[o]),this._link(o,c);var g=u+(a+1)%3;i<fm.length&&(fm[i++]=g)}else{if(0===i)break;t=fm[--i]}}else{if(0===i)break;t=fm[--i]}}return o}},{key:"_link",value:function(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}},{key:"_addTriangle",value:function(t,e,n,r,i,o){var a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=e,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}],[{key:"from",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xm,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bm,i=e.length,o=new Float64Array(2*i),a=0;a<i;a++){var s=e[a];o[2*a]=n(s),o[2*a+1]=r(s)}return new t(o)}}]),t}();function vm(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function mm(t,e,n,r,i,o,a,s){var u=t-a,l=e-s,c=n-a,h=r-s,d=i-a,f=o-s,p=c*c+h*h,v=d*d+f*f;return u*(h*v-p*f)-l*(c*v-p*d)+(u*u+l*l)*(c*f-h*d)<0}function gm(t,e,n,r,i,o){var a=n-t,s=r-e,u=i-t,l=o-e,c=a*a+s*s,h=u*u+l*l,d=.5/(a*l-s*u),f=(l*c-s*h)*d,p=(a*h-u*c)*d;return f*f+p*p}function ym(t,e,n,r){if(r-n<=20)for(var i=n+1;i<=r;i++){for(var o=t[i],a=e[o],s=i-1;s>=n&&e[t[s]]>a;)t[s+1]=t[s--];t[s+1]=o}else{var u=n+1,l=r;_m(t,n+r>>1,u),e[t[n]]>e[t[r]]&&_m(t,n,r),e[t[u]]>e[t[r]]&&_m(t,u,r),e[t[n]]>e[t[u]]&&_m(t,n,u);for(var c=t[u],h=e[c];;){do{u++}while(e[t[u]]<h);do{l--}while(e[t[l]]>h);if(l<u)break;_m(t,u,l)}t[n+1]=t[l],t[l]=c,r-u+1>=l-n?(ym(t,e,u,r),ym(t,e,n,l-1)):(ym(t,e,n,l-1),ym(t,e,u,r))}}function _m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function xm(t){return t[0]}function bm(t){return t[1]}function Tm(t,e,n){var r=e/2,i=n/2,o=[{x:-r,y:i},{x:-r,y:-i},{x:r,y:i},{x:r,y:-i}],s=[Uv.fromPointSlope({x:-r,y:0},Math.PI/2),Uv.fromPointSlope({x:0,y:i},0),Uv.fromPointSlope({x:r,y:0},Math.PI/2),Uv.fromPointSlope({x:0,y:-i},0)],u=[],l=t.stopList.slice(1,t.stopList.length-1).map((function(o){for(var l,c,h,d=2*Math.PI,f=null!==(c=null===(l=t.line)||void 0===l?void 0:l.ang)&&void 0!==c?c:0;f>d;)f-=d;for(;f<0;)f+=d;var p={x:0,y:0};Fv(f,Math.PI/2)?(p.x=0,p.y=n/2-o.pos*n):Fv(f,0)?(p.x=o.pos*e-e/2,p.y=0):(p.x=o.pos*e-e/2,p.y=n/2-o.pos*n),f>Math.PI/2&&f<=Math.PI&&(p.x*=-1),f>Math.PI&&f<=2*Math.PI&&(p.y*=-1);var v=Uv.fromPointSlope(p,Math.PI/2-((null===(h=t.line)||void 0===h?void 0:h.ang)||0)),m=s.map((function(t){return v.crossPoint(t)})).filter((function(t){return t&&t.x<=r&&t.x>=-r&&t.y<=i&&t.y>=-i})).map((function(t){return{point:t,color:o.color}})).sort((function(t,e){return e.point.y-t.point.y}));u.push.apply(u,a(m));for(var g=Math.abs(m[1].point.x-m[0].point.x)/10,y=20;y--;){var _=y%2==0?1:-1,x=p.x+_*g,b=v.resolveY(x);x<=r&&x>=-r&&b<=i&&b>=-i&&u.push({point:{x:x,y:b},color:o.color}),g+=g}return v})),c=[],h=[];t:for(var d=0;d<o.length;d++){for(var f=o[d],p=0;p<l.length-1;p++){var v=l[p],m=l[p+1],g=v.distanceToLinearEquation(m),y=v.distanceToPoint(f),_=m.distanceToPoint(f);if(y<g&&_<g){var x=t.stopList.slice(1,t.stopList.length-1)[p],b=t.stopList.slice(1,t.stopList.length-1)[p+1],T=qv(x.color,b.color,y/g);u.splice(p+1,0,{point:f,color:T});continue t}}var w=l[0],E=l[l.length-1],S=w.distanceToPoint(f),A=E.distanceToPoint(f);S<=A?c.push({point:f,dis:S}):h.push({point:f,dis:A})}c=c.sort((function(t,e){return e.dis-t.dis}));var M=c.map((function(e,n){if(0===n)return{point:e.point,color:t.stopList[0].color};var r=t.stopList[0].color,i=t.stopList[1].color;return{point:e.point,color:qv(r,i,1-(0===c[0].dis?1:e.dis/c[0].dis))}})).sort((function(t,e){return e.point.y-t.point.y}));h=h.sort((function(t,e){return e.dis-t.dis}));for(var R=h.map((function(e,n){if(0===n)return{point:e.point,color:t.stopList[t.stopList.length-1].color};var r=t.stopList[t.stopList.length-2].color,i=t.stopList[t.stopList.length-1].color;return{point:e.point,color:qv(r,i,0===h[0].dis?0:e.dis/h[0].dis)}})).sort((function(t,e){return e.point.y-t.point.y})),C=M.concat.apply(M,u).concat(R),P=0;P<C.length;P++)C[P].point.x+=r,C[P].point.y=-C[P].point.y+i;return{points:C,position:{x:0,y:0}}}var wm="\nvec3 rgb2hsl(vec3 rgb) {\n    float cMax = max(max(rgb.r, rgb.g), rgb.b);\n    float cMin = min(min(rgb.r, rgb.g), rgb.b);\n    float delta = cMax - cMin;\n    \n    float h = 0.0;\n    if (delta == 0.0) {\n        h = 0.0;\n    } else if (cMax == rgb.r) {\n        h = 60.0 * mod(((rgb.g - rgb.b) / delta), 6.0);\n    } else if (cMax == rgb.g ) {\n        h = 60.0 * ((rgb.b - rgb.r) / delta + 2.0);\n    } else if (cMax == rgb.b) {\n        h = 60.0 * ((rgb.r - rgb.g) / delta + 4.0);\n    }\n    \n    float l = (cMax + cMin) / 2.0;\n    \n    float s = 0.0;\n    if (delta == 0.0) {\n        s = 0.0;\n    } else {\n        s = delta / (1.0 - abs(2.0 * l - 1.0));\n    }\n    \n    return vec3(h, s, l);\n}\n",Em=[wm],Sm={biLevel:"\nvec4 transform(vec4 texColor, float arg) {\n    mat3 rgb2yuv = mat3(\n        0.2126, 0.7152, 0.0722,\n        -0.09991, -0.33609, 0.43600,\n        0.615, -0.5586, -0.05639\n    );\n    vec3 yuv = texColor.rgb * rgb2yuv;\n    if (yuv.x >= 0.49 || texColor.a < 0.9) {\n        return vec4(1.0, 1.0, 1.0, 1.0) * texColor.a;\n    } else {\n        return vec4(0.0, 0.0, 0.0, 1.0) * texColor.a;\n    }\n}\n",alphaModFix:"\nvec4 transform(vec4 texColor, float arg) {\n   return texColor * arg;\n}\n",alphaBiLevel:"\nvec4 transform(vec4 texColor, float arg) {\n    vec4 result = vec4(texColor);\n    result.rgb = result.rgb / texColor.a;\n    if (texColor.a < arg) {\n        result.a = 0.0;\n    } else {\n        result.a = 1.0;\n    }\n    return result;\n}\n",alphaCeiling:"\nvec4 transform(vec4 texColor, float arg) {\n    vec4 result = vec4(texColor);\n    result.rgb = result.rgb / texColor.a;\n    if (texColor.a > 0.0) {\n        result.a = 1.0;\n    }\n    return result;\n}\n",alphaFloor:"\nvec4 transform(vec4 texColor, float arg) {\n    vec4 result = vec4(texColor);\n    result.rgb = result.rgb / texColor.a;\n    if (texColor.a < 1.0) {\n        result.a = 0.0;\n    }\n    return result;\n}\n",grayscl:"\nvec4 transform(vec4 texColor, float arg) {\n    float avg = (texColor.r + texColor.g + texColor.b) / 3.0;\n    return vec4(avg, avg, avg, texColor.a);\n}\n"},Am=function(t){m(n,t);var e=g(n);function n(t,r){var i;return y(this,n),e.call(this,void 0,(i=Sm[t],"\nvarying vec2 vTextureCoord;\n\nuniform float arg;\nuniform sampler2D uSampler;\n\n".concat(Em.map((function(t){return t+"\n"})).join("\n"),"\n\n").concat(i,"\n\nvoid main(void){\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = transform(texColor, arg);\n}\n")),{arg:r})}return _(n)}(ql.k),Mm=[wm],Rm={clrChange:"\nvec4 transform(vec4 texColor, vec4 arg1, vec4 arg2) {\n    float epsilon = 0.001;\n    vec3 colorDiff = arg1.rgb - (texColor.rgb / max(texColor.a, 0.0000000001));\n    float colorDistance = length(colorDiff);\n    if (colorDistance < epsilon) {\n        arg2.rgb *= arg2.a;\n        return arg2;\n    } else {\n        return texColor;\n    }\n}\n",changeBulletColor:"\nvec4 transform(vec4 texColor, vec4 arg1, vec4 arg2) {\n    if (texColor.a == 0.0) {\n        return texColor;\n    } else {\n        return arg2;\n    }\n}\n",duotone:"\nvec4 transform(vec4 texColor, vec4 arg1, vec4 arg2) {\n    float avg = (texColor.r + texColor.g + texColor.b) / 3.0;\n\n    vec3 hsl = rgb2hsl(vec3(avg, avg, avg));\n\n    vec3 result = arg2.rgb * hsl.z + arg1.rgb * (1.0 - hsl.z);\n\n    return vec4(result * texColor.a, texColor.a);\n}\n"},Cm=function(t){m(n,t);var e=g(n);function n(t,r,i){var o;return y(this,n),e.call(this,void 0,(o=Rm[t],"\nvarying vec2 vTextureCoord;\n\nuniform vec4 arg1;\nuniform vec4 arg2;\nuniform sampler2D uSampler;\n\n".concat(Mm.map((function(t){return t+"\n"})).join("\n"),"\n\n").concat(o,"\n\nvoid main(void){\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = transform(texColor, arg1, arg2);\n}\n")),{arg1:Float32Array.from(r),arg2:Float32Array.from(i)})}return _(n)}(ql.k),Pm=[wm],Im={lum:"\nvec4 transform(vec4 texColor, float arg1, float arg2) {\n    vec3 rgb = texColor.rgb / texColor.a;\n\n    // \u5bf9\u6bd4\u5ea6\n    float C = arg2 * 255.0;\n    float F = (259.0 * (255.0 + C)) / (255.0 * (259.0 - C));\n    rgb.rgb = F * (rgb.rgb - 0.5) + 0.5;\n\n    // \u4eae\u5ea6\n    rgb.rgb += arg1;\n\n    rgb.rgb *= texColor.a;\n    return vec4(rgb, texColor.a);\n}\n"},Om=function(t){m(n,t);var e=g(n);function n(t,r,i){var o;return y(this,n),e.call(this,void 0,(o=Im[t],"\nvarying vec2 vTextureCoord;\n\nuniform float arg1;\nuniform float arg2;\nuniform sampler2D uSampler;\n\n".concat(Pm.map((function(t){return t+"\n"})).join("\n"),"\n\n").concat(o,"\n\nvoid main(void){\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = transform(texColor, arg1, arg2);\n}\n")),{arg1:r,arg2:i})}return _(n)}(ql.k),km=[wm],Nm={alphaInv:"\nvec4 transform(vec4 texColor, vec4 arg1) {\n    float alpha = 1.0 - texColor.a;\n    arg1.rgb = arg1.rgb * alpha;\n    arg1.a = alpha;\n    return arg1;\n}\n"},Lm=function(t){m(n,t);var e=g(n);function n(t,r){var i;return y(this,n),e.call(this,void 0,(i=Nm[t],"\nvarying vec2 vTextureCoord;\n\nuniform vec4 arg1;\nuniform sampler2D uSampler;\n\n".concat(km.map((function(t){return t+"\n"})).join("\n"),"\n\n").concat(i,"\n\nvoid main(void){\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = transform(texColor, arg1);\n}\n")),{arg1:Float32Array.from(r)})}return _(n)}(ql.k),Dm=function(){function t(e,n,r,i,o){y(this,t),this.ctx=e,this.fillStyle=n,this.width=r,this.height=i,this.config=o,this.clonedObjects=[],this._displayObject=null,this.gradientHash=xv()("".concat(JSON.stringify(n)).concat(Math.ceil(r)).concat(Math.ceil(i)))}return _(t,[{key:"displayObject",get:function(){return this._displayObject||(this._displayObject=this.createDisplayObject()),this._displayObject},set:function(t){this._displayObject&&this._displayObject.destroy({children:!0,texture:!0}),this._displayObject=t}},{key:"hasFill",get:function(){return!!this.fillStyle&&"noFill"!==this.fillStyle.fillType}},{key:"createDisplayObject",value:function(){var t;if(!this.fillStyle)return null;if(this.config.useSlideBackgroundFill&&this.ctx.bgTexture){var e=new Fd;return e.texture=this.ctx.bgTexture,e}if("solidFill"===this.fillStyle.fillType||"noFill"===this.fillStyle.fillType)return null;if("gradientFill"===this.fillStyle.fillType){var n=new Fd,r=function(t,e,n){var r,i=new Dl.b;if(t.stopList.sort((function(t,e){return t.pos-e.pos})),!t.stopList.find((function(t){return 0===t.pos}))){var o=t.stopList[0];t.stopList.unshift({pos:0,color:o.color})}if(!t.stopList.find((function(t){return 1===t.pos}))){var s=t.stopList[t.stopList.length-1];t.stopList.push({pos:1,color:s.color})}var u=function(t){for(var e=[],n=0,r=t.length;n<r-1;n++){var i=t[n],o=t[n+1],a=i.pos+.5*(o.pos-i.pos),s=qv(i.color,o.color,.5),u=2*n;e[u]=i,e[u+1]={color:s,pos:a},e[u+2]=o}return e};if(t.stopList=u(t.stopList),t.stopList=u(t.stopList),r=t.line?Tm(t,e,n):t.path?function(t,e,n){var r,i,o,a=[],s={x:0,y:0};if("circle"===(null===(r=t.path)||void 0===r?void 0:r.path)||"rect"===(null===(i=t.path)||void 0===i?void 0:i.path)||"shape"===(null===(o=t.path)||void 0===o?void 0:o.path)){var u=e/2,l=n/2,c=Math.sqrt(u*u+l*l);t.stopList.forEach((function(t){if(0===t.pos)a.push({point:{x:0,y:0},color:t.color});else{var e=c*t.pos,n=new os;n.absellipse(0,0,e,e,0,2*Math.PI,!1,0),n.getPoints(50).forEach((function(e){a.push({point:{x:e.x,y:e.y},color:t.color})}))}s.x=u,s.y=l}))}return{points:a,position:s}}(t,e,n):Tm(t,e,n),r){for(var l=[],c=[],h=r,d=h.position,f=h.points,p=pm.from(f,(function(t){return t.point.x}),(function(t){return t.point.y})),v=0;v<p.triangles.length;v+=3)l.push(f[p.triangles[v]].point.x,f[p.triangles[v]].point.y),l.push(f[p.triangles[v+1]].point.x,f[p.triangles[v+1]].point.y),l.push(f[p.triangles[v+2]].point.x,f[p.triangles[v+2]].point.y),c.push.apply(c,a(Xv(f[p.triangles[v]].color))),c.push.apply(c,a(Xv(f[p.triangles[v+1]].color))),c.push.apply(c,a(Xv(f[p.triangles[v+2]].color)));var m=new ql.l;m.addAttribute("aVertexPosition",l,2),m.addAttribute("aColor",c,4);var g=ql.r.from("\n        precision mediump float;\n        attribute vec2 aVertexPosition;\n        attribute vec4 aColor;\n        uniform mat3 translationMatrix;\n        uniform mat3 projectionMatrix;\n        varying vec4 vColor;\n        void main() {\n            vColor = aColor;\n            gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n        }","precision mediump float;    \n        varying vec4 vColor;\n        void main() {\n            float alpha = vColor.a;\n            vec4 color = vColor;\n            color.a = 1.0;\n            gl_FragColor = color * alpha;\n        }\n    "),y=new kd;y.drawRect(0,0,e+1,n+1),i.mask=y,i.addChild(y);var _=new yf.a(m,g);_.position.x=d.x,_.position.y=d.y,i.addChild(_)}return i}(this.fillStyle,this.width,this.height),i=ql.p.create({width:this.width,height:this.height,resolution:this.ctx.renderer.resolution});return this.ctx.renderer.render(r,{renderTexture:i}),r.destroy({children:!0,texture:!0}),n.texture=i,n}if("blipFill"===this.fillStyle.fillType){var o=this.fillStyle,s=o.src,u=o.filters,l=this.ctx.spriteTexture.getTexture(s),c=this.ctx.spriteTexture.getFrameData(s);if(l){var h=new Fd;if(h.texture=l,u.length>0&&this.config.useFilter&&(this.ctx.featureList||{}).filter&&(h.filters=function(t,e){var n=[];return t.forEach((function(t){var r=((null==e?void 0:e.filter)||[]).indexOf(t.type)>=0;if(["biLevel","alphaBiLevel","alphaCeiling","alphaModFix","alphaFloor","grayscl"].indexOf(t.type)>=0&&r)n.push(new Am(t.type,t.args[0]||0));else if(["clrChange","changeBulletColor","duotone"].indexOf(t.type)>=0&&r){var i=Xv(t.args[0]),o=Xv(t.args[1]);n.push(new Cm(t.type,i,o))}else if("lum"===t.type&&r)n.push(new Om(t.type,t.args[0],t.args[1]));else if("alphaInv"===t.type&&r){var a=Xv(t.args[0]);n.push(new Lm(t.type,a))}})),n}(u,this.ctx.featureList)),this.config.fillFloat){var d=this.config.fillFloat.fillRect,f=d.l,p=d.t,v=d.r,m=d.b,g=this.width*(1-f-v),y=this.height*(1-p-m),_=null!==(t=this.config.shapeRotation)&&void 0!==t?t:0,x=new kd;x.drawRect(0,0,g,y),x.pivot.x=g/2,x.pivot.y=y/2,x.rotation=_;var b=x.getBounds(),T=b.width,w=b.height;h.width=T,h.height=w,h.anchor.x=.5,h.anchor.y=.5,h.rotation=-1*_,h.name="math-texture",0===_?(h.position.x=T/2+f*this.width,h.position.y=w/2+p*this.width):(h.position.x=this.width/2,h.position.y=this.height/2)}else h.width=this.width,h.height=this.height,c.rotate&&(h.position.x=this.width/2,h.position.y=this.height/2,h.anchor.x=.5,h.anchor.y=.5,h.rotation=c.rotate/180*Math.PI);return h}}else if("gifFill"===this.fillStyle.fillType){var E=this.fillStyle,S=E.src,A=E.delays,M=this.ctx.spriteTexture.getGifFrames(S).map((function(t,e){return{texture:t,time:A[e]||20}})),R=new Fp(M,!0);R.name=uv(),R.width=this.width,R.height=this.height;var C=this.fillStyle.loop,P=1;return R.onLoop=function(){P+=1,C>0&&P>C&&R.gotoAndStop(R.totalFrames)},R}return null}},{key:"isSolidFill",value:function(){var t;return"solidFill"===(null===(t=this.fillStyle)||void 0===t?void 0:t.fillType)}},{key:"getSolidFillColor",value:function(){var t;return"solidFill"===(null===(t=this.fillStyle)||void 0===t?void 0:t.fillType)?this.fillStyle.color:"#000000"}},{key:"getClonedDisplayObject",value:function(){var t=this.createDisplayObject();return this.clonedObjects.push(t),t}},{key:"destroy",value:function(){var t;null===(t=this._displayObject)||void 0===t||t.destroy(),this._displayObject=null,this.clonedObjects.forEach((function(t){null==t||t.destroy()})),this.clonedObjects=[]}}]),t}(),Fm=function(t){m(n,t);var e=g(n);function n(t,r,i){var o,a;y(this,n),(o=e.call(this,t,r,i)).textureContainer=new Dl.b,o.underline=null,o.cacheSprite=new Fd;var s=t.shapeId,u=t.paragraphIndex,l=t.lineIndex,c=t.unitIndex,h=t.lineHeight,d=t.width,f=t.underLine,p=t.fill,v=t.height,m=t.isHorz,g=t.lineWidth,_="solidFill"===(null===(a=null==p?void 0:p.fill)||void 0===a?void 0:a.fillType)?p.fill.color:null;if(f){var x=m?h/16:g/16;o.underline=new nm(r,f.type,x,d,v,_,m,s,u,l,c)}return o.textGraphics=o.createTextGraphics(),o.textFill=o.createTextFill(),o.strokeGraphics=o.createStrokeGraphics(),o.strokeFill=o.createStrokeFill(),o}return _(n,[{key:"createStrokeFill",value:function(){var t=this.json,e=t.stroke,n=t.lineWidth,r=t.lineHeight;return new Dm(this.ctx,null==e?void 0:e.fill,n,r,{useFilter:!1,useSlideBackgroundFill:!1})}},{key:"createStrokeGraphics",value:function(){var t=this.json.stroke,e=(null==t?void 0:t.key)?{fillType:"blipFill",src:t.key,filters:[]}:void 0;return new Dm(this.ctx,e,(null==t?void 0:t.width)||0,(null==t?void 0:t.height)||0,{useFilter:!1,useSlideBackgroundFill:!1})}},{key:"createTextFill",value:function(){var t=this.json,e=t.isHorz,n=t.fill,r=t.lineWidth,i=t.lineHeight,o=t.fillLineHeight;return e?new Dm(this.ctx,null==n?void 0:n.fill,r,Math.max(o,i),{useFilter:!1,useSlideBackgroundFill:!1}):new Dm(this.ctx,null==n?void 0:n.fill,o,i,{useFilter:!1,useSlideBackgroundFill:!1})}},{key:"createTextGraphics",value:function(){var t,e=this.json,n=e.fill,r=e.content,i="#000000";"solidFill"===(null===(t=null==n?void 0:n.fill)||void 0===t?void 0:t.fillType)&&(i=n.fill.color);var o=(null==n?void 0:n.key)?{fillType:"blipFill",src:n.key,filters:[{type:"changeBulletColor",args:["#000000",i]}]}:void 0;return new Dm(this.ctx,o,(null==n?void 0:n.width)||0,(null==n?void 0:n.height)||0,{useFilter:"\u25fe"===r,useSlideBackgroundFill:!1})}},{key:"getIterateEntry",value:function(){return null}},{key:"getBgElement",value:function(){return null}},{key:"updateTransform",value:function(t){var e,r,i,o,a=this.json.isHorz;t.position={x:a&&null!==(r=null===(e=t.position)||void 0===e?void 0:e.x)&&void 0!==r?r:0,y:a?0:null!==(o=null===(i=t.position)||void 0===i?void 0:i.y)&&void 0!==o?o:0},t.width=a?this.json.width:this.json.lineWidth,t.height=a?this.json.lineHeight:this.json.height,d(f(n.prototype),"updateTransform",this).call(this,t)}},{key:"preRender",value:function(){var t;null===(t=this.underline)||void 0===t||t.preRender()}},{key:"render",value:function(t){var e=this;t.addSubMTask((function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(e,void 0,void 0,s.mark((function t(){return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.doRender();case 1:case"end":return t.stop()}}),t,this)})))}),"@TextUnitImpl[doRender]")}},{key:"doRender",value:function(){var t=!1,e=this.json,n=e.lineWidth,r=e.lineHeight,i=e.baseLine,o=e.isHorz,a=e.underline,s=e.height,u=e.width,l=e.highlightColor,h=e.x,d=e.y,f=e.content,p=e.fillLineHeight,v=e.fill,m=!1!==this.json.needFill;if(v&&v.fill&&"solidFill"!==v.fill.fillType&&(m=!0),l){var g=new kd,y=Wv(l),_=c(y,2),x=_[0],b=_[1];g.beginFill(x,b),g.drawRect(0,0,o?u:n,o?r:s),g.endFill(),this.textureContainer.addChild(g)}if(this.textGraphics.displayObject){var T=this.textGraphics.displayObject;if(o&&(T.position.y=d>0?d:0),m){var w=this.textFill.displayObject;if(w)w.mask=T,w.addChild(T),w.position.x=-h,T.position.x+=h,t=!0,this.textureContainer.addChild(w);else if(this.textFill.isSolidFill()){var E=new Zv;E.color=this.textFill.getSolidFillColor(),T.filters=[E],t=!0,this.textureContainer.addChild(T)}}else this.textureContainer.addChild(T)}if(this.strokeGraphics.displayObject){var S=this.strokeGraphics.displayObject;if(m){var A=this.strokeFill.displayObject;if(A)A.mask=S,A.addChild(S),o?A.position.y=d>0?d:0:A.position.x=h,this.textureContainer.addChild(A);else if(this.strokeFill.isSolidFill()){o?S.position.y=d>0?d:0:S.position.x=h;var M=new Zv;M.color=this.strokeFill.getSolidFillColor(),S.filters=[M],t=!0,this.textureContainer.addChild(S)}}else o?S.position.y=d>0?d:0:S.position.x=h,this.textureContainer.addChild(S)}if(this.underline&&(this.underline.render(),this.underline.sprite)){o?(this.underline.sprite.position.y=a?a-r/16:i,this.underline.sprite.position.x=0):(this.underline.sprite.position.x=0,this.underline.sprite.position.y=0);var R=this.textFill.getClonedDisplayObject();R?(R.mask=this.underline.sprite,R.addChild(this.underline.sprite),this.textureContainer.addChild(R)):this.textureContainer.addChild(this.underline.sprite)}if(t){var C=ql.p.create({width:o?u:n,height:o?Math.max(p,r):s,resolution:this.ctx.renderer.resolution});this.ctx.renderer.render(this.textureContainer,{renderTexture:C}),this.cacheSprite.texture=C,o&&d<0&&(this.cacheSprite.position.y=d),this.container.addChild(this.cacheSprite)}else this.container.addChild(this.textureContainer);this.container.name=f}},{key:"destroy",value:function(){this.textFill.destroy(),this.textGraphics.destroy(),this.strokeFill.destroy(),this.strokeGraphics.destroy(),this.cacheSprite.texture.destroy(!0),this.cacheSprite.destroy(),this.textureContainer.destroy(),this.container.destroy()}}]),n}(em),Bm=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Um=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).units=[],t.isHorz=!0,t}return _(n,[{key:"getIterateElements",value:function(){return this.units}},{key:"getIterateEntry",value:function(t,e,n){return this.units[e]?this.units[e]:(this.ctx.eventHub.emit("IterateTimeNodeEnd",n),null)}},{key:"preRender",value:function(){}},{key:"createUnits",value:function(t,e,n,r){for(var i=this,o=function(o,a){r.addSubMTask((function(){return Bm(i,void 0,void 0,s.mark((function r(){var i,a,u,l,c,h,d,f,p;return s.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=this.json.textUnits[o],a=this.json,u=a.height,l=a.width,c=a.fillHeight,h=a.baseline,d=a.y,f=a.underline,(p=new Fm(Object.assign(Object.assign({},i),{lineHeight:u,lineWidth:l,baseLine:h-d,underline:f,fillLineHeight:c||u,isHorz:this.isHorz,shapeId:t,paragraphIndex:e,lineIndex:n,unitIndex:o}),this.ctx,this.global)).preRender(),this.units.push(p);case 2:case"end":return r.stop()}}),r,this)})))}),"@TextLineImpl[createUnits]")},a=0,u=this.json.textUnits.length;a<u;a++)o(a)}},{key:"render",value:function(t){var e,n=this,r=l(this.units.reverse());try{var i=function(){var r=e.value;r.render(t),t.addSubMTask((function(){return Bm(n,void 0,void 0,s.mark((function t(){return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.container.addChild(r.container);case 1:case"end":return t.stop()}}),t,this)})))}),"@TextLineImpl[container.addChild]")};for(r.s();!(e=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}}},{key:"destroy",value:function(){this.units.forEach((function(t){t.destroy()})),this.container.destroy({children:!1})}}]),n}(em),Gm=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},jm=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).iterateElements=[],t.lines=[],t.isHorz=!0,t}return _(n,[{key:"getIterateElements",value:function(){if(this.iterateElements.length>0)return this.iterateElements;var t=this.lines.reduce((function(t,e){return t.concat(e.getIterateElements())}),[]);return this.iterateElements=t,t}},{key:"getIterateEntry",value:function(t,e,n){var r=this.getIterateElements();return r[e]?r[e]:(this.ctx.eventHub.emit("IterateTimeNodeEnd",n),null)}},{key:"preRender",value:function(){}},{key:"createLines",value:function(t,e,n){for(var r=this,i=function(i,o){n.addSubMTask((function(){return Gm(r,void 0,void 0,s.mark((function r(){var o,a;return s.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=this.json.lines[i],(a=new Um(o,this.ctx,this.global)).isHorz=this.isHorz,a.container.name="line-"+i,a.createUnits(t,e,i,n),this.lines.push(a);case 2:case"end":return r.stop()}}),r,this)})))}),"@TextParagraphImpl[createLines]")},o=0,a=this.json.lines.length;o<a;o++)i(o)}},{key:"render",value:function(t){var e,n=this,r=l(this.lines);try{var i=function(){var r=e.value;r.render(t),t.addSubMTask((function(){return Gm(n,void 0,void 0,s.mark((function t(){return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.container.addChild(r.container);case 1:case"end":return t.stop()}}),t,this)})))}),"@TextParagraphImpl[container.addChild]")};for(r.s();!(e=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}}},{key:"destroy",value:function(){this.lines.forEach((function(t){t.destroy()})),this.container.destroy({children:!1})}}]),n}(em),Hm=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},zm=function(){function t(e,n,r,i){y(this,t),this.iterateElements=[],this.paragraphs=[],this.container=new Dl.b,this.json=e,this.ctx=n,this.parentGlobalPos=i,this.iterateType=r,this.container.name="textBody",this.global={x:this.parentGlobalPos.x+e.position.x,y:this.parentGlobalPos.y+e.position.y},this.container.position.x=e.position.x,this.container.position.y=e.position.y,this.container.scale.x=e.scale.x,this.container.scale.y=e.scale.y;var o=new kd;o.drawRect(0,0,e.width,e.height),this.container.addChild(o)}return _(t,[{key:"width",get:function(){return this.json.width}},{key:"height",get:function(){return this.json.height}},{key:"x",get:function(){return this.json.position.x}},{key:"y",get:function(){return this.json.position.y}},{key:"getTextElement",value:function(t,e){return"paragraph"===t?this.paragraphs[e[0]]:null}},{key:"getIterateEntry",value:function(t,e){return this.iterateElements[t]?this.iterateElements[t]:(this.ctx.eventHub.emit("IterateTimeNodeEnd",e),null)}},{key:"destroy",value:function(){this.paragraphs.forEach((function(t){t.destroy()}))}},{key:"createParagraphs",value:function(t,e){for(var n=this,r=function(r,i){e.addSubMTask((function(){return Hm(n,void 0,void 0,s.mark((function n(){var i,o,a,u=this;return s.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=this.json.paragraphs[r],(a=new jm(o,this.ctx,this.global)).isHorz=null===(i=this.json.isHorz)||void 0===i||i,a.createLines(t,r,e),e.addSubMTask((function(){return Hm(u,void 0,void 0,s.mark((function t(){return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.iterateElements=this.iterateElements.concat(a.getIterateElements()),a.container.name="\u6bb5\u843d-"+r,this.paragraphs.push(a);case 1:case"end":return t.stop()}}),t,this)})))}),"@TextBodyImpl[paragraphs.push]");case 2:case"end":return n.stop()}}),n,this)})))}),"@TextBodyImpl[createParagraphs]")},i=0,o=this.json.paragraphs.length;i<o;i++)r(i)}},{key:"render",value:function(t){var e,n=this,r=l(this.paragraphs);try{var i=function(){var r=e.value;r.render(t),t.addSubMTask((function(){return Hm(n,void 0,void 0,s.mark((function t(){return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.container.addChild(r.container);case 1:case"end":return t.stop()}}),t,this)})))}),"@TextBodyImpl[container.addChild]")};for(r.s();!(e=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}t.addSubMTask((function(){return Hm(n,void 0,void 0,s.mark((function t(){var e;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.container.width,this.container.scale.x<0&&(this.container.x+=-1*e);case 2:case"end":return t.stop()}}),t,this)})))}),"@TextBodyImpl[reset width]")}}]),t}(),Vm=function(){function t(e){y(this,t),this.scaleX=1,this.scaleY=1,this.pivot={x:0,y:0},this.paths=[],this.hash="",this.width=0,this.height=0,this.graphicsId="",this.textureId="",this.id=e.id,this.type=e.type,this.heightSize=e.heightSize,this.widthSize=e.widthSize,this.fillStyle=e.fillStyle||{fillType:"solidFill",color:"#ffffffff"},this.lineWidth=e.lineWidth||1,this.position=e.position||{x:0,y:0},this.rotate=e.rotation||1,this.path=this.getUnitPath(),this.setScaleFromLineWidth(),this.setScaleFromSize(),this.generatePaths(),this.setPivot()}return _(t,[{key:"setPivot",value:function(){switch(this.type){case"oval":case"diamond":this.pivot={x:this.width/2,y:this.height/2};break;case"triangle":this.pivot={x:.7*this.width,y:this.height/2};break;default:this.pivot={x:this.width,y:this.height/2}}}},{key:"generatePaths",value:function(){this.hash="arrow-"+xv()(this.path+this.scaleX+this.scaleY),this.paths=[{id:this.id,path:this.path,fill:"norm",hasStroke:!1,hash:this.hash,scale:{x:this.scaleX,y:this.scaleY}}]}},{key:"getUnitPath",value:function(){switch(this.type){case"stealth":return"M 0,0 L 95250,47625 L 0,95250 L 28575,47625 C C";case"oval":return"M 0,47625 A 47625,47625,-3.14159265,6.2831853 C C";case"diamond":return"M 47625,0 L 95250,47625 L 47625,95250 L 0,47625 C C";case"arrow":return"M 9525,0 L 95250,47625 L 9525,95250 L 0,85725 L 68389.5,47625 L 0,9525 C C";case"triangle":return"M 0,0 L 95250,47625 L 0,95250 C C";default:return""}}},{key:"setScaleFromLineWidth",value:function(){switch(this.type){case"stealth":case"oval":case"diamond":case"arrow":case"triangle":this.scaleX*=.29*this.lineWidth+.7,this.scaleY*=.29*this.lineWidth+.7;break;default:throw new Error("can't match any arrow type!")}}},{key:"setScaleFromSize",value:function(){switch(this.type){case"stealth":case"oval":case"diamond":case"arrow":case"triangle":this.scaleX*=1,this.scaleY*=1;break;default:throw new Error("can't match any arrow type!")}switch(this.widthSize){case"sm":this.scaleX*=3/4;break;case"lg":this.scaleX*=1.25;break;case"med":this.scaleX*=1}switch(this.heightSize){case"sm":this.scaleY*=3/4;break;case"lg":this.scaleY*=1.25;break;case"med":this.scaleY*=1}this.width=10*this.scaleX,this.height=10*this.scaleY}}]),t}(),Wm=function(){function t(e,n,r,i,o,a,s,u,l,c,h){y(this,t),this.id=e,this.ctx=n,this.paths=r,this.hash=i,this.nept=o,this.width=a,this.height=s,this.lineStyle=u,this.shouldFill=l,this.bgColor=c,this.lnColor=h,this.clonedObjects=[],this._displayObject=null,this.isRectangle=!1,this.isPureRect=!1,this.isColoredPureRect=!1,this.isRectangle=this.rectangleDetect(r),this.isRectangle&&l?this.bgColor?this.isColoredPureRect=!0:this.isPureRect=!0:this.ctx.graphicsTexture.addGraphics(this.id,this.paths,this.hash,this.nept,this.width,this.height,this.lineStyle,this.ctx.objectPoolGroup,this.shouldFill,this.bgColor,this.lnColor)}return _(t,[{key:"displayObject",get:function(){return this._displayObject}},{key:"pointDis",value:function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)}},{key:"rectangleDetect",value:function(t){if(1!==t.length)return!1;var e=t[0].path.trim().split(" ");if(10!==e.length)return!1;for(var n=[],r=[],i=0;i<e.length;i+=2){var o=e[i],a=e[i+1].split(",").map((function(t){return Number(t)/100})),s=c(a,2),u=s[0],l=s[1];n.push(o),r.push({x:u,y:l})}if("MLLLC"!==n.join(""))return!1;for(var h=0;h<3;h++){var d=r[h],f=r[h+1];if(d.x!==f.x&&d.y!==f.y)return!1}var p=r.slice(0,4).reduce((function(t,e){return t+e.x}),0)/4,v=r.slice(0,4).reduce((function(t,e){return t+e.y}),0)/4;if(Number.isNaN(p)||Number.isNaN(v))return!1;var m={x:p,y:v};return Fv(this.pointDis(m,r[0]),this.pointDis(m,r[1]))&&Fv(this.pointDis(m,r[0]),this.pointDis(m,r[2]))&&Fv(this.pointDis(m,r[0]),this.pointDis(m,r[3]))&&this.pointDis(m,r[0])===this.pointDis(m,r[1])}},{key:"createDisplayObject",value:function(){if(this.isPureRect){var t=new kd;return t.beginFill(0,1),t.drawRect(0,0,this.width,this.height),t}if(this.isColoredPureRect&&this.bgColor){var e=new kd,n=Wv(this.bgColor),r=c(n,2),i=r[0],o=r[1];return e.beginFill(i,o),e.drawRect(0,0,this.width,this.height),e}var a=new Fd,s=this.ctx.graphicsTexture.getGraphicsData(this.id);return s?(a.texture=s.texture,a.pivot.x=s.pivot.x,a.pivot.y=s.pivot.y,a):null}},{key:"getClonedDisplayObject",value:function(){var t=this.createDisplayObject();return this.clonedObjects.push(t),t}},{key:"render",value:function(){this._displayObject=this.createDisplayObject()}},{key:"isNeedMask",value:function(t,e){var n=!1;return this._displayObject&&(n=!(this.isRectangle&&Math.abs(t-this._displayObject.width)<2&&Math.abs(e-this._displayObject.height)<2&&this.shouldFill)),n}},{key:"addArrows",value:function(t){var e;null===(e=this._displayObject)||void 0===e||e.addChild(t)}},{key:"destroy",value:function(){var t;null===(t=this._displayObject)||void 0===t||t.destroy(),this._displayObject=null,this.clonedObjects.forEach((function(t){null==t||t.destroy()})),this.clonedObjects=[]}}]),t}(),Xm=function(t){m(n,t);var e=g(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(ql.k),Ym=n(109),qm=n.n(Ym),Zm=n(110),Qm=n.n(Zm),Km=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,qm.a,Qm.a,{uShapeFilterArea:new Float32Array([0,0,0,0]),uGlowColor:Xv(t.color),uSdfSampler:ql.t.WHITE,uSdfReady:0,uSdfMaxDis:0,uRad:t.rad/2,uSdfPosition:new Float32Array([0,0])})).priority=3,r.json=t,r}return _(n,[{key:"filterAreaJustify",value:function(t){var e=Math.ceil(this.json.rad),n=Math.ceil(t.width+2*e),r=Math.ceil(t.height+2*e);return new Bl.j(t.x-e,t.y-e,n,r)}},{key:"sdfBox",value:function(t,e){var n=Math.ceil(this.json.rad),r=Math.ceil(t+2*n),i=Math.ceil(e+2*n);return new Bl.j(n,n,r,i)}}]),n}(Xm),Jm=n(19),$m=n.n(Jm),tg=n(111),eg=n.n(tg),ng=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,$m.a,eg.a,{uShapeFilterArea:new Float32Array([0,0,0,0]),uRad:t.rad,uSdfSampler:ql.t.WHITE,uSdfReady:0,uSdfMaxDis:1})).priority=2,r.json=t,r}return _(n,[{key:"filterAreaJustify",value:function(t){return t}},{key:"sdfBox",value:function(t,e){return new Bl.j(0,0,t,e)}}]),n}(Xm),rg=_((function t(){y(this,t)})),ig=n(112),og=n.n(ig),ag=function(t){m(n,t);var e=g(n);function n(t){return y(this,n),e.call(this,$m.a,og.a,{uColor:Xv(t)})}return _(n)}(ql.k),sg=function(t){m(n,t);var e=g(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this)).order=1,o.outputTexture=ql.t.WHITE,o.frameTextures=[],o.json=t,o.effectContainer=r,o.outputSprite=new Fd,o.targetScale=i,o.outputSprite.scale.x=o.json.sx,o.outputSprite.scale.y=o.json.sy,o.outputSprite.skew.x=(o.targetScale.x>0?1:-1)*o.json.kx,o.outputSprite.skew.y=(o.targetScale.y>0?1:-1)*o.json.ky,o.outputSprite.filters=[new Up.BlurFilter(o.json.blurRad/2,4),new ag(o.json.color)],o}return _(n,[{key:"updateFrame",value:function(t){var e=this.frameTextures[t];if(e){var n=this.effectContainer.getBounds(),r=(this.effectContainer.width-e.width)/2,i=(this.effectContainer.height-e.height)/2,o=new Bl.g(n.x,n.y),a=new Bl.g(n.x,n.y);switch(this.json.align){case"tl":a.x=n.x,a.y=n.y;break;case"t":a.x=n.x+n.width/2,a.y=n.y,o.x+=n.width/2;break;case"tr":a.x=n.x+n.width,a.y=n.y,o.x+=n.width;break;case"l":a.x=n.x,a.y=n.y+n.height/2,o.y+=n.height/2;break;case"ctr":a.x=n.x+n.width/2,a.y=n.y+n.height/2,o.x+=n.width/2,o.y+=n.height/2;break;case"r":a.x=n.x+n.width,a.y=n.y+n.height/2,o.x+=n.width,o.y+=n.height/2;break;case"bl":a.x=n.x,a.y=n.y+n.height,o.y+=n.height;break;case"b":a.x=n.x+n.width/2,a.y=n.y+n.height,o.x+=n.width/2,o.y+=n.height;break;case"br":a.x=n.x+n.width,a.y=n.y+n.height,o.x+=n.width,o.y+=n.height}var s=this.effectContainer.toLocal(a);this.outputSprite.pivot.x=s.x,this.outputSprite.pivot.y=s.y;var u=new Bl.g(this.json.dist,0),l=new Bl.d;l.rotate(this.json.dir),l.translate(o.x+r,o.y+i),l.apply({x:u.x,y:u.y},u);var c=this.effectContainer.toLocal(u);this.outputSprite.position.x=c.x,this.outputSprite.position.y=c.y,this.outputSprite.texture=e}}},{key:"createOutput",value:function(t,e){this.frameTextures[e]=t}},{key:"setFrameOffset",value:function(t,e){console.log(t,e)}}]),n}(rg),ug=n(113),lg=n.n(ug),cg=function(t){m(n,t);var e=g(n);function n(t,r){var i;return y(this,n),i=e.call(this,$m.a,lg.a,{uStartAlpha:t.startAlpha,uEndAlpha:t.endAlpha,uStartPos:t.startPos,uEndPos:t.endPos,uHeight:r}),console.log(v(i)),i}return _(n)}(ql.k),hg=function(t){m(n,t);var e=g(n);function n(t,r,i,o,a){var s;y(this,n),(s=e.call(this)).order=2,s.outputSprite=new Fd,s.outputTexture=ql.t.WHITE,s.frameTextures=[],s.json=t,s.shapeScaleX=o,s.effectContainer=r,s.rotation=i,s.ctx=a,s.outputSprite.anchor.x=.5,s.outputSprite.anchor.y=.5;var u=s.effectContainer.getBounds();return s.outputSprite.filters=[new Up.BlurFilter(s.json.blurRad/2,4),new cg(s.json,u.height)],s.outputSprite.alpha=.5,s.outputSprite.rotation=-1===s.shapeScaleX?Math.PI+2*s.rotation:Math.PI-2*s.rotation,s.outputSprite.scale.x=-1,s}return _(n,[{key:"updateFrame",value:function(t){var e=this.frameTextures[t];e&&(this.outputSprite.texture=e)}},{key:"createOutput",value:function(t,e){this.frameTextures[e]=t}},{key:"setFrameOffset",value:function(t,e){var n=this.effectContainer.getBounds(),r=new Bl.g(n.x+n.width/2,n.y+n.height/2),i=new Bl.g(r.x,r.y+n.height+this.json.dist),o=this.effectContainer.toLocal(i);this.outputSprite.position.x=o.x+t,this.outputSprite.position.y=o.y+e}}]),n}(rg),dg=n(114),fg=n.n(dg),pg=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,$m.a,fg.a,{})).priority=1,r.json=t,r}return _(n,[{key:"filterAreaJustify",value:function(t){return t}},{key:"sdfBox",value:function(){return null}}]),n}(Xm),vg=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},mg=function(t){m(n,t);var e=g(n);function n(t,r,i,o,s,u){var c;y(this,n),(c=e.call(this)).effects=[],c.attachs=[],c.frames=new Map,c._targetContainer=new Dl.b,c.frameCount=1,c.ctx=o,c.originWidth=t.width,c.originHeight=t.height,c.cacheKey=i,c.sourceSprite=new Fd;var h,d=l(r);try{for(d.s();!(h=d.n()).done;){var f=h.value;switch(f.type){case"innerShadow":c.effects.push(new pg(f));break;case"softEdge":c.effects.push(new ng(f));break;case"glow":c.effects.push(new Km(f));break;case"reflection":c.attachs.push(new hg(f,t,s,u.x,c.ctx));break;case"outerShadow":c.attachs.push(new sg(f,t,u))}}}catch(E){d.e(E)}finally{d.f()}c.effects=c.effects.sort((function(t,e){return t.priority-e.priority})),c.attachs=c.attachs.sort((function(t,e){return t.order-e.order}));var p,v=l(c.attachs);try{for(v.s();!(p=v.n()).done;){var m=p.value;c._targetContainer.addChild(m.outputSprite)}}catch(E){v.e(E)}finally{v.f()}c.sourceSprite.name="effect-sprite";var g=new Bl.j(0,0,c.originWidth,c.originHeight),_=c.effects.map((function(t){return t.filterAreaJustify(g)})),x=_.map((function(t){return t.x})),b=_.map((function(t){return t.y})),T=_.map((function(t){return t.width})),w=_.map((function(t){return t.height}));return c.filterArea=new Bl.j(Math.min.apply(Math,a(x).concat([0])),Math.min.apply(Math,a(b).concat([0])),Math.max.apply(Math,a(T).concat([c.originWidth])),Math.max.apply(Math,a(w).concat([c.originHeight]))),c.sourceSprite.filters=c.effects,c.sourceSprite.filterArea=new Bl.j(0,0,c.filterArea.width,c.filterArea.height),c._targetSprite=new Fd,c._targetSprite.name="effect-sprite",c._targetContainer.sortableChildren=!0,c._targetSprite.zIndex=999,c._targetContainer.addChild(c._targetSprite),c}return _(n,[{key:"container",get:function(){return this._targetContainer}},{key:"getSdfTexture",value:function(t,e){return vg(this,void 0,void 0,s.mark((function n(){var r,i;return s.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="".concat(this.cacheKey,"_").concat(t),i=this.effects.map((function(t){return{sdfRect:t.sdfBox(e.width,e.height)}})).reduce((function(t,e){return e.sdfRect?(t.width<e.sdfRect.width&&(t.width=e.sdfRect.width),t.height<e.sdfRect.height&&(t.height=e.sdfRect.height),t):t}),new Bl.j(0,0)),n.abrupt("return",0===i.width||0===i.height?null:this.ctx.sdfManager.getSdf(e,i,r));case 2:case"end":return n.stop()}}),n,this)})))}},{key:"setFrameCount",value:function(t){this.frameCount=t}},{key:"updateFrame",value:function(t){var e=this.frames.get(t);if(e){this._targetSprite.texture=e.texture,this._targetSprite.pivot.x=e.pivotX,this._targetSprite.pivot.y=e.pivotY;var n,r=l(this.attachs);try{for(r.s();!(n=r.n()).done;){n.value.updateFrame(t)}}catch(i){r.e(i)}finally{r.f()}}}},{key:"hasFrame",value:function(t){return this.frames.has(t)}},{key:"setFrameOffset",value:function(t,e){this._targetContainer.position.x=-1*t,this._targetContainer.position.y=-1*e,this.attachs.forEach((function(n){return n.setFrameOffset(t,e)}))}},{key:"createFrame",value:function(t,e){var n,r;return vg(this,void 0,void 0,s.mark((function i(){var o,a,u,c,h,d,f,p,v,m,g,y,_,x,b,T;return s.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=e.width,a=e.height,!this.frames.has(t)){i.next=3;break}return i.abrupt("return");case 3:return i.next=5,this.getSdfTexture(t,e);case 5:u=i.sent,c=null!==(n=null==u?void 0:u.texture.width)&&void 0!==n?n:0,h=null!==(r=null==u?void 0:u.texture.height)&&void 0!==r?r:0,d=l(this.effects);try{for(d.s();!(f=d.n()).done;)p=f.value,(v=p.sdfBox(e.width,e.height))&&u&&(p.uniforms.uSdfSampler=u.texture,p.uniforms.uSdfIsReady=1,p.uniforms.uSdfMaxDis=u.maxDis,p.uniforms.uSdfPosition=new Float32Array([(u.texture.width-v.width)/2/u.texture.width,(u.texture.height-v.height)/2/u.texture.height])),p.uniforms.uShapeFilterArea=new Float32Array([0,0,this.filterArea.width,this.filterArea.height])}catch(s){d.e(s)}finally{d.f()}this.sourceSprite.texture=e,m=(this.filterArea.width-this.sourceSprite.width)/2,g=(this.filterArea.height-this.sourceSprite.height)/2,this.sourceSprite.x=m,this.sourceSprite.y=g,y=Math.max(o,c,this.filterArea.width),_=Math.max(a,h,this.filterArea.height),x=ql.p.create({width:y,height:_,resolution:this.ctx.renderer.resolution}),this.ctx.renderer.render(this.sourceSprite,{renderTexture:x}),this.frames.set(t,{texture:x,pivotX:-1*(this.originWidth-y)/2,pivotY:-1*(this.originWidth-y)/2}),b=l(this.attachs);try{for(b.s();!(T=b.n()).done;)T.value.createOutput(x,t)}catch(s){b.e(s)}finally{b.f()}Array.from(this.frames.keys()).length===this.frameCount&&this.emit("ready");case 18:case"end":return i.stop()}}),i,this)})))}}]),n}(su.a),gg=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},yg={pivot:{x:0,y:0},width:0,height:0},_g=function(t){m(n,t);var e=g(n);function n(t,r,i,o){var a,s;y(this,n),(a=e.call(this,t,r,i)).renderContainer=new Dl.b,a.needCacheAsBitMap=!1,a.backgroundGraphics=null,a.effectList=[],a.strokeGraphics=null,a.arrowList=[],a.fillColorFilter=new Zv,a.strokeColorFilter=new Zv,a.pptColorFilter=new Zv,a.id="",a.ppt_c=new kv(v(a)),a.fill=new Nv(v(a)),a.stroke=new Iv(v(a)),a.effectObject=null,a.effectContainer=new Dl.b,a.effectDisposer=function(){},a.json=t,a.json.fillStyle&&"groupFill"===a.json.fillStyle.fillType&&o&&(a.json.fillStyle=o),a.id=t.id;var u=a.json,l=u.fillStyle,c=u.lineStyle;return a.container.sortableChildren=!0,a.container.name=t.id+"_container_[Shape]",a.effectContainer.name="effect-container",a.effectContainer.zIndex=1,a.container.addChild(a.effectContainer),a.renderContainer.name=t.id+"_render_container_[Shape]",a.generateArrowList(),a.backgroundFill=a.createBackgroundFill(),a.backgroundGraphics=a.createBackgroundGraphics(),a.strokeFill=a.createStrokeFill(),a.strokeGraphics=a.createStrokeGraphics(),a.ctx.timingTargets.addTarget(a.id,v(a)),"solidFill"===(null==l?void 0:l.fillType)&&(a.fillColorFilter.currentColor=l.color,a.fillColorFilter.designColor=l.color),"solidFill"===(null===(s=null==c?void 0:c.fill)||void 0===s?void 0:s.fillType)&&(a.strokeColorFilter.currentColor=c.fill.color,a.strokeColorFilter.designColor=c.fill.color),a.updateTransform(a.json),t.textBody&&(a.text=new zm(t.textBody,a.ctx,t.textBody.iterateType,{x:a.designGlobalPosition.x,y:a.designGlobalPosition.y})),a.container.hitArea=new Bl.k(1,1,a.json.width,a.json.height),a.ctx.slideScopeEventHub.once("slide-render",(function(t){if(a.ctx.slideIndex===t&&a.effectObject){var e=a.getEffectTexture();if(e){var n=e.texture,r=e.offsetX,i=e.offsetY;a.effectObject.setFrameOffset(r,i),a.effectObject.createFrame(1,n)}}})),a}return _(n,[{key:"interactiveContainer",get:function(){return this.renderContainer}},{key:"strokeActive",get:function(){var t,e,n,r,i,o,a;return this.strokeFill.displayObject?(null!==(n=null===(e=null===(t=this.strokeFill.displayObject)||void 0===t?void 0:t.filters)||void 0===e?void 0:e.length)&&void 0!==n?n:-1)>0:(null!==(a=null===(o=null===(i=null===(r=this.strokeGraphics)||void 0===r?void 0:r.displayObject)||void 0===i?void 0:i.filters)||void 0===o?void 0:o.length)&&void 0!==a?a:-1)>0},set:function(t){var e,n,r,i,o,a,s=this.strokeFill.displayObject;t?s&&(null!==(n=null===(e=s.filters)||void 0===e?void 0:e.indexOf(this.strokeColorFilter))&&void 0!==n?n:-1)<0?s.filters=[this.strokeColorFilter]:(null===(r=this.strokeGraphics)||void 0===r?void 0:r.displayObject)&&(null!==(o=null===(i=this.strokeGraphics.displayObject.filters)||void 0===i?void 0:i.indexOf(this.strokeColorFilter))&&void 0!==o?o:-1)<0&&(this.strokeGraphics.displayObject.filters=[this.strokeColorFilter]):s?s.filters=[]:(null===(a=this.strokeGraphics)||void 0===a?void 0:a.displayObject)&&(this.strokeGraphics.displayObject.filters=[])}},{key:"pptColorActive",get:function(){var t,e;return(null!==(e=null===(t=this.renderContainer.filters)||void 0===t?void 0:t.length)&&void 0!==e?e:-1)>0},set:function(t){this.renderContainer.filters=t?[this.pptColorFilter]:[]}},{key:"fillActive",get:function(){var t,e,n,r,i,o,a;return this.backgroundFill.displayObject?(null!==(n=null===(e=null===(t=this.backgroundFill.displayObject)||void 0===t?void 0:t.filters)||void 0===e?void 0:e.length)&&void 0!==n?n:-1)>0:(null!==(a=null===(o=null===(i=null===(r=this.backgroundGraphics)||void 0===r?void 0:r.displayObject)||void 0===i?void 0:i.filters)||void 0===o?void 0:o.length)&&void 0!==a?a:-1)>0},set:function(t){var e,n,r,i,o,a;t?this.backgroundFill.displayObject&&(null!==(n=null===(e=this.backgroundFill.displayObject.filters)||void 0===e?void 0:e.indexOf(this.fillColorFilter))&&void 0!==n?n:-1)<0?this.backgroundFill.displayObject.filters=[this.fillColorFilter]:(null===(r=this.backgroundGraphics)||void 0===r?void 0:r.displayObject)&&(null!==(o=null===(i=this.backgroundGraphics.displayObject.filters)||void 0===i?void 0:i.indexOf(this.fillColorFilter))&&void 0!==o?o:-1)<0&&(this.backgroundGraphics.displayObject.filters=[this.fillColorFilter]):this.backgroundFill.displayObject?this.backgroundFill.displayObject.filters=[]:(null===(a=this.backgroundGraphics)||void 0===a?void 0:a.displayObject)&&(this.backgroundGraphics.displayObject.filters=[])}},{key:"getTextElement",value:function(t,e){var n,r;return null!==(r=null===(n=this.text)||void 0===n?void 0:n.getTextElement(t,e))&&void 0!==r?r:null}},{key:"getBgElement",value:function(){return this}},{key:"getIterateEntry",value:function(t,e,n){return 0===e?this:"el"===t?(this.ctx.eventHub.emit("IterateTimeNodeEnd",n),null):this.text?this.text.getIterateEntry(e-1,n)||null:(this.ctx.eventHub.emit("IterateTimeNodeEnd",n),null)}},{key:"getEffectTexture",value:function(){var t,e=this.effectContainer.getLocalBounds(),n=0,r=0,i=l(this.effectContainer.children);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.pivot.x>n&&(n=o.pivot.x),o.pivot.y>r&&(r=o.pivot.y)}}catch(u){i.e(u)}finally{i.f()}var a=new Bl.d;if(a.translate(n,r),0===this.effectContainer.children.length)return null;var s=ql.p.create({width:e.width,height:e.height,resolution:this.ctx.renderer.resolution});return this.ctx.renderer.render(this.effectContainer,{renderTexture:s,transform:a}),{texture:s,offsetX:n,offsetY:r}}},{key:"createStrokeGraphics",value:function(){var t,e,n,r,i=this.json,o=i.id,a=i.geometry,s=i.lineStyle,u=(null==a?void 0:a.lineTransform)||yg,l=u.width,c=u.height,h=u.pivot,d=l||this.json.width,f=c||this.json.height,p="solidFill"===(null===(t=null==s?void 0:s.fill)||void 0===t?void 0:t.fillType)?s.fill.color:null;return s&&"noFill"!==(null===(e=s.fill)||void 0===e?void 0:e.fillType)?new Wm(o+"-path-graphics",this.ctx,null!==(n=null==a?void 0:a.paths)&&void 0!==n?n:[],null!==(r=null==a?void 0:a.hash)&&void 0!==r?r:"",h||{x:0,y:0},d,f,s,!1,null,p):null}},{key:"createStrokeFill",value:function(){var t=this.calculateFillObjectOffset(),e=c(t,2),n=e[0],r=e[1],i=this.json,o=i.geometry,a=i.lineStyle,s=i.width,u=i.height,l=(null==o?void 0:o.lineTransform)||yg,h=Tv()(null==a?void 0:a.width)?a.width:1;return new Dm(this.ctx,null==a?void 0:a.fill,(l.width||s)+h+n,Math.max((l.height||u)+h,r),{useFilter:!0,useSlideBackgroundFill:!1})}},{key:"createBackgroundGraphics",value:function(){var t,e=this.json,n=e.geometry,r=e.lineStyle,i=e.fillStyle,o=e.id,a=(null==n?void 0:n.lineTransform)||yg,s=a.width,u=a.height,l=a.pivot,c=s||this.json.width,h=u||this.json.height,d="solidFill"===(null==i?void 0:i.fillType)?i.color:null;return i&&"noFill"!==i.fillType||this.json.isPicture?new Wm(o+"-bg-graphics",this.ctx,null!==(t=null==n?void 0:n.paths)&&void 0!==t?t:[],(null==n?void 0:n.hash)||"",l||{x:0,y:0},c,h,r,!0,d,null):null}},{key:"createBackgroundFill",value:function(){var t,e,n=this.json,r=n.fillStyle,i=n.width,o=n.height,a=n.lineStyle,s=n.geometry,u=(null==s?void 0:s.fillTransform)||yg;return new Dm(this.ctx,r,(u.width||i)+(null!==(t=null==a?void 0:a.width)&&void 0!==t?t:0),(u.height||o)+(null!==(e=null==a?void 0:a.width)&&void 0!==e?e:0),{useFilter:!0,useSlideBackgroundFill:this.json.useBgFill,fillFloat:this.json.fillFloat,shapeRotation:this.json.rotation})}},{key:"createBackground",value:function(){var t,e,n,r,i,o,a,s,u=(null===(t=this.json.geometry)||void 0===t?void 0:t.fillTransform)||yg,l=u.pivot,c=u.width,h=u.height,d=this.backgroundFill.displayObject;d?(this.json.useBgFill&&(null===(n=this.backgroundGraphics)||void 0===n?void 0:n.displayObject)?(this.needCacheAsBitMap=!0,d.mask=this.backgroundGraphics.displayObject,d.pivot.x=(null===(r=this.json.position)||void 0===r?void 0:r.x)||0,d.pivot.y=(null===(i=this.json.position)||void 0===i?void 0:i.y)||0,this.effectContainer.addChild(this.backgroundGraphics.displayObject)):"gifFill"===(null===(o=this.json.fillStyle)||void 0===o?void 0:o.fillType)?(d.height=h||this.designHeight,d.width=c||this.designWidth,d instanceof Fp&&d.play(),(null===(a=this.backgroundGraphics)||void 0===a?void 0:a.isNeedMask(d.width,d.height))&&(d.mask=this.backgroundGraphics.displayObject,this.backgroundGraphics.displayObject&&this.effectContainer.addChild(this.backgroundGraphics.displayObject))):(null===(s=this.backgroundGraphics)||void 0===s?void 0:s.isNeedMask(d.width,d.height))&&(this.json.fillFloat||(this.needCacheAsBitMap=!0,d.mask=this.backgroundGraphics.displayObject,this.backgroundGraphics.displayObject&&this.effectContainer.addChild(this.backgroundGraphics.displayObject))),this.json.fillFloat||(d.x=l.x,d.y=l.y),this.effectContainer.addChild(d)):this.backgroundFill.hasFill&&(null===(e=this.backgroundGraphics)||void 0===e?void 0:e.displayObject)&&this.effectContainer.addChild(this.backgroundGraphics.displayObject)}},{key:"createPathFill",value:function(){var t,e,n,r=this.strokeFill.displayObject,i=null===(t=this.strokeGraphics)||void 0===t?void 0:t.displayObject,o=this.calculateFillObjectOffset(),a=c(o,2),s=a[0],u=a[1];r?((null===(e=this.strokeGraphics)||void 0===e?void 0:e.isNeedMask(r.width,r.height))&&i&&(this.needCacheAsBitMap=!0,r.pivot.x=i.pivot.x,r.pivot.y=i.pivot.y,i.pivot.x=0,i.pivot.y=0,r.mask=i,r.addChild(i),r.position.x=-s/2,r.position.y=-u/2,i.position.x=s/2,i.position.y=u/2),this.effectContainer.addChild(r)):this.strokeFill.hasFill&&(null===(n=this.strokeGraphics)||void 0===n?void 0:n.displayObject)&&this.effectContainer.addChild(this.strokeGraphics.displayObject)}},{key:"createFilledPathMask",value:function(){var t,e,n,r,i=(null===(e=null===(t=this.json.geometry)||void 0===t?void 0:t.paths)||void 0===e?void 0:e.filter((function(t){return"none"!==t.fill&&"norm"!==t.fill})))||[],o=l(i);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=this.ctx.graphicsTexture.getGraphicsData(a.id);if(s){var u=new Fd(s.texture);u.pivot.x=s.pivot.x,u.pivot.y=s.pivot.y;var c=this.backgroundFill.getClonedDisplayObject(),h=null===(n=this.backgroundGraphics)||void 0===n?void 0:n.getClonedDisplayObject(),d=c||h;d&&(this.backgroundFill.displayObject&&(d.pivot.x=this.backgroundFill.displayObject.pivot.x,d.pivot.y=this.backgroundFill.displayObject.pivot.y),d.mask=u,d.filters=[tm[a.fill]],this.needCacheAsBitMap=!0,this.effectContainer.addChild(d),this.effectContainer.addChild(u))}}}catch(f){o.e(f)}finally{o.f()}}},{key:"createArrow",value:function(){var t=this;this.arrowList.length&&this.arrowList.forEach((function(e){var n,r=t.ctx.graphicsTexture.getGraphicsData(e.graphicsId);if(r){var i=r.texture,o=new Fd(i);o.pivot.x=e.pivot.x,o.pivot.y=e.pivot.y,o.position.x=e.position.x,o.position.y=e.position.y,o.rotation=e.rotate/180*Math.PI,null===(n=t.backgroundGraphics)||void 0===n||n.addArrows(o)}}))}},{key:"generateArrowList",value:function(){var t,e,n=this,r=this.json,i=r.lineArrowList,o=r.lineStyle,a=r.id,s="solidFill"===(null===(t=null==o?void 0:o.fill)||void 0===t?void 0:t.fillType)?o.fill.color:null;null===(e=i||[])||void 0===e||e.forEach((function(t,e){var r,i,u=new Vm(Object.assign(Object.assign({},t),{fillStyle:null==o?void 0:o.fill,lineWidth:null!==(r=null==o?void 0:o.width)&&void 0!==r?r:0}));u.graphicsId="".concat(a,"-arrow-").concat(e,"-graphics"),u.textureId="".concat(a,"-arrow-").concat(e,"-fill"),n.ctx.graphicsTexture.addGraphics(u.graphicsId,null!==(i=u.paths)&&void 0!==i?i:[],u.hash,{x:0,y:0},u.width,u.height,void 0,n.ctx.objectPoolGroup,!0,s,null),n.arrowList.push(u)}))}},{key:"calculateFillObjectOffset",value:function(){var t=0,e=0;return this.arrowList.length&&(t=this.arrowList.reduce((function(t,e){return Math.max(t,e.width)}),0),e=this.arrowList.reduce((function(t,e){return Math.max(t,e.height)}),0)),[t,e]}},{key:"preRender",value:function(t){var e,n,r,i=this,o=this.json,a=o.lineStyle,u=o.geometry,c=(null==u?void 0:u.lineTransform)||yg,h=c.width,d=c.height,f=h||this.json.width,p=d||this.json.height,v=(null===(e=null==u?void 0:u.paths)||void 0===e?void 0:e.filter((function(t){return"none"!==t.fill&&"norm"!==t.fill})))||[],m="solidFill"===(null===(n=null==a?void 0:a.fill)||void 0===n?void 0:n.fillType)?a.fill.color:null;t.addSubMTask((function(){return gg(i,void 0,void 0,s.mark((function t(){var e,n,r;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=l(v);try{for(e.s();!(n=e.n()).done;)r=n.value,this.ctx.graphicsTexture.addGraphics(r.id,[r],r.hash,((null==u?void 0:u.lineTransform)||yg).pivot,f,p,a,this.ctx.objectPoolGroup,!0,null,m)}catch(i){e.e(i)}finally{e.f()}case 2:case"end":return t.stop()}}),t,this)})))}),"@ShapeImpl[addGraphics]"),null===(r=this.text)||void 0===r||r.createParagraphs(this.json.id,t)}},{key:"subClassRender",value:function(){}},{key:"render",value:function(t){var e=this;t.addSubMTask((function(){return gg(e,void 0,void 0,s.mark((function t(){var e,n;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null===(e=this.strokeGraphics)||void 0===e||e.render(),null===(n=this.backgroundGraphics)||void 0===n||n.render(),this.createBackground(),this.subClassRender(),this.createFilledPathMask(),this.createPathFill(),this.createArrow();case 1:case"end":return t.stop()}}),t,this)})))}),"@ShapeImpl[render]"),this.text&&this.text.render(t),t.addSubMTask((function(){return gg(e,void 0,void 0,s.mark((function t(){var e,n,r,i,o,a,u,l,c,h,d,f,p,v,m,g,y,_,x=this;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"wd"===(null===(e=this.json.textBody)||void 0===e?void 0:e.iterateType)||"lt"===(null===(n=this.json.textBody)||void 0===n?void 0:n.iterateType)?(this.renderContainer.addChild(this.container),this.text&&(f=null!==(r=this.json.scale)&&void 0!==r?r:{x:1,y:1},p=f.x,v=f.y,this.text.container.scale.x=v<0?-Math.abs(p):Math.abs(p),this.text.container.scale.y=v,this.text.container.position.x=(null!==(o=null===(i=this.json.position)||void 0===i?void 0:i.x)&&void 0!==o?o:0)+this.text.x,this.text.container.position.y=(null!==(u=null===(a=this.json.position)||void 0===a?void 0:a.y)&&void 0!==u?u:0)+this.text.y,this.text.container.scale.y<0&&(this.text.container.position.y+=this.text.height),this.text.container.scale.x<0&&(this.text.container.position.x+=this.json.width),this.renderContainer.addChild(this.text.container))):(this.text&&(Hv()(this.json.textRotateWithShape)&&!this.json.textRotateWithShape&&(m=this.json.rotation||0,this.text.container.rotation=-m,g=this.text.width,this.text.container.position.x=g),this.text.container.zIndex=100,y=null===(l=this.json.effectList)||void 0===l?void 0:l.find((function(t){return"outerShadow"===t.type})),y&&1!==y.sx?this.container.addChild(this.text.container):this.effectContainer.addChild(this.text.container)),this.renderContainer.addChild(this.container)),this.needCacheAsBitMap,"background"===this.json.id&&this.ctx.hasBackgroundFillShape&&(_=ql.p.create({width:this.json.width,height:this.json.height,resolution:Math.ceil(this.ctx.renderer.resolution)}),this.ctx.renderer.render(this.renderContainer,{renderTexture:_}),this.ctx.bgTexture=_),this.json.effectList&&this.json.effectList.length>0&&(null===(c=this.ctx.featureList)||void 0===c?void 0:c.effect)&&!this.ctx.forceCanvas&&(this.effectObject=new mg(this.effectContainer,this.json.effectList,"".concat(this.ctx.taskId,"_").concat(this.ctx.slideIndex,"_").concat(this.json.id),this.ctx,this.json.rotation||0,new Bl.g((null===(h=this.json.scale)||void 0===h?void 0:h.x)||1,(null===(d=this.json.scale)||void 0===d?void 0:d.y)||1)),function(t){var e,n,r;return"gifFill"===(null===(e=t.fillStyle)||void 0===e?void 0:e.fillType)||"gifFill"===(null===(r=null===(n=t.lineStyle)||void 0===n?void 0:n.fill)||void 0===r?void 0:r.fillType)||!!t.picFill&&"gifFill"===t.picFill.fillType}(this.json)&&this.effectObject.setFrameCount(-1),this.effectObject.on("ready",(function(){var t;x.effectContainer.visible=!1,x.effectObject.container.zIndex=10,x.container.addChild(x.effectObject.container),null===(t=x.effectObject)||void 0===t||t.updateFrame(1)})));case 3:case"end":return t.stop()}}),t,this)})))}),"@ShapeImpl[post.render]")}},{key:"clearOnSlideChange",value:function(){}},{key:"initOnReuse",value:function(){}},{key:"destroy",value:function(){var t,e,n,r;null===(t=this.text)||void 0===t||t.destroy(),this.fillColorFilter.destroy(),this.strokeColorFilter.destroy(),this.backgroundFill.destroy(),null===(e=this.backgroundGraphics)||void 0===e||e.destroy(),this.strokeFill.destroy(),null===(n=this.strokeGraphics)||void 0===n||n.destroy(),this.renderContainer.destroy(),null===(r=this.arrowRenderTexture)||void 0===r||r.destroy(!0),this.arrowList=[],this.effectDisposer()}}]),n}(Gv),xg=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function bg(t,e){for(var n in e)t.style[n]=e[n]}var Tg=function(){function t(e){var n,r,i=this;y(this,t),this.progress=document.createElement("div"),this.totalTime=document.createElement("span"),this.playButton=document.createElement("div"),this.pauseButton=document.createElement("div"),this.currentTime=document.createElement("span"),this.mediaController=document.createElement("div"),this.currentProgress=document.createElement("div"),this.medianIsEnd=!1,this.pickBookmarkIndex=0,this.playCallBackList=[],this.duration=0,this.start=0,this.end=0,this.changeMediaProgress=function(t){if(i.ctx.isPlayerPaused())i.ctx.logger.info("Media controller prevent seek event with paused state",i.ctx.taskId);else{t.stopPropagation();var e=t.offsetX/i.progress.clientWidth*i.duration;i.medianIsEnd=!1,"interactive"!==i.ctx.mode&&i.jumpToTime(e),"local"!==i.ctx.mode&&i.ctx.eventHub.emit(e_.mediaSeek,{id:i.targetId,time:e,isPlaying:i.media.isPlaying})}},this.jumpToTime=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=Math.floor(t)+i.start;i.media.currentTime!==e&&(i.media.currentTime=e,i.changeBookmarkIndex(e,e>i.media.currentTime))},this.showController=function(t){t.stopPropagation(),i.show()},this.getMediaDuration=function(){i.duration&&!Number.isNaN(i.duration)||(i.duration=i.media.duration,i.start&&(i.duration-=i.start,i.jumpToTime()),i.end&&(i.duration-=i.end)),i.totalTime.innerText=t.formatTime(i.duration)},this.playMedia=function(){return xg(i,void 0,void 0,s.mark((function t(){return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.playButton.style.display="none",this.pauseButton.style.display="block",t.next=4,this.media.play();case 4:this.medianIsEnd&&(this.medianIsEnd=!1,this.jumpToTime()),this.playCallBackList.forEach((function(t){t()}));case 6:case"end":return t.stop()}}),t,this)})))},this.pauseMedia=function(){return xg(i,void 0,void 0,s.mark((function t(){return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.playButton.style.display="block",this.pauseButton.style.display="none",t.next=4,this.media.pause();case 4:case"end":return t.stop()}}),t,this)})))},this.onMouseOut=function(t){t.stopPropagation(),i.mediaController.style.display="none"},this.mediaTimeUpdate=function(){return xg(i,void 0,void 0,s.mark((function e(){var n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.media.currentTime-this.start,e.t0=this.duration>0&&(n>this.duration||this.media.ended),!e.t0){e.next=8;break}return e.next=5,this.pauseMedia();case 5:this.medianIsEnd=!0,this.jumpToTime(),this.ctx.eventHub.emit(e_.mediaStop,{id:this.targetId});case 8:if(this.currentTime.innerText=t.formatTime(n),this.currentProgress.style.flex=(n/this.duration).toString(),this.bookmarkList&&0!==this.bookmarkList.length){e.next=12;break}return e.abrupt("return");case 12:(r=this.bookmarkList[this.pickBookmarkIndex])&&r.time.toFixed(0)===this.media.currentTime.toFixed(0)&&(this.ctx.timingEventHub.emit("shape ".concat(this.shapeId," onMediaBookmark ").concat(r.name)),this.pickBookmarkIndex+=1);case 14:case"end":return e.stop()}}),e,this)})))},this.onPauseMedia=function(){i.playButton.style.display="block",i.pauseButton.style.display="none"},this.onPlayMedia=function(){i.playButton.style.display="none",i.pauseButton.style.display="block",i.playCallBackList.forEach((function(t){t()}))},this.playMediaFromCtrl=function(){i.ctx.isPlayerPaused()?i.ctx.logger.info("Media controller prevent play event with paused state",i.ctx.taskId):("interactive"!==i.ctx.mode&&i.playMedia(),"local"!==i.ctx.mode&&i.ctx.eventHub.emit(e_.mediaPlay,{id:i.targetId,time:i.media.currentTime-i.start}))},this.pauseMediaFromCtrl=function(){i.ctx.isPlayerPaused()?i.ctx.logger.info("Media controller prevent pause event with paused state",i.ctx.taskId):("interactive"!==i.ctx.mode&&i.pauseMedia(),"local"!==i.ctx.mode&&i.ctx.eventHub.emit(e_.mediaPause,{id:i.targetId,time:i.media.currentTime-i.start}))},this.targetId=e.targetId,this.ctx=e.ctx,this.height=e.height,this.width=e.width,this.target=e.target,this.media=e.media,this.info=e.info,this.shapeId=e.shapeId,this.canvasElement=e.canvasElement,this.getMedianContainer(),this.createMediaController(),this.info.cut&&(this.start=null!==(n=this.info.cut.start)&&void 0!==n?n:0,this.end=null!==(r=this.info.cut.end)&&void 0!==r?r:0),this.info.bookmarkList&&(this.bookmarkList=this.info.bookmarkList.sort((function(t,e){return t.time-e.time})))}return _(t,[{key:"getMedianContainer",value:function(){var t,e=null===(t=this.canvasElement.parentElement)||void 0===t?void 0:t.querySelector(".median-container");e||((e=document.createElement("div")).className="median-container",this.canvasElement.parentElement.appendChild(e)),this.container=e}},{key:"generatePlayButton",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"viewBox","0 0 512 512"),n.setAttributeNS(null,"height",t.toString()),n.setAttributeNS(null,"width",e.toString());var r=document.createElementNS("http://www.w3.org/2000/svg","polyline");return r.setAttributeNS(null,"points","35 0, 477 256, 35 512"),r.setAttributeNS(null,"fill","#000000"),n.appendChild(r),n}},{key:"generatePauseButton",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=document.createElementNS("http://www.w3.org/2000/svg","svg");bg(n,{height:"20px"}),n.setAttributeNS(null,"viewBox","0 0 512 512"),n.setAttributeNS(null,"height",t.toString()),n.setAttributeNS(null,"width",e.toString());var r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttributeNS(null,"x","35"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"width","148"),r.setAttributeNS(null,"height","512");var i=r.cloneNode(!0);return i.setAttributeNS(null,"x","330"),n.append(r,i),n}},{key:"createButton",value:function(){var t={marginLeft:"15px",marginRight:"10px",fontSize:"0",height:"20px"};bg(this.playButton,Object.assign(Object.assign({},t),{display:"block"}));var e=this.generatePlayButton();bg(e,{height:"20px"}),this.playButton.appendChild(e),bg(this.pauseButton,Object.assign(Object.assign({},t),{display:"none"}));var n=this.generatePauseButton();bg(n,{height:"20px"}),this.pauseButton.appendChild(n)}},{key:"createTimer",value:function(){var t=document.createElement("div");bg(t,{width:"100px"}),this.currentTime.innerText="00:00";var e=document.createElement("span");return e.innerText="/",t.append(this.currentTime,e,this.totalTime),t}},{key:"createProgress",value:function(){bg(this.progress,{flex:"1",position:"relative",marginRight:"10px"});var t=document.createElement("div");bg(t,{background:"#D9D9D9",position:"relative",height:"10px",display:"flex"}),this.progress.appendChild(t),bg(this.currentProgress,{background:"#4F4F4F",top:"0px",left:"0",height:"10px",flex:"0"}),t.appendChild(this.currentProgress)}},{key:"changeBookmarkIndex",value:function(t,e){if(this.bookmarkList&&0!==this.bookmarkList.length){if(this.pickBookmarkIndex>0)for(var n=0;n<this.pickBookmarkIndex;n++)if(this.bookmarkList[n].time>t){this.pickBookmarkIndex=n;break}if(e){for(var r=this.pickBookmarkIndex-1,i=0;i<this.bookmarkList.length;i++)this.bookmarkList[i].time<t&&(r=i);for(var o=this.pickBookmarkIndex;o<=r;o++){var a=this.bookmarkList[o];a&&this.ctx.timingEventHub.emit("shape ".concat(this.shapeId," onMediaBookmark ").concat(a.name))}this.pickBookmarkIndex=r+1}}}},{key:"bindEvent",value:function(){this.mediaController.addEventListener("mouseover",this.showController,!1),this.mediaController.addEventListener("mouseout",this.onMouseOut,!1),this.progress.addEventListener("mousedown",this.changeMediaProgress,!1),this.playButton.addEventListener("click",this.playMediaFromCtrl,!1),this.pauseButton.addEventListener("click",this.pauseMediaFromCtrl,!1),this.media.on("durationchange",this.getMediaDuration,!1),this.media.on("timeupdate",this.mediaTimeUpdate,!1),this.media.on("pause",this.onPauseMedia,!1),this.media.on("play",this.onPlayMedia,!1)}},{key:"setControllerPosition",value:function(){var t,e=this.target,n=this.ctx,r=n.stageWidth,i=n.stageHeight,o=e.getGlobalPosition(),a=Number(null===(t=this.container)||void 0===t?void 0:t.getAttribute("data-scale")),s=r*a,u=1/a*(300>s?s/300:1);o.y=o.y+this.height-50,o.x=Math.max(o.x,0),o.x=Math.min(o.x,r-300*u),o.y=Math.max(o.y,0),o.y=Math.min(o.y,i-50),bg(this.mediaController,{height:"50px",borderRadius:"25px",width:"300px",flexDirection:"row",alignItems:"center",position:"absolute",left:o.x+"px",top:o.y+"px",display:"none",background:"#fff",zIndex:"2",border:"1px solid #ccc",transform:"scale(".concat(u,")"),transformOrigin:"0 100%"})}},{key:"createMediaController",value:function(){this.setControllerPosition(),this.createButton();var t=this.createTimer();this.createProgress(),this.mediaController.append(this.playButton,this.pauseButton,t,this.progress),this.container.appendChild(this.mediaController),this.bindEvent()}},{key:"addPlayCallBack",value:function(t){this.playCallBackList.push(t)}},{key:"unbindEvent",value:function(){this.mediaController.removeEventListener("mouseover",this.showController,!1),this.mediaController.removeEventListener("mouseout",this.onMouseOut,!1),this.progress.removeEventListener("mousedown",this.changeMediaProgress,!1),this.playButton.removeEventListener("click",this.playMediaFromCtrl,!1),this.pauseButton.removeEventListener("click",this.pauseMediaFromCtrl,!1),this.media.removeAllListeners()}},{key:"show",value:function(){this.setControllerPosition(),this.mediaController.style.display="flex"}},{key:"hide",value:function(){this.mediaController.style.display="none"}},{key:"destroy",value:function(){var t;this.unbindEvent(),this.playCallBackList=[],null===(t=this.container)||void 0===t||t.removeChild(this.mediaController)}}],[{key:"formatTime",value:function(t){var e="00:00";if(t){var n=Math.floor(t/60),r=String(n<0?0:n).padStart(2,"0"),i=Math.floor(t%60);e="".concat(r,":").concat(String(i<0?0:i).padStart(2,"0"))}return e}}]),t}(),wg=n(115),Eg=function(t){m(n,t);var e=g(n);function n(t,r){var i;return y(this,n),(i=e.call(this)).isGlobalPause=!1,i.lastTime=-1,i.howl=null,i.rctClient=null,i.isHowlEnd=!1,i.isHowlLoadEmit=!1,i.url=t,i.runningAudio=r,n_.RtcAudioClazz?(i.rctClient=new n_.RtcAudioClazz(t),i.rctClient.on("load",(function(){return i.emit("load")})),i.rctClient.on("pause",(function(){return i.emit("pause")})),i.rctClient.on("play",(function(){return i.emit("play")}))):(i.howl=new wg.Howl({src:[t]}),i.howl.load(),i.howl.on("load",(function(){i.isHowlLoadEmit=!0,i.emit("load")})),i.howl.on("pause",(function(){return i.emit("pause")})),i.howl.on("play",(function(){i.isHowlLoadEmit||i.emit("load"),i.isHowlEnd=!1,i.emit("play")})),i.howl.on("end",(function(){i.isHowlEnd=!0}))),i}return _(n,[{key:"startTimeChangeEmit",value:function(){var t=this;this.currentTime!==this.lastTime&&(this.lastTime=this.currentTime,this.emit("timeupdate")),(!this.isEnded||this.duration<=0)&&setTimeout((function(){return t.startTimeChangeEmit()}),300)}},{key:"play",value:function(){var t,e,n;this.runningAudio.has(this.url)&&(null===(t=this.runningAudio.get(this.url))||void 0===t||t.stop(),this.runningAudio.delete(this.url)),this.isHowlEnd=!1,this.lastTime=-1,null===(e=this.howl)||void 0===e||e.play(),null===(n=this.rctClient)||void 0===n||n.play(),this.startTimeChangeEmit(),this.runningAudio.set(this.url,this)}},{key:"pause",value:function(){var t,e;null===(t=this.howl)||void 0===t||t.pause(),null===(e=this.rctClient)||void 0===e||e.pause(),this.runningAudio.has(this.url)&&this.runningAudio.delete(this.url)}},{key:"globalPause",value:function(){this.isPaused||(this.isGlobalPause=!0,this.pause())}},{key:"globalResume",value:function(){this.isGlobalPause&&(this.isGlobalPause=!1,this.play())}},{key:"stop",value:function(){var t;null===(t=this.howl)||void 0===t||t.stop(),this.rctClient&&(this.rctClient.pause(),this.rctClient.currentTime=0),this.runningAudio.has(this.url)&&this.runningAudio.delete(this.url)}},{key:"destroy",value:function(){var t,e,n,r,i,o,a;null===(t=this.howl)||void 0===t||t.pause(),null===(e=this.howl)||void 0===e||e.unload(),null===(n=this.rctClient)||void 0===n||n.pause(),null===(r=this.rctClient)||void 0===r||r.destroy(),null===(i=this.rctClient)||void 0===i||i.removeAllListeners("load"),null===(o=this.rctClient)||void 0===o||o.removeAllListeners("play"),null===(a=this.rctClient)||void 0===a||a.removeAllListeners("pause"),this.runningAudio.has(this.url)&&this.runningAudio.delete(this.url)}},{key:"currentTime",get:function(){return this.rctClient?this.rctClient.currentTime:this.howl?this.howl.seek():-1},set:function(t){this.rctClient?this.rctClient.currentTime=t:this.howl&&this.howl.seek(t)}},{key:"duration",get:function(){return this.rctClient?this.rctClient.duration:this.howl?this.howl.duration():0}},{key:"isEnded",get:function(){return this.howl?this.isHowlEnd:Math.abs(this.currentTime-this.duration)<.001}},{key:"isPaused",get:function(){return this.rctClient?this.rctClient.isPaused:!!this.howl&&this.howl.playing()}},{key:"volume",value:function(t){this.rctClient?this.rctClient.volume(t):this.howl&&this.howl.volume(t)}}]),n}(su.a),Sg=function(t){m(n,t);var e=g(n);function n(t){var r,i,o;y(this,n),(r=e.call(this)).type="video",r.sprite=new Fd,r.isPlaying=!1,r.isGlobalPause=!1,r.updateVolume=function(t){n_.RtcAudioClazz?r.rtcAudio.volume(t):r.videoResource.source&&(r.videoResource.source.volume=t)},r.id=t.id,r.start=null===(i=t.video.cut)||void 0===i?void 0:i.start,r.end=null===(o=t.video.cut)||void 0===o?void 0:o.end,r.container=t.container,r.ctx=t.ctx,r.ctx.medias[r.id]=v(r);var a=t.video.src;r.ctx.loaderDelegate&&(a=r.ctx.loaderDelegate.redirectMedia(a),r.ctx.logger.info("redirect media url from ".concat(t.video.src," to ").concat(a," by delegate."),t.ctx.taskId)),r.videoResource=new ql.w(a,{autoLoad:!0,autoPlay:!1,updateFPS:30,crossorigin:!0});var s=t.video.src.replace(/4$/,"3");r.ctx.loaderDelegate&&(s=r.ctx.loaderDelegate.redirectMedia(s),r.ctx.logger.info("redirect media url from ".concat(t.video.src.replace(/4$/,"3")," to ").concat(s," by delegate."),t.ctx.taskId)),r.rtcAudio=new Eg(s,t.ctx.runningAudio);var u=t.video,l=t.width,c=t.height,h=t.target;r.controller=new Tg({targetId:t.id,shapeId:t.shapeId,ctx:t.ctx,width:l,height:c,target:h,media:v(r),info:u,canvasElement:t.canvasElement}),r.controller.addPlayCallBack((function(){r.sprite.width=l,r.sprite.height=c,r.ctx.clock.setTimeout((function(){r.sprite.visible=!0}),50)}));var d=new ql.c(null,{height:c,width:l});return d.resource=r.videoResource,r.videoResource.bind(d),r.sprite=new Fd,r.sprite.visible=!1,r.sprite.texture=new ql.t(d),r.sprite.interactive=!0,r.container.addChild(r.sprite),r.sprite.on("mouseover",(function(t){t.stopPropagation(),r.controller.show()})),r.sprite.on("mouseout",(function(t){t.stopPropagation(),r.controller.hide()})),["durationchange","timeupdate","pause","play"].forEach((function(t){r.videoResource.source.addEventListener(t,(function(){"timeupdate"!==t||r.isPlaying||r.pause(),r.emit(t)}))})),r.ctx.activeMedia.add(v(r)),r.ctx.volumeAdjuster.on("update",r.updateVolume),r}return _(n,[{key:"currentTime",get:function(){var t,e;return null!==(e=null===(t=this.videoResource.source)||void 0===t?void 0:t.currentTime)&&void 0!==e?e:0},set:function(t){n_.RtcAudioClazz&&(this.rtcAudio.currentTime=t),this.videoResource.source&&(this.videoResource.source.currentTime=t)}},{key:"paused",get:function(){var t,e;return null===(e=null===(t=this.videoResource.source)||void 0===t?void 0:t.paused)||void 0===e||e}},{key:"ended",get:function(){var t,e;return null===(e=null===(t=this.videoResource.source)||void 0===t?void 0:t.ended)||void 0===e||e}},{key:"duration",get:function(){var t,e;return null!==(e=null===(t=this.videoResource.source)||void 0===t?void 0:t.duration)&&void 0!==e?e:0}},{key:"showController",value:function(){this.controller.show()}},{key:"hideController",value:function(){this.controller.hide()}},{key:"play",value:function(){var t;return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,s.mark((function e(){var n,r=this;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isPlaying=!0,this.updateVolume(this.ctx.volumeAdjuster.volume),e.next=4,this.load();case 4:return e.next=6,this.ctx.clock.waitUntil((function(){var t=r.videoResource.source;return!!(t&&t.videoWidth>0)}),3e3);case 6:if(n=this.videoResource.source,e.t0=n&&n.videoWidth<=0,e.t0){e.next=15;break}if(!n_.RtcAudioClazz){e.next=13;break}this.videoResource.source.volume=0,this.videoResource.source.muted=!0,this.rtcAudio.once("play",(function(){var t;null===(t=r.videoResource.source)||void 0===t||t.play()})),this.rtcAudio.play(),e.next=15;break;case 13:return e.next=15,null===(t=this.videoResource.source)||void 0===t?void 0:t.play();case 15:case"end":return e.stop()}}),e,this)})))}},{key:"load",value:function(){return this.videoResource.load()}},{key:"pause",value:function(){var t,e=this;this.isPlaying=!1,n_.RtcAudioClazz?(this.rtcAudio.once("pause",(function(){var t;null===(t=e.videoResource.source)||void 0===t||t.pause()})),this.rtcAudio.pause()):null===(t=this.videoResource.source)||void 0===t||t.pause()}},{key:"globalPause",value:function(){this.isPlaying&&(this.isGlobalPause=!0,this.pause())}},{key:"globalResume",value:function(){this.isGlobalPause&&(this.isGlobalPause=!1,this.play())}},{key:"togglePause",value:function(){this.isPlaying?this.pause():this.play()}},{key:"seek",value:function(t){this.controller.jumpToTime(t)}},{key:"stop",value:function(){this.seek(0),this.pause()}},{key:"destroy",value:function(){var t;this.ctx.volumeAdjuster.removeListener("update",this.updateVolume),this.sprite.interactive=!1,this.sprite.destroy({texture:!0,baseTexture:!0}),null===(t=this.videoResource)||void 0===t||t.destroy(),this.rtcAudio.destroy(),this.controller.destroy(),this.ctx.activeMedia.delete(this)}}]),n}(su.a),Ag=function(t){m(n,t);var e=g(n);function n(t){var r;y(this,n),(r=e.call(this)).type="audio",r.isPlaying=!1,r.isGlobalPause=!1,r.updateVolume=function(t){r.audioPlayer.volume(t)},r.id=t.id;var i=t.audio.src;/mp4$/.test(i)&&(i=i.replace(/mp4$/,"mp3")),t.ctx.loaderDelegate&&(i=t.ctx.loaderDelegate.redirectMedia(i),t.ctx.logger.info("redirect media url from ".concat(t.audio.src," to ").concat(i," by delegate."),t.ctx.taskId)),r.audioPlayer=new Eg(i,t.ctx.runningAudio),t.audio.cut&&(r.start=t.audio.cut.start,r.end=t.audio.cut.end),r.ctx=t.ctx,r.ctx.medias[r.id]=v(r);var o=t.width,a=t.height,s=t.target;return r.controller=new Tg({targetId:t.id,shapeId:t.shapeId,ctx:t.ctx,height:a,width:o,target:s,media:v(r),info:t.audio,canvasElement:t.canvasElement}),r.audioPlayer.on("load",(function(){return r.emit("durationchange")})),r.audioPlayer.on("timeupdate",(function(){return r.emit("timeupdate")})),r.audioPlayer.on("pause",(function(){return r.emit("pause")})),r.audioPlayer.on("play",(function(){return r.emit("play")})),r.ctx.activeMedia.add(v(r)),r.ctx.volumeAdjuster.on("update",r.updateVolume),r}return _(n,[{key:"currentTime",get:function(){return this.audioPlayer.currentTime},set:function(t){this.audioPlayer.currentTime=t}},{key:"paused",get:function(){return this.audioPlayer.isPaused}},{key:"isPaused",get:function(){return this.audioPlayer.isPaused}},{key:"ended",get:function(){return this.audioPlayer.isEnded}},{key:"duration",get:function(){return this.audioPlayer.duration}},{key:"load",value:function(){return Promise.resolve()}},{key:"showController",value:function(){this.controller.show()}},{key:"hideController",value:function(){this.controller.hide()}},{key:"play",value:function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,s.mark((function t(){return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.ctx.isPlayerPaused()?this.ctx.logger.info("Audio player prevent play event with paused state",this.ctx.taskId):(this.updateVolume(this.ctx.volumeAdjuster.volume),this.isPlaying=!0,this.audioPlayer.play());case 1:case"end":return t.stop()}}),t,this)})))}},{key:"pause",value:function(){this.ctx.isPlayerPaused()?this.ctx.logger.info("Audio player prevent pause event with paused state",this.ctx.taskId):(this.isPlaying=!1,this.audioPlayer.pause())}},{key:"globalPause",value:function(){this.isPlaying&&(this.isGlobalPause=!0,this.pause())}},{key:"globalResume",value:function(){this.isGlobalPause&&(this.isGlobalPause=!1,this.play())}},{key:"togglePause",value:function(){this.isPlaying?this.pause():this.play()}},{key:"seek",value:function(t){this.ctx.isPlayerPaused()?this.ctx.logger.info("Audio player prevent seek event with paused state",this.ctx.taskId):this.controller.jumpToTime(t)}},{key:"stop",value:function(){this.seek(0),this.pause()}},{key:"destroy",value:function(){this.ctx.volumeAdjuster.removeListener("update",this.updateVolume),this.audioPlayer.pause(),this.controller.destroy(),this.ctx.activeMedia.delete(this)}}]),n}(su.a),Mg=function(t){m(n,t);var e=g(n);function n(t,r,i,o){var a;return y(this,n),(a=e.call(this,Object.assign(Object.assign({},t),{type:"Shape",useBgFill:!1,textRotateWithShape:!0,isPicture:!0}),r,i,o)).isInteractiveOutside=!1,a.cmd=new Ov(v(a)),a.media=null==t?void 0:t.media,a.container.name=t.id+"_container_[Picture]",a.renderContainer.name=t.id+"_render_container_[Picture]",a.picFill=new Dm(a.ctx,t.picFill,t.width,t.height,{useFilter:!0,useSlideBackgroundFill:!1}),a}return _(n,[{key:"applyCommand",value:function(t,e){var n,r,i,o,a,s=this;if("call"===e)if(/playFrom\(([0-9.]+)\)/.test(t)){var u=t.match(/playFrom\(([0-9.]+)\)/),l=Number(u[1]||"0");null===(n=this.mediaPlayer)||void 0===n||n.play().then((function(){var t;null===(t=s.mediaPlayer)||void 0===t||t.seek(l)}))}else"custom-pause"===t?null===(r=this.mediaPlayer)||void 0===r||r.pause():"togglePause"===t?null===(i=this.mediaPlayer)||void 0===i||i.togglePause():"stop"===t&&(null===(o=this.mediaPlayer)||void 0===o||o.pause(),null===(a=this.mediaPlayer)||void 0===a||a.seek(0))}},{key:"renderPic",value:function(){var t,e,n,r,i,o,a=this,s=this.picFill.displayObject;if(s){s.name=this.json.id+"_pic_fill_[Picture]";var u=null===(t=this.backgroundGraphics)||void 0===t?void 0:t.getClonedDisplayObject();if((null===(e=this.backgroundGraphics)||void 0===e?void 0:e.isNeedMask(s.width,s.height))&&u&&(s.mask=u,this.effectContainer.addChild(u)),s.width=this.designWidth,s.height=this.designHeight,s instanceof Fp&&this.ctx.slideScopeEventHub.once("slide-render",(function(t){var e;a.ctx.slideIndex===t&&(null===(e=a.effectObject)||void 0===e||e.setFrameCount(s.totalFrames),s.play(),s.onFrameChange=function(t){if(a.effectObject)if(a.effectObject.hasFrame(t))a.effectObject.updateFrame(t);else{var e=a.getEffectTexture();e&&(a.effectObject.createFrame(t,e.texture),a.effectObject.setFrameOffset(e.offsetX,e.offsetY))}})})),this.effectContainer.addChild(s),"video"===(null===(n=this.media)||void 0===n?void 0:n.type)&&this.media.src){if(this.mediaPlayer=new Sg({id:this.json.id+"-video",shapeId:this.json.id,ctx:this.ctx,video:this.media,height:this.designHeight,width:this.designWidth,target:s,container:this.effectContainer,canvasElement:this.ctx.view}),(null===(r=this.mediaPlayer)||void 0===r?void 0:r.sprite)&&u){var l=null===(i=this.backgroundGraphics)||void 0===i?void 0:i.getClonedDisplayObject();l&&(this.mediaPlayer.sprite.mask=l,this.container.addChild(l))}}else"audio"===(null===(o=this.media)||void 0===o?void 0:o.type)&&this.media.src&&(this.mediaPlayer=new Ag({id:this.json.id+"-audio",shapeId:this.json.id,ctx:this.ctx,audio:this.media,height:this.designHeight,width:this.designWidth,target:s,canvasElement:this.ctx.view}));this.mediaPlayer&&(this.isInteractiveOutside=!!this.container.interactive,this.container.interactive=!0,this.container.on("mouseover",(function(){a.mediaPlayer.showController()})),this.container.on("mouseout",(function(){a.mediaPlayer.hideController()}),!1))}}},{key:"preRender",value:function(t){d(f(n.prototype),"preRender",this).call(this,t)}},{key:"subClassRender",value:function(){this.renderPic()}},{key:"clearOnSlideChange",value:function(){d(f(n.prototype),"clearOnSlideChange",this).call(this),this.mediaPlayer&&(this.container.interactive=!1,this.mediaPlayer.stop(),this.mediaPlayer.hideController())}},{key:"initOnReuse",value:function(){d(f(n.prototype),"initOnReuse",this).call(this),this.mediaPlayer&&(this.container.interactive=!0)}},{key:"destroy",value:function(){this.mediaPlayer&&(this.picFill.displayObject&&!this.isInteractiveOutside&&(this.container.interactive=!1),this.mediaPlayer.destroy(),this.mediaPlayer=void 0),this.picFill.destroy()}}]),n}(_g),Rg=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Cg=function(t){m(n,t);var e=g(n);function n(t,r,i,o,a){var s;return y(this,n),(s=e.call(this,t,r,i)).children=[],s.cacheSprite=new Fd,s.cacheContainer=new Dl.b,s.json=t,s.json.fillStyle&&"groupFill"===s.json.fillStyle.fillType&&o&&(s.json.fillStyle=o),s.container.name=t.id+"_container_[Container]",s.cacheContainer.name=t.id+"_cache_container_[Container]",s.ctx.timingTargets.addTarget(t.id,v(s)),s.updateTransform(s.json),s.fillObject=new Dm(s.ctx,t.fillStyle,t.width,t.height,{useFilter:!1,useSlideBackgroundFill:!1}),s.createChildren(a),s}return _(n,[{key:"createChildren",value:function(t){for(var e,r,i,o,a=this,u={x:null!==(r=null===(e=this.json.position)||void 0===e?void 0:e.x)&&void 0!==r?r:0,y:null!==(o=null===(i=this.json.position)||void 0===i?void 0:i.y)&&void 0!==o?o:0},l=function(e,r){t.addSubMTask((function(){return Rg(a,void 0,void 0,s.mark((function r(){var i,o;return s.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=this.json.children[e],o=null,"Shape"===(null==i?void 0:i.type)?o=new _g(i,this.ctx,u,this.json.fillStyle):"Picture"===(null==i?void 0:i.type)?o=new Mg(i,this.ctx,u,this.json.fillStyle):"Container"===(null==i?void 0:i.type)&&(o=new n(i,this.ctx,u,this.json.fillStyle,t)),o&&this.children.push(o);case 3:case"end":return r.stop()}}),r,this)})))}),"@ContainerImpl[child.init]")},c=0,h=this.json.children.length;c<h;c++)l(c)}},{key:"interactiveContainer",get:function(){return this.container}},{key:"renderContainer",get:function(){return this.container}},{key:"preRender",value:function(t){var e,n=this,r=l(this.children);try{var i=function(){var r=e.value;t.addSubMTask((function(){return Rg(n,void 0,void 0,s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preRender(t);case 1:case"end":return e.stop()}}),e)})))}),"@ContainerImpl[child.preRender]")};for(r.s();!(e=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}}},{key:"getBgElement",value:function(){return null}},{key:"getIterateEntry",value:function(t,e,n){return 0===e?this:(this.ctx.eventHub.emit("IterateTimeNodeEnd",n),null)}},{key:"getTextElement",value:function(){return null}},{key:"render",value:function(t){var e,n=this,r=l(this.children);try{var i=function(){var r=e.value;r.render(t),t.addSubMTask((function(){return Rg(n,void 0,void 0,s.mark((function t(){var e;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.cacheContainer.addChild(r.renderContainer),(r.json.hlinkHover||r.json.hlinkClick)&&(null===(e=r.hyperlink)||void 0===e||e.addProxy(this.container));case 1:case"end":return t.stop()}}),t,this)})))}),"@ContainerImpl[child.render]")};for(r.s();!(e=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}t.addSubMTask((function(){return Rg(n,void 0,void 0,s.mark((function t(){return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.container.addChild(this.cacheContainer);case 1:case"end":return t.stop()}}),t,this)})))}),"@ContainerImpl[child.append]")}},{key:"clearOnSlideChange",value:function(){this.children.forEach((function(t){return t.clearOnSlideChange()}))}},{key:"initOnReuse",value:function(){this.children.forEach((function(t){return t.initOnReuse()}))}},{key:"isChildrenInteractive",value:function(){var t,e=l(this.json.children);try{for(e.s();!(t=e.n()).done;){var n=t.value;if("Container"===(null==n?void 0:n.type)||"Stage"===(null==n?void 0:n.type)||(null==n?void 0:n.hlinkHover)||(null==n?void 0:n.hlinkClick))return!0}}catch(r){e.e(r)}finally{e.f()}return!1}},{key:"destroy",value:function(){this.cacheSprite&&this.cacheSprite.destroy({texture:!0}),this.children.forEach((function(t){return t.destroy()})),this.container.destroy({children:!0,texture:!0,baseTexture:!0}),this.cacheContainer.destroy({children:!0,texture:!0,baseTexture:!0})}}]),n}(Gv),Pg=function(t){m(n,t);var e=g(n);function n(t,r,i,o){var a;return y(this,n),(a=e.call(this)).cond={},a.timeoutIds=[],a.condHandle=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t)if(t.delay&&t.delay>0){var n=a.ctx.clock.setTimeout((function(){t.event&&(a.cond[t.event]=!0,a.detectTrigger(e))}),t.delay);a.timeoutIds.push(n)}else a.cond[t.event]=!0,a.detectTrigger(e);else a.detectTrigger(e)},a.id=t,a.ctx=o,a.eventHubs=i,r.forEach((function(t){a.addCond(t)})),a}return _(n,[{key:"setTriggerParams",value:function(t){this.triggerParams=t}},{key:"addCond",value:function(t){var e=this,n=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.condHandle(t,r)};t.event&&(/^shape/.test(t.event)||/^time/.test(t.event)?(this.cond[t.event]=!1,this.eventHubs.global.addListener(t.event,n)):/^runtime/.test(t.event)?(this.cond[t.event]=!1,this.eventHubs.runtime.addListener(t.event,n)):/^self/.test(t.event)?t.delay&&t.delay>0&&(this.cond[t.event]=!1,this.eventHubs.runtime.addListener(t.event,n)):this.cond[t.event]=!1)}},{key:"isTrigger",value:function(){var t=this;return Object.keys(this.cond).every((function(e){return!!t.cond[e]}))}},{key:"isTriggerWithoutParent",value:function(){var t=this;return Object.keys(this.cond).filter((function(t){return"self"!==t})).every((function(e){return!!t.cond[e]}))}},{key:"detectTrigger",value:function(t){var e=this;if(Object.keys(this.cond).every((function(t){return!!e.cond[t]}))){Object.keys(this.cond).forEach((function(t){e.cond[t]=!1}));var n=this.triggerParams;this.triggerParams=void 0,this.emit("active",n,t)}}},{key:"reset",value:function(){var t=this;Object.keys(this.cond).forEach((function(e){t.cond[e]=!1})),this.timeoutIds.forEach((function(e){return t.ctx.clock.clearTimeout(e)}))}}]),n}(su.a),Ig=function(t){m(n,t);var e=g(n);function n(t){var r;y(this,n),(r=e.call(this)).isTimeNodeEndSync=!1,r.interactiveListeners=[],r.runtimeNodeEventHub=new su.a,r._currentSeqIndex=0,r._currentSeqState="idle",r.isForward=!0,r.autoPlay=!1,r.handlePrev=function(){var t,e,n,i,o,a,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r.hasPrev()||!r.isMainSeq?"idle"===r.currentSeqState?(r.decrSeqIndex(),null===(t=r.commonTimeNode.children[r.currentSeqIndex])||void 0===t||t.commonTimeNode.seekToStart(),null===(e=r.commonTimeNode.children[r.currentSeqIndex])||void 0===e||e.commonTimeNode.clearSubList(),r.currentSeqState="idle"):"running"===r.currentSeqState?(null===(n=r.commonTimeNode.children[r.currentSeqIndex])||void 0===n||n.commonTimeNode.seekToStart(),null===(i=r.commonTimeNode.children[r.currentSeqIndex])||void 0===i||i.commonTimeNode.clearSubList(),r.currentSeqState="idle"):"end"===r.currentSeqState&&(r.currentSeqIndex>=r.commonTimeNode.children.length&&(r.currentSeqIndex=r.commonTimeNode.children.length-1),null===(o=r.commonTimeNode.children[r.currentSeqIndex])||void 0===o||o.commonTimeNode.seekToStart(),null===(a=r.commonTimeNode.children[r.currentSeqIndex])||void 0===a||a.commonTimeNode.clearSubList(),r.currentSeqState="idle"):r.globalEventHub.emit("c:prev slide",s)},r.handleNext=function(t,e){var n,i,o,a;r.isTimeNodeEndSync&&(r.isTimeNodeEndSync=!1,r.currentSeqState="idle",r.currentSeqIndex=0),!r.hasNext()&&r.isMainSeq&&e?r.globalEventHub.emit("c:next slide",t):"idle"===r.currentSeqState?null===(n=r.commonTimeNode.children[r.currentSeqIndex])||void 0===n||n.commonTimeNode.startTimeNodeForce():"running"===r.currentSeqState?(null===(i=r.commonTimeNode.children[r.currentSeqIndex])||void 0===i||i.commonTimeNode.seekToEnd(!1,!0),r.currentSeqState="end",r.incrSeqIndex(),null===(o=r.commonTimeNode.children[r.currentSeqIndex])||void 0===o||o.commonTimeNode.startTimeNodeForce()):"end"===r.currentSeqState&&(r.incrSeqIndex(),null===(a=r.commonTimeNode.children[r.currentSeqIndex])||void 0===a||a.commonTimeNode.startTimeNodeForce())};var i=t.json,o=t.iterateType,a=t.isIterate,s=t.isSub,u=t.parent,l=t.ctx,h=t.eventHub,d=t.iterateIndex,f=t.iterateId,p=t.isInInteractiveSeq;return r.isMainSeq="mainSeq"===i.ctn.nodeType,r.isInteractiveSeq="interactiveSeq"===i.ctn.nodeType,r.id=i.ctn.id,r.isIterate=a,r.json=i,r.ctx=l,r.globalEventHub=h,r.commonTimeNode=new Iy({json:i.ctn,isSub:s,eventHubs:{global:h,runtime:r.runtimeNodeEventHub},ctx:l,parent:u,isIterate:!1,iterateType:o,iterateIndex:d,iterateId:f,isInInteractiveSeq:p||r.isInteractiveSeq}),r.bindShapeEvent(),r.nextConds=new Pg("mainSeq",i.nextCondLst,{global:h,runtime:r.runtimeNodeEventHub},r.ctx),r.prevConds=new Pg("mainSeq",i.preCondLst,{global:h,runtime:r.runtimeNodeEventHub},r.ctx),r.commonTimeNode.on("timeNodeRestart",(function(){r.currentSeqIndex=0,r.currentSeqState="idle"})),r.commonTimeNode.on("childTimeNodeStart",(function(t){var e=r.commonTimeNode.children.findIndex((function(e){return e.commonTimeNode.uuid===t.id}));e>=0&&(r.currentSeqIndex=e),r.currentSeqState="running",r.isMainSeq&&r.ctx.eventHub.emit(e_.mainSeqStepStart,e)})),r.commonTimeNode.on("childTimeNodeEnd",(function(t){var e=r.commonTimeNode.children.findIndex((function(e){return e.commonTimeNode.uuid===t.id}));e>=0&&(r.currentSeqIndex=e),r.currentSeqState="end",r.autoPlay&&r.ctx.clock.setTimeout((function(){r.handleNext(!1,!0)})),r.isMainSeq&&r.ctx.eventHub.emit(e_.mainSeqStepEnd,e)})),r.commonTimeNode.on("timeNodeEndSync",(function(){r.isTimeNodeEndSync=!0,r.commonTimeNode.resetForRepeat()})),r.commonTimeNode.on("timeNodeDestroy",(function(){r.interactiveListeners.forEach((function(t){var e=c(t,2),n=e[0],r=e[1];n&&r&&n.interactiveContainer.removeListener("pointerdown",r)})),r.interactiveListeners=[]})),r.nextConds.on("active",(function(t,e){Array.isArray(e)?r.handleNext(e[0],e[1]):r.handleNext(e,!0)})),r.prevConds.on("active",(function(t,e){Array.isArray(e)?r.handlePrev(e[0]):r.handlePrev(e)})),r}return _(n,[{key:"currentSeqIndex",get:function(){return this._currentSeqIndex},set:function(t){this._currentSeqIndex=t,this.isMainSeq?this.ctx.eventHub.emit(e_.mainSeqStepChange,t):this.isInteractiveSeq&&this.ctx.eventHub.emit(e_.interactiveSeqStateChange,{id:this.json.ctn.id,state:{step:t,state:this._currentSeqState}})}},{key:"currentSeqState",get:function(){return this._currentSeqState},set:function(t){this._currentSeqState=t,this.isMainSeq?this.ctx.eventHub.emit(e_.mainSeqStateChange,t):this.isInteractiveSeq&&this.ctx.eventHub.emit(e_.interactiveSeqStateChange,{id:this.json.ctn.id,state:{step:this._currentSeqIndex,state:t}})}},{key:"stepLength",get:function(){return this.commonTimeNode.children.length}},{key:"currentStep",get:function(){return this.currentSeqIndex}},{key:"currentState",get:function(){return this.currentSeqState}},{key:"startAutoPlay",value:function(){this.autoPlay=!0,this.commonTimeNode.children[0].commonTimeNode.startTimeNodeForce()}},{key:"incrSeqIndex",value:function(){this.currentSeqIndex+1<=this.commonTimeNode.children.length&&(this.currentSeqIndex+=1)}},{key:"decrSeqIndex",value:function(){this.currentSeqIndex-1>=-1&&(this.currentSeqIndex-=1)}},{key:"hasPrev",value:function(){return!(this.currentSeqIndex<=0&&"idle"===this.currentSeqState)}},{key:"hasNext",value:function(){return!(this.currentSeqIndex>=this.commonTimeNode.children.length||this.currentSeqIndex===this.commonTimeNode.children.length-1&&"end"===this.currentSeqState)}},{key:"bindShapeEvent",value:function(){var t=this;"interactiveSeq"===this.json.ctn.nodeType&&this.json.nextCondLst.forEach((function(e){if(/^shape/.test(e.event)){var n=e.event.split(" ")[1];if(n){var r=t.ctx.timingTargets.getTargetById(n);if(r){r.interactiveContainer.interactive=!0,r.interactiveContainer.cursor="pointer";var i=function(){t.ctx.eventHub.emit(e_.userInput);var e="shape ".concat(n," onClick"),r=t.ctx.mode;"interactive"!==r&&"sync"!==r||t.ctx.eventHub.emit(e_.interactiveSeqAction,{action:e,seqId:t.json.ctn.id}),"sync"!==r&&"local"!==r||t.globalEventHub.emit(e)};r.interactiveContainer.on("pointerdown",i),t.interactiveListeners.push([r,i])}}}}))}},{key:"setCurrentStep",value:function(t,e){var n=this.commonTimeNode.children.length;if(!(t>n)){this.isInteractiveSeq&&0===this.commonTimeNode.applyCount&&(this.commonTimeNode.applyCount=1);var r=t;if(this.commonTimeNode.seekToStart(),-1===r&&(r=n-1),0!==r||"start"!==e){if(r>=0&&r<n)for(var i=0;i<=r;i++){var o=this.commonTimeNode.children[i];i!==r?o.commonTimeNode.seekToEnd(!1,!0):"start"===e?o.commonTimeNode.seekToStart():"end"===e&&o.commonTimeNode.seekToEnd(!1,!0)}this.currentSeqIndex=r,this.currentSeqState="start"===e?"idle":"end"}}}}]),n}(su.a);function Og(t,e,n){var r=e.split(".");r.reduce((function(i,o,a){if(i)return a!==r.length-1?i[o]:void(i[o]=n);console.warn("".concat(t," not support ").concat(e))}),t)}function kg(t,e){return e?e.split(".").reduce((function(n,r){if(n)return n[r];console.warn("".concat(t," not support ").concat(e))}),t):null}var Ng=function(){function t(e){var n=this;y(this,t),this.timingTarget=null,this.runtimeNodeEventHub=new su.a,this.basicOnTimeNodeEnd=function(){if(n.isConflict){var t=n.json.cBhvr.target,e=n.getTargetId(t);n.ctx.conflictTimeNodeManager.removeRunningTimeNode(e,n.modifyAttrKey)}},this.basicOnTimeLineStart=function(){if(n.isConflict){var t=n.json.cBhvr.target;if("next"===n.activeWhenConflict){var e=n.getTargetId(t);n.ctx.conflictTimeNodeManager.addRunningTimeNode(e,n.modifyAttrKey,n.commonTimeNode)}else"prev"===n.activeWhenConflict&&n.commonTimeNode.dispose()}};var r=e.isIterate,i=e.isSub,o=e.json,a=e.ctx,s=e.parent,u=e.eventHub,l=e.iterateType,c=e.iterateIndex,h=e.iterateId,d=e.isInInteractiveSeq;this.json=o,this.id=o.cBhvr.ctn.id,this.ctx=a,this.globalEventHub=u,this.commonTimeNode=new Iy({json:o.cBhvr.ctn,isSub:i,eventHubs:{global:u,runtime:this.runtimeNodeEventHub},ctx:a,parent:s,isIterate:r,iterateType:l,iterateIndex:c,iterateId:h,isInInteractiveSeq:d}),this.timingTarget=this.ctx.timingTargets.getTarget(o.cBhvr.target,r,{type:l,index:c,id:h}),this.commonTimeNode.on("seekToStart",(function(){return n.onSeekToStart()})),this.commonTimeNode.on("seekToEnd",(function(){return n.onSeekToEnd()})),this.commonTimeNode.on("timelineStart",this.basicOnTimeLineStart),this.commonTimeNode.on("timeNodeEnd",this.basicOnTimeNodeEnd)}return _(t,[{key:"getTargetId",value:function(t){var e=t.id;return"shape"===t.type&&t.txEl&&(e="".concat(e,"-txEl-").concat(t.txEl.range[0])),this.commonTimeNode.isIterate&&(e="".concat(e,"-iterate-").concat(this.commonTimeNode.iterateIndex)),e}}]),t}(),Lg=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).isConflict=!1,r.activeWhenConflict="next",r.startVal=null,r.updateStartValue=function(){r.timingTarget&&(r.startVal=kg(r.timingTarget,r.json.cBhvr.attrList[0]))},r.onSeekToStart=function(){var t=r.json.cBhvr.attrList[0];null!==r.startVal&&r.timingTarget&&Og(r.timingTarget,t,r.startVal)},r.onSeekToEnd=function(){var t=r.json.cBhvr.attrList[0],e=r.json.cBhvr.to||r.json.to;e&&r.timingTarget&&Og(r.timingTarget,t,e)},r.commonTimeNode.on("timeNodeStart",r.updateStartValue),r.commonTimeNode.on("timeNodeCreate",r.updateStartValue),r.commonTimeNode.on("timeUpdate",(function(t){var e=t.duration;if(t.delta/e>=1){var n=r.json.cBhvr.attrList[0];r.json.cBhvr.attrList.length>1&&console.warn("this.json.cBhvr.attrList.length > 0");var i=r.json.cBhvr.to||r.json.to;i&&r.timingTarget&&Og(r.timingTarget,n,i)}})),r}return _(n,[{key:"modifyAttrKey",get:function(){return this.json.cBhvr.attrList[0]}}]),n}(Ng),Dg=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Fg=function(){function t(e,n){y(this,t),this.math={pi:Math.PI,e:Math.E,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,ceil:Math.ceil,cos:Math.cos,cosh:Math.cosh,deg:function(t){return t/Math.PI*180},exp:Math.exp,floor:Math.floor,ln:Math.log,max:Math.max,min:Math.min,rad:function(t){return t/180*Math.PI},rand:Math.random,sin:Math.sin,sinh:Math.sinh,sqrt:Math.sqrt,tan:Math.tan,tanh:Math.tanh},this.timingTarget=n,this.val=e.val.value,this.time=e.time,e.fmla&&(this.fmla=this.parseFmla(e.fmla))}return _(t,[{key:"parseFmla",value:function(t){var e=t.replace(/#ppt_h/g,"(".concat(this.timingTarget.design_ppt_h,")"));return e=(e=(e=(e=(e=(e=(e=(e=e.replace(/#ppt_w/g,"(".concat(this.timingTarget.design_ppt_w,")"))).replace(/#ppt_x/g,"(".concat(this.timingTarget.design_ppt_x,")"))).replace(/#ppt_y/g,"(".concat(this.timingTarget.design_ppt_y,")"))).replace(/ppt_w/g,"vars.ppt_w")).replace(/ppt_h/g,"vars.ppt_h")).replace(/ppt_x/g,"vars.ppt_x")).replace(/ppt_y/g,"vars.ppt_y")).replace(/#/g,"vars."),["abs","acos","asin","atan","ceil","cos","cosh","deg","exp","floor","ln","max","min","rad","rand","sin","sinh","sqrt","tan","tanh","pi","e"].forEach((function(t){var n=new RegExp("([^a-z])".concat(t,"([^a-z])"),"g");e=e.replace(n,(function(e,n,r){return"".concat(n,"math.").concat(t).concat(r)}))})),new Function("vars","math","$","return "+e)}}]),t}(),Bg=function(t){m(n,t);var e=g(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t,r)).value=t.val.value,i&&(o.fmla=o.parseFmla(i)),o}return _(n,[{key:"resolveValue",value:function(){return this.value}},{key:"interpolationFrom",value:function(t,e,n){var r=t.resolveValue(n),i=r+(this.resolveValue()-r)*e;return t.fmla?t.fmla(n,this.math,i):i}}]),n}(Fg);Dg([iv()],Bg.prototype,"interpolationFrom",null);var Ug=function(t){m(n,t);var e=g(n);function n(t,r){var i,o;return y(this,n),(i=e.call(this,t,r)).value=null===(o=t.val)||void 0===o?void 0:o.value,i}return _(n,[{key:"interpolationFrom",value:function(t,e,n){var r=t.resolveValue(n);return e>this.time&&(r=this.resolveValue()),r}},{key:"resolveValue",value:function(){return this.value||""}}]),n}(Fg);Dg([iv()],Ug.prototype,"interpolationFrom",null);var Gg=function(t){m(n,t);var e=g(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t,r)).fn=i.parseFmla(i.val),i}return _(n,[{key:"resolveValue",value:function(t){return this.fn(t,this.math,1)}},{key:"interpolationFrom",value:function(t,e,n){var r=t.resolveValue(n),i=r+(this.resolveValue(n)-r)*e;return t.fmla?t.fmla(n,this.math,i):i}}]),n}(Fg);Dg([iv()],Gg.prototype,"interpolationFrom",null);var jg=function(t){m(n,t);var e=g(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t,r)).value=t.val.value,i}return _(n,[{key:"interpolationFrom",value:function(t,e){return qv(t.resolveValue(),this.value,e)}},{key:"resolveValue",value:function(){return this.value}}]),n}(Fg);Dg([iv()],jg.prototype,"interpolationFrom",null);var Hg=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).isConflict=!0,r.activeWhenConflict="next",r.startVal=null,r.vars={ppt_x:0,ppt_y:0,ppt_w:0,ppt_h:0},r.keyFrames=[],r.isColorAnim=!1,r.onTimeNodeStart=function(){r.timingTarget&&(r.startVal=kg(r.timingTarget,r.json.cBhvr.attrList[0]))},r.updateVars=function(){var t,e,n,i;(null===(t=r.timingTarget)||void 0===t?void 0:t.ppt_h)&&(r.vars.ppt_h=r.timingTarget.ppt_h),(null===(e=r.timingTarget)||void 0===e?void 0:e.ppt_w)&&(r.vars.ppt_w=r.timingTarget.ppt_w),(null===(n=r.timingTarget)||void 0===n?void 0:n.ppt_x)&&(r.vars.ppt_x=r.timingTarget.ppt_x),(null===(i=r.timingTarget)||void 0===i?void 0:i.ppt_y)&&(r.vars.ppt_y=r.timingTarget.ppt_y),r.isColorAnim},r.onTimeUpdate=function(t){var e=t.duration,n=t.delta/e,i=r.keyFrames.findIndex((function(t){return n<=t[0]})),o=r.json.cBhvr.attrList;if(i<0){var a=r.keyFrames[r.keyFrames.length-1];r.timingTarget&&o&&o[0]&&Og(r.timingTarget,o[0],a[1].resolveValue(r.vars))}else{var s=i-1,u=r.keyFrames[i],l=r.keyFrames[s]||u,c=u[0]-l[0]==0?1:(n-l[0])/(u[0]-l[0]),h=u[1].interpolationFrom(l[1],c,r.vars);r.timingTarget&&o&&o[0]&&Og(r.timingTarget,o[0],h)}},r.onSeekToStart=function(){null!==r.startVal&&r.timingTarget&&Og(r.timingTarget,r.json.cBhvr.attrList[0],r.startVal)},r.onSeekToEnd=function(){r.onTimeUpdate({duration:1,delta:1,isReverse:!1})},r.initKeyFrames(),r.commonTimeNode.on("timeUpdate",r.onTimeUpdate),r.commonTimeNode.on("timelineStart",r.updateVars),r.commonTimeNode.on("timeNodeStart",r.onTimeNodeStart),r.commonTimeNode.on("timeNodeCreate",r.onTimeNodeStart),r}return _(n,[{key:"modifyAttrKey",get:function(){return this.json.cBhvr.attrList[0]}},{key:"initKeyFrames",value:function(){var t,e=this.json.valueType;if(this.json.tavLst.length<=0)if(this.json.to){if(this.json.from||this.startVal){var n={time:0,val:{type:"string",value:this.json.from||this.startVal.toString()},fmla:""};if("num"===e&&this.timingTarget){var r=new Gg(n,this.timingTarget);this.keyFrames.push([n.time,r])}}var i={time:1,val:{type:"string",value:this.json.to},fmla:""};if("num"===e&&this.timingTarget){var o=new Gg(i,this.timingTarget);this.keyFrames.push([i.time,o])}}else if(this.json.by){var a={time:0,val:{type:"string",value:this.json.cBhvr.attrList[0]},fmla:""};if("num"===e&&this.timingTarget){var s=new Gg(a,this.timingTarget);this.keyFrames.push([a.time,s])}var u={time:1,val:{type:"string",value:((null===(t=a.val)||void 0===t?void 0:t.value)||"")+"+"+this.json.by},fmla:""};if("num"===e&&this.timingTarget){var c=new Gg(u,this.timingTarget);this.keyFrames.push([u.time,c])}}if(this.json.tavLst.length>0){var h,d=l(this.json.tavLst);try{for(d.s();!(h=d.n()).done;){var f=h.value;if(f.val&&this.timingTarget){var p=null;"string"===f.val.type?"num"===e?p=new Gg(f,this.timingTarget):"str"===e&&(p=new Ug(f,this.timingTarget)):"number"===f.val.type?p=new Bg(f,this.timingTarget):"color"===f.val.type?(this.isColorAnim=!0,p=new jg(f,this.timingTarget)):"boolean"===f.val.type&&console.warn("not implements"),p&&this.keyFrames.push([f.time,p])}}}catch(v){d.e(v)}finally{d.f()}}}}]),n}(Ng),zg=function(t){m(n,t);var e=g(n);function n(t,r,i){return y(this,n),e.call(this,t,r,i)}return _(n,[{key:"percent",set:function(t){this.uniforms.percent=t}},{key:"transition",set:function(t){this.uniforms.transition=t}}]),n}(ql.k),Vg=n(116),Wg=n.n(Vg),Xg=n(117),Yg=n.n(Xg),qg=n(118),Zg=n.n(qg),Qg=n(119),Kg=n.n(Qg),Jg=n(9),$g=n.n(Jg),ty=n(120),ey=n.n(ty),ny=n(121),ry=n.n(ny),iy="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAr5QTFRFAAAATwAAOQAAZgAAKwAAPAAAPQAA7AAA/wAA/QAAugAA5QAAsQAAwQAAsAAAfwAAawAASQAAZAAAOAAAJwAALAAALQAAqQAAiwAAmgAA5AAA7QAAtQAAhQAALwAAfAAAXwAAYQAAigAAuQAAfgAAswAAcgAArQAAqgAAZwAAaQAAMgAAGAAAiAAAjwAA1gAA6QAA+wAA7wAA2AAAbQAA2gAA3QAAuwAA3wAA2QAAxQAA0QAAzwAA0gAAXQAAYAAADAAADwAAGQAALgAAjgAAcAAAzQAAwgAA+gAA3AAAGwAAoAAAowAAcQAAVwAA1QAAIQAAWQAA5wAAsgAAuAAASwAAbwAARwAAMAAAnAAAUQAAaAAA9wAA4gAAPwAAbAAAOwAAlwAA0wAAjQAAvAAAwwAAkwAAQQAAvgAAnwAAvQAA0AAA2wAAwAAAWwAATQAACwAABwAAQgAAtgAAgwAAvwAAgQAAlgAAEAAAxgAAtwAAmAAARgAAjAAAdwAAqwAArwAAywAAYgAACAAAmwAAHwAApQAA8QAAdAAAbgAAFgAAgAAAogAAewAAXgAA6AAA9gAA/AAAzgAA3gAAkgAAngAAdQAARAAAmQAATgAAUgAAJQAAIgAAqAAARQAAPgAAxwAACQAAAgAAMQAAiQAAhwAA4AAAUAAABQAAeQAAygAA9AAAFQAAVQAAyAAANQAA4wAAKAAAWAAAZQAApwAA4QAAyQAAXAAAkQAArAAAdgAApgAAHgAA8gAA/gAA6gAA8wAAFwAAHQAAhgAArgAAnQAANAAASAAA7gAAlQAAJgAA+AAA8AAANwAAJAAAHAAANgAAkAAAKQAAoQAAzAAABgAAFAAATAAAeAAAAQAADgAAggAA6wAAEQAAfQAAVAAA9QAAIAAADQAAEgAAVgAA5gAAQAAABAAA1wAA+QAAUHExBAAAJDlJREFUeJwlevk/lPv7/2XtOrKNsWcbzGCMJSmSpSxJZtQkjPEOg5mxRWns+xpZyr5ECGmcLIOsdVK2oyJbcVI0J8fp/Bff2+d7/+BhPO6Z1+u+ruf1XF4GAEAGZOXkFRQBTiD+dgKVTiqrqKqpq5M0ZMmaWtoAOrp6+qcMDMFIzdiEYmpmbqJBpVlYWtFJitYMG1sbFTskLvvTDmcQHM+ec3ImXp13uYCubvB/l7sHkC9eAk8jcy9Eb5/LvldQzQ+v+jsw1ZAlfwYDAK5dZ98IvIlBwXRNXVYIJ9TpLJUb9j9LvBVOj4jkRVGj/Y1i8AwiH09eEwhjMU4uXtsiAWLlqInMcLh+28okKRnuhNy945lic0+Uqu7NdErDdB/5DBo7MwuE4J+dw8jIzcsvwEIUFFGEisWQm1ACpcZlxF7vl1c8YMCJyqrqGio+fFRbVw8NjU2uec0isNWhVuq2XMPzmjcRBVHhSWCtXaPR2mZoybHzL0TUfmxPabeR6yg/+6QTY83VQNOkSwkbumsgkgzwtKe8tDdHYM7ts3sW1Q/Pn3PEWaGmYjoje+B3ewx9bM4V0LNfDB5XL3/o5v1hSBi5fzvQkQESOkQOwiiwI++5YBdkDjFIrKEx3cZK4Ti8eAlZpjcnYMSHKG0ygKKVeFSLRpOZNL9p19Ku1Q9enKlp45lZiQGr7hlWS17RKWp03mv8481cQnwBUNTAXwIUeAvsJwCCTnV4FyJC9CrKYDnOT91DpRZSG8Bsn7pAw2Ihd7Hn7R0hynXezjQcvQTyMGgUjV12kiW75XaR7Z9OK9kD0/j6ckfyk/fcPHCkvkz48NG/r3p4FeRpoQa9JA74sJAOcLubirEPqXqTpZ1hNzUN5exoNVbk5RmSOQqcJix5yWvvRZZ9nyay+tqAsb6U76oAwo3wgXvJkK6sCpOYQBTIdT6cg92rSxWh16pdV2c8NnDzfQhveqvND4k6aAB0ssWnHuL2yZQ7AHLzJTgUrreyZeWewhawpw1RMDWYHLP1OcNQgKzwlKVP5JV5crB7cZ+NRJ6AB3wx/x3RsEufEkozLu+g7+zkekfLbFQo8byEubp5ld7Ot2CQKxJ7qguZxF4SB3ozQF2pCEIbcaFxg6eAr0/MbeHb1DCK+vQCA3j4YTcwjNiWyEgcq1dRlfnXsq31K3hhhvNX/CYM0JC+asxk91d+7ahTr6AAaTAn3U2lTBfjIc1pr5VEX94yw8uIZhWQVAHQj66iLErxDLqNmN0wuO9hYf6FN+boQb1FjENYJAiWKrru2ejWzoZX6M9A91p2Sw1TTRT/rdDQsyiOT1f6br4fKm6Fpeb9qocNfvYOLPAuczuA5BTbeVT2O/ghlkYEScGHX0Df3StfyMT4iYHCTEQTLj04iWePVx6aomPYGLc08OXB+drJLqoq42/wXqB5eagtaqR+ZAPsymG8utBxt1rO8zFTPHITA50gCMQ4Gw7tQBZFo0DBsWb5ExlyKoBbvRAO7jdv6U8jMYne4Y+iWXmg53gvbNYsGg+gU3elEnaeXB/ufFUKJiyZdNZemo10NviBxr65KE1k/Rijg8KTan5647eoiJQAYPIL+9fuHPb/VSMucg/bcJHzKt557SPRYF8voq1+2SIWmSgQCZo2ZjhlymMigEZdZQ3MzX6wmmMTECwNWieLpWDlKihSZ2sVVwNX9AmecOXtMHP7C/WwPzvKbZqiJIYFZ7PuZngFJmNi9YatOLLQU77vGbS6PzGdsQVn/Ad7nQyALeZVbm01GA72t5bvR/aWTWVIIEVDwDJanzjqAc8QuFl4Yr9/2WTdPVPmHCtY7ZEZ4mJoDqURsbWcaHwtmIqJWrIXshpck5ilsHlYM34YFFXTG3dGzKrDMBxB8gsDn7G3bW/TDpe51ALDmy5KQW8lUgg4guspE7TN7wCTbFWnf7gBB16vuHtYoXsWo14j1cD9/Z+oyj5GF95jqI9KG0s6YtJ0N0jtISrVAZQcIO251QuKrBIaH7k2hLK/Mw8pyNmCnott3tGm6XjT9DsZUps7H8DCHwjc731hFRtTaF2UQ572Ca4Qp/On0RVdmFD0A219YL4DcFBN/lnfBvNr12E0W2MSZatepyNLVIbbFIg7jaYfoR/4W1VUKqL6zsF4NpNiq4orZEhCEjExd7AQ2j+B6GMOPmekeA7+DsM0IAsIqj31xrtAzvWqBsjmIWC6+uBONItM9R+HA8rGHxptX9JAF/G0L6QEiy3McdFEhp4+YNA0FHNwnW0/RFFEtwHRb/hwQsbzX/heYihsB6nNVJssfHnqQe/acYKMv8LqcRe7aEF7Y6ugtWxKLILeNmlzVF277PqxIg8dSxpo5gsaMBFxfgwvdWBhOvzOHHHzx4JUHLNpyc8LUzkLcfiIv3A2jQxpeQ1iL4IKUJ1dTmigtKLpgi6QjX2d8ISbHl1B8bH0UEbnI2DMVm5h4+6Ko+kTd3VVSVPGkpp4/p+BW7/faCjBhlD7MoDqRpcOJxz6lBe8gWYtBP80qaKf86k0FP9L1ziS+Y1m8MPaWpcD8BXkG2flILIvKvoC/hr8upkS1N2pwbQD5NtZmC6iNb2JUVJTRDoZxTXibAjQDp3w/y5Bhld8zynk7OU1S3S3LPnJLvjhzcfUaKeYeJwtkmPDDbYpWt0gTaf8e/gL32vUwV1i7lHVD65CN0n+CySLiHLZfbSx/XYollUUj09xeL/Cjqg2DUp2eM7igsEZPyXlnve63tfjYjZSbBwtUf7mlAhvX0N/CzxFIKE25lol9uEzuf4B95AK6EAVtXBSn3XGA6bVuISAxQuuFKTClSg4xz/VEivy43BYA1UY4x7aSd/i1RMdwdgzi68x0JEYIfLBbEMag6Kcur0R3WGGtXvT2744+WPE4QaWz1rrbq5fEmwQTMwOLPRNs2jAJiPTPpAjXA48lyGNDo/aEnNyEv39YQtTIKcLY2gVw/SWl2eGCgmvgRKcowIU96xWM6PvyJhk/4dRHbP4A2JaG+uq0xb1J15Gaa++VgngHKhh3L3grVzTsa95kyjw3wgZLYViuASK6smRQA8Ds39GAisCnrN+wiGik1BsIZfpFhk9aVvJNr+pUWJbSmxoOAqRzseBsHsCPJ+9EvFA6HLDuymPuB3VbLuUAeRzs5AnmhdV52drj6JdA/9JE6GEWqDZIrYYlrYCDM7hLcefRsAoFiZc4P3tYx5qFsH9ttFzAL0L/lgSwvjbS4Hlik7xGLuSVfejKzFhvtnHF3039B8VGq1UCpg4+cLt0KMDi46N3M5F9YWHiD/InKc21mDdj2pCGZNgqLihu2j14oFnH9dxycOd1FsVBZ+cMEBkuu0U7wwPJEfc9SWATH9MuG0EvfyJPxuf9enmuy3ipIOtB/Tq8fRSfpzQFs03/H+7yBgpxgsOgaPD69B90NfAH5SMhqmB4xns1ARtQlmao4VcBTRTDeuo6wPwzlIp/AQcGagk6KNOsPIQxV8P+wi/EIUDDVLWFGWvjTzIZnkLRH1UoJhWpXMTjPAjt3UAX17p6WGAJwxrWKi26AC0+gNR2jzhlwfEJrgvQCombOyaY8/bLwB9fMvueMLQvWNkBKGC0lq0Ht3KzP5jCcE4StVpESb3tdp2iHeZtLDMQ26rGa6n0GpULC4tIz4jBBxadsL3wHdFQPwahEAq1xR5rwJkcKwXQrx0f6F7awZw4fPbGa1gUiXJVpYOUgng1Il6/kdwHeGfQlS+PdZEZ/WbBBOmQjvC0LG6wpXRfApSSh5UP+GjCtGd2HwGkHtuvHkJDGvpqBlcXLXap5CKR9eJRzlgZ8W4zK891g7/yQl4SpDRz5B6E6FEUxFv8K/4i/p8Hn1DOZxLx2FQHi3X/cwgM0LCK+TZnTMszAMO3JUIXyO6zOQNiThG4OXOrwJNCE8XwV95JJ175KWLydZwJE882VhaOGyWMiSKcP771g4kaYKUFB2Dmz0JUdUk75Pplh8T7VBZwUY90zTpUDwWxIJNQ4p3+oSPgHVcJUQVskdpHklpVCunu2AMvq7HI2HuekbnizilxbZeVzVwQLUBT133fJUvswkKMu+OHgCDmIJX9+b8TDTiXIyTQUrXPXFm5NsIOF7X6snH0GkbLAqxPlJ9ecWoX5Ywy8Vl/GgAlgE21JAfp4T0F8NwItrDq/BXLuXDsET46eLTOOKK5svMyhZ3Ah1ePwHOvYdijiwWbAEJnbIP5V95SOcbXM43qIJm+5G32UABbhvaNNvRffVynh4jmDDQ3V+XtC1dHWnr5PFwd9Ds2UdVaIEHmECBo9V1OAz0w9Q7ZONc7xXtF+8+ETCmmX+G7+2+flmEDTEww2Dr5eQAbJggPltoLQ9vmismCRLQYIvSsXqDWOIS85DgRSlAhWjGdOxACJXNVdyGoSxA1lu2eETiYQrdn23iL9SxSRCa5LgEX0CruBRSxHIQWrdV/mq5qOUyNgs9QUYv+xsmlhwRichkxSqZko2RwH46USV7CUofNLnT23rewuaB+3Y+8g82zzjibgmdChhbQRFk34o/zPECaRHy7wKj5wlFDE8H30Jva81PwVlVT/UNLeH5C/T9cIDrBy3capubs5y2F7ATbAwpRvThn7BsaBvwbu0BBMDxHEtAsSE3DVOdF+kWWcXsfX3AFYeWSbrZP/TS/H80MGryotBYxj1U8rWXomZeevT+aQ0crFNLeulQLpiCr0J3rB5jTS3MR+wbSYRJirC2/5eEGCMHpzOUFWEplMsWaW0SVaCL8y8rZVI4hiy4qyEC7CW0YwNHTGLxvJ2vW6GNMctZQNF8YFxN+y/di6ENOZNtphmlCkIZsU3uvDqzlidm8vQCrkUfzYk6D4AYr6tk+mccy/i8xBKFQzibM/wWTIysZ6cDt/XhySBb1niUMBJRN+ILdWbj7Z6dnUgLZELPYXWeyXNhzV48NvUbAWzWEC0lD8PwVIGTt6rveS3h3gX3XiVRg1O5poRFvgPCL17nEx324dKJT5AC5OU7RFWXuEp0U1v+MRgY7mxikdoB4lle086YyXrr61aA8eVem+VOaY1TKn/sOxOeRhIcR4AZLNrygau7faIG/T/vTPO010Kbci6K9mAYPE3+D/Q/02VDHhOfPxxTud5MF+8KsrdY8Bw4TELjh26cdDiBfCo2ptEyDRsJrRk1KZcvgta3ckuK5CRPn7AxcptUHMpozoAU68b9ElVYL1uhaVz7RTJwRJ15W+0X8HZs7gUMi9wPAEik099Y6ilYhW7j1KNLmlFXlRwAb+NvU+PbN1AfHY1t+/sN4J1JVfn7FDYLloP1Scsg9GA3s2b6XMPgHYNbve6n3ghsmK0WGyzvNrCU7t0veADh7RGOKA7vXwYQc0uuPZMJMUQMLbBdz+2kFzkStJJNFEvH/f/cT1wnXJfsflkfnn+qJe89nGfU5c6Fpsd3vp8y31fD+eHg8uZSYXdwqcoBT9DS0aTRKoaZrdSqk0KtkFZb4+BBqXAnpKdyVLXBuP5clrK5wxSYyIWrghPCaNnLhJkp/A3x8fsMgMczROQeBhpGULvpU+ZNQqKLZQMr2c5uvEvEMHOemnBn5rN1M88Y+/TkhOxUIBP/2P2jr1+oIelfW2KEQFOnrjfGzrGWUsS6YsjIBTxTDwc64bw+fGhfW5AnvnpxLYAJDBm2lJ6rvaNZZMrsfTANYByHtYSbJahyNwhmaepqjdIPb+zS9jVAgfRHPZEjU1Gd3rhA/5cI2/I7HkyV/yE2rhd7VLRC+6h3nRnBwqHqGw2HNB46i9yPFIYrAbBjbP8Xiw3DuyzbyCf9d4TVDRcSKQussrgoejwBiAjYwZi0qcQK8KuYyotDvMBHuWgDgNhVUXyHsaOlkxmK4H0+NoRd5BhMX9v+E0DX3JzZF4fOt9EZhbDdj5dngkuAUBvofWKvSxgvWN/JXhGtuib/SxfY8KRQCXuP9M9m4RKN/YNl9WjkI76xL/vI3tkUW8UwNyBJ97wf3vZkr8zgZWjt09M51pPhhhhIa5n7iOjQUKxcVfAILZl0T4jc7FxaD1109JL9Ca0sSBbrEuNCQcFBiIv+SZSJPYe/1EYItPw54SrCk2fKxMmvjDJ19ORWT937dR9t2yrEWeJCbBTuaVFvARwhlXYkVrmPmMoeHL//5uHAvRj2Y8axOXO33AUsW/qXsBWn9CxkKIYN1C7xCb9tfTfE+3+m+utf4yM6L/i+ic02U8cQ2F98GKWj7KuD2pLDXkPCLCOzaCvJfwOemmSw+9kphfUY4yI+yj5/MmQxX+dJTNMaPNhkZY4Wbc3tEQKBn08wseAkoa6qqIQUIOD3kPmDGdgoM1ToC4KklkiDUBk4Uk/Fidp8zCJcFBMgHj+etTxbRFeHvwhf80CiSt3z3DIFYl6k1lWLVvRBn0lpMVKj6PITC0tar9jbVAPhHP8k4rhblOqCcOdqrAPy67Z1WL4TfMfVx0GLrHQJyH8iQUus8lkFKuv5kcYrNvW13YfKuZ89ORAmC15BmyKxBFilYKq8dxQRWdqGLLb8Rij6WrIs7/mxVyFptbrarK6uDO1v3yxzOWQjtaz2W/01pTvN/Omyfx8D2VGPK80olW8HfnliYW8J7UjIcIlewB+DJW6whrBEqHlPOAQ8W/xs1Hn5GmuasOM+K9M5T9RYI+PMwnvMsCTG6r+dbVXfMESA2YjneGLq0D1CQv4w2JrzNXBsshiH+QHHQa2Mr/AZ4I3FCYwSF30Bqgti3TOnZKmjAfxUANcv/0JqQQ2HHnOhMOwJodHns6/25Jg743Q1lQ+KbmEPuPq51Bt83snYTH17IxKtNv2roT2epeJDTPX4a0X9SZHNHJqSie0RtRDgKb5JGNRAJr4h2aypQVI68DWseD13hXjPfFQtgcpsWw3+bHWbYNMQ5bN4cjo9d8aBirB8/oJdnePZQoxNeCAZZbotwjOCA0wROeUdcuZjnmA4UdjXjcB5b5xb9AZYmwdFSH2DdhvscW5z5QnIMnYTFRngKajbkSdjvvVyWw6LwIJWxlYhshBPGlg4xDUFZOFLf2UlA4MUe8DA8TIea+IX2smNzuP0vmleE8ArQR+UsNqTqekrljgz0+vhX5+FaB5qs3t9J5cPuwScX+MPS/UkluQXNh5WrJFM9p4CGban0P71P43YKxglb2X+cyKQ94h/diX4v9RaCpnBsnLBEiBNo/0idpiYrznuGrJbXrCBGfcS8UOZNOTvW4hnUTwJkuVcBHodNx3R8t5LtTDmf9/EmsNByWOE4XyHplSzut+ilAlOYAW6FAoMlRP17j9CYvp40MImU7d5GfS2Drx+GW3yciuygcSeJPwW0wzd8Jx7iITtZPchNXC6aPAtKQrB2xa8z53r/+NXr2nhyLPFySAhSY0IYOQBgKT6h3kSWUhtwoeuSh11H23xn6OOue1lRwSZFtnWn9cdSaaEGqWp9dYsa7+ChyZcubQzxJjXzXLk9h89vBXfZGDIlvpsP4QIbmPMjqxhqsBfefv19nkI6ATGqFQsHNSKV1bi5RDhNzYOR3Ckunra8gfjADKT/ll0bAtT+Gyj2d7NLfv1oX/s3Dxbwcs6upK916xmn4Cn9qoUPECeybc02KdxfxGRB0zT8l0Zikliu1neuQQ0TmnzytBG1jCdcA7AUAfwLbEnAjIqNRI/tr3AS3HHzaJJ1AVHLTuHM72nkWqYVDDf+j66wmI+h8Lmvxl4OGEXnX3JOrwBz08R7ELtwHigs810rOj0viiWN/+sC7Ni5oBKQ6bZk8eHN3PYLZzQgVjEb5jNex3lMrEC0EzpQ3faNx4xd523exujDDnuf5ZP5S7v7/UuKqkqW2X94NfxXy7549ho3WWi6n1Vt7ABUIeJc5cdqWkRZrf4aNACabeODzxEINKtnW6CGh5734US98i9pjARiQfrdT+ax6iuaQ68hRSbykUQcJUr4DoFBkm4wgd2hq4tBIt5iGqkmIYjIK97X2Ac+y7Al6Eas2r5VF3EkYVixIGsqzlkm0RXA05xqwaznFZjzk8V80Y+iIDhMyNdfSpEMp3IheR2cbKGSnSfWK1HK5rU73te+Y+mp46Jt6oD3xe3/MKUzoD2UBzNmu3iQW2uCJHd2ne9t/x3h7lnn4kBxCEAK//UgVlyjyz9W5JHgDWu3g3OlGHBZO/680MjgZCrLsuOfLU+5jPl2Pxck02uqzyqmPlhPA0isbdnhRis6Qh/S179zV226tq30IMf1KqJ+bHgSCHhjM64dbIL8GGt21vGOEXP+/AJcER6NjIb286TKSzTCCidNp6Zf3rpsWZnG5dNhuEqU94Fd2sYHaDOgM3A3LO9nxQazFRTOJsT7cD4eScDOsG8UfQGqlmCqM7L0/3ZpnWylRSPqBu/B+eHEfYNZO+0QTaWrYVbLURYIK4TWR8iESRGfHHQWgthnGCFSR6XhpDR2Xtq0uhr2QQvOUVv8Giw6ImYIgOdd8OPo1dxm1hQCQV84zTzso6krY75wTfRjcwV5Geb/tJ4owfFd8kC7FDPX9B9mBYVZ0zuK21vYoVpvazdgKlwKfwFKZSgPgFfDQtTRYNOvy6JNZ7OeYCWEFJq/hygT5KPD9mIbenEBsAvHdzCG/K5iPb4S4aP/YhnMDJHIP/icNM6ztIK9gkRRdA71nyoMef+2jb3neklwx0pHH2SIdKb2jwOWG3JCmYK4Iva+7eEG0a3If9Da4KaFAGMYlTTCfFBFSoyK7YMSwyuICgV8M49c7bf4VqtKi5LOaLKCJlVZ5zBpLrIr9LvsMNctO/oiM3ab/MknNJPPbnirNLPbGflQrRr2aJJYXg/QIsh8k1PXzz+z9w5gIxiXea4P0RlO2OUDqhJdvv8EBpRLy6Z9p8GR+FFKgDHcGsMkkbMnJz0q7hAhDVdF3sCfBM6hj2P4SlE5njIsBmSky6FhkNYd2UfgLt37a35+BEvupCA+Jh5kmC5dWaGeQNmz35EEQvhwZG3qxKo/RZr66hM7IJ5Won7gh78anK172Zt3buKAMKyMDjzdR9ufcCZ0zU4DOA5RKIgkAMTbytB3LQFlT5MH/An6qfRJPjj2dg5WFP3mdlZkwFePrA+3eN2Wu0A+WAFKZrztzJRibcqCweEddxU/PSGWxOnjHtOUDzfDk9lEvDDj39cFH1E9dVeQLGVI3Qgeo0M34dZ6K/3cb9BBZcZf8uS+BivagqBuLW31L60FMADuX1jiTur3n1ZrBrIgpkFO//0OmyT9qWthHcnwzLRswTdDbgUflRNCAvfaODDSX8vQLo7QBDltK42Y/OdFbS1zUYFLv6qSiV43zDiUrcAtbEqoMVBPa37+RMTuT1gmrJVH1qqYsi12cyakNWPLrTGqg9NO1KY2vPwISkCnxobu6FodJWlXUwABhb1LwveepTps6Tt0E8j+tabfLiI+MdLLWSxLqA1cJON1hz8aZkisUWXUMhNOQpLrIR062CCV3Bg0ZwlU9OhbKefT1NjDog/g2q+TAW89zQllayE0d/y9qAdSAucb3iKOXZYzSSmdealQNS1IL3qMUpowYU6uuO7LEqyPD05MgXvXy6frzzrkpBXlAx+J30gur7J4OT/ziwA3fvIcKvLAHet4sqms0BCkZk6CKbyRPu8Xqwsv5KGfYcI4thniGI9nFwFwt1bfZm9racBom20+/R8n0upa1EAueM5b9A7lN3BE9empZqOTj5NkKNeCf630MV2jeKeEP8cImJ5W9l3gYGDg1wPxxZcmBvsZ4qZXUMim6a/M2jKAsHtYvPN1A0FsH3AAbpFvCxA200RpdN9ME2nSQL2g5pg9OIw6KkYT3gKe7QmWrItoXK1c/XBbJQ6pVOca2BzfQfoOCTygsFljpEPDG+tBLrte+jUDP2DcYKLisBjhgtTZnAmgmg8/Aus/awVIZGqScBZ1xa/82qG7rzT0BDLldEs0sP5HS8oNhU3lhDue5NS0TUt0T7YTZvSGH0HEYEs97dJ7xpNO1TKokYmLWenco4PvNEsv2hQ85pcgDjlA29jwVT9IoAcXQGCnhPG8fgYyhJ64NNzBiWf5p1XdoBx+xtXoPiVbK44FcHipEqTaar9/ruKsdneZuJmevOHPOjhmtvwVVX8Nmx+/eftj7gZmxlF3ocI/n5T0byPxzPfMi24AxSQeAGjdI3Q4hc5ffAT7v7F89ZNEgj6fheuHl2hjRQlG4EMMwpiAnsm1HT499a+zKPMejH0uAfnT4JyItDTiDQ4l5DoO/sQZ0HkzGpiM8KQNwaHk0Un9WaO+yuA1ZTV9z8Jm13bqwTlfNHncIi8M/kHQMFhMF7Imo2mUw/Sox7Bh3W6UplqvEiy+g2NvVzFPCtGkHSTLuFSL2CtGzpPY+E5O0PK3HSbUnBzNBZodkNnUAlch2Zk9/9F8JuAYBirgoVpE7QyheJ33WDOysDFYMSXBdm20XfXCWcGzsGyvXE8FJN7EadsGjIDzZ+GtIUEBWuQ6o87kaDvo4eplYs4dz6P06lSSCA0yAvpXKD1djjC8dnWdYtWsLpl4Fplhje74Y6i/M7VMSQnRvD54/CC4LPzx4vghhIOzVo6bLzl7QIHPvVyM/drqBBZ3tW1lYqvXfauRfH5WHe+RcHI+xxeqDECqJ9tdXLyy9L7RqxyUaZKwmlAux+zEzdzITSRlr36YuSm0LBhTpkivodWytR6BNULFxftqF42QqKLmoog9WlYNRb4GtNm93bHuxBvV5VcOUeY6N/9xDutwbqYhaN3rIzpg1M6XfrYctTdA5Msr2v4Aydmb+Nl2/Eqw+jSXYvctmuDHYUAei0pUc6E5N1bULPEjHAr+HI3gwDjpDg0nE2fMkXneCumq9ifZR5IKUOqn0aDIfN64olrhaHfV4msozkdG/3j5HHqsf5Els8kwvDrCaK4/BXb+YzYC00mJEOu8njPsKgB9dG+FjqqeToCsJKLTvHS+iQTnqFquCJ+yCckuDaHLnP4GzroGg7BelrYZWStEFay3j+vkEuXHy3B2zG5xBqSx+/pxoEOv+OfiCfq5QMCCNq26xXC+1DZ+eQdH2jJ9FXSh9yrISZTk56jTzMIzG9+Ye+pumQffxmh2lcvPXjmNWL3PoOgRpkx4o/TZzE2y3IMtEZNxpNUlBqFlnBVXuPS0TIBkF+ZfvW3y2bGWD14zb8Cju5+wiSW1pIIRRtD0DeaxOLIvup5BZ2R2QfQVx6ryHH4H/rls/fRJy6KIdsJ/qVsWrBZaKgKOhP0GOUjA16wS+vlpcmot72SIWJWQDwyiD04TLSU6LyObtnOC2W5QA0OCGXHtlTi9Cyh95AIL8UU6AaQOaDSDfuf3DbxO4065WUdqPZ6Zj9S26jGlhDs/3mX1c4h+to5J2UwvgO3dkFtmKMBF3OuQvskMsOO8R5FnXblT4zMUpkjhs3m1ygag6zQWKfFOQCFM8jmAFtaCpCqDX77xqhE3B99uGU3UT+41SufAp9fQENvgk5lwqneywazIE9IpGT8v23sBPibAHG34mLWiivxnjk8p2S5ofshihnLQd4CU5ABpVcMX/5Hg39Jm55k+hgxugBCGIR5KmY+qz6US5/wKYimBbjTOSBlyD9OiYpWxtoLH6PcoaUdK0dW4vKR121dfMwumvgSBf8g0fsVN0w8jbplh7Df1FVC9wZuTbZStSswGJu6IngHRvBgOFag8F3hwPVNuUYjxNngNURuMvnnOvway+3l+1sK7aILbzdSzAxUCtG9/CaaHsBFIVzMWEH7upNL6Hr6P+oI4i+VqT6NyQrYUMkRXYd2P1ZjEMDaJ1rrurxTBgTfMw9cZe8SHIAz0JA7jpgDmr+InVbg0HrkFNZVhQ2uBKn75tLEZwfMp2azBhkglsAXDPx2BccwTDGmnsjRDh2jHh9ynTQY4vLqcuv/NWRlP8sFHWyxSmm38ikF1UoTywoZL0oFE4I4ujqIcvCuo+0ABPohIMdyq8EqgTcogXcYNCGdgvytDCA/fwt2eG78+OAANOgmKkOI8WdjE3FaFdqW6rx/oOBunJoqMLOwnPtv67Cw7PY8c4jFvek2G/hk1Thivu5Pf2iV8YDA8DyziBPz6MKlF9XQlRt7ZRV09nZrygwo00ME7IpFuOiEsUrd14UcCvNC/DPkbFmqB1uQIg477mFiq2niVADUYnvdjiQPNpFfMTo4yg4X+tDW3rmH2WE9E2rY0ES40wM6QRwaQL5/fepJULkj3Zc6L1ItuWmO6zXbvou399GBCPcQwB2+rRpubsw03qWL2iRyHH9Afl/YHuFYa8v7zEXDEigXJo9RAtTM4BTzElQhSgePv55AmHTo4W9v4SmkPDlLIhOpcXBK4GO2AnyzeN0MaKP7umX9bZAfc5LA84bxj3frYCxezbP9KG7QeJzevIhiAU4p/j+y2OyMV2mxNgAAAABJRU5ErkJggg==",oy=n(122),ay=n.n(oy),sy=n(123),uy=n.n(sy),ly=n(124),cy=n.n(ly),hy=n(125),dy=n.n(hy),fy=n(126),py=n.n(fy),vy=n(127),my=n.n(vy),gy=n(128),yy=n.n(gy),_y=n(129),xy=n.n(_y),by=n(130),Ty=n.n(by),wy={wipe:function(t){m(n,t);var e=g(n);function n(t){var r;y(this,n);var i=1;return"up"===t?i=1:"down"===t?i=2:"left"===t?i=3:"right"===t&&(i=4),(r=e.call(this,Yg.a,Wg.a,{percent:0,direction:1,transition:0})).uniforms.direction=i,r}return _(n)}(zg),fade:function(t){m(n,t);var e=g(n);function n(t){var r;y(this,n);var i=1;return"out"===t?i=-1:"in"===t&&(i=1),(r=e.call(this,void 0,Zg.a,{percent:0,transition:1})).uniforms.transition=Math.pow(i,i),r}return _(n)}(zg),blinds:function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,$g.a,Kg.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="vertical"===t?1:0,r}return _(n)}(zg),checkerboard:function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,$g.a,ey.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="down"===t?1:0,r}return _(n)}(zg),dissolve:function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,$g.a,ry.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).setTextTure(),r}return _(n,[{key:"setTextTure",value:function(){this.uniforms.dissolveSampler=ql.t.from(iy)}}]),n}(zg),randombar:function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,$g.a,ay.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="vertical"===t?1:0,r.setTextTure(),r}return _(n,[{key:"setTextTure",value:function(){this.uniforms.dissolveSampler=ql.t.from(iy)}}]),n}(zg),circle:function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,$g.a,uy.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="out"===t?1:0,r}return _(n)}(zg),box:function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,$g.a,cy.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="out"===t?1:0,r}return _(n)}(zg),diamond:function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,$g.a,dy.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="out"===t?1:0,r}return _(n)}(zg),plus:function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,$g.a,py.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="out"===t?1:0,r}return _(n)}(zg),barn:function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,$g.a,my.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="inHorizontal"===t?1:"outHorizontal"===t?2:"outVertical"===t?3:0,r}return _(n)}(zg),strips:function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,$g.a,yy.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="upLeft"===t?1:"downRight"===t?2:"upRight"===t?3:0,r}return _(n)}(zg),wedge:function(t){m(n,t);var e=g(n);function n(t){return y(this,n),e.call(this,$g.a,xy.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})}return _(n)}(zg),wheel:function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,$g.a,Ty.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option=Number(t)||1,r}return _(n)}(zg)},Ey=function(t){m(n,t);var e=g(n);function n(t){var r,i;y(this,n),(r=e.call(this,t)).filterType="",r.isConflict=!1,r.activeWhenConflict="prev",r.onTimeUpdate=function(t){var e,n=t.duration,i=t.delta/n;if(r.filter){r.filter.percent=r.commonTimeNode.applyTimeFilter(i);var o=null===(e=r.timingTarget)||void 0===e?void 0:e.container.getBounds();o&&(r.filter.uniforms.uBoundRect=new Float32Array([o.x,o.y,o.width,o.height]))}i>=1&&r.timingTarget&&r.ctx.clock.setTimeout((function(){var t;if((null===(t=r.timingTarget)||void 0===t?void 0:t.container.filters)&&r.filter){r.timingTarget.removeAnimationFilterQueue(r.filter);var e=r.timingTarget.getFirstAnimationFilter();r.timingTarget.container.filters=e?[e]:[]}}))},r.onSeekToStart=function(){r.timingTarget&&(r.timingTarget.container.filters=[],r.filter&&r.timingTarget.removeAnimationFilterQueue(r.filter))},r.onSeekToEnd=function(){r.timingTarget&&(r.timingTarget.container.filters=[],r.filter&&r.timingTarget.removeAnimationFilterQueue(r.filter))},r.commonTimeNode.on("timelineStart",(function(){r.filter&&r.timingTarget&&(r.timingTarget.addToAnimationFilterQueue(r.filter),r.timingTarget.container.filters&&0!==r.timingTarget.container.filters.length||(r.timingTarget.container.filters=[r.filter]))})),r.commonTimeNode.on("timeUpdate",r.onTimeUpdate);var o=0;"out"===t.json.transition?o=-1:"in"===t.json.transition&&(o=1);var a=null===(i=t.json.filter)||void 0===i?void 0:i.match(/^([a-zA-Z]+)(\((.+)\))?/);if(a){var s=a[1],u=a[3];wy[s]&&(r.filter=new wy[s](u),r.filterType="".concat(s,"-").concat(u),r.filter&&(r.filter.transition=o))}return r}return _(n,[{key:"modifyAttrKey",get:function(){return this.filterType}}]),n}(Ng),Sy=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).isConflict=!0,r.activeWhenConflict="next",r.startPos=null,r.onTimeNodeStart=function(){var t,e;r.startPos={x:(null===(t=r.timingTarget)||void 0===t?void 0:t.ppt_x)||0,y:(null===(e=r.timingTarget)||void 0===e?void 0:e.ppt_y)||0}},r.onTimeUpdate=function(t){var e,n=t.duration,i=t.delta/n,o=null===(e=r.path)||void 0===e?void 0:e.getPoint(i);r.timingTarget&&o&&(r.timingTarget.ppt_x=o.x+r.timingTarget.design_ppt_x,r.timingTarget.ppt_y=o.y+ +r.timingTarget.design_ppt_y)},r.onSeekToStart=function(){r.timingTarget&&r.startPos&&(r.timingTarget.ppt_x=r.startPos.x,r.timingTarget.ppt_y=r.startPos.y)},r.onSeekToEnd=function(){var t,e,n,i=null!==(e=null===(t=r.commonTimeNode.json)||void 0===t?void 0:t.spd)&&void 0!==e?e:1,o=null===(n=r.path)||void 0===n?void 0:n.getPoint(i>0?1:0);r.timingTarget&&o&&(r.timingTarget.ppt_x=o.x+r.timingTarget.design_ppt_x,r.timingTarget.ppt_y=o.y+r.timingTarget.design_ppt_y)},r.commonTimeNode.on("timeUpdate",r.onTimeUpdate),r.commonTimeNode.on("timeNodeCreate",r.onTimeNodeStart),r.createPath(),r}return _(n,[{key:"modifyAttrKey",get:function(){return"motion"}},{key:"createPath",value:function(){var t,e=new os,n=null===(t=this.json.path)||void 0===t?void 0:t.match(/[MLCmlc][^MLCmlc]+/g);if(n){var i,o=l(n);try{for(o.s();!(i=o.n()).done;){var a=i.value.trim().replace(/\s+/g," ").split(" "),s=r(a),u=s[0],h=s.slice(1);if("M"===u){var d=h.map((function(t){return Number(t)})),f=c(d,2),p=f[0],v=f[1];e.moveTo(p,v)}else if("L"===u){var m=h.map((function(t){return Number(t)})),g=c(m,2),y=g[0],_=g[1];e.lineTo(y,_)}else if("C"===u){var x=h.map((function(t){return Number(t)})),b=c(x,6),T=b[0],w=b[1],E=b[2],S=b[3],A=b[4],M=b[5];e.bezierCurveTo(T,w,E,S,A,M)}else if("Z"===u)e.closePath();else if("E"===u)console.warn("not implements");else if("c"===u){var R=h.map((function(t){return Number(t)})),C=c(R,6),P=C[0],I=C[1],O=C[2],k=C[3],N=C[4],L=C[5],D=e.currentPoint;e.bezierCurveTo(P+D.x,I+D.y,O+D.x,k+D.y,N+D.x,L+D.y)}else if("l"===u){var F=e.currentPoint,B=h.map((function(t){return Number(t)})),U=c(B,2),G=U[0],j=U[1];e.lineTo(G+F.x,j+F.y)}else if("m"===u){var H=e.currentPoint,z=h.map((function(t){return Number(t)})),V=c(z,2),W=V[0],X=V[1];e.moveTo(W+H.x,X+H.y)}}}catch(Y){o.e(Y)}finally{o.f()}}this.path=e}}]),n}(Ng),Ay=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).isConflict=!0,r.activeWhenConflict="next",r.startVal=null,r.onTimelineStart=function(t){t.isReverse||r.updateCurrentValue()},r.onTimeUpdate=function(t){var e,n,i,o,a,s=t.duration,u=t.delta/s,l={x:1,y:1};if(r.to){var c=null!==(e=r.from)&&void 0!==e?e:{x:null!==(i=null===(n=r.startVal)||void 0===n?void 0:n.x)&&void 0!==i?i:1,y:null!==(a=null===(o=r.startVal)||void 0===o?void 0:o.y)&&void 0!==a?a:1};l.x=c.x+(r.to.x-c.x)*u,l.y=c.y+(r.to.y-c.y)*u}else if(r.by){var h={x:r.by.x,y:r.by.y};l.x=1+(h.x-1)*u,l.y=1+(h.y-1)*u}r.timingTarget&&(r.timingTarget.scale=l)},r.onTimeNodeStart=function(){r.timingTarget&&(r.startVal={x:r.timingTarget.scale.x,y:r.timingTarget.scale.y})},r.onSeekToStart=function(){r.timingTarget&&r.startVal&&(r.timingTarget.scale=r.startVal)},r.onSeekToEnd=function(){r.onTimeUpdate({duration:1,delta:1,isReverse:!1})},r.from=t.json.from,r.to=t.json.to,r.by=t.json.by,r.commonTimeNode.on("timelineStart",r.onTimelineStart),r.commonTimeNode.on("timeNodeCreate",r.onTimeNodeStart),r.commonTimeNode.on("timeUpdate",r.onTimeUpdate),r.commonTimeNode.on("timeNodeStart",r.onTimeNodeStart),r}return _(n,[{key:"modifyAttrKey",get:function(){return"scale"}},{key:"updateCurrentValue",value:function(){this.timingTarget&&(this.current={x:this.timingTarget.scale.x,y:this.timingTarget.scale.y})}}]),n}(Ng),My=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).isConflict=!1,r.activeWhenConflict="next",r.isTimelineStart=!1,r.startColorString=null,r.currentColorString="#FFFFFFFF",r.onTimelineStart=function(t){if(!r.isTimelineStart){r.isTimelineStart=!0,t.isReverse||r.updateCurrentValue(),r.from.isInit()||r.from.fromHexString(r.currentColorString),r.to.isInit()||r.from.by(r.by,r.to);var e=r.json.cBhvr.attrList[0].split("."),n=c(e,1)[0];Og(r.timingTarget,n+".on","true")}},r.onTimeNodeEnd=function(){if("remove"===r.json.cBhvr.ctn.fill){var t=r.json.cBhvr.attrList[0].split("."),e=c(t,1)[0];Og(r.timingTarget,e+".on","false")}r.isTimelineStart=!1},r.onSeekToStart=function(){var t;if(r.timingTarget&&(r.onTimeUpdate({duration:1,delta:0}),(null===(t=r.timingTarget.fill)||void 0===t?void 0:t.designColor.toUpperCase())===r.from.toHexString().toUpperCase())){var e=r.json.cBhvr.attrList[0].split("."),n=c(e,1)[0];Og(r.timingTarget,n+".on","false")}},r.onTimeNodeStart=function(){if(r.timingTarget){var t=r.json.cBhvr.attrList[0];"ppt_c"===t&&(t="ppt_c.color");var e=kg(r.timingTarget,t);e&&(r.startColorString=e)}},r.onTimeUpdate=function(t){var e=t.delta/t.duration;if(r.to.interpolationFrom(r.from,e,r.target),r.timingTarget){var n=r.json.cBhvr.attrList[0];"ppt_c"===n&&(n="ppt_c.color"),Og(r.timingTarget,n,r.target.toHexString())}},r.onSeekToEnd=function(){r.isTimelineStart||r.onTimelineStart({isReverse:!1,activeCount:0,id:""}),r.onTimeUpdate({duration:1,delta:1})},"rgb"===r.json.clrSpc?(r.from=new Vv(r.json.from),r.to=new Vv(r.json.to),r.by=new Vv(r.json.by),r.target=new Vv):(r.from=new zv(r.json.from),r.to=new zv(r.json.to),r.by=new zv(r.json.by),r.target=new zv),r.commonTimeNode.on("timeNodeStart",r.onTimeNodeStart),r.commonTimeNode.on("timeNodeCreate",r.onTimeNodeStart),r.commonTimeNode.on("timelineStart",r.onTimelineStart),r.commonTimeNode.on("timeNodeEnd",r.onTimeNodeEnd),r.commonTimeNode.on("timeUpdate",r.onTimeUpdate),r}return _(n,[{key:"modifyAttrKey",get:function(){return this.json.cBhvr.attrList[0]}},{key:"updateCurrentValue",value:function(){if(this.timingTarget){var t=this.json.cBhvr.attrList[0];"ppt_c"===t&&(t="ppt_c.color");var e=kg(this.timingTarget,t);e&&(this.currentColorString=e)}}}]),n}(Ng),Ry=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).isConflict=!1,r.activeWhenConflict="next",r.startVal=null,r.lastVal=null,r.onTimelineStart=function(t){r.lastVal=null,t.isReverse||r.updateCurrentValue()},r.onTimeUpdate=function(t){var e=t.duration,n=t.delta/e,i=0;if(void 0!==r.from&&void 0!==r.to){var o=(i=r.from)+(r.to-i)*n;r.timingTarget&&(r.timingTarget.r=o)}else if(void 0!==r.by){r.lastVal||(r.lastVal=0);var a=r.by*n-r.lastVal;r.lastVal=r.by*n,r.timingTarget&&(r.timingTarget.r+=a)}},r.onTimeNodeStart=function(){var t;Tv()(null===(t=r.timingTarget)||void 0===t?void 0:t.r)&&(r.startVal=r.timingTarget.r)},r.onSeekToStart=function(){r.timingTarget&&null!==r.startVal&&(r.timingTarget.r=r.startVal)},r.onSeekToEnd=function(){r.onTimeUpdate({duration:1,delta:1,isReverse:!1})},r.from=r.json.from,r.to=r.json.to,r.by=r.json.by,r.by?r.isConflict=!1:r.isConflict=!0,r.commonTimeNode.on("timeNodeStart",r.onTimeNodeStart),r.commonTimeNode.on("timeNodeCreate",r.onTimeNodeStart),r.commonTimeNode.on("timelineStart",r.onTimelineStart),r.commonTimeNode.on("timeUpdate",r.onTimeUpdate),r}return _(n,[{key:"modifyAttrKey",get:function(){return"rotate"}},{key:"updateCurrentValue",value:function(){var t;this.currentVal=null===(t=this.timingTarget)||void 0===t?void 0:t.r}}]),n}(Ng),Cy=function(t){m(n,t);var e=g(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).isConflict=!1,r.activeWhenConflict="next",r.isApplied=!1,r.onTimeUpdate=function(){var t,e,n=r.json,i=n.cmd,o=n.cmdType;!r.isApplied&&i&&o&&(r.isApplied=!0,null===(e=null===(t=r.timingTarget)||void 0===t?void 0:t.cmd)||void 0===e||e.applyCommand(i,o))},r.onSeekToStart=function(){var t,e;null===(e=null===(t=r.timingTarget)||void 0===t?void 0:t.cmd)||void 0===e||e.applyCommand("custom-pause","call")},r.onSeekToEnd=function(){},r.commonTimeNode.on("timeNodeStart",(function(){r.isApplied=!1})),r.commonTimeNode.on("timeNodeEnd",(function(){r.isApplied=!1})),r.commonTimeNode.on("timeUpdate",r.onTimeUpdate),r.commonTimeNode.on("seekToStart",r.onSeekToStart),r.commonTimeNode.on("seekToEnd",r.onSeekToEnd),r}return _(n,[{key:"modifyAttrKey",get:function(){var t,e,n,r;return(null!==(e=null===(t=this.json)||void 0===t?void 0:t.cmd)&&void 0!==e?e:"")+(null!==(r=null===(n=this.json)||void 0===n?void 0:n.cmdType)&&void 0!==r?r:"")}}]),n}(Ng),Py=_((function t(e){var n=this;y(this,t),this.runtimeNodeEventHub=new su.a,this.onVolumeUpdate=function(t){n.audio.volume(t)},this.stopAudio=function(){n.audio.stop()},this.destroy=function(){n.stopAudio(),n.audio.destroy(),n.ctx.activeMedia.delete(n.audio),n.ctx.volumeAdjuster.off("update",n.onVolumeUpdate)};var r=e.json,i=e.isIterate,o=e.isSub,a=e.eventHub,s=e.ctx,u=e.parent,l=e.iterateType,c=e.iterateIndex,h=e.iterateId,d=e.isInInteractiveSeq;this.json=r,this.id=r.cMediaNode.ctn.id,this.commonTimeNode=new Iy({json:r.cMediaNode.ctn,isSub:o,eventHubs:{global:a,runtime:this.runtimeNodeEventHub},ctx:s,parent:u,isIterate:i,iterateType:l,iterateIndex:c,iterateId:h,isInInteractiveSeq:d});var f=r.cMediaNode.tgtEl;s.loaderDelegate&&(f=s.loaderDelegate.redirectMedia(f),s.logger.info("redirect media url from ".concat(r.cMediaNode.tgtEl," to ").concat(f," by delegate."),s.taskId)),this.audio=new Eg(f,s.runningAudio),s.activeMedia.add(this.audio),this.commonTimeNode.on("timelineStart",(function(){n.audio.volume(s.volumeAdjuster.volume),n.audio.play()})),this.commonTimeNode.on("seekToStart",this.stopAudio),this.commonTimeNode.on("seekToEnd",this.stopAudio),this.commonTimeNode.on("timeNodeDestroy",this.destroy),this.ctx=s,this.ctx.volumeAdjuster.on("update",this.onVolumeUpdate)})),Iy=function(t){m(n,t);var e=g(n);function n(t){var r,i,o;y(this,n),(r=e.call(this)).uuid=uv(),r.isSub=!1,r.isShadow=!1,r.startCount=0,r.applyCount=0,r.isReverse=!1,r.isConflictDispose=!1,r.isIterateEnd=!1,r.parentTimeNode=null,r.isActive=!1,r.isDestroy=!1,r.shouldSeekOnStart=!1,r.repeatTimeoutId="",r.iterateShadows=[],r.isEndEventsEmitted=!1,r.tmFilter=[],r.timeDelta=0,r.isIterate=!1,r.iterateType="el",r.iterateIndex=0,r.children=[],r.subList=[],r.duration=0,r.isNegativeSpeed=!1,r.handleEndCond=function(){r.isActive&&(r.isActive=!1,r.isInfiniteRepeat()?r.repeatTimeNodeEnd():r.seekToEnd(!1,!0))},r.handleActive=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(r.isActive=!0,r.isConflictDispose=!1,r.applyCount+=1,r.json.iterate||r.emit("timeNodeStart",{id:r.uuid,activeCount:r.applyCount,isReverse:r.isReverse}),r.startCount>0&&r.json.restart){if("never"===r.json.restart)return;"whenNotActive"!==r.json.restart&&"always"!==r.json.restart||(r.seekToStart(),r.emit("timeNodeRestart",{id:r.uuid,activeCount:r.applyCount,isReverse:r.isReverse}),r.startTimeLine(t))}else r.startTimeLine(t)},r.updateTimeLine=function(t){var e=t/(rd.b.TARGET_FPMS||.06);r.timeDelta+=e,r.duration-r.timeDelta<=e&&(r.timeDelta=r.duration),r.timeDelta<r.duration?r.emit("timeUpdate",{delta:r.isReverse||r.isNegativeSpeed?r.duration-r.timeDelta:r.timeDelta,duration:r.duration,isReverse:r.isReverse}):(r.emit("timeUpdate",{delta:r.isReverse||r.isNegativeSpeed?0:r.duration,duration:r.duration,isReverse:r.isReverse}),r.onTimeLineEnd())},r.handleEnd=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(r.isTimeNodeEnd()||t)&&(r.isActive=!1,r.isSub&&r.destroy(),r.emitEndEvents())};var a=t.isSub,s=t.isIterate,u=t.ctx,l=t.eventHubs,c=t.parent,h=t.json,d=t.iterateType,f=t.iterateId,p=t.iterateIndex,v=t.isInInteractiveSeq;r.isSub=a,r.isInInteractiveSeq=v,r.isIterate=s,r.parentTimeNode=c,r.json=h,r.ctx=u,r.iterateIndex=p,r.eventHubs=l,r.iterateType=d,r.iterateId=f,r.tmFilter=null!==(o=null===(i=h.tmFilter)||void 0===i?void 0:i.split(";").map((function(t){return t.split(",").map((function(t){return parseFloat(t.trim())}))})))&&void 0!==o?o:[];var m=Number(r.json.dur),g=r.json.spd||1;return r.isNegativeSpeed=g<0,Number.isNaN(m)||(r.duration=m/Math.abs(g)),r.uuid+="--"+r.json.id,r.setPreStyle(),h.childTnLst&&r.createChildren(h.childTnLst),r.startConds=new Pg(r.json.id||"",h.stCondLst,l,r.ctx),r.endConds=new Pg(r.json.id||"",h.endCondLst,l,r.ctx),h.endSync&&(r.endSync=new Pg(r.json.id||"",[h.endSync],l,r.ctx),r.endSync.on("active",(function(){var t;"interactiveSeq"===r.json.nodeType&&(r.isActive=!1,r.shouldSeekOnStart=!0,r.emit("timeNodeEndSync"),null===(t=r.endSync)||void 0===t||t.reset())}))),r.startConds.on("active",(function(t){r.isActive||(r.shouldSeekOnStart&&(r.shouldSeekOnStart=!1,r.seekToStart()),r.handleActive(t))})),r.endConds.on("active",(function(){r.handleEndCond(),r.children.forEach((function(t){return t.commonTimeNode.handleEndCond()}))})),r.parentTimeNode&&r.parentTimeNode.on("timeNodeStart",(function(){r.applyCount=0})),r.isSub&&"nextClick"===r.json.masterRel&&r.startConds.addCond({event:"shape slide onNext"}),r.json.iterate&&!1===r.isIterate&&r.createIterateShadow(),r}return _(n,[{key:"createIterateShadow",value:function(){var t=this,e=uv(),r=!0,i=0;for(this.ctx.eventHub.on("IterateTimeNodeEnd",(function n(i){i===e&&(r=!1,t.ctx.eventHub.removeListener("IterateTimeNodeEnd",n))}));r;){var o=JSON.parse(JSON.stringify(this.json)),a=new n({json:o,isSub:!1,eventHubs:this.eventHubs,ctx:this.ctx,parent:null,isIterate:!0,iterateType:o.iterate.type,iterateIndex:i,iterateId:e,isInInteractiveSeq:this.isInInteractiveSeq});this.iterateShadows[i]=a,i+=1}}},{key:"isInfiniteRepeat",value:function(){return this.json.repeatCount>999999998}},{key:"getReverse",value:function(){return this.isReverse}},{key:"setReverse",value:function(t){this.isReverse=t}},{key:"createTimeNode",value:function(t,e){var n=null,r={json:t,isSub:e,isIterate:this.isIterate,eventHub:this.eventHubs.global,ctx:this.ctx,parent:this,iterateType:this.iterateType,iterateIndex:this.iterateIndex,iterateId:this.iterateId,isInInteractiveSeq:this.isInInteractiveSeq};return"seq"===t.type?n=new Ig(r):"par"===t.type?n=new Oy(r):"set"===t.type?n=new Lg(r):"anim"===t.type?n=new Hg(r):"animEffect"===t.type?n=new Ey(r):"animMotion"===t.type?n=new Sy(r):"animScale"===t.type?n=new Ay(r):"animClr"===t.type?n=new My(r):"animRot"===t.type?n=new Ry(r):"cmd"===t.type?n=new Cy(r):"audio"===t.type&&(n=new Py(r)),n}},{key:"createSubList",value:function(t){var e=this;this.subList&&this.subList.forEach((function(t){return t.commonTimeNode.destroy()})),this.subList=[],t.forEach((function(t){var n=e.createTimeNode(t,!0);n&&e.subList.push(n)}))}},{key:"bindCommonTimeNodeEvent",value:function(t){var e=this;t.commonTimeNode.on("timeNodeStart",(function(t){e.emit("childTimeNodeStart",t)})),t.commonTimeNode.on("timeNodeEnd",(function(t){e.emit("childTimeNodeEnd",t),e.children.every((function(t){return t.commonTimeNode.isTimeNodeEndWhenDetectEndSync()}))&&(e.json.iterate||e.allChildrenEndHandle())}))}},{key:"createChildren",value:function(t){var e=this;function n(t){return(e=t,function(t){var e;return!!(null===(e=t)||void 0===e?void 0:e.cBhvr)}(e)?e.cBhvr.ctn:function(t){var e,n;return!!(null===(n=null===(e=t)||void 0===e?void 0:e.cMediaNode)||void 0===n?void 0:n.ctn)}(e)?e.cMediaNode.ctn:e.ctn).presetOrder;var e}t&&t[0]&&n(t[0])?a(t).sort((function(t,e){var r,i;return(null!==(r=n(t))&&void 0!==r?r:0)-(null!==(i=n(e))&&void 0!==i?i:0)})).forEach((function(n){var r=t.findIndex((function(t){return t===n})),i=e.createTimeNode(n,!1);i&&(e.bindCommonTimeNodeEvent(i),e.children[r]=i)})):t.forEach((function(t){var n=e.createTimeNode(t,!1);n&&(e.bindCommonTimeNodeEvent(n),e.children.push(n))}))}},{key:"playReverse",value:function(){this.isReverse=!0,this.startReverseTimeLine(),this.children.forEach((function(t){return t.commonTimeNode.playReverse()}))}},{key:"allChildrenEndHandle",value:function(){var t=this;if(!this.isDestroy){if(this.json.autoRev&&!this.isReverse)return this.isReverse=!0,void this.playReverse();this.isReverse&&(this.isReverse=!1),this.json.repeatCount&&this.json.repeatCount>this.applyCount?this.repeatTimeoutId=this.ctx.clock.setTimeout((function(){t.seekToStart(!1),t.resetForRepeat(),t.startTimeNodeRepeat()})):(this.json.iterate&&!this.isIterate&&(this.isIterateEnd=!0),this.eventHubs.runtime.emit("runtime all end"),this.startSubList(),this.handleEnd())}}},{key:"resetForRepeat",value:function(){this.isInInteractiveSeq&&this.isInfiniteRepeat()&&this.repeatTimeNodeEnd(),this.timeDelta=0,this.children.forEach((function(t){return t.commonTimeNode.resetForRepeat()}))}},{key:"startSubList",value:function(){this.subList.forEach((function(t){return t.commonTimeNode.startTimeNode()}))}},{key:"startReverseTimeLine",value:function(){this.isEndEventsEmitted=!1,this.timeDelta=0;var t=1e3/this.ctx.ticker.maxFPS;this.duration<=t&&this.duration>0?(this.emit("timeUpdate",{delta:this.duration,duration:this.duration,isReverse:this.isReverse}),this.ctx.eventHub.emit(e_.animateEnd),this.ctx.ticker.remove(this.updateTimeLine)):this.duration>t&&(this.ctx.eventHub.emit(e_.animateStart),this.ctx.ticker.add(this.updateTimeLine))}},{key:"startTimeLine",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e&&(this.isEndEventsEmitted=!1,this.eventHubs.global.emit("time ".concat(this.json.id," begin")),this.eventHubs.global.emit("time ".concat(this.json.id," onBegin")),this.eventHubs.runtime.emit("runtime ".concat(this.json.id," begin"))),this.json.iterate)this.startIterate();else{this.timeDelta=0,this.emit("timelineStart",{id:this.uuid,activeCount:this.applyCount,isReverse:this.isReverse});var n=1e3/this.ctx.ticker.maxFPS;this.duration<=n&&this.duration>0?(this.timeDelta=this.isReverse?0:this.duration,this.emit("timeUpdate",{delta:this.timeDelta,duration:this.duration,isReverse:this.isReverse}),this.emit("timelineEnd",{id:this.uuid,activeCount:this.applyCount,isReverse:this.isReverse}),this.ctx.ticker.addOnce((function(){t.onTimeLineEnd()}))):this.duration>n&&(this.ctx.eventHub.emit(e_.animateStart),this.updateTimeLine(0),this.ctx.ticker.add(this.updateTimeLine))}}},{key:"startIterate",value:function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,s.mark((function t(){var e,n,r;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.json.iterate){t.next=24;break}this.isIterateEnd=!1,e=l(this.iterateShadows),t.prev=3,e.s();case 5:if((n=e.n()).done){t.next=15;break}if(r=n.value,!this.isIterateEnd){t.next=9;break}return t.abrupt("break",15);case 9:return r.children.forEach((function(t){t.commonTimeNode.startTimeNode()})),r.applyCount+=1,t.next=13,this.ctx.clock.delay(this.json.iterate.interval);case 13:t.next=5;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),e.e(t.t0);case 20:return t.prev=20,e.f(),t.finish(20);case 23:this.onTimeLineEnd();case 24:case"end":return t.stop()}}),t,this,[[3,17,20,23]])})))}},{key:"applyTimeFilter",value:function(t){if(!this.tmFilter.every((function(t){return Tv()(t[0])&&Tv()(t[1])})))return t;for(var e=0;e<this.tmFilter.length;e++){var n=this.tmFilter[e];if(t<n[0]){var r=this.tmFilter[e-1];return(t-r[0])/(n[0]-r[0])*(n[1]-r[1])+r[1]}}return this.tmFilter.length>0?this.tmFilter[this.tmFilter.length-1][1]:t}},{key:"isNatureTimeEnd",value:function(){return this.duration>=0&&this.timeDelta>=this.duration}},{key:"findTargets",value:function(){var t=[];return function e(n){n.forEach((function(n){var r,i,o;n.cBhvr&&n.cBhvr.target&&t.findIndex((function(t){return t.id===n.cBhvr.target.id}))<0&&t.push(n.cBhvr.target),(null===(i=null===(r=null==n?void 0:n.cBhvr)||void 0===r?void 0:r.ctn)||void 0===i?void 0:i.childTnLst)&&n.cBhvr.ctn.childTnLst.length>0&&e(n.cBhvr.ctn.childTnLst),(null===(o=null==n?void 0:n.ctn)||void 0===o?void 0:o.childTnLst)&&n.ctn.childTnLst.length>0&&e(n.ctn.childTnLst)}))}(this.json.childTnLst||[]),t}},{key:"setPreStyle",value:function(){var t=this;this.json.presetClass&&this.findTargets().forEach((function(e){if(t.json.iterate)for(var n=0,r=!0;r;){var i=t.ctx.timingTargets.getTarget(e,!0,{type:t.json.iterate.type,index:n,id:""});i&&(t.setPreStyleForTarget(i),n+=1),r=!!i}else{var o=t.ctx.timingTargets.getTarget(e,!1);o&&t.setPreStyleForTarget(o)}}))}},{key:"setPreStyleForTarget",value:function(t){var e,n;if(t&&this.json.presetSubtype&&(t.presetSubType=this.json.presetSubtype),t&&!t.hasPreset)if("entr"===this.json.presetClass){var r=null===(n=null===(e=this.json)||void 0===e?void 0:e.childTnLst)||void 0===n?void 0:n.filter((function(t){return"set"===t.type&&"visible"===t.to}));(null==r?void 0:r.length)&&(t.hasPreset=!0,t.style.visibility="hidden")}else("exit"===this.json.presetClass||"path"===this.json.presetClass||"emph"===this.json.presetClass)&&(t.hasPreset=!0,t.style.visibility="visible")}},{key:"startTimeNodeRepeat",value:function(){this.timeDelta=0,this.isActive=!0,this.applyCount+=1,this.startTimeLine(!1),this.json.iterate||this.emit("timeNodeRepeat",{id:this.uuid,activeCount:this.applyCount,isReverse:this.isReverse})}},{key:"startTimeNodeForce",value:function(){this.json.subTnLst&&this.createSubList(this.json.subTnLst),this.timeDelta=0,this.isActive=!0,this.handleActive(!1)}},{key:"startTimeNode",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.isDestroy){this.collectStartValue(),this.timeDelta=0,this.isReverse=!1,this.json.subTnLst&&this.createSubList(this.json.subTnLst),this.startConds.setTriggerParams(t);var e=this.json.stCondLst.filter((function(t){return/^self/.test(t.event||"")}))[0];e&&this.startConds.condHandle(e);var n=this.json.endCondLst.filter((function(t){return/^self/.test(t.event||"")}))[0];n&&this.endConds.condHandle(n),this.startConds.condHandle()}}},{key:"onTimeLineEnd",value:function(){this.dispose(),(0===this.children.length||this.json.iterate)&&this.allChildrenEndHandle()}},{key:"clearSubList",value:function(){this.subList.forEach((function(t){return t.commonTimeNode.destroy()}))}},{key:"seekToStart",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isEndEventsEmitted=!1,this.isActive=!1,this.dispose(),this.timeDelta=0,this.emit("seekToStart"),this.json.iterate&&!this.isIterate)return this.isIterateEnd=!0,void this.iterateShadows.forEach((function(e){return e.seekToStart(t)}));if(t)for(var e=this.subList.length-1;e>=0;e--){var n=this.subList[e];null==n||n.commonTimeNode.seekToStart()}for(var r=this.children.length-1;r>=0;r--){var i=this.children[r];null==i||i.commonTimeNode.seekToStart()}if(this.children.length>1)for(var o=this.children.length-1;o>=0;o--){var a=this.children[o];null==a||a.commonTimeNode.seekToStart()}}},{key:"repeatTimeNodeEnd",value:function(){this.dispose(),this.children.forEach((function(t){t.commonTimeNode.isActive=!1,t.commonTimeNode.dispose()}))}},{key:"dispose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isConflictDispose=t,this.ctx.clock.clearTimeout(this.repeatTimeoutId),this.ctx.eventHub.emit(e_.animateEnd);try{this.ctx.ticker.remove(this.updateTimeLine)}catch(t){}this.startConds.reset(),this.endConds.reset()}},{key:"seekToEnd",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.isInfiniteRepeat()){!this.isActive&&this.applyCount<=0&&this.collectStartValue(),this.applyCount=this.json.repeatCount,this.json.autoRev&&(this.isReverse=!0),this.timeDelta=this.duration,this.isActive=!1,this.dispose();var n=this.json.autoRev||t;if(n?this.emit("seekToStart"):this.emit("seekToEnd"),this.json.iterate&&!this.isIterate)return this.isIterateEnd=!0,void this.iterateShadows.forEach((function(t){return t.seekToEnd(n,e)}));0===this.children.length&&(this.eventHubs.runtime.emit("runtime all end"),this.handleEnd()),this.children.forEach((function(t){return t.commonTimeNode.seekToEnd(n,e)})),e&&this.json.subTnLst&&(this.subList.length<=0&&this.createSubList(this.json.subTnLst),this.subList.forEach((function(t){return t.commonTimeNode.seekToEnd(!1)})),this.clearSubList())}}},{key:"isTimeNodeEndWhenDetectEndSync",value:function(){if(this.isInInteractiveSeq&&this.isInfiniteRepeat())return!0;var t=!0;return this.children.length>0&&(t=t&&this.children.every((function(t){return t.commonTimeNode.isTimeNodeEndWhenDetectEndSync()}))),this.json.repeatCount&&(t=t&&this.applyCount>=this.json.repeatCount),this.json.autoRev&&(t=t&&!this.isReverse),t=t&&this.isNatureTimeEnd(),!!this.isConflictDispose||!(!this.isIterateEnd||!this.json.iterate)||t}},{key:"isTimeNodeEnd",value:function(){var t=!0;return this.children.length>0&&(t=t&&this.children.every((function(t){return t.commonTimeNode.isTimeNodeEnd()}))),this.json.repeatCount&&(t=t&&this.applyCount>=this.json.repeatCount),this.json.autoRev&&(t=t&&!this.isReverse),t=t&&this.isNatureTimeEnd(),!!this.isConflictDispose||!(!this.isIterateEnd||!this.json.iterate)||t}},{key:"emitEndEvents",value:function(){this.isEndEventsEmitted||(this.isEndEventsEmitted=!0,this.eventHubs.global.emit("time ".concat(this.json.id," end")),this.eventHubs.global.emit("time ".concat(this.json.id," onEnd")),this.eventHubs.runtime.emit("runtime ".concat(this.json.id," end")),this.emit("timeNodeEnd",{id:this.uuid,activeCount:this.applyCount,isReverse:this.isReverse}))}},{key:"collectStartValue",value:function(){this.emit("timeNodeCreate"),this.children.forEach((function(t){return t.commonTimeNode.collectStartValue()}))}},{key:"destroy",value:function(){this.emit("timeNodeDestroy"),this.isDestroy=!0,this.dispose(),this.startConds.removeAllListeners(),this.endConds.removeAllListeners(),this.children.forEach((function(t){return t.commonTimeNode.destroy()})),this.clearSubList()}}]),n}(su.a),Oy=function(t){m(n,t);var e=g(n);function n(t){var r;y(this,n),(r=e.call(this)).isRunning=!1,r.runtimeNodeEventHub=new su.a;var i=t.json,o=t.iterateType,a=t.isIterate,s=t.isSub,u=t.parent,l=t.ctx,c=t.eventHub,h=t.iterateIndex,d=t.iterateId,f=t.isInInteractiveSeq;return r.id=i.ctn.id,r.json=i,r.ctx=l,r.isIterate=a,r.globalEventHub=c,r.commonTimeNode=new Iy({json:i.ctn,isSub:s,eventHubs:{global:c,runtime:r.runtimeNodeEventHub},ctx:l,parent:u,isIterate:!1,iterateType:o,iterateIndex:h,iterateId:d,isInInteractiveSeq:f}),r.commonTimeNode.on("timeNodeStart",(function(){r.commonTimeNode.children.forEach((function(t){t.commonTimeNode.setReverse(r.commonTimeNode.getReverse()),t.commonTimeNode.startTimeNode()})),r.isRunning||(r.isRunning=!0,r.globalEventHub.emit("runtime ".concat(r.id," begin")),r.emit("begin"))})),r.commonTimeNode.on("timeNodeRepeat",(function(){r.commonTimeNode.children.forEach((function(t){t.commonTimeNode.startTimeNode(!1)}))})),r.commonTimeNode.on("timeNodeEnd",(function(){r.commonTimeNode.isTimeNodeEnd()&&r.isRunning&&(r.isRunning=!1,r.globalEventHub.emit("runtime ".concat(r.id," end")),r.emit("end"))})),r}return _(n)}(su.a),ky=function(){function t(e,n,r){y(this,t),this.json=e,this.ctx=r,this.globalEventHub=n;var i=e.timeNodeList.find((function(t){return"par"===t.type&&"tmRoot"===t.ctn.nodeType}));i&&(this.tmRoot=new Oy({json:i,isSub:!1,isIterate:!1,eventHub:n,ctx:r,parent:null,iterateType:"el",iterateIndex:0,iterateId:"",isInInteractiveSeq:!1}),this.mainSeq=this.tmRoot.commonTimeNode.children.find((function(t){var e,n,r;return"seq"===(null===(e=t.json)||void 0===e?void 0:e.type)&&"mainSeq"===(null===(r=null===(n=t.json)||void 0===n?void 0:n.ctn)||void 0===r?void 0:r.nodeType)})))}return _(t,[{key:"findSeq",value:function(t){var e;return null===(e=this.tmRoot)||void 0===e?void 0:e.commonTimeNode.children.find((function(e){var n,r,i;return"seq"===(null===(n=e.json)||void 0===n?void 0:n.type)&&(null===(i=null===(r=e.json)||void 0===r?void 0:r.ctn)||void 0===i?void 0:i.id)===t}))}},{key:"start",value:function(){var t,e;return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,s.mark((function n(){return s.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.json.autoPlayMainSeq){n.next=6;break}return n.next=3,this.ctx.clock.delay(16);case 3:null===(t=this.mainSeq)||void 0===t||t.commonTimeNode.startTimeNode(),n.next=7;break;case 6:null===(e=this.mainSeq)||void 0===e||e.commonTimeNode.startTimeNode();case 7:case"end":return n.stop()}}),n,this)})))}},{key:"setMainSeqApplied",value:function(){this.mainSeq&&(this.mainSeq.commonTimeNode.applyCount=1)}},{key:"collectMainSeqStartValue",value:function(){var t;null===(t=this.mainSeq)||void 0===t||t.commonTimeNode.collectStartValue()}},{key:"setMainSeqStep",value:function(t,e){var n;-1===t&&this.mainSeq&&(this.mainSeq.commonTimeNode.applyCount=1),null===(n=this.mainSeq)||void 0===n||n.setCurrentStep(t,e)}},{key:"destroy",value:function(){var t;this.globalEventHub.removeAllListeners(),null===(t=this.tmRoot)||void 0===t||t.commonTimeNode.destroy()}},{key:"hasMainSeq",value:function(){return!!this.mainSeq&&this.mainSeq.commonTimeNode.children.length>0}},{key:"currentMainSeqState",value:function(){return this.mainSeq?this.mainSeq.currentState:null}},{key:"currentMainSeqStep",value:function(){return this.mainSeq?this.mainSeq.currentStep:0}},{key:"currentMainSeqLength",value:function(){return this.mainSeq?this.mainSeq.stepLength:0}},{key:"mainSeqHasNextStep",value:function(){return!!this.mainSeq&&this.mainSeq.hasNext()}},{key:"mainSeqHasPrevStep",value:function(){return!!this.mainSeq&&this.mainSeq.hasPrev()}},{key:"seekInteractiveSeqToEnd",value:function(t){var e=this.findSeq(t);e&&e.commonTimeNode.seekToEnd(!1,!0)}},{key:"setInteractiveSeqState",value:function(t,e,n){var r=this.findSeq(t);r&&r.setCurrentStep(e,n)}},{key:"resetAllInteractiveSeq",value:function(){var t;((null===(t=this.tmRoot)||void 0===t?void 0:t.commonTimeNode.children.filter((function(t){var e,n,r;return"seq"===(null===(e=t.json)||void 0===e?void 0:e.type)&&"interactiveSeq"===(null===(r=null===(n=t.json)||void 0===n?void 0:n.ctn)||void 0===r?void 0:r.nodeType)})))||[]).forEach((function(t){t.setCurrentStep(0,"start")}))}},{key:"applyInteractiveAction",value:function(t){this.globalEventHub.emit(t)}}]),t}(),Ny=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Ly=function(t){m(n,t);var e=g(n);function n(t,r,i,o){var a;y(this,n),(a=e.call(this,{id:"stage",width:t.width,height:t.height,type:"Container",children:t.children},r,i,void 0,o)).isRendered=!1,a.isTimingStartValueCollected=!1,a.json=t,r.hasBackgroundFillShape=a.detectUseBackgroundFill(a.json),a.container.visible=!1,a.ctx=r;var s=new kd;return s.beginFill(16777215),s.drawRect(0,0,t.width,t.height),s.endFill(),a.container.addChild(s),a}return _(n,[{key:"detectUseBackgroundFill",value:function(t){var e=this;return!!t&&("Picture"===t.type||"Shape"===t.type?t.useBgFill:!(!t.children||!Array.isArray(t.children))&&t.children.some((function(t){return e.detectUseBackgroundFill(t)})))}},{key:"initOnReuse",value:function(){var t=this;d(f(n.prototype),"initOnReuse",this).call(this),this.ctx.timingEventHub.on("c:prev slide",(function(e){t.ctx.eventHub.emit(e_.requestPrevSlide,e)})),this.ctx.timingEventHub.on("c:next slide",(function(e,n){t.ctx.eventHub.emit(e_.requestNextSlide,e,n)}))}},{key:"interactiveContainer",get:function(){return this.container}},{key:"render",value:function(t){var e=this;this.isRendered||(this.collectAnimatedIds().forEach((function(t){return e.ctx.animatedIds.add(t)})),this.isRendered=!0,d(f(n.prototype),"render",this).call(this,t),t.addSubMTask((function(){return Ny(e,void 0,void 0,s.mark((function t(){return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.ctx.eventHub.emit("StageRenderEnd");case 1:case"end":return t.stop()}}),t,this)})))}),"@StageImpl[emit.StageRenderEnd]"))}},{key:"isListTimeNode",value:function(t){return["excel","seq","par"].indexOf(t.type)>=0}},{key:"isAnimatedTimeNode",value:function(t){return!!t.cBhvr}},{key:"collectAnimatedIdsForTimeNode",value:function(t,e){var n,r=this;this.isListTimeNode(t)?null===(n=t.ctn.childTnLst)||void 0===n||n.forEach((function(t){r.collectAnimatedIdsForTimeNode(t,e)})):this.isAnimatedTimeNode(t)&&e.push(t.cBhvr.target.id)}},{key:"collectAnimatedIds",value:function(){var t=this,e=[];return this.json.timing&&this.json.timing.timeNodeList.forEach((function(n){t.collectAnimatedIdsForTimeNode(n,e)})),e}},{key:"createTiming",value:function(){this.json.timing&&!this.timing&&(this.timing=new ky(this.json.timing,this.ctx.timingEventHub,this.ctx))}},{key:"startTiming",value:function(){var t;return(null===(t=this.timing)||void 0===t?void 0:t.start())||Promise.resolve()}},{key:"setMainSeqApplied",value:function(){var t;null===(t=this.timing)||void 0===t||t.setMainSeqApplied()}},{key:"setMainSeqStep",value:function(t,e){var n;null===(n=this.timing)||void 0===n||n.setMainSeqStep(t,e)}},{key:"collectMainSeqStartValue",value:function(){var t;this.isTimingStartValueCollected||(this.isTimingStartValueCollected=!0,null===(t=this.timing)||void 0===t||t.collectMainSeqStartValue())}},{key:"hasTiming",value:function(){return!!this.timing}},{key:"clearOnSlideChange",value:function(){this.ctx.eventHub.removeAllListeners(),this.ctx.timingEventHub.removeAllListeners(),d(f(n.prototype),"clearOnSlideChange",this).call(this)}},{key:"clearOnTransactionEnd",value:function(){var t,e;this.ctx.timingTargets.getTargets().forEach((function(t){t.hasPreset=!1})),null===(t=this.timing)||void 0===t||t.resetAllInteractiveSeq(),null===(e=this.timing)||void 0===e||e.destroy(),this.timing=void 0}},{key:"destroy",value:function(){var t,e;this.isTimingStartValueCollected=!1,this.isRendered=!1,this.ctx.eventHub.removeAllListeners(),this.ctx.graphicsTexture.destroy(),null===(t=this.ctx.bgTexture)||void 0===t||t.destroy(!0),this.ctx.spriteTexture.destroy(),this.ctx.timingEventHub.removeAllListeners(),null===(e=this.timing)||void 0===e||e.destroy(),this.timing=void 0,d(f(n.prototype),"destroy",this).call(this)}},{key:"mainSeqStep",value:function(){var t,e;return null!==(e=null===(t=this.timing)||void 0===t?void 0:t.currentMainSeqStep())&&void 0!==e?e:0}},{key:"mainSeqLength",value:function(){var t,e;return null!==(e=null===(t=this.timing)||void 0===t?void 0:t.currentMainSeqLength())&&void 0!==e?e:0}},{key:"mainSeqHasNextStep",value:function(){var t,e;return null!==(e=null===(t=this.timing)||void 0===t?void 0:t.mainSeqHasNextStep())&&void 0!==e&&e}},{key:"mainSeqHasPrevStep",value:function(){var t,e;return null!==(e=null===(t=this.timing)||void 0===t?void 0:t.mainSeqHasPrevStep())&&void 0!==e&&e}},{key:"mainSeqState",value:function(){return this.timing?this.timing.currentMainSeqState():null}},{key:"nextStep",value:function(t,e){var n;this.hasTiming()&&(null===(n=this.timing)||void 0===n?void 0:n.hasMainSeq())?(this.ctx.timingEventHub.emit("shape slide onStopAudio"),this.ctx.timingEventHub.emit("shape slide onNext",t,e)):this.ctx.eventHub.emit(e_.requestNextSlide,t,e)}},{key:"prevStep",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.hasTiming()&&(null===(t=this.timing)||void 0===t?void 0:t.hasMainSeq())?(this.ctx.timingEventHub.emit("shape slide onStopAudio"),this.ctx.timingEventHub.emit("shape slide onPrev",e)):this.ctx.eventHub.emit(e_.requestPrevSlide,e)}},{key:"applyInteractiveAction",value:function(t){var e;null===(e=this.timing)||void 0===e||e.applyInteractiveAction(t)}},{key:"seekInteractiveSeqToEnd",value:function(t){var e;null===(e=this.timing)||void 0===e||e.seekInteractiveSeqToEnd(t)}},{key:"setInteractiveSeqState",value:function(t,e,n){var r;null===(r=this.timing)||void 0===r||r.setInteractiveSeqState(t,e,n)}},{key:"setMediaState",value:function(t,e){return Ny(this,void 0,void 0,s.mark((function n(){var r;return s.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.ctx.medias[t],n.t0=r,!n.t0){n.next=10;break}if(!e){n.next=8;break}return n.next=6,r.play();case 6:n.next=10;break;case 8:return n.next=10,r.pause();case 10:case"end":return n.stop()}}),n,this)})))}},{key:"setMediaCurrentTime",value:function(t,e){var n=this.ctx.medias[t];n&&n.seek(e)}}]),n}(Cg),Dy=function(){function t(e){var n=this;y(this,t),this.ticker=e,this.tasks=[],this.couldRunning=!1,this.applyNext=function(){var t=n.tasks[0];t&&t.applyNext()},e.add(this.applyNext)}return _(t,[{key:"addTask",value:function(t){var e=this;this.tasks.push(t),t.once("task-finish",(function(){var n=e.tasks.indexOf(t);n>=0&&e.tasks.splice(n,1)})),t.once("task-error",(function(){var n=e.tasks.indexOf(t);n>=0&&e.tasks.splice(n,1)}))}},{key:"start",value:function(){this.couldRunning=!0}},{key:"stop",value:function(){this.couldRunning=!1}}]),t}(),Fy=function(t){return new Promise((function(e){return setTimeout(e,t)}))},By=function(t){m(n,t);var e=g(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this)).slideIndex=t,o.taskId=r,o.logger=i,o.uuid=uv(),o.isCancel=!1,o.tasks=[],o}return _(n,[{key:"addMTask",value:function(t,e){this.tasks.push({fn:t,state:"wait",sub:[],name:e})}},{key:"addSubMTask",value:function(t,e){var n=this.tasks.findIndex((function(t){return"running"===t.state}));n<0&&(n=0),this.tasks[n].sub.push({fn:t,state:"wait",sub:[],name:e})}},{key:"cancel",value:function(){this.tasks=[],this.isCancel=!0}},{key:"applyNext",value:function(){var t=this;if(!this.tasks.some((function(t){return"running"===t.state}))&&!this.tasks.some((function(t){return"error"===t.state})))if(this.tasks.every((function(t){return"finish"===t.state})))this.isCancel||this.emit("task-finish");else{var e=this.tasks.find((function(t){return"wait"===t.state}));e&&(e.state="running",e.fn.apply(null).then((function(){if(e.state="finish",e.sub.length>0){var n,r=t.tasks.findIndex((function(t){return t===e}));(n=t.tasks).splice.apply(n,[r+1,0].concat(a(e.sub)))}})).catch((function(n){e.state="error",t.logger.error("".concat(n," ").concat(n.stack),t.taskId),t.emit("task-error",rv.transform(n),t.slideIndex)})))}}},{key:"applyAll",value:function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,s.mark((function t(){var e=this;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.tasks.every((function(t){return"finish"===t.state}))){t.next=14;break}if(!this.tasks.some((function(t){return"running"===t.state}))){t.next=6;break}return t.next=4,Fy(16);case 4:t.next=12;break;case 6:if(!this.tasks.some((function(t){return"error"===t.state}))){t.next=8;break}return t.abrupt("return");case 8:return t.delegateYield(s.mark((function t(){var n,r,i,o;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.tasks.find((function(t){return"wait"===t.state})))){t.next=17;break}return n.state="running",t.prev=3,t.next=6,hv((function(){return n.fn.apply(null)}),6e4);case 6:if(t.t0=t.sent,t.t1=lv,t.t0!==t.t1){t.next=10;break}throw new rv(Kp.RuntimeError,"subtask ".concat(n.name," apply timeout"));case 10:n.state="finish",n.sub.length>0&&(i=e.tasks.findIndex((function(t){return t===n})),(r=e.tasks).splice.apply(r,[i+1,0].concat(a(n.sub)))),t.next=17;break;case 13:return t.prev=13,t.t2=t.catch(3),o=(null==t.t2?void 0:t.t2.errorType)?t.t2:new rv(Kp.RuntimeError,"subtask ".concat(n.name," error. ").concat(t.t2)),n.state="error",e.logger.error("".concat(t.t2," ").concat(t.t2.stack),e.taskId),e.emit("task-error",rv.transform(o),e.slideIndex),t.abrupt("return","break");case 17:case"end":return t.stop()}}),t,null,[[3,13]])}))(),"t0",9);case 9:if("break"!==t.t0){t.next=12;break}return t.abrupt("break",14);case 12:t.next=0;break;case 14:!this.isCancel&&this.tasks.every((function(t){return"finish"===t.state}))&&this.emit("task-finish");case 15:case"end":return t.stop()}}),t,this)})))}}]),n}(su.a),Uy=n(131),Gy=new(n.n(Uy).a),jy=Gy.getDevice(),Hy=Gy.getBrowser(),zy=Gy.getOS(),Vy={isDesktop:function(){var t=!0;return"mobile"===jy.type&&(t=!1),/Samsung/.test(Hy.name||"")&&(t=!1),window.__nativeTags&&window.__nativeTags.platform&&(t=!1),t},isIOS:function(){var t=!1;return window.__nativeTags&&window.__nativeTags.platform&&/^ios/i.test(window.__nativeTags.platform)&&(t=!0),zy.name&&/iOS/.test(zy.name)&&(t=!0),t},isAndroid:function(){var t=!1;return window.__nativeTags&&window.__nativeTags.platform&&/^android/i.test(window.__nativeTags.platform)&&(t=!0),zy.name&&/android/i.test(zy.name)&&(t=!0),t},isLowGpuMemory:function(){var t,e,n=null!==(e=null===(t=window.__nativeTags)||void 0===t?void 0:t.platform)&&void 0!==e?e:"";if(n){var r=n.split(" ");if(r[1]){if(/^iPad/.test(r[1])){var i=r[1].match(/^iPad(\d+)/);return!(i&&i[1]&&parseInt(i[1],10)>=6)}if(/^iPhone/.test(r[1])){var o=r[1].match(/^iPhone(\d+)/);return!(o&&o[1]&&parseInt(o[1],10)>=9)}return!1}return!1}return!0}},Wy=function(){function t(e,n){var r=this;if(y(this,t),this.renderer=e,this.localStorage=n,this.outputData=new Map,this.loadingSdfKeys=new Set,!t.worker){var i=new Blob(['\nself.onmessage = function(e) {\n    var data = e.data.data;\n    var key = e.data.key;\n    var height = Math.ceil(e.data.height);\n    var width = Math.ceil(e.data.width);\n    if (!data || !key) {\n        return;\n    }\n    var maxDis = 0;\n    var d = [];\n    var p = [];\n    var maxInt = Number.MAX_SAFE_INTEGER || 255 * 255 * 255;\n    var setD = function(x, y, v) { d[y * width + x] = v; };\n    var getD = function(x, y) { return d[y * width + x]; };\n    var setP = function(x, y, v) { p[y * width + x] = v; };\n    var getP = function(x, y) { return p[y * width + x]; };\n    var isContains = function(x, y) { return x >= 0 && x < width && y >= 0 && y < height; };\n    var isInterior = function(x, y) { return data[(y * width + x) * 4 + 3] > 10; };\n    for (var y = 0; y < height; ++ y) {\n        for (var x = 0; x < width; ++ x) {\n            var c = isInterior(x, y);\n            var t = isContains(x, y - 1) ? isInterior(x, y - 1) : false;\n            var b = isContains(x, y + 1) ? isInterior(x, y + 1) : false;\n            var l = isContains(x - 1, y) ? isInterior(x - 1, y) : false;\n            var r = isContains(x + 1, y) ? isInterior(x + 1, y) : false;\n            if (c !== t || c !== b || c !== l || c !== r) {\n                setD(x, y, 0);\n                setP(x, y, [x, y]);\n            } else {\n                setD(x, y, maxInt);\n                setP(x, y, [-1, -1]);\n            }\n        }\n    }\n    \n    var f = function (x, y, dir) {\n        var d1 = 1;\n        var d2 = Math.sqrt(2);\n        var dx;\n        var dy;\n        var od;\n        switch (dir) {\n            case "TL": dx = -1; dy = -1; od = d2; break;\n            case "T": dx = 0; dy = -1; od = d1; break;\n            case "TR": dx = 1; dy = -1; od = d2; break;\n            case "L": dx = -1; dy = 0; od = d1; break;\n            case "R": dx = 1; dy = 0; od = d1; break;\n            case "BL": dx = -1; dy = 1; od = d2; break;\n            case "B": dx = 0; dy = 1; od = d1; break;\n            case "BR": dx = 1; dy = 1; od = d2; break;\n        }\n        var b = isContains(x + dx, y + dy);\n        var cb = b ? getD(x + dx, y + dy) : maxInt;\n        if (cb + od < getD(x, y)) {\n            var p = b ? getP(x + dx, y + dy) : [-1, -1];\n            var dis = Math.sqrt(Math.pow(x - p[0], 2) + Math.pow(y - p[1], 2));\n            setP(x, y, p);\n            setD(x, y, dis);\n            if (dis > maxDis) {\n                maxDis = dis;\n            }\n        }\n    };\n    \n    for (var y = 0; y < height; ++ y) {\n        for (var x = 0; x < width; ++ x) {\n            var dirs = ["TL", "T", "TR", "L"];\n            for (var i = 0; i < dirs.length; ++ i) {\n                var dir = dirs[i];\n                f(x, y, dir);\n            }\n        }\n    }\n\n    for (var y = height - 1; y >= 0; -- y) {\n        for (var x = width - 1; x >= 0; -- x) {\n            var dirs = ["R", "BL", "B", "BR"];\n            for (var i = 0; i < dirs.length; ++ i) {\n                var dir = dirs[i];\n                f(x, y, dir);\n            }\n        }\n    }\n\n    var outputData = [];\n    for (var y = 0; y < height; ++ y) {\n        for (var x = 0; x < width; ++ x) {\n            outputData.push(isInterior(x, y) ? 255: 0);\n            outputData.push(0);\n            outputData.push(0);\n            outputData.push(Math.ceil(getD(x, y) / maxDis * 255));\n        }\n    }\n    self.postMessage({\n        key, outputData, maxDis\n    });\n};\n'],{type:"text/javascript"});t.worker=new Worker(URL.createObjectURL(i)),t.worker.onmessage=function(t){r.outputData.set(t.data.key,{data:t.data.outputData,maxDis:t.data.maxDis})},this.outputData.set("111","222")}}return _(t,[{key:"createSdfByWorker",value:function(e,n,r,i,o,a,s,u){var l=document.createElement("canvas");l.width=o,l.height=a;var c=l.getContext("2d");if(c&&t.worker){c.drawImage(s,e,n,r,i);var h=c.getImageData(0,0,o,a).data;t.worker.postMessage({data:h,key:u,width:o,height:a})}}},{key:"createSdf",value:function(t,e,n){var r=document.createElement("canvas");r.width=t,r.height=e;var i=r.getContext("2d");if(!i)return{src:"",maxDis:1};i.drawImage(n,0,0);for(var o=0,a=i.getImageData(0,0,t,e).data,s=[],u=[],l=function(e,n,r){s[n*t+e]=r},c=function(e,n){return s[n*t+e]},h=function(e,n,r){u[n*t+e]=r},d=function(e,n){return u[n*t+e]},f=function(n,r){return n>=0&&n<t&&r>=0&&r<e},p=function(e,n){return a[4*(n*t+e)+3]>10},v=0;v<e;++v)for(var m=0;m<t;++m){var g=p(m,v),y=!!f(m,v-1)&&p(m,v-1),_=!!f(m,v+1)&&p(m,v+1),x=!!f(m-1,v)&&p(m-1,v),b=!!f(m+1,v)&&p(m+1,v);g!==y||g!==_||g!==x||g!==b?(l(m,v,0),h(m,v,[m,v])):(l(m,v,Number.MAX_SAFE_INTEGER),h(m,v,[-1,-1]))}for(var T=function(t,e,n){var r,i,a,s=Math.sqrt(2);switch(n){case"TL":r=-1,i=-1,a=s;break;case"T":r=0,i=-1,a=1;break;case"TR":r=1,i=-1,a=s;break;case"L":r=-1,i=0,a=1;break;case"R":r=1,i=0,a=1;break;case"BL":r=-1,i=1,a=s;break;case"B":r=0,i=1,a=1;break;case"BR":r=1,i=1,a=s}var u=f(t+r,e+i);if((u?c(t+r,e+i):Number.MAX_SAFE_INTEGER)+a<c(t,e)){var p=u?d(t+r,e+i):[-1,-1],v=Math.sqrt(Math.pow(t-p[0],2)+Math.pow(e-p[1],2));h(t,e,p),l(t,e,v),v>o&&(o=v)}},w=0;w<e;++w)for(var E=0;E<t;++E)for(var S=0,A=["TL","T","TR","L"];S<A.length;S++){T(E,w,A[S])}for(var M=e-1;M>=0;--M)for(var R=t-1;R>=0;--R)for(var C=0,P=["R","BL","B","BR"];C<P.length;C++){T(R,M,P[C])}for(var I=[],O=0;O<e;++O)for(var k=0;k<t;++k)I.push(0,0,0,Math.ceil(c(k,O)/o*255));return i.putImageData(new ImageData(Uint8ClampedArray.from(I),t,e),0,0),{src:r.toDataURL("image/png"),maxDis:o}}},{key:"getSdf",value:function(t,e,n){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,s.mark((function r(){var i,o,a,u,l,c,h,d,f,p,v=this;return s.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=Math.ceil(e.width),o=Math.ceil(e.height),a=Math.ceil(e.width-t.width)/2,u=Math.ceil(e.height-t.height)/2,r.next=3,this.localStorage.getItem("sdf-".concat(n,"-src"));case 3:return l=r.sent,r.next=6,this.localStorage.getItem("sdf-".concat(n,"-maxDis"));case 6:if(c=r.sent,l&&c||this.loadingSdfKeys.has(n)){r.next=24;break}return this.loadingSdfKeys.add(n),(h=this.renderer.plugins.extract.image(t,"image/png")).addEventListener("load",(function(){v.createSdfByWorker(a,u,t.width,t.height,i,o,h,n)})),h.addEventListener("error",(function(){return null})),r.next=14,function(t,e){return sv(this,void 0,void 0,s.mark((function e(){var n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Date.now();case 1:if(t()||!(Date.now()-n<2e3)){e.next=6;break}return e.next=4,cv(16);case 4:e.next=1;break;case 6:case"end":return e.stop()}}),e)})))}((function(){return!!v.outputData.has(n)}));case 14:if(this.loadingSdfKeys.delete(n),!(d=this.outputData.get(n))){r.next=24;break}if(this.outputData.delete(n),(f=document.createElement("canvas")).width=i,f.height=o,p=f.getContext("2d")){r.next=23;break}return r.abrupt("return",null);case 23:p.putImageData(new ImageData(Uint8ClampedArray.from(d.data),i,o),0,0),l=f.toDataURL("image/png"),c=d.maxDis,this.localStorage.setItem("sdf-".concat(n,"-src"),l).catch((function(){})),this.localStorage.setItem("sdf-".concat(n,"-maxDis"),c).catch((function(){}));case 24:if(l&&c){r.next=26;break}return r.abrupt("return",null);case 26:return r.abrupt("return",(document.createElement("img").src=l,ql.t.fromURL(l).then((function(t){return{texture:t,maxDis:c}})).catch((function(){return null}))));case 27:case"end":return r.stop()}}),r,this)})))}}]),t}();Wy.worker=null;var Xy=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Yy=function(){function t(e,n,r,i,o,a,s,u,l,c,h,d,f,p,v){y(this,t),this.loader=e,this.mode=n,this.renderer=r,this.ticker=i,this.view=o,this.clock=a,this.objPoolGroup=s,this.errorChannel=u,this.localstorage=l,this.logger=c,this.loaderDelegate=h,this.isPlayerPaused=d,this.maxResolution=f,this.volumeAdjuster=p,this.forceCanvas=v,this.currentStageIndex=0,this.cacheCount=Vy.isDesktop()?2:1,this.stageStates=Object.create(null),this.stageJsons=Object.create(null),this.stageCtxs=Object.create(null),this.stageImpls=Object.create(null),this.taskId="",this.url="",this.runningAudio=new Map,this.activeMedia=new Set,this.microTaskManager=new Dy(i),this.sdfManager=new Wy(r,l)}return _(t,[{key:"setResourceData",value:function(t,e){this.taskId=t,this.url=e}},{key:"createCtx",value:function(t){var e=this;this.stageStates[t].task.addMTask((function(){return Xy(e,void 0,void 0,s.mark((function e(){var n,r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new yv(this.loader),r=new su.a,i={taskId:this.taskId,mode:this.mode,renderer:this.renderer,graphicsTexture:new Rv,stageWidth:0,stageHeight:0,ticker:this.ticker,timingTargets:new Pv(r),eventHub:r,view:this.view,medias:Object.create(null),lastViewedIndex:0,conflictTimeNodeManager:new Cv,clock:this.clock,spriteTexture:n,slideIndex:t,objectPoolGroup:this.objPoolGroup,hasBackgroundFillShape:!1,slideScopeEventHub:new su.a,logger:this.logger,sdfManager:this.sdfManager,loaderDelegate:this.loaderDelegate,runningAudio:this.runningAudio,activeMedia:this.activeMedia,isPlayerPaused:this.isPlayerPaused,timingEventHub:new su.a,maxResolution:this.maxResolution,animatedIds:new Set,volumeAdjuster:this.volumeAdjuster,forceCanvas:this.forceCanvas},this.stageCtxs[t]=i;case 2:case"end":return e.stop()}}),e,this)})))}),"@StagePool[createCtx]")}},{key:"loadStageJson",value:function(t){var e=this;this.stageStates[t].task.addMTask((function(){return Xy(e,void 0,void 0,s.mark((function e(){var n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loader.fetchJson("".concat(this.url,"/").concat(this.taskId,"/jsonOutput/slide-").concat(t,".json"));case 2:n=e.sent,this.stageJsons[t]=n,this.stageCtxs[t].stageWidth=n.width,this.stageCtxs[t].stageHeight=n.height,this.stageCtxs[t].featureList=n.featureList;case 4:case"end":return e.stop()}}),e,this)})))}),"@StagePool[loadStageJson]")}},{key:"loadSpriteSheets",value:function(t){var e=this,n=this.stageStates[t].task;n.addMTask((function(){var r=e.stageJsons[t],i=e.stageCtxs[t],o=i.spriteTexture,a=i.stageWidth,s=i.stageHeight,u=r.coloredSheets,l=r.sheets,c=u||l;return c&&c.forEach((function(t){n.addSubMTask((function(){var n=1;if(a>e.maxResolution.x||s>e.maxResolution.y){var r=(n=e.maxResolution.x/a)*s;r>e.maxResolution.y&&(n*=e.maxResolution.y/r)}return o.loadSpriteSheetItem(e.url,e.taskId,t,n)}),"@StagePool[spriteTexture.loadSpriteSheetItem]")})),Promise.resolve()}),"@StagePool[loadSpriteSheets]")}},{key:"createStage",value:function(t){var e=this,n=this.stageStates[t].task;n.addMTask((function(){var r=e.stageJsons[t],i=e.stageCtxs[t],o=new Ly(r,i,{x:0,y:0},n);return e.stageImpls[t]=o,Promise.resolve()}),"@StagePool[createStage]")}},{key:"preRenderStage",value:function(t){var e=this,n=this.stageStates[t].task;n.addMTask((function(){return e.stageImpls[t].preRender(n),Promise.resolve()}),"@StagePool[preRenderStage]")}},{key:"createGraphicsTexture",value:function(t){var e=this,n=this.stageStates[t].task;n.addMTask((function(){return Xy(e,void 0,void 0,s.mark((function e(){var r,i=this;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.stageCtxs[t]).graphicsTexture.pack().forEach((function(t,e){n.addSubMTask((function(){return r.graphicsTexture.render(t,e,i.objPoolGroup)}),"@StagePool[graphicsTexture.render]")}));case 2:case"end":return e.stop()}}),e,this)})))}),"@StagePool[createGraphicsTexture]")}},{key:"renderStage",value:function(t){var e=this,n=this.stageStates[t].task;n.addMTask((function(){return Xy(e,void 0,void 0,s.mark((function e(){var r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.stageImpls[t],e.next=3,r.render(n);case 3:case"end":return e.stop()}}),e,this)})))}),"@StagePool[renderStage]")}},{key:"destroyStageByIndex",value:function(t){"load"===this.stageStates[t].state&&this.stageStates[t].task.cancel(),delete this.stageStates[t],this.stageImpls[t].destroy(),delete this.stageImpls[t],delete this.stageCtxs[t]}},{key:"destroyStage",value:function(){var t=this;Object.keys(this.stageImpls).forEach((function(e){var n=parseInt(e,10);Math.abs(t.currentStageIndex-n)>t.cacheCount&&t.destroyStageByIndex(n)}))}},{key:"destroyAllStage",value:function(){var t=this;Object.keys(this.stageImpls).forEach((function(e){var n=parseInt(e,10);t.destroyStageByIndex(n)}))}},{key:"preload",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.stageImpls[t]||this.stageStates[t])return Promise.resolve();var r=new By(t,this.taskId,this.logger);return r.on("task-error",(function(t,n){delete e.stageStates[n],delete e.stageImpls[n],delete e.stageCtxs[n],e.errorChannel.emit("error",t,n)})),this.stageStates[t]={state:"load",task:r},this.createCtx(t),this.loadStageJson(t),this.loadSpriteSheets(t),this.createStage(t),this.preRenderStage(t),this.createGraphicsTexture(t),this.renderStage(t),this.microTaskManager.addTask(r),n?r.applyAll():new Promise((function(n){r.once("task-finish",(function(){e.stageStates[t].state="finish",Object.keys(e.stageStates).length>2*e.cacheCount+1&&e.destroyStage(),n()}))}))}},{key:"getStageJson",value:function(t){return this.stageJsons[t]||null}},{key:"getStage",value:function(t){return Xy(this,void 0,void 0,s.mark((function e(){var n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentStageIndex=t,"finish"!==(null==(n=this.stageStates[t])?void 0:n.state)||!this.stageImpls[t]){e.next=6;break}e.t0=this.stageImpls[t],e.next=16;break;case 6:if("load"!==(null==n?void 0:n.state)){e.next=12;break}return e.next=9,n.task.applyAll();case 9:e.t1=this.stageImpls[t],e.next=15;break;case 12:return e.next=14,this.preload(t,!0);case 14:e.t1=this.stageImpls[t];case 15:e.t0=e.t1;case 16:return e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,this)})))}},{key:"destroy",value:function(){this.runningAudio.clear()}}]),t}(),qy=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Zy=function(){function t(e){var n,r=this;y(this,t),this.logger=e,this.taskId="",this.isIndexDBReady=!1,this.memoryCache=new Map,null===(n=t.localCache)||void 0===n||n.ready((function(t){t||(r.isIndexDBReady=!0)})).catch((function(){e.warn("local storage not ready",r.taskId)}))}return _(t,[{key:"couldUseIndexDBCache",get:function(){return this.isIndexDBReady&&this.taskId.length>0}},{key:"attachTaskId",value:function(t){this.taskId=t}},{key:"getItem",value:function(e){return qy(this,void 0,void 0,s.mark((function n(){var r,i=this;return s.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=null,!this.couldUseIndexDBCache||!t.localCache){n.next=10;break}return n.prev=2,n.next=5,hv((function(){return t.localCache.getItem("".concat(i.taskId,"/").concat(e))}),500);case 5:r=n.sent,n.next=10;break;case 8:n.prev=8,n.t0=n.catch(2);case 10:return n.abrupt("return",(r=r===lv?null:r)||this.memoryCache.get(e)||null);case 11:case"end":return n.stop()}}),n,this,[[2,8]])})))}},{key:"setItem",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return qy(this,void 0,void 0,s.mark((function i(){var o,a=this;return s.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.couldUseIndexDBCache){i.next=2;break}return i.abrupt("return",(r&&this.memoryCache.set(e,n),Promise.resolve()));case 2:if(!t.localCache){i.next=13;break}return o=null,i.prev=4,i.next=7,hv((function(){return t.localCache.setItem("".concat(a.taskId,"/").concat(e),n).catch((function(){r&&a.memoryCache.set(e,n)}))}),500);case 7:o=i.sent,i.next=12;break;case 10:i.prev=10,i.t0=i.catch(4);case 12:o!==lv&&null!==o||!r||this.memoryCache.set(e,n);case 13:case"end":return i.stop()}}),i,this,[[4,10]])})))}},{key:"dispose",value:function(){var e,n=this;this.memoryCache=new Map,this.couldUseIndexDBCache&&(null===(e=t.localCache)||void 0===e||e.keys().then((function(e){e.filter((function(t){return t.indexOf(n.taskId)>=0})).forEach((function(e){var n;null===(n=t.localCache)||void 0===n||n.removeItem(e).catch((function(){}))}))})).catch((function(){})))}}]),t}();Zy.localCache=null;try{Zy.localCache=w.createInstance({name:"slide_local_cache",driver:w.INDEXEDDB,version:1})}catch(t){}var Qy=new Bl.j,Ky=function(){function t(e){y(this,t),this.localStorage=e}return _(t,[{key:"canvas",value:function(e,n,r,i){var o,a,s,u=!1,l=!1;e&&(e instanceof ql.p?s=e:(s=n.generateTexture(e),l=!0)),s?(o=s.baseTexture.resolution,a=s.frame,u=!1,n.renderTexture.bind(s)):(o=n.resolution,u=!0,(a=Qy).width=n.width,a.height=n.height,n.renderTexture.bind(null));var c=Math.floor(a.width*o+1e-4),h=Math.floor(a.height*o+1e-4),d=document.createElement("canvas");d.width=c,d.height=h;var f=d.getContext("2d");if(!f)throw new Error("ctx");if(r)f.putImageData(r,0,0);else{var p=f.getImageData(0,0,c,h),v=new Uint8Array(4*c*h),m=n.gl;m.readPixels(a.x*o,a.y*o,c,h,m.RGBA,m.UNSIGNED_BYTE,v),t.arrayPostDivide(v,p.data),f.putImageData(p,0,0),i&&this.localStorage.setItem(i,p).catch((function(){}))}if(u){var g=document.createElement("canvas");g.width=c,g.height=h;var y=g.getContext("2d");y.scale(1,-1),y.drawImage(d,0,-h),d=g}return l&&(null==s||s.destroy(!0)),d}}],[{key:"arrayPostDivide",value:function(t,e){for(var n=0;n<t.length;n+=4){var r=e[n+3]=t[n+3];0!==r?(e[n]=Math.round(Math.min(255*t[n]/r,255)),e[n+1]=Math.round(Math.min(255*t[n+1]/r,255)),e[n+2]=Math.round(Math.min(255*t[n+2]/r,255))):(e[n]=t[n],e[n+1]=t[n+1],e[n+2]=t[n+2])}}}]),t}(),Jy=function(t){m(n,t);var e=g(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments))._volume=.5,t}return _(n,[{key:"volume",get:function(){return this._volume},set:function(t){t<0&&(t=0),t>1&&(t=1),this._volume=t,this.emit("update",this._volume)}}]),n}(su.a),$y=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};Ll.skipHello();var t_={randomBar:"RandomLines",circle:"Shape",ripple:"Ripples",wipe:"Erase",dissolve:"Dissolve",morph:"Smooth",fade:"FadeInOut",push:"Push",split:"Separation",reveal:"Display",pull:"Uncover",cover:"Cover",flash:"Flash",checker:"Checkerboard",blinds:"WindowShades",curtains:"Curtain",fallOver:"Fall",drape:"Suspension",wheel:"Clock",comb:"Combing",warp:"Scale",peelOff:"PeelOff",flip:"Flip"},e_={mainSeqStepChange:"mainSeqStepChange",mainSeqStateChange:"mainSeqStateChange",interactiveSeqStateChange:"interactiveSeqStateChange",interactiveSeqAction:"interactiveSeqAction",mainSeqStepStart:"mainSeqStepStart",mainSeqStepEnd:"mainSeqStepEnd",slideChange:"slideChange",renderStart:"renderStart",renderEnd:"renderEnd",hyperlinkTrigger:"hyperlinkTrigger",animateStart:"animateStart",animateEnd:"animateEnd",mediaSeek:"mediaSeek",mediaPlay:"mediaPlay",mediaPause:"mediaPause",mediaStop:"mediaStop",requestNextSlide:"requestNextSlide",requestPrevSlide:"requestPrevSlide",requestGotoSlide:"requestGotoSlide",userInput:"userInput"},n_=function(t){m(n,t);var e=g(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,n),(r=e.call(this)).errorChannel=new su.a,r.transactionPlayer=null,r.isForward=!0,r.drawCall=0,r.scale=1,r._isPaused=!1,r.maxResolution=new Bl.g(0,0),r.isNVIDIA=!1,r.fps=new nv,r.designWidth=0,r.designHeight=0,r.currentIndex=0,r.slideCount=0,r.runtime={drawCall:0,fps:0},r.isPlayerPaused=function(){return r._isPaused},r.onWebGLLost=function(){r.errorChannel.emit("error",new rv(Kp.CanvasCrash,"webgl context lost."))},r.logger=t.logger,r.mode=t.mode,r.volumeAdjuster=t.volumeAdjuster,r.localStorage=new Zy(r.logger),r.cachedExtract=new Ky(r.localStorage),r.config={minFPS:hu()(i.minFPS)?30:i.minFPS,maxFPS:hu()(i.maxFPS)?40:i.maxFPS,resolution:hu()(i.resolution)?1:i.resolution,autoFPS:!hu()(i.autoFPS)&&i.autoFPS,autoResolution:!hu()(i.autoResolution)&&i.autoResolution,transactionBgColor:hu()(i.transactionBgColor)?0:i.transactionBgColor,maxResolutionLevel:r.getMaxResolution(i.maxResolutionLevel),forceCanvas:!hu()(i.forceCanvas)&&i.forceCanvas,enableNvidiaDetect:!hu()(i.enableNvidiaDetect)&&i.enableNvidiaDetect},r.updateMaxResolutionLevel(r.config.maxResolutionLevel),r.loader=new pv(r.localStorage,t.useLocalCache,r.logger,t.resourceTimeout,t.loadDelegate),r.app=new Zl({antialias:!0,autoDensity:!1,backgroundColor:16777215,forceCanvas:r.config.forceCanvas}),r.updateConfig(r.config),r.app.ticker.maxFPS=60,r.app.ticker.minFPS=r.config.minFPS,r.app.ticker.maxFPS=r.config.maxFPS,r.app.view.style.zIndex="1",r.app.stage.sortableChildren=!0;var o=r.app.renderer;if(o.gl){var a=o.gl.drawElements,s=o.gl.getExtension("WEBGL_debug_renderer_info"),u=o.gl.getParameter(s.UNMASKED_RENDERER_WEBGL);/nvidia/i.test(u)&&r.config.enableNvidiaDetect&&(r.isNVIDIA=!0),o.gl.drawElements=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];a.call.apply(a,[o.gl].concat(e)),r.drawCall+=1}}r.fps.on("update",(function(t){if(t<r.config.minFPS){if(r.config.autoResolution){var e=.7*r.scale,n=r.app.renderer.resolution,i=Math.max(e,n-.1);i>=e&&r.updateResolution(i)}}else if(t>r.config.maxFPS&&r.config.autoResolution){var o=r.scale*r.config.resolution,a=r.app.renderer.resolution,s=Math.min(o,a+.1);s<=r.config.resolution&&r.updateResolution(s)}})),r.app.ticker.add((function(){r.runtime.drawCall=r.drawCall,r.runtime.fps=Math.floor(r.app.ticker.minFPS),r.drawCall=0}),null,Ul.c.LOW),r.clock=new vv(r.app.ticker),r.objPoolGroup=uv(),r.stagePool=new Yy(r.loader,r.mode,r.app.renderer,r.app.ticker,r.app.view,r.clock,r.objPoolGroup,r.errorChannel,r.localStorage,r.logger,t.loadDelegate,r.isPlayerPaused,r.maxResolution,r.volumeAdjuster,r.config.forceCanvas),r.app.view.addEventListener("webglcontextlost",r.onWebGLLost);try{r.config.forceCanvas||(r.transactionPlayer=new Nl)}catch(t){/Error creating WebGL context/.test(t.message)?r.errorChannel.emit("error",new rv(Kp.CanvasCrash,"webgl context lost.")):r.errorChannel.emit("error",new rv(Kp.RuntimeWarn,t.message))}return r}return _(n,[{key:"view",get:function(){return this.app.renderer?this.app.view:null}},{key:"nextSlideIndex",get:function(){var t;return(null===(t=this.currentStage)||void 0===t?void 0:t.json.nextIndex)?this.currentStage.json.nextIndex:this.currentIndex+1}},{key:"prevSlideIndex",get:function(){var t;return(null===(t=this.currentStage)||void 0===t?void 0:t.json.prevIndex)?this.currentStage.json.prevIndex:this.currentIndex-1}},{key:"getMaxResolution",value:function(t){return!hu()(t)&&Number.isInteger(t)?(t<1&&(t=1),t>4&&(t=4),t):n.platform.isAndroid()||n.platform.isIOS()?2:4}},{key:"updateMaxResolutionLevel",value:function(t){t<1&&(t=1),t>4&&(t=4);var e=[999999,960,1280,1920,3200][t],n=[999999,540,720,1080,1800][t];this.maxResolution.set(e,n)}},{key:"updateConfig",value:function(t){hu()(t.maxFPS)||hu()(t.minFPS)||(this.config.maxFPS=t.maxFPS,this.app.ticker.maxFPS=t.maxFPS,this.config.minFPS=t.minFPS,this.app.ticker.minFPS=t.minFPS),hu()(t.resolution)||(this.config.resolution=t.resolution,this.updateResolution(this.scale*this.config.resolution)),hu()(t.autoFPS)||(this.config.autoFPS=t.autoFPS),hu()(t.autoResolution)||(this.config.autoResolution=t.autoResolution),hu()(t.transactionBgColor)||(this.config.transactionBgColor=t.transactionBgColor),this.taskId&&this.logger.info("ppt player update config: "+JSON.stringify(this.config),this.taskId),hu()(t.maxResolutionLevel)||(this.config.maxResolutionLevel=t.maxResolutionLevel,this.updateMaxResolutionLevel(this.config.maxResolutionLevel))}},{key:"preload",value:function(t){return $y(this,void 0,void 0,s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t<1||t>this.slideCount,e.t0){e.next=6;break}return this.logger.info("preload slide ".concat(t," begin"),this.taskId),e.next=5,this.stagePool.preload(t);case 5:this.logger.info("preload slide ".concat(t," end"),this.taskId);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"setResourceData",value:function(t,e){this.logger.info("ppt player init config: "+JSON.stringify(this.config),t),this.logger.info("set resource to "+e,t),this.taskId=t,this.url=e,this.stagePool.setResourceData(t,e),this.localStorage.attachTaskId(t),this.loader.attachTaskId(t)}},{key:"setInteractive",value:function(t){this.app.stage.interactive=t,this.app.stage.interactiveChildren=t}},{key:"translateEvent",value:function(t,e){var n=this;e.forEach((function(e){t.on(e,(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.emit.apply(n,[e].concat(r))}))}))}},{key:"renderSlide",value:function(t){var e,n,r;return $y(this,void 0,void 0,s.mark((function i(){var o,a,u,l,c,h,d,f,p,v,m,g,y,_=this;return s.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!this._isPaused){i.next=2;break}return i.abrupt("return",void this.logger.info("ppt play prevent render slide with paused state",this.taskId));case 2:return this.logger.info("render slide "+t,this.taskId),this.emit(e_.renderStart,t),i.next=5,this.stagePool.getStage(t);case 5:return o=i.sent,a="snapshot-".concat(t,"-").concat(this.isForward?"start":"end"),i.next=9,this.localStorage.getItem(a);case 9:if(u=i.sent,o){i.next=12;break}return i.abrupt("return");case 12:if(this.translateEvent(o.ctx.eventHub,[e_.mainSeqStepChange,e_.mainSeqStateChange,e_.hyperlinkTrigger,e_.interactiveSeqAction,e_.mainSeqStepStart,e_.mainSeqStepEnd,e_.animateStart,e_.animateEnd,e_.mediaPlay,e_.mediaPause,e_.mediaSeek,e_.mediaStop,e_.requestGotoSlide,e_.requestNextSlide,e_.requestPrevSlide,e_.interactiveSeqStateChange,e_.userInput]),this.currentIndex=Number(t),l=o.json,c=l.width,h=l.height,d=l.slideCount,this.slideCount=d,this.designWidth=c,this.designHeight=h,null===(e=this.currentStage)||void 0===e||e.clearOnSlideChange(),f=this.currentStage,this.currentStage=o,o.initOnReuse(),o.createTiming(),o.container.visible=!0,o.collectMainSeqStartValue(),this.isForward?o.setMainSeqStep(0,"start"):o.setMainSeqStep(-1,"end"),p=!1,o.json.transition&&o.json.transition.type&&this.app.stage.children.length>0&&this.view&&f&&(v=o.json.transition,!this.isForward&&(null==f?void 0:f.json.transition)&&(v=f.json.transition),m=this.getTransactionTexture(f,this.view,null,null),this.initTransactionPlayer(v),null===(n=this.transactionPlayer)||void 0===n||n.setPrevTexture(m),p=!0),this.app.stage.addChild(o.container),this.updateResolution(this.config.resolution*this.scale),f&&(f.clearOnTransactionEnd(),this.app.stage.removeChild(f.container)),!(o.json.transition&&o.json.transition.type&&this.app.stage.children.length>0&&this.view&&this.transactionPlayer&&p)){i.next=29;break}return i.next=22,this.getTransactionTexture(o,this.view,a,u);case 22:return g=i.sent,this.transactionPlayer.setNextTexture(g),i.next=26,this.transactionPlayer.play();case 26:if(y=this.transactionPlayer.renderer.domElement,this.view.parentElement&&y)try{this.view.parentElement.removeChild(y)}catch(t){}null===(r=this.transactionPlayer)||void 0===r||r.dispose();case 29:if(!this.isForward){i.next=34;break}return i.next=32,o.startTiming();case 32:i.next=35;break;case 34:o.setMainSeqApplied();case 35:o.ctx.slideScopeEventHub.emit("slide-render",o.ctx.slideIndex),this.emit(e_.renderEnd,t),this.emit(e_.slideChange,t),this.preload(t+1).catch((function(e){_.errorChannel.emit("error",rv.transform(e),t+1)})),this.preload(t-1).catch((function(e){_.errorChannel.emit("error",rv.transform(e),t-1)}));case 40:case"end":return i.stop()}}),i,this)})))}},{key:"getTransactionTexture",value:function(t,e,n,r){var i=ql.p.create({width:t.json.width,height:t.json.height,resolution:1});this.app.renderer.render(t.container,{renderTexture:i});var o=this.cachedExtract.canvas(i,this.app.renderer,r,n);return new U(o)}},{key:"renderToBase64",value:function(t,e,n){return $y(this,void 0,void 0,s.mark((function r(){var i,o,a,u,l,c;return s.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.stagePool.getStage(t);case 2:if(!(i=r.sent)){r.next=10;break}return o=i.json,a=o.width,u=o.height,this.designWidth=a,this.designHeight=u,l=ql.p.create({width:this.designWidth,height:this.designHeight,resolution:e}),i.container.visible=!0,this.app.renderer.render(i.container,{renderTexture:l}),c=this.app.renderer.plugins.extract.base64(l,n),r.abrupt("return",(this.stagePool.destroyStageByIndex(t),c));case 10:return r.abrupt("return","__null__");case 11:case"end":return r.stop()}}),r,this)})))}},{key:"renderMainSeqToBase64",value:function(t,e,n){return $y(this,void 0,void 0,s.mark((function r(){var i,o,a,u,l,c,h,d,f,p;return s.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=[],r.next=3,this.stagePool.getStage(t);case 3:if((o=r.sent).createTiming(),o){for(a=o.json,u=a.width,l=a.height,this.designWidth=u,this.designHeight=l,c=ql.p.create({width:this.designWidth,height:this.designHeight,resolution:e}),o.container.visible=!0,h=o.mainSeqLength(),o.setMainSeqStep(0,"start"),this.app.renderer.render(o.container,{renderTexture:c}),d=this.app.renderer.plugins.extract.base64(c,n),i.push(d),f=0;f<h;f+=1)o.setMainSeqStep(f,"end"),this.app.renderer.render(o.container,{renderTexture:c}),p=this.app.renderer.plugins.extract.base64(c,n),i.push(p);this.stagePool.destroyStageByIndex(t)}return r.abrupt("return",i);case 6:case"end":return r.stop()}}),r,this)})))}},{key:"snapshotWithTimingEnd",value:function(t){return $y(this,void 0,void 0,s.mark((function e(){var n,r,i,o,a,u;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stagePool.getStage(t);case 2:if(!(n=e.sent)){e.next=10;break}return r=n.json,i=r.width,o=r.height,this.designWidth=i,this.designHeight=o,a=ql.p.create({width:this.designWidth,height:this.designHeight,resolution:1}),n.container.visible=!0,n.createTiming(),n.setMainSeqStep(-1,"end"),this.app.renderer.render(n.container,{renderTexture:a}),u=this.app.renderer.plugins.extract.base64(a,"image/png"),e.abrupt("return",(t!==this.currentIndex&&this.stagePool.destroyStageByIndex(t),u));case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"getBase64",value:function(t){if(!t.container.transform)return null;var e=ql.p.create({width:this.designWidth,height:this.designHeight,resolution:1});this.app.renderer.render(t.container,{renderTexture:e});var n=this.app.renderer.plugins.extract.base64(e,"image/jpeg");return e.destroy(!0),n}},{key:"initTransactionPlayer",value:function(t){var e,n,r,i,o,a=null===(e=this.view)||void 0===e?void 0:e.parentElement;if(this.view&&a&&t_[t.type]&&this.transactionPlayer){var s=null===(n=this.transactionPlayer)||void 0===n?void 0:n.renderer.domElement;this.transactionPlayer.initPlayer({reverse:!this.isForward,stageWidth:this.view.width,stageHeight:this.view.height,presetType:t_[t.type],duration:null===(i=null===(r=this.currentStage)||void 0===r?void 0:r.json.transition)||void 0===i?void 0:i.dur,delay:0,clearColor:this.config.transactionBgColor,maxFPS:Math.ceil(null!==(o=this.config.maxFPS)&&void 0!==o?o:60),options:t.options}),s&&(s.style.position="absolute",s.style.zIndex="9",s.style.left="0",s.style.top="0",s.style.width=this.view.style.width,s.style.height=this.view.style.height),a.appendChild(s)}}},{key:"scaleView",value:function(t,e,n){var r;this.view&&(this.view.style.width=Math.floor(this.designWidth*t)+"px",this.view.style.height=Math.floor(this.designHeight*t)+"px");var i=null===(r=this.transactionPlayer)||void 0===r?void 0:r.renderer.domElement;if(i&&this.view&&(i.style.width=this.view.style.width,i.style.height=this.view.style.height),e){this.scale=t;var o=this.scale*this.config.resolution;this.updateResolution(o,n)}}},{key:"updateResolution",value:function(t,e){var n=this;this.app.ticker.addOnce((function(){for(var r=Vy.isDesktop()?t:1;r*n.designWidth>n.maxResolution.x||r*n.designHeight>n.maxResolution.y;)r-=.1;n.app.renderer.resolution=r,n.app.renderer.plugins.interaction.resolution=n.app.renderer.resolution,n.app.renderer.resize(n.designWidth,n.designHeight),lu()(e)&&e()}))}},{key:"nextStep",value:function(t,e){var n;if(this._isPaused)this.logger.info("ppt play prevent next step with paused state",this.taskId);else{this.logger.info("ppt play trigger next step",this.taskId);try{null===(n=this.currentStage)||void 0===n||n.nextStep(t,e)}catch(t){this.errorChannel.emit("error",rv.transform(t),this.currentIndex)}}}},{key:"prevStep",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._isPaused)this.logger.info("ppt play prevent prev step with paused state",this.taskId);else{this.logger.info("ppt play trigger prev step",this.taskId);try{null===(t=this.currentStage)||void 0===t||t.prevStep(e)}catch(e){this.errorChannel.emit("error",rv.transform(e),this.currentIndex)}}}},{key:"mainSeqLength",value:function(){var t,e;return null!==(e=null===(t=this.currentStage)||void 0===t?void 0:t.mainSeqLength())&&void 0!==e?e:0}},{key:"mainSeqStep",value:function(){var t,e;return null!==(e=null===(t=this.currentStage)||void 0===t?void 0:t.mainSeqStep())&&void 0!==e?e:0}},{key:"setMainSeqStep",value:function(t,e){var n;null===(n=this.currentStage)||void 0===n||n.setMainSeqStep(t,e)}},{key:"mainSeqState",value:function(){var t,e;return null!==(e=null===(t=this.currentStage)||void 0===t?void 0:t.mainSeqState())&&void 0!==e?e:null}},{key:"mainSeqHasNextStep",value:function(){var t,e;return null!==(e=null===(t=this.currentStage)||void 0===t?void 0:t.mainSeqHasNextStep())&&void 0!==e&&e}},{key:"mainSeqHasPrevStep",value:function(){var t,e;return null!==(e=null===(t=this.currentStage)||void 0===t?void 0:t.mainSeqHasPrevStep())&&void 0!==e&&e}},{key:"nextTick",value:function(t){this.app.ticker.addOnce((function(){t()}),Ul.c.LOW)}},{key:"applyInteractiveAction",value:function(t){var e;null===(e=this.currentStage)||void 0===e||e.applyInteractiveAction(t)}},{key:"seekInteractiveSeqToEnd",value:function(t){var e;null===(e=this.currentStage)||void 0===e||e.seekInteractiveSeqToEnd(t)}},{key:"setInteractiveSeqState",value:function(t,e,n){var r;null===(r=this.currentStage)||void 0===r||r.setInteractiveSeqState(t,e,n)}},{key:"setMediaState",value:function(t,e){var n;return $y(this,void 0,void 0,s.mark((function r(){return s.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,null===(n=this.currentStage)||void 0===n?void 0:n.setMediaState(t,e);case 2:case"end":return r.stop()}}),r,this)})))}},{key:"setMediaCurrentTime",value:function(t,e){var n;null===(n=this.currentStage)||void 0===n||n.setMediaCurrentTime(t,e)}},{key:"pause",value:function(){var t;this.app.ticker.stop(),null===(t=this.currentStage)||void 0===t||t.ctx.activeMedia.forEach((function(t){t.globalPause()})),this._isPaused=!0}},{key:"resume",value:function(){var t;this._isPaused=!1,this.app.ticker.start(),null===(t=this.currentStage)||void 0===t||t.ctx.activeMedia.forEach((function(t){t.globalResume()}))}},{key:"getSnapshot",value:function(){return this.currentStage&&this.getBase64(this.currentStage)||""}},{key:"clearLocalCache",value:function(){this.localStorage.dispose()}},{key:"destroy",value:function(){var t,e;try{this.app.view.removeEventListener("webglcontextlost",this.onWebGLLost);try{this.app.renderer.filter.texturePool.clear(!0)}catch(t){}Av.collectObjectByGroup(this.objPoolGroup),Mv.collectObjectByGroup(this.objPoolGroup),null===(t=this.transactionPlayer)||void 0===t||t.destroy(),this.loader.destroy(),this.fps.destroy(),this.stagePool.destroyAllStage(),this.stagePool.destroy();try{this.app.renderer.gl.getExtension("WEBGL_lose_context").loseContext()}catch(t){}this.app.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),null===(e=Wy.worker)||void 0===e||e.terminate()}catch(t){}}}],[{key:"clearLocalCache",value:function(){var t;null===(t=Zy.localCache)||void 0===t||t.clear().catch((function(){}))}}]),n}(su.a);n_.platform=Vy,n_.RtcAudioClazz=null;var r_=new Map;function i_(t){var e=r_.get(t.hookPoint)||[];e.push(t),r_.set(t.hookPoint,e)}var o_,a_=n(132),s_=n.n(a_),u_=n(47),l_=n.n(u_),c_=n(48),h_=n.n(c_),d_=[],f_="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(o_||(o_={}));var p_,v_=function(t){return Object.freeze(t)},m_=function(t,e){this.inlineSize=t,this.blockSize=e,v_(this)},g_=function(){function t(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,v_(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),y_=function(t){return t instanceof SVGElement&&"getBBox"in t},__=function(t){if(y_(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var i=t,o=i.offsetWidth,a=i.offsetHeight;return!(o||a||t.getClientRects().length)},x_=function(t){var e;if(t instanceof Element)return!0;var n=null===(e=null==t?void 0:t.ownerDocument)||void 0===e?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},b_="undefined"!=typeof window?window:{},T_=new WeakMap,w_=/auto|scroll/,E_=/^tb|vertical/,S_=/msie|trident/i.test(b_.navigator&&b_.navigator.userAgent),A_=function(t){return parseFloat(t||"0")},M_=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=!1),new m_((n?e:t)||0,(n?t:e)||0)},R_=v_({devicePixelContentBoxSize:M_(),borderBoxSize:M_(),contentBoxSize:M_(),contentRect:new g_(0,0,0,0)}),C_=function(t,e){if(void 0===e&&(e=!1),T_.has(t)&&!e)return T_.get(t);if(__(t))return T_.set(t,R_),R_;var n=getComputedStyle(t),r=y_(t)&&t.ownerSVGElement&&t.getBBox(),i=!S_&&"border-box"===n.boxSizing,o=E_.test(n.writingMode||""),a=!r&&w_.test(n.overflowY||""),s=!r&&w_.test(n.overflowX||""),u=r?0:A_(n.paddingTop),l=r?0:A_(n.paddingRight),c=r?0:A_(n.paddingBottom),h=r?0:A_(n.paddingLeft),d=r?0:A_(n.borderTopWidth),f=r?0:A_(n.borderRightWidth),p=r?0:A_(n.borderBottomWidth),v=h+l,m=u+c,g=(r?0:A_(n.borderLeftWidth))+f,y=d+p,_=s?t.offsetHeight-y-t.clientHeight:0,x=a?t.offsetWidth-g-t.clientWidth:0,b=i?v+g:0,T=i?m+y:0,w=r?r.width:A_(n.width)-b-x,E=r?r.height:A_(n.height)-T-_,S=w+v+x+g,A=E+m+_+y,M=v_({devicePixelContentBoxSize:M_(Math.round(w*devicePixelRatio),Math.round(E*devicePixelRatio),o),borderBoxSize:M_(S,A,o),contentBoxSize:M_(w,E,o),contentRect:new g_(h,u,w,E)});return T_.set(t,M),M},P_=function(t,e,n){var r=C_(t,n),i=r.borderBoxSize,o=r.contentBoxSize,a=r.devicePixelContentBoxSize;switch(e){case o_.DEVICE_PIXEL_CONTENT_BOX:return a;case o_.BORDER_BOX:return i;default:return o}},I_=function(t){var e=C_(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=v_([e.borderBoxSize]),this.contentBoxSize=v_([e.contentBoxSize]),this.devicePixelContentBoxSize=v_([e.devicePixelContentBoxSize])},O_=function(t){if(__(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},k_=function(){var t=1/0,e=[];d_.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(e){var n=new I_(e.target),i=O_(e.target);r.push(n),e.lastReportedSize=P_(e.target,e.observedBox),i<t&&(t=i)})),e.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=e;n<r.length;n++)(0,r[n])();return t},N_=function(t){d_.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(n){n.isActive()&&(O_(n.target)>t?e.activeTargets.push(n):e.skippedTargets.push(n))}))}))},L_=[],D_=0,F_={attributes:!0,characterData:!0,childList:!0,subtree:!0},B_=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],U_=function(t){return void 0===t&&(t=0),Date.now()+t},G_=!1,j_=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!G_){G_=!0;var n,r=U_(t);n=function(){var n=!1;try{n=function(){var t,e=0;for(N_(e);d_.some((function(t){return t.activeTargets.length>0}));)e=k_(),N_(e);return d_.some((function(t){return t.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:f_}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=f_),window.dispatchEvent(t)),e>0}()}finally{if(G_=!1,t=r-U_(),!D_)return;n?e.run(1e3):t>0?e.run(t):e.start()}},function(t){if(!p_){var e=0,n=document.createTextNode("");new MutationObserver((function(){return L_.splice(0).forEach((function(t){return t()}))})).observe(n,{characterData:!0}),p_=function(){n.textContent="".concat(e?e--:e++)}}L_.push(t),p_()}((function(){requestAnimationFrame(n)}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,F_)};document.body?e():b_.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),B_.forEach((function(e){return b_.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),B_.forEach((function(e){return b_.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}()),H_=function(t){!D_&&t>0&&j_.start(),!(D_+=t)&&j_.stop()},z_=function(){function t(t,e){this.target=t,this.observedBox=e||o_.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,e=P_(this.target,this.observedBox,!0);return t=this.target,y_(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),V_=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},W_=new WeakMap,X_=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},Y_=function(){function t(){}return t.connect=function(t,e){var n=new V_(t,e);W_.set(t,n)},t.observe=function(t,e,n){var r=W_.get(t),i=0===r.observationTargets.length;X_(r.observationTargets,e)<0&&(i&&d_.push(r),r.observationTargets.push(new z_(e,n&&n.box)),H_(1),j_.schedule())},t.unobserve=function(t,e){var n=W_.get(t),r=X_(n.observationTargets,e),i=1===n.observationTargets.length;r>=0&&(i&&d_.splice(d_.indexOf(n),1),n.observationTargets.splice(r,1),H_(-1))},t.disconnect=function(t){var e=this,n=W_.get(t);n.observationTargets.slice().forEach((function(n){return e.unobserve(t,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},t}(),q_=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Y_.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!x_(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Y_.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!x_(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Y_.unobserve(this,t)},t.prototype.disconnect=function(){Y_.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}(),Z_=function(){function t(t,e,n,r,i){this.state="idle",this.index=-1,this.slideIndex=-1,this.fn=n,this.index=t,this.slideIndex=e,this.eventHub=r,this.id=i}return t.prototype.apply=function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){var t;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(e){switch(e.label){case 0:this.eventHub.emit("task-start",this),e.label=1;case 1:return e.trys.push([1,3,,4]),this.state="start",[4,this.fn()];case 2:return e.sent(),this.state="end",this.eventHub.emit("task-end",this),[3,4];case 3:return t=e.sent(),this.eventHub.emit("task-error",{task:this,error:t}),[3,4];case 4:return[2]}}))}))},t}(),Q_=function(){function t(){var t=this;this.eventHub=new su.a,this.tasks=[],this.index=0,this.eventHub.on("task-end",(function(e){var n,r=t.tasks.findIndex((function(t){return t.index===e.index})),i=r+1;i>=0&&(null===(n=t.tasks[i])||void 0===n||n.apply()),r>=0&&(t.tasks.splice(r,1),t.replaceIdleTask()),t.eventHub.emit("task-end-"+e.id)})),this.eventHub.on("task-error",(function(e){var n=e.task,r=t.tasks.findIndex((function(t){return t.index===n.index}));r>=0&&(t.tasks.splice(r,1),t.replaceIdleTask())}))}return t.prototype.replaceIdleTask=function(){for(var t,e=this,n=new Set,r=0,i=this.tasks.length;r<i;r++)"idle"===this.tasks[r].state&&"idle"===(null===(t=this.tasks[r+1])||void 0===t?void 0:t.state)&&n.add(r);Array.from(n).forEach((function(t){e.tasks.splice(t,1)}))},t.prototype.addTask=function(t,e,n){var r=new Z_(this.index++,e,t,this.eventHub,n);this.tasks.push(r),this.tasks.sort((function(t,e){return t.index-e.index})),this.replaceIdleTask(),1===this.tasks.length&&r.apply()},t.prototype.hasStartTask=function(){return this.tasks.some((function(t){return"start"===t.state}))},t.prototype.destroy=function(){this.eventHub.removeAllListeners()},t}();function K_(t,e){var n=t.__state.conversionName.toString(),r=Math.round(t.r),i=Math.round(t.g),o=Math.round(t.b),a=t.a,s=Math.round(t.h),u=t.s.toFixed(1),l=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=t.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+u+",v:"+l+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+u+",v:"+l+",a:"+a+"}":"unknown format"}var J_=Array.prototype.forEach,$_=Array.prototype.slice,tx={BREAK:{},extend:function(t){return this.each($_.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))}),this),t},defaults:function(t){return this.each($_.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))}),this),t},compose:function(){var t=$_.call(arguments);return function(){for(var e=$_.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(t)if(J_&&t.forEach&&t.forEach===J_)t.forEach(e,n);else if(t.length===t.length+0){var r,i=void 0;for(i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===this.BREAK)return}else for(var o in t)if(e.call(n,t[o],o)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var r=void 0;return function(){var i=this,o=arguments;function a(){r=null,n||t.apply(i,o)}var s=n||!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}},toArray:function(t){return t.toArray?t.toArray():$_.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return t instanceof Function}},ex=[{litmus:tx.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:K_},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:K_},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:K_},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:K_}}},{litmus:tx.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:tx.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:tx.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(tx.isNumber(t.r)&&tx.isNumber(t.g)&&tx.isNumber(t.b)&&tx.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(tx.isNumber(t.r)&&tx.isNumber(t.g)&&tx.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(tx.isNumber(t.h)&&tx.isNumber(t.s)&&tx.isNumber(t.v)&&tx.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(tx.isNumber(t.h)&&tx.isNumber(t.s)&&tx.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],nx=void 0,rx=void 0,ix=function(){rx=!1;var t=arguments.length>1?tx.toArray(arguments):arguments[0];return tx.each(ex,(function(e){if(e.litmus(t))return tx.each(e.conversions,(function(e,n){if(nx=e.read(t),!1===rx&&!1!==nx)return rx=nx,nx.conversionName=n,nx.conversion=e,tx.BREAK})),tx.BREAK})),rx},ox=void 0,ax={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r=Math.min(t,e,n),i=Math.max(t,e,n),o=i-r,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=t===i?(e-n)/o:e===i?2+(n-t)/o:4+(t-e)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/i,v:i/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(ox=8*e)|t&~(255<<ox)}},sx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ux=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},lx=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),cx=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},hx=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},dx=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},fx=function(){function t(){if(ux(this,t),this.__state=ix.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return lx(t,[{key:"toString",value:function(){return K_(this)}},{key:"toHexString",value:function(){return K_(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function px(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||fx.recalculateRGB(this,e,n),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(fx.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function vx(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||fx.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(fx.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}fx.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=ax.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");tx.extend(t.__state,ax.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},fx.recalculateHSV=function(t){var e=ax.rgb_to_hsv(t.r,t.g,t.b);tx.extend(t.__state,{s:e.s,v:e.v}),tx.isNaN(e.h)?tx.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},fx.COMPONENTS=["r","g","b","h","s","v","hex","a"],px(fx.prototype,"r",2),px(fx.prototype,"g",1),px(fx.prototype,"b",0),vx(fx.prototype,"h"),vx(fx.prototype,"s"),vx(fx.prototype,"v"),Object.defineProperty(fx.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(fx.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=ax.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var mx=function(){function t(e,n){ux(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return lx(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),gx={};tx.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(t,e){tx.each(t,(function(t){gx[t]=e}))}));var yx=/(\d+(\.\d+)?)px/;function _x(t){if("0"===t||tx.isUndefined(t))return 0;var e=t.match(yx);return tx.isNull(e)?0:parseFloat(e[1])}var xx={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var r=n,i=e;tx.isUndefined(i)&&(i=!0),tx.isUndefined(r)&&(r=!0),t.style.position="absolute",i&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,r){var i=n||{},o=gx[e];if(!o)throw new Error("Event type "+e+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var s=i.x||i.clientX||0,u=i.y||i.clientY||0;a.initMouseEvent(e,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,s,u,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var l=a.initKeyboardEvent||a.initKeyEvent;tx.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),l(e,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(e,i.bubbles||!1,i.cancelable||!0)}tx.defaults(a,r),t.dispatchEvent(a)},bind:function(t,e,n,r){var i=r||!1;return t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n),xx},unbind:function(t,e,n,r){var i=r||!1;return t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n),xx},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return xx},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!==r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return xx},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return _x(e["border-left-width"])+_x(e["border-right-width"])+_x(e["padding-left"])+_x(e["padding-right"])+_x(e.width)},getHeight:function(t){var e=getComputedStyle(t);return _x(e["border-top-width"])+_x(e["border-bottom-width"])+_x(e["padding-top"])+_x(e["padding-bottom"])+_x(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},bx=function(t){function e(t,n){ux(this,e);var r=dx(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),xx.bind(r.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return hx(e,t),lx(e,[{key:"setValue",value:function(t){var n=cx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),cx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(mx),Tx=function(t){function e(t,n,r){ux(this,e);var i=dx(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r,a=i;if(i.__select=document.createElement("select"),tx.isArray(o)){var s={};tx.each(o,(function(t){s[t]=t})),o=s}return tx.each(o,(function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),a.__select.appendChild(n)})),i.updateDisplay(),xx.bind(i.__select,"change",(function(){var t=this.options[this.selectedIndex].value;a.setValue(t)})),i.domElement.appendChild(i.__select),i}return hx(e,t),lx(e,[{key:"setValue",value:function(t){var n=cx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return xx.isActive(this.__select)?this:(this.__select.value=this.getValue(),cx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(mx),wx=function(t){function e(t,n){ux(this,e);var r=dx(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;function o(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),xx.bind(r.__input,"keyup",o),xx.bind(r.__input,"change",o),xx.bind(r.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),xx.bind(r.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return hx(e,t),lx(e,[{key:"updateDisplay",value:function(){return xx.isActive(this.__input)||(this.__input.value=this.getValue()),cx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(mx);function Ex(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var Sx=function(t){function e(t,n,r){ux(this,e);var i=dx(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,tx.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=Ex(i.__impliedStep),i}return hx(e,t),lx(e,[{key:"setValue",value:function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),cx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=Ex(t),this}}]),e}(mx),Ax=function(t){function e(t,n,r){ux(this,e);var i=dx(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));i.__truncationSuspended=!1;var o=i,a=void 0;function s(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function u(t){var e=a-t.clientY;o.setValue(o.getValue()+e*o.__impliedStep),a=t.clientY}function l(){xx.unbind(window,"mousemove",u),xx.unbind(window,"mouseup",l),s()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),xx.bind(i.__input,"change",(function(){var t=parseFloat(o.__input.value);tx.isNaN(t)||o.setValue(t)})),xx.bind(i.__input,"blur",(function(){s()})),xx.bind(i.__input,"mousedown",(function(t){xx.bind(window,"mousemove",u),xx.bind(window,"mouseup",l),a=t.clientY})),xx.bind(i.__input,"keydown",(function(t){13===t.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,s())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return hx(e,t),lx(e,[{key:"updateDisplay",value:function(){var t,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(t*r)/r),cx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Sx);function Mx(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}var Rx=function(t){function e(t,n,r,i,o){ux(this,e);var a=dx(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:r,max:i,step:o})),s=a;function u(t){t.preventDefault();var e=s.__background.getBoundingClientRect();return s.setValue(Mx(t.clientX,e.left,e.right,s.__min,s.__max)),!1}function l(){xx.unbind(window,"mousemove",u),xx.unbind(window,"mouseup",l),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function c(t){var e=t.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(Mx(e,n.left,n.right,s.__min,s.__max))}function h(){xx.unbind(window,"touchmove",c),xx.unbind(window,"touchend",h),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),xx.bind(a.__background,"mousedown",(function(t){document.activeElement.blur(),xx.bind(window,"mousemove",u),xx.bind(window,"mouseup",l),u(t)})),xx.bind(a.__background,"touchstart",(function(t){1===t.touches.length&&(xx.bind(window,"touchmove",c),xx.bind(window,"touchend",h),c(t))})),xx.addClass(a.__background,"slider"),xx.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return hx(e,t),lx(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",cx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Sx),Cx=function(t){function e(t,n,r){ux(this,e);var i=dx(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,xx.bind(i.__button,"click",(function(t){return t.preventDefault(),o.fire(),!1})),xx.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return hx(e,t),lx(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(mx),Px=function(t){function e(t,n){ux(this,e);var r=dx(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.__color=new fx(r.getValue()),r.__temp=new fx(0);var i=r;r.domElement=document.createElement("div"),xx.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",xx.bind(r.__input,"keydown",(function(t){13===t.keyCode&&h.call(this)})),xx.bind(r.__input,"blur",h),xx.bind(r.__selector,"mousedown",(function(){xx.addClass(this,"drag").bind(window,"mouseup",(function(){xx.removeClass(i.__selector,"drag")}))})),xx.bind(r.__selector,"touchstart",(function(){xx.addClass(this,"drag").bind(window,"touchend",(function(){xx.removeClass(i.__selector,"drag")}))}));var o,a=document.createElement("div");function s(t){f(t),xx.bind(window,"mousemove",f),xx.bind(window,"touchmove",f),xx.bind(window,"mouseup",l),xx.bind(window,"touchend",l)}function u(t){p(t),xx.bind(window,"mousemove",p),xx.bind(window,"touchmove",p),xx.bind(window,"mouseup",c),xx.bind(window,"touchend",c)}function l(){xx.unbind(window,"mousemove",f),xx.unbind(window,"touchmove",f),xx.unbind(window,"mouseup",l),xx.unbind(window,"touchend",l),d()}function c(){xx.unbind(window,"mousemove",p),xx.unbind(window,"touchmove",p),xx.unbind(window,"mouseup",c),xx.unbind(window,"touchend",c),d()}function h(){var t=ix(this.value);!1!==t?(i.__color.__state=t,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function d(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function f(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,r=n.clientX,o=n.clientY,a=(r-e.left)/(e.right-e.left),s=1-(o-e.top)/(e.bottom-e.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),i.__color.v=s,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function p(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__hue_field.getBoundingClientRect(),n=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return tx.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),tx.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),tx.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),tx.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),tx.extend(a.style,{width:"100%",height:"100%",background:"none"}),Ox(a,"top","rgba(0,0,0,0)","#000"),tx.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=r.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",tx.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),xx.bind(r.__saturation_field,"mousedown",s),xx.bind(r.__saturation_field,"touchstart",s),xx.bind(r.__field_knob,"mousedown",s),xx.bind(r.__field_knob,"touchstart",s),xx.bind(r.__hue_field,"mousedown",u),xx.bind(r.__hue_field,"touchstart",u),r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return hx(e,t),lx(e,[{key:"updateDisplay",value:function(){var t=ix(this.getValue());if(!1!==t){var e=!1;tx.each(fx.COMPONENTS,(function(n){if(!tx.isUndefined(t[n])&&!tx.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}}),this),e&&tx.extend(this.__color.__state,t)}tx.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;tx.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,Ox(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),tx.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),e}(mx),Ix=["-moz-","-o-","-webkit-","-ms-",""];function Ox(t,e,n,r){t.style.background="",tx.each(Ix,(function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "}))}var kx='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',Nx=function(t,e){var n=t[e];return tx.isArray(arguments[2])||tx.isObject(arguments[2])?new Tx(t,e,arguments[2]):tx.isNumber(n)?tx.isNumber(arguments[2])&&tx.isNumber(arguments[3])?tx.isNumber(arguments[4])?new Rx(t,e,arguments[2],arguments[3],arguments[4]):new Rx(t,e,arguments[2],arguments[3]):tx.isNumber(arguments[4])?new Ax(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new Ax(t,e,{min:arguments[2],max:arguments[3]}):tx.isString(n)?new wx(t,e):tx.isFunction(n)?new Cx(t,e,""):tx.isBoolean(n)?new bx(t,e):null},Lx=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},Dx=function(){function t(){ux(this,t),this.backgroundElement=document.createElement("div"),tx.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),xx.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),tx.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;xx.bind(this.backgroundElement,"click",(function(){e.hide()}))}return lx(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),tx.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",xx.unbind(t.domElement,"webkitTransitionEnd",e),xx.unbind(t.domElement,"transitionend",e),xx.unbind(t.domElement,"oTransitionEnd",e)};xx.bind(this.domElement,"webkitTransitionEnd",e),xx.bind(this.domElement,"transitionend",e),xx.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-xx.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-xx.getHeight(this.domElement)/2+"px"}}]),t}();!function(t,e){var n=e||document,r=document.createElement("style");r.type="text/css",r.innerHTML=t;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(t){}}(function(t){if("undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var Fx=function(){try{return!!window.localStorage}catch(t){return!1}}(),Bx=void 0,Ux=!0,Gx=void 0,jx=!1,Hx=[],zx=function t(e){var n=this,r=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),xx.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=tx.defaults(r,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),r=tx.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),tx.isUndefined(r.load)?r.load={preset:"Default"}:r.preset&&(r.load.preset=r.preset),tx.isUndefined(r.parent)&&r.hideable&&Hx.push(this),r.resizable=tx.isUndefined(r.parent)&&r.resizable,r.autoPlace&&tx.isUndefined(r.scrollable)&&(r.scrollable=!0);var i,o=Fx&&"true"===localStorage.getItem(Zx(this,"isLocal")),a=void 0,s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(t){n.parent?n.getRoot().preset=t:r.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return r.width},set:function(t){r.width=t,$x(n,t)}},name:{get:function(){return r.name},set:function(t){r.name=t,s&&(s.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(e){r.closed=e,r.closed?xx.addClass(n.__ul,t.CLASS_CLOSED):xx.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return o},set:function(t){Fx&&(o=t,t?xx.bind(window,"unload",a):xx.unbind(window,"unload",a),localStorage.setItem(Zx(n,"isLocal"),t))}}}),tx.isUndefined(r.parent)){if(this.closed=r.closed||!1,xx.addClass(this.domElement,t.CLASS_MAIN),xx.makeSelectable(this.domElement,!1),Fx&&o){n.useLocalStorage=!0;var u=localStorage.getItem(Zx(this,"gui"));u&&(r.load=JSON.parse(u))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,xx.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),r.closeOnTop?(xx.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(xx.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),xx.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var l=document.createTextNode(r.name);xx.addClass(l,"controller-name"),s=Vx(n,l),xx.addClass(this.__ul,t.CLASS_CLOSED),xx.addClass(s,"title"),xx.bind(s,"click",(function(t){return t.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(tx.isUndefined(r.parent)&&(Ux&&(Gx=document.createElement("div"),xx.addClass(Gx,"dg"),xx.addClass(Gx,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Gx),Ux=!1),Gx.appendChild(this.domElement),xx.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||$x(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},xx.bind(window,"resize",this.__resizeHandler),xx.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),xx.bind(this.__ul,"transitionend",this.__resizeHandler),xx.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&function(t){var e=void 0;function n(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function r(){xx.removeClass(t.__closeButton,zx.CLASS_DRAG),xx.unbind(window,"mousemove",n),xx.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),e=i.clientX,xx.addClass(t.__closeButton,zx.CLASS_DRAG),xx.bind(window,"mousemove",n),xx.bind(window,"mouseup",r),!1}t.__resize_handle=document.createElement("div"),tx.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),xx.bind(t.__resize_handle,"mousedown",i),xx.bind(t.__closeButton,"mousedown",i),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}(this),a=function(){Fx&&"true"===localStorage.getItem(Zx(n,"isLocal"))&&localStorage.setItem(Zx(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,r.parent||((i=n.getRoot()).width+=1,tx.defer((function(){i.width-=1})))};function Vx(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,n):t.__ul.appendChild(r),t.onResize(),r}function Wx(t){xx.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&xx.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function Xx(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function Yx(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[e.property]=e,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[t.preset])a=o[t.preset];else{if(!o.Default)return;a=o.Default}if(a[r]&&void 0!==a[r][e.property]){var s=a[r][e.property];e.initialValue=s,e.setValue(s)}}}}function qx(t,e,n,r){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new Px(e,n);else{var o=[e,n].concat(r.factoryArgs);i=Nx.apply(t,o)}r.before instanceof mx&&(r.before=r.before.__li),Yx(t,i),xx.addClass(i.domElement,"c");var a=document.createElement("span");xx.addClass(a,"property-name"),a.innerHTML=i.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(i.domElement);var u=Vx(t,s,r.before);return xx.addClass(u,zx.CLASS_CONTROLLER_ROW),i instanceof Px?xx.addClass(u,"color"):xx.addClass(u,sx(i.getValue())),function(t,e,n){if(n.__li=e,n.__gui=t,tx.extend(n,{options:function(e){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),qx(t,n.object,n.property,{before:r,factoryArgs:[tx.toArray(arguments)]})}if(tx.isArray(e)||tx.isObject(e)){var i=n.__li.nextElementSibling;return n.remove(),qx(t,n.object,n.property,{before:i,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof Rx){var r=new Ax(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});tx.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return i.apply(r,t),e.apply(n,t)}})),xx.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof Ax){var i=function(e){if(tx.isNumber(n.__min)&&tx.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=qx(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return e};n.min=tx.compose(i,n.min),n.max=tx.compose(i,n.max)}else n instanceof bx?(xx.bind(e,"click",(function(){xx.fakeEvent(n.__checkbox,"click")})),xx.bind(n.__checkbox,"click",(function(t){t.stopPropagation()}))):n instanceof Cx?(xx.bind(e,"click",(function(){xx.fakeEvent(n.__button,"click")})),xx.bind(e,"mouseover",(function(){xx.addClass(n.__button,"hover")})),xx.bind(e,"mouseout",(function(){xx.removeClass(n.__button,"hover")}))):n instanceof Px&&(xx.addClass(e,"color"),n.updateDisplay=tx.compose((function(t){return e.style.borderLeftColor=n.__color.toString(),t}),n.updateDisplay),n.updateDisplay());n.setValue=tx.compose((function(e){return t.getRoot().__preset_select&&n.isModified()&&Xx(t.getRoot(),!0),e}),n.setValue)}(t,u,i),t.__controllers.push(i),i}function Zx(t,e){return document.location.href+"."+e}function Qx(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function Kx(t,e){e.style.display=t.useLocalStorage?"block":"none"}function Jx(t){var e=t.__save_row=document.createElement("li");xx.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),xx.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",xx.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",xx.addClass(r,"button"),xx.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",xx.addClass(i,"button"),xx.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",xx.addClass(o,"button"),xx.addClass(o,"revert");var a=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?tx.each(t.load.remembered,(function(e,n){Qx(t,n,n===t.preset)})):Qx(t,"Default",!1),xx.bind(a,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(a),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(o),Fx){var s=document.getElementById("dg-local-explain"),u=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(Zx(0,"isLocal"))&&u.setAttribute("checked","checked"),Kx(t,s),xx.bind(u,"change",(function(){t.useLocalStorage=!t.useLocalStorage,Kx(t,s)}))}var l=document.getElementById("dg-new-constructor");xx.bind(l,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||Bx.hide()})),xx.bind(n,"click",(function(){l.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),Bx.show(),l.focus(),l.select()})),xx.bind(r,"click",(function(){t.save()})),xx.bind(i,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),xx.bind(o,"click",(function(){t.revert()}))}function $x(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function tb(t,e){var n={};return tx.each(t.__rememberedObjects,(function(r,i){var o={},a=t.__rememberedObjectIndecesToControllers[i];tx.each(a,(function(t,n){o[n]=e?t.initialValue:t.getValue()})),n[i]=o})),n}zx.toggleHide=function(){jx=!jx,tx.each(Hx,(function(t){t.domElement.style.display=jx?"none":""}))},zx.CLASS_AUTO_PLACE="a",zx.CLASS_AUTO_PLACE_CONTAINER="ac",zx.CLASS_MAIN="main",zx.CLASS_CONTROLLER_ROW="cr",zx.CLASS_TOO_TALL="taller-than-window",zx.CLASS_CLOSED="closed",zx.CLASS_CLOSE_BUTTON="close-button",zx.CLASS_CLOSE_TOP="close-top",zx.CLASS_CLOSE_BOTTOM="close-bottom",zx.CLASS_DRAG="drag",zx.DEFAULT_WIDTH=245,zx.TEXT_CLOSED="Close Controls",zx.TEXT_OPEN="Open Controls",zx._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||zx.toggleHide()},xx.bind(window,"keydown",zx._keydownHandler,!1),tx.extend(zx.prototype,{add:function(t,e){return qx(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return qx(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;tx.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Gx.removeChild(this.domElement);var t=this;tx.each(this.__folders,(function(e){t.removeFolder(e)})),xx.unbind(window,"keydown",zx._keydownHandler,!1),Wx(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new zx(e);this.__folders[t]=n;var r=Vx(this,n.domElement);return xx.addClass(r,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],Wx(t);var e=this;tx.each(t.__folders,(function(e){t.removeFolder(e)})),tx.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=xx.getOffset(t.__ul).top,n=0;tx.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(n+=xx.getHeight(e))})),window.innerHeight-e-20<n?(xx.addClass(t.domElement,zx.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(xx.removeClass(t.domElement,zx.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&tx.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:tx.debounce((function(){this.onResize()}),50),remember:function(){if(tx.isUndefined(Bx)&&((Bx=new Dx).domElement.innerHTML=kx),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;tx.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&Jx(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&$x(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=tb(this)),t.folders={},tx.each(this.__folders,(function(e,n){t.folders[n]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=tb(this),Xx(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=tb(this,!0)),this.load.remembered[t]=tb(this),this.preset=t,Qx(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){tx.each(this.__controllers,(function(e){this.getRoot().load.remembered?Yx(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),tx.each(this.__folders,(function(t){t.revert(t)})),t||Xx(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&function t(e){0!==e.length&&Lx.call(window,(function(){t(e)})),tx.each(e,(function(t){t.updateDisplay()}))}(this.__listening)},updateDisplay:function(){tx.each(this.__controllers,(function(t){t.updateDisplay()})),tx.each(this.__folders,(function(t){t.updateDisplay()}))}});var eb=zx,nb=function(){function t(t){this.player=t}return Object.defineProperty(t.prototype,"frameRate",{get:function(){return this.player.fps.value},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"drawFrames",{get:function(){return this.player.runtime.fps},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"drawCall",{get:function(){return this.player.runtime.drawCall},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this.player.config.resolution},set:function(t){this.player.updateConfig({resolution:t})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var t,e;return(null===(t=this.player.view)||void 0===t?void 0:t.width)+"*"+(null===(e=this.player.view)||void 0===e?void 0:e.height)},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return this.player.config.minFPS},set:function(t){this.player.updateConfig({minFPS:t})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this.player.config.maxFPS},set:function(t){this.player.updateConfig({maxFPS:t})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoResolution",{get:function(){return this.player.config.autoResolution},set:function(t){this.player.updateConfig({autoResolution:t})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoFPS",{get:function(){return this.player.config.autoFPS},set:function(t){this.player.updateConfig({autoFPS:t})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this.player.config.transactionBgColor},set:function(t){this.player.updateConfig({transactionBgColor:t})},enumerable:!1,configurable:!0}),t}(),rb=function(){function t(t,e){var n;this.config=new nb(t),this.anchor=e,n=this.createControllerGUI(),this.gui=n[0],this.controller=n[1],this.createStats()}return t.prototype.createStats=function(){var t=this;this.stateId=setInterval((function(){t.controller.frameRate.updateDisplay(),t.controller.size.updateDisplay(),t.controller.minFPS.updateDisplay(),t.controller.drawFrames.updateDisplay(),t.controller.maxFPS.updateDisplay(),t.controller.resolution.updateDisplay(),t.controller.autoFps.updateDisplay(),t.controller.autoResolution.updateDisplay(),t.controller.drawCall.updateDisplay()}),16)},t.prototype.createControllerGUI=function(){var t=new eb({autoPlace:!0,closed:!0});t.domElement.style.opacity=".6",t.domElement.style.transformOrigin="100% 0",t.domElement.style.transform="scale(1)",this.anchor.appendChild(t.domElement),t.domElement.style.position="absolute",t.domElement.style.right="0",t.domElement.style.top="0",t.domElement.style.zIndex="2";var e={frameRate:t.add(this.config,"frameRate"),drawFrames:t.add(this.config,"drawFrames"),drawCall:t.add(this.config,"drawCall"),size:t.add(this.config,"size"),minFPS:t.add(this.config,"minFPS",0,60),maxFPS:t.add(this.config,"maxFPS",0,60),resolution:t.add(this.config,"resolution",.5,8,.5),autoResolution:t.add(this.config,"autoResolution"),autoFps:t.add(this.config,"autoFPS"),transactionBgColor:t.addColor(this.config,"backgroundColor")};return[t,e]},t.prototype.destroy=function(){try{window.clearInterval(this.stateId),this.anchor.removeChild(this.gui.domElement),this.gui.destroy()}catch(t){}},t}(),ib=function(){function t(t){var e=this;this.tasks=[],this.isDestroy=!1,this.isScheduling=!1,this.schedule=function(){e.isScheduling=!0;var t=e.tasks.shift();t&&!e.isDestroy&&e.fn(t).then((function(){e.tasks.length>0?window.requestAnimationFrame(e.schedule):e.isScheduling=!1}))},this.fn=t}return t.prototype.destroy=function(){this.isDestroy=!0},t.prototype.addTask=function(t){this.tasks.push(t),this.isScheduling||this.schedule()},t}(),ob=function(){function t(t){this.autoUnlock=Object.create(null),this.locks=Object.create(null),this.available=!1,this.available=t}return t.prototype.addLock=function(t,e){var n=this;this.available&&(this.locks[t]=e,this.autoUnlock[t]=window.setTimeout((function(){delete n.locks[t]}),3e3))},t.prototype.unlock=function(t,e){this.available&&e&&this.locks[t]&&this.locks[t]===e&&(window.clearTimeout(this.autoUnlock[t]),delete this.locks[t])},t.prototype.isLocked=function(t){return!!this.available&&!!this.locks[t]},t}(),ab=function(){function t(){var t=this;this.tasks=[],this.isDestroy=!1,this.isScheduling=!1,this.schedule=function(){t.isScheduling=!0;var e=t.tasks.shift();e&&!t.isDestroy&&(e.status="running",e.fn.apply(null).then((function(){t.tasks.length>0?window.requestAnimationFrame(t.schedule):t.isScheduling=!1})).catch((function(){t.tasks.length>0?window.requestAnimationFrame(t.schedule):t.isScheduling=!1})))}}return t.prototype.getRunningTask=function(){return this.tasks[0]&&"running"===this.tasks[0].status?this.tasks[0]:null},t.prototype.addTask=function(t,e){var n={type:t,status:"wait",fn:e},r=this.getRunningTask();r&&t===r.type||(this.tasks=this.tasks.filter((function(e){return e.type!==t})),this.tasks.push(n),this.isScheduling||this.schedule())},t.prototype.destroy=function(){this.isDestroy=!0},t}();function sb(t,e,n){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){var r,i,o,a;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(s){switch(s.label){case 0:return r=document.createElement("div"),(i=new _b({anchor:r,renderOptions:{minFPS:1,maxFPS:1,resolution:1},mode:"local",interactive:!1,useLocalCache:!0})).setResource(t,e),[4,i.getSlideCountAsync()];case 1:o=s.sent(),a=1,s.label=2;case 2:return a<=o?[4,i.player.stagePool.preload(a,!0)]:[3,5];case 3:s.sent(),n(Math.round(a/o*100)/100),s.label=4;case 4:return a++,[3,2];case 5:return i.destroy(),[2]}}))}))}var ub=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lb=function(){return(lb=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},cb=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},hb=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},db=window.ResizeObserver||q_,fb=function(t){return new Promise((function(e){return setTimeout(e,t)}))};function pb(t,e){return cb(this,void 0,void 0,(function(){var n;return hb(this,(function(r){switch(r.label){case 0:n=Date.now(),r.label=1;case 1:return!t()&&Date.now()-n<e?[4,fb(50)]:[3,3];case 2:return r.sent(),n=Date.now(),[3,1];case 3:return[2]}}))}))}var vb={syncDispatch:"syncDispatch",syncReceive:"syncReceive",syncEventLag:"syncEventLag",renderStart:"renderStart",renderEnd:"renderEnd",renderError:"renderError",slideChange:"slideChange",mainSeqStepStart:"mainSeqStepStart",mainSeqStepEnd:"mainSeqStepEnd",animateStart:"animateStart",animateEnd:"animateEnd",stateChange:"stateChange",slideStepEnd:"slideEnd",slideStepStart:"slideStart"},mb={taskId:"",url:"",currentSlideIndex:-1,mainSeqStep:-1,mainSeqState:null,mediaState:Object.create(null),interactiveSeqState:Object.create(null)},gb="";try{gb="0.8.5-beta-1"}catch(t){gb="dev"}var yb=null;try{(yb=w.createInstance({name:"__slide_local_log__",driver:w.INDEXEDDB,version:1})).ready((function(t){})).catch((function(t){}))}catch(t){}var _b=function(t){function e(n){var r=t.call(this)||this;return r.iosResetCache=[],r.needClearCacheImage=!1,r.version=gb,r.__slideState=h_()(mb),r.userInputTime=0,r.isSyncingSlideState=!1,r.frozenTaskManager=new ab,r.randomId=T(),r.resize=!1,r.isAnimating=!1,r.renderingTaskManager=new Q_,r.isLoading=!1,r.interactive=!0,r.renderingIndex=0,r.frameWidth=1,r.frameHeight=1,r.frame=document.createElement("div"),r.canvasContainer=document.createElement("div"),r.medianController=document.createElement("div"),r.frameResizeObserver=new db((function(){return r.frameResizeHandler()})),r.timestamp=function(){return Date.now()},r.mode="local",r.enableGlobalClick=!1,r.lastEmitedState=null,r.playerController=null,r.isInitResized=!1,r.cacheImage=document.createElement("img"),r.isTouchStart=!1,r.touchStartId=void 0,r.taskId="",r.volumeAdjuster=new Jy,r.designWidth=0,r.designHeight=0,r._slideCount=0,r._dispatchIncrId=0,r._receiveIncrId=0,r.recoverHandler=function(t){if("@slide/_recover_"===t.data.type&&t.data.slideId===r.randomId){var e=t.data,n=e.recoverBy,i=e.payload;if(!i)return;"renderOtherPage"===n&&i.slideIndex?r.doRenderSlide(i.slideIndex).catch((function(t){r.logger.error(t,r.taskId)})):"reloadCurrentPage"===n&&r.doRenderSlide(r.renderingIndex).catch((function(t){r.logger.error(t,r.taskId)}))}},r.userInputHandle=function(){r.userInputTime=Date.now()},r.handleViewClick=function(){setTimeout((function(){var t=Date.now();Math.abs(t-r.userInputTime)>500&&r.enableGlobalClick&&r.nextStep()}))},r.handleViewTouchStart=function(){window.clearTimeout(r.touchStartId),r.isTouchStart=!0,r.touchStartId=setTimeout((function(){r.isTouchStart=!1}),350)},r.handleViewTouchEnd=function(){r.isTouchStart&&(r.isTouchStart=!1,r.handleViewClick())},r.handleSlideRef=function(){console.log(r),window.__slide=r},r.receiveSyncHandler=function(t){return cb(r,void 0,void 0,(function(){var e,n,r,i,o=this;return hb(this,(function(a){switch(a.label){case 0:return Tv()(t.incrId)&&(t.incrId&&t.incrId-this._receiveIncrId!=1&&this.emit(vb.syncEventLag),this._receiveIncrId=t.incrId||0),this.logger.info("sync receive "+JSON.stringify(t),this.taskId),"nextStep"!==t.type?[3,1]:(this.mainSeqStep!==t.next-1&&this.mainSeqStep+1!==this.mainSeqLength&&this.player?(this.setMainSeqStep(t.next,"start"),this.player.nextTick((function(){o.doNextStep(!0,t.clientId||"")}))):this.doNextStep(!0,t.clientId||""),[3,6]);case 1:return"prevStep"!==t.type?[3,2]:(0===this.mainSeqStep&&"idle"===this.mainSeqState||this.mainSeqStep===t.next+1||this.mainSeqStep+1===this.mainSeqLength?this.doPrevStep(!0):(this.setMainSeqStep(t.next+1,"start"),null===(e=this.player)||void 0===e||e.nextTick((function(){o.doPrevStep(!0)}))),[3,6]);case 2:return"interactiveAnim"!==t.type?[3,3]:(this.player?this.player.applyInteractiveAction(t.action):this.__slideState.interactiveSeqState[t.seqId]?this.__slideState.interactiveSeqState[t.seqId].step+=1:this.__slideState.interactiveSeqState[t.seqId]={step:0,state:"end"},[3,6]);case 3:return"renderSlide"!==t.type?[3,5]:[4,this.doRenderSlide(t.index,t.isForward)];case 4:return a.sent(),[3,6];case 5:"mediaPlay"===t.type?(null===(n=this.player)||void 0===n||n.setMediaState(t.id,!0),this.__slideState.mediaState[t.id]=t.state):"mediaPause"===t.type?(null===(r=this.player)||void 0===r||r.setMediaState(t.id,!1),this.__slideState.mediaState[t.id]=t.state):"mediaSeek"===t.type&&(null===(i=this.player)||void 0===i||i.setMediaCurrentTime(t.id,t.time),this.__slideState.mediaState[t.id]=t.state),a.label=6;case 6:return[2]}}))}))},r.handlePrevSlide=function(t){return void 0===t&&(t=!1),cb(r,void 0,void 0,(function(){var e;return hb(this,(function(n){return this.player?((e=this.player.prevSlideIndex)>=1&&(this.config.navigatorDelegate?this.config.navigatorDelegate.gotoPage(e):t?this.doRenderSlide(e,!1):this.renderSlide(e,!1)),[2]):[2]}))}))},r.handleNextSlide=function(t){return void 0===t&&(t=!1),cb(r,void 0,void 0,(function(){var e;return hb(this,(function(n){return this.player?((e=this.player.nextSlideIndex)<=this.slideCount&&(this.config.navigatorDelegate?this.config.navigatorDelegate.gotoPage(e):t?this.doRenderSlide(e,!0):this.renderSlide(e,!0)),[2]):[2]}))}))},r.handleGotoSlide=function(t){if(t<=r.slideCount&&t>=1){var e=r.slideState.currentSlideIndex<=t;r.renderSlide(t,e)}else-1===t&&r.renderSlide(r.slideCount,!0)},e.instances.push(r),r.config=r.initSlideConfig(n),r.logger={info:function(t,n){var i;e._tempLog+="INFO - "+(new Date).toISOString()+" - {"+r.randomId+"}["+n+"] "+t+"\n";var o=null===(i=r.config.logger)||void 0===i?void 0:i.info;o&&o("["+n+"] "+t)},warn:function(t,n){var i;e._tempLog+="WARN - "+(new Date).toISOString()+" - {"+r.randomId+"}["+n+"] "+t+"\n";var o=null===(i=r.config.logger)||void 0===i?void 0:i.warn;o&&o("["+n+"] "+t)},error:function(t,n){var i;e._tempLog+="ERROR - "+(new Date).toISOString()+" - {"+r.randomId+"}["+n+"] "+t+"\n";var o=null===(i=r.config.logger)||void 0===i?void 0:i.error;o&&o("["+n+"] "+t)}},r.logger.info("new slide with clientId: "+r.config.clientId,r.taskId),r.anchor=r.config.anchor,r.syncQueue=new ib(r.receiveSyncHandler),r.lock=new ob("interactive"===r.mode),r.cacheImage.style.position="absolute",r.cacheImage.style.zIndex="100",r.setMedianControllerAttribute(),r.canvasContainer.style.position="relative",r.canvasContainer.appendChild(r.medianController),r.frame.appendChild(r.canvasContainer),r.frameResizeObserver.observe(r.frame),r.on(vb.syncReceive,(function(t){r.lock.unlock(t.type,t.uuid),r.syncQueue.addTask(t)})),r.renderingTaskManager.eventHub.on("task-error",(function(t){var e=t.error,n=t.task,i=rv.transform(e);i.errorType===Kp.RuntimeWarn?r.logger.warn(i.message,r.taskId):r.logger.error(i.message,r.taskId),r.isLoading=!1,r.reportError(i,n.slideIndex)})),window.addEventListener("__slide_ref__",r.handleSlideRef),r.resizeView=l_()(r.resizeView.bind(r),50),r.player=r.initPlayer(r.config),r.config.controller&&r.createController(),r.player.view&&r.canvasContainer.appendChild(r.player.view),r.handleViewClick=l_()(r.handleViewClick,300),r.player.errorChannel.on("error",(function(t,e){var n=rv.transform(t);n.errorType===Kp.RuntimeWarn?r.logger.warn(n.message,r.taskId):r.logger.error(n.message,r.taskId),r.isLoading=!1,e===r.renderingIndex&&r.reportError(t,e)})),window.addEventListener("message",r.recoverHandler),r}var n,r;return ub(e,t),e.flushLog=function(t){return void 0===t&&(t=!1),cb(this,void 0,void 0,(function(){return hb(this,(function(n){switch(n.label){case 0:if(!(e._tempLog.length>131072||t&&e._tempLog.length>0))return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,null==yb?void 0:yb.setItem("run_time_log_"+e._tempLogIndex,e._tempLog)];case 2:case 3:return n.sent(),[3,4];case 4:e._tempLog="",e._tempLogIndex+=1,n.label=5;case 5:return[2]}}))}))},Object.defineProperty(e.prototype,"dispatchIncrId",{get:function(){return this._dispatchIncrId++},enumerable:!1,configurable:!0}),e.prototype.reportError=function(t,e){this.emit(vb.renderError,{error:t,index:e}),window.postMessage({type:"@slide/_error_",errorType:t.errorType,errorMsg:t.errorMsg,slideId:this.randomId,slideIndex:e,customMessage:"@slide/_error_"},"*")},e.prototype.initSlideConfig=function(t){return t.timestamp&&(this.timestamp=t.timestamp),t.rtcAudio&&(n_.RtcAudioClazz=t.rtcAudio),this.mode=t.mode,this.anchor=t.anchor,this.anchor.appendChild(this.frame),this.enableGlobalClick=!hu()(t.enableGlobalClick)&&t.enableGlobalClick,this.resize=t.resize||!1,this.interactive=t.interactive,this.frame.style.cssText=t.fixedFrameSize?"width:"+t.fixedFrameSize.width+"px;height:"+t.fixedFrameSize.height+"px;":"width:100%;height:100%",this.frame.style.cssText+="display:flex;justify-content:center;align-items:center;visibility:hidden;position:relative;z-index:1;",t.fixedFrameSize&&(this.frameWidth=t.fixedFrameSize.width,this.frameHeight=t.fixedFrameSize.height),t},e.prototype.initPlayer=function(t){var e,n,r,i=this,o=new n_({mode:this.mode,useLocalCache:!!hu()(this.config.useLocalCache)||this.config.useLocalCache,logger:this.logger,resourceTimeout:hu()(this.config.resourceTimeout)?15e3:this.config.resourceTimeout,loadDelegate:this.config.loaderDelegate,volumeAdjuster:this.volumeAdjuster},t.renderOptions);return o.setInteractive(this.interactive),o.updateConfig(t.renderOptions||{}),o.on(e_.renderStart,(function(t){i.isLoading=!0,i.emit(vb.renderStart,t)})),o.on(e_.renderEnd,(function(t){i.isLoading=!1,i.player&&(i.designHeight=i.player.designHeight,i.designWidth=i.player.designWidth,i.cacheImage.style.width=i.player.designWidth+"px",i.cacheImage.style.height=i.player.designHeight+"px",i._slideCount=i.player.slideCount),i.emit(vb.renderEnd,t)})),o.on(e_.slideChange,(function(t){i.__slideState.currentSlideIndex=t,i.emitStateChange(),i.emit(vb.slideChange,t)})),o.on(e_.mainSeqStateChange,(function(t){i.__slideState.mainSeqState=t,i.emitStateChange()})),o.on(e_.mainSeqStepChange,(function(t){i.__slideState.mainSeqStep=t,i.emitStateChange()})),o.on(e_.interactiveSeqStateChange,(function(t){var e=t.id,n=t.state;i.__slideState.interactiveSeqState[e]=n,i.emitStateChange()})),o.on(e_.animateStart,(function(){!0!==i.isAnimating&&(i.isAnimating=!0,i.emit(vb.animateStart))})),o.on(e_.animateEnd,(function(){!1!==i.isAnimating&&(i.isAnimating=!1,i.emit(vb.animateEnd))})),o.on(e_.interactiveSeqAction,(function(t){var e=t.action,n=t.seqId;i.emitSyncDispatch({slideIndex:i.__slideState.currentSlideIndex,type:"interactiveAnim",action:e,seqId:n}),i.emitStateChange()})),o.on(e_.mainSeqStepStart,(function(t){i.emit(vb.mainSeqStepStart,t)})),o.on(e_.mainSeqStepEnd,(function(t){i.emit(vb.mainSeqStepEnd,t)})),o.on(e_.mediaPlay,(function(t){var e={type:"play",time:i.timestamp()-1e3*t.time};i.__slideState.mediaState[t.id]=e,i.emitSyncDispatch({slideIndex:i.__slideState.currentSlideIndex,type:"mediaPlay",id:t.id,state:e}),i.emitStateChange()})),o.on(e_.mediaStop,(function(t){delete i.__slideState.mediaState[t.id]})),o.on(e_.mediaPause,(function(t){var e={type:"pause",time:t.time};i.__slideState.mediaState[t.id]=e,i.emitSyncDispatch({slideIndex:i.__slideState.currentSlideIndex,type:"mediaPause",id:t.id,state:e}),i.emitStateChange()})),o.on(e_.mediaSeek,(function(t){var e={type:"pause",time:0};t.isPlaying?(e.type="play",e.time=i.timestamp()-1e3*t.time,i.__slideState.mediaState[t.id]=e):(e.type="pause",e.time=t.time,i.__slideState.mediaState[t.id]=e),i.emitSyncDispatch({slideIndex:i.__slideState.currentSlideIndex,type:"mediaSeek",id:t.id,time:t.time,state:e}),i.emitStateChange()})),o.on(e_.requestPrevSlide,(function(t){i.handlePrevSlide(t)})),o.on(e_.requestNextSlide,(function(t){i.handleNextSlide(t)})),o.on(e_.requestGotoSlide,(function(t){i.config.navigatorDelegate?i.config.navigatorDelegate.gotoPage(t):i.handleGotoSlide(t)})),null===(e=o.view)||void 0===e||e.addEventListener("touchend",this.handleViewTouchEnd),null===(n=o.view)||void 0===n||n.addEventListener("touchstart",this.handleViewTouchStart),null===(r=o.view)||void 0===r||r.addEventListener("click",this.handleViewClick),o.on(e_.userInput,this.userInputHandle),o},e.prototype.createController=function(){this.player&&(this.playerController=new rb(this.player,this.frame))},e.prototype.setMedianControllerAttribute=function(){this.medianController.className="median-container",this.medianController.style.position="absolute",this.medianController.style.left="0",this.medianController.style.top="0",this.medianController.style.zIndex="2"},e.prototype.frameResizeHandler=function(){if(!this.config.fixedFrameSize){var t=this.frame.getBoundingClientRect(),e=t.width,n=t.height;this.frameWidth=e,this.frameHeight=n,this.resizeView()}},e.prototype.updateFixedFrameSize=function(t,e,n){this.config.fixedFrameSize&&(this.frameWidth=t,this.frameHeight=e,this.frame.style.width=t+"px",this.frame.style.height=e+"px",this.resizeView(n))},e.prototype.resizeView=function(t){var e,n,r=this,i=this.width,o=this.height;if(i>0&&o>0){var a=this.frameWidth/i,s=a*o;s>this.frameHeight&&(a*=this.frameHeight/s),null===(e=this.player)||void 0===e||e.scaleView(a,this.resize,t),this.cacheImage.style.transform="scale("+a+")",this.medianController.style.transform="scale("+a+")",this.medianController.setAttribute("data-scale",a.toString()),this.isInitResized||(this.isInitResized=!0,null===(n=this.player)||void 0===n||n.clock.setTimeout((function(){r.frame.style.visibility="visible"}),32))}},e.prototype.setSlideState=function(t){var e,n,r;return cb(this,void 0,void 0,(function(){var i,o=this;return hb(this,(function(a){switch(a.label){case 0:return this.isSyncingSlideState=!0,this.logger.info("stateChange receive "+JSON.stringify(t),this.taskId),t.taskId&&t.taskId!==this.__slideState.taskId&&(this.__slideState.taskId=t.taskId,null===(e=this.player)||void 0===e||e.setResourceData(t.taskId,this.__slideState.url)),t.url&&t.url!==this.__slideState.url&&(this.__slideState.url=t.url,null===(n=this.player)||void 0===n||n.setResourceData(this.__slideState.taskId,t.url)),Number.isInteger(t.currentSlideIndex)&&t.currentSlideIndex!==this.__slideState.currentSlideIndex?(this.__slideState.currentSlideIndex=t.currentSlideIndex,[4,this.doRenderSlide(t.currentSlideIndex)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[4,null===(r=this.player)||void 0===r?void 0:r.clock.waitUntil((function(){var e,n;return(null===(e=o.player)||void 0===e?void 0:e.currentIndex)===t.currentSlideIndex&&(null===(n=o.player)||void 0===n?void 0:n.currentStage)}),3e3)];case 3:return a.sent(),i=!1,Number.isInteger(t.mainSeqStep)&&t.mainSeqStep!==this.__slideState.mainSeqStep&&(i=!0,this.__slideState.mainSeqStep=t.mainSeqStep),t.mainSeqState&&t.mainSeqState!==this.__slideState.mainSeqState&&(i=!0,this.__slideState.mainSeqState=t.mainSeqState),i&&this.setMainSeqStep(this.__slideState.mainSeqStep,"idle"===this.__slideState.mainSeqState?"start":"end"),t.mediaState&&(this.initMedia(t),this.__slideState.mediaState=t.mediaState),t.interactiveSeqState&&(this.initInteractiveSeq(t),this.__slideState.interactiveSeqState=t.interactiveSeqState),this.isSyncingSlideState=!1,[2]}}))}))},e.prototype.initInteractiveSeq=function(t){var e;for(var n in t.interactiveSeqState){var r=t.interactiveSeqState[n];null===(e=this.player)||void 0===e||e.setInteractiveSeqState(n,r.step,"idle"===r.state?"start":"end")}},e.prototype.initMedia=function(t){var e,n,r=this,i=function(i){var a=t.mediaState[i],s=o.__slideState.mediaState[i];if(s&&a.type===s.type&&a.time===s.time)return"continue";"play"===a.type?null===(e=o.player)||void 0===e||e.setMediaState(i,!0).then((function(){var t,e=r.timestamp();null===(t=r.player)||void 0===t||t.setMediaCurrentTime(i,(e-a.time)/1e3)})):null===(n=o.player)||void 0===n||n.setMediaState(i,!1).then((function(){var t;null===(t=r.player)||void 0===t||t.setMediaCurrentTime(i,a.time)}))},o=this;for(var a in t.mediaState)i(a)},Object.defineProperty(e.prototype,"slideCount",{get:function(){return this._slideCount},enumerable:!1,configurable:!0}),e.prototype.getSizeAsync=function(){return cb(this,void 0,void 0,(function(){var t;return hb(this,(function(e){switch(e.label){case 0:if(this.width>0&&this.height>0)return[2,[this.width,this.height]];e.label=1;case 1:return e.trys.push([1,4,,5]),[4,fetch(this.__slideState.url+"/"+this.__slideState.taskId+"/jsonOutput/slide-1.json")];case 2:return[4,e.sent().json()];case 3:return[2,[(t=e.sent()).width,t.height]];case 4:return e.sent(),[2,[0,0]];case 5:return[2]}}))}))},e.prototype.getSlideCountAsync=function(){return cb(this,void 0,void 0,(function(){return hb(this,(function(t){switch(t.label){case 0:if(this._slideCount>0)return[2,this._slideCount];t.label=1;case 1:return t.trys.push([1,4,,5]),[4,fetch(this.__slideState.url+"/"+this.__slideState.taskId+"/jsonOutput/slide-1.json")];case 2:return[4,t.sent().json()];case 3:return[2,t.sent().slideCount];case 4:return t.sent(),[2,0];case 5:return[2]}}))}))},Object.defineProperty(e.prototype,"slideState",{get:function(){return this.__slideState.mainSeqState=this.mainSeqState,this.__slideState.mainSeqStep=this.mainSeqStep,JSON.parse(JSON.stringify(this.__slideState))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mainSeqLength",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.mainSeqLength())||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mainSeqStep",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.mainSeqStep())||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mainSeqState",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.mainSeqState())||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderOptions",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.config)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"drawCall",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.runtime.drawCall)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderFps",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.runtime.fps)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"runtimeFps",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.fps.value)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.view)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.designWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.designHeight},enumerable:!1,configurable:!0}),e.prototype.updateRenderOption=function(t){this.player&&(this.player.updateConfig(t),this.renderOptions&&(this.config.renderOptions=this.renderOptions))},e.prototype.setResource=function(t,e){var n;this.taskId=t,null===(n=this.player)||void 0===n||n.setResourceData(t,e),this.__slideState.taskId=t,this.__slideState.url=e,this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:"setResource",taskId:t,url:e})},e.prototype._renderSlide=function(t){var e;return cb(this,void 0,void 0,(function(){var n=this;return hb(this,(function(r){switch(r.label){case 0:return this.renderingIndex=t,this.player&&t===this.player.currentIndex?[2]:((n_.platform.isIOS()||n_.platform.isAndroid())&&this.iosResetCache.indexOf(t)<0&&this.iosResetCache.push(t),[4,null===(e=this.player)||void 0===e?void 0:e.renderSlide(t)]);case 1:return r.sent(),this.__slideState.currentSlideIndex=t,this.resizeView(),this.__slideState.interactiveSeqState={},this.emitStateChange(),setTimeout((function(){var t,e;if("hidden"===(null===(e=null===(t=n.player)||void 0===t?void 0:t.view)||void 0===e?void 0:e.style.visibility)&&(n.player.view.style.visibility="visible"),"hidden"===n.frame.style.visibility&&(n.frame.style.visibility="visible"),n.needClearCacheImage)try{n.frame.removeChild(n.cacheImage)}catch(t){}}),100),[2]}}))}))},e.prototype.renderSlide=function(t,e){if(void 0===e&&(e=!0),this.player){var n=Number(t);(n!==this.player.currentIndex||this.renderingTaskManager.hasStartTask())&&(n>this.slideCount&&this.slideCount>0||this.poseRenderSlide(n,e))}},e.prototype.needCreateNewPlayer=function(){var t=n_.platform.isLowGpuMemory()?15:30;return(n_.platform.isIOS()||n_.platform.isAndroid())&&this.iosResetCache.length>t},e.prototype.poseRenderSlide=function(t,e){"interactive"===this.mode?this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:"renderSlide",index:t,isForward:e}):"sync"===this.mode?(this.doRenderSlide(t,e),this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:"renderSlide",index:t,isForward:e})):this.doRenderSlide(t,e)},e.prototype.doRenderSlide=function(t,e){var n,r,i,o=this;if(void 0===e&&(e=!0),!this.player)return Promise.resolve();if(this.needCreateNewPlayer()&&(this.iosResetCache=[],this.iosNewPlayer=this.initPlayer(this.config),this.iosNewPlayer.setResourceData(this.__slideState.taskId,this.__slideState.url)),this.iosNewPlayer){var a=this.player.getSnapshot();this.cacheImage.src=a,this.frame.appendChild(this.cacheImage),this.player.destroy(),null===(n=this.playerController)||void 0===n||n.destroy(),this.player=this.iosNewPlayer,this.iosNewPlayer=void 0,(null===(r=this.config)||void 0===r?void 0:r.controller)&&this.createController(),this.needClearCacheImage=!0,(null===(i=null==this?void 0:this.player)||void 0===i?void 0:i.view)&&(this.player.view.style.visibility="hidden",this.canvasContainer.appendChild(this.player.view))}var s=Math.random().toString(32).substr(2);return this.player.isForward=e,this.renderingTaskManager.addTask((function(){return o._renderSlide(t)}),t,s),new Promise((function(t){o.renderingTaskManager.eventHub.once("task-end-"+s,t)}))},e.prototype.getSnapshot=function(){var t,e;return null!==(e=null===(t=this.player)||void 0===t?void 0:t.getSnapshot())&&void 0!==e?e:null},e.prototype.nextStep=function(){!this.isLoading&&this.player&&this.interactive?(this.hasNextStep()||this.emit(vb.slideStepEnd),this.player.mainSeqHasNextStep()?"interactive"===this.mode?this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:"nextStep",next:this.player.mainSeqStep()+1}):"sync"===this.mode?(this.doNextStep(!1,""),this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:"nextStep",next:this.player.mainSeqStep()})):this.doNextStep(!1,""):this.handleNextSlide()):this.logger.info("prevent nextStep. "+this.isLoading+" "+this.player+" "+this.interactive,this.taskId)},e.prototype.doNextStep=function(t,e){if(this.player){var n=!this.config.clientId||e===this.config.clientId;this.player.nextStep(t,n);var r=this.player.mainSeqStep();this.__slideState.mainSeqStep=r,this.emitStateChange()}},e.prototype.prevStep=function(){!this.isLoading&&this.player&&this.interactive?(this.hasPrevStep()||this.emit(vb.slideStepStart),this.player.mainSeqHasPrevStep()?"interactive"===this.mode?this.emitSyncDispatch({type:"prevStep",slideIndex:this.__slideState.currentSlideIndex,next:this.player.mainSeqStep()-1}):"sync"===this.mode?(this.doPrevStep(),this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:"prevStep",next:this.player.mainSeqStep()})):this.doPrevStep():this.handlePrevSlide()):this.logger.info("prevent nextStep. "+this.isLoading+" "+this.player+" "+this.interactive,this.taskId)},e.prototype.doPrevStep=function(t){if(void 0===t&&(t=!1),this.player){this.player.prevStep(t);var e=this.player.mainSeqStep();this.__slideState.mainSeqStep=e,this.emitStateChange()}},e.prototype.isSlideStateReady=function(t){return t.taskId.length>0&&t.url.length>0&&t.currentSlideIndex>0},e.prototype.emitStateChange=function(){if("local"!==this.mode&&!this.isSyncingSlideState){var t=this.slideState;!s_()(this.lastEmitedState,t)&&this.isSlideStateReady(t)&&(this.lastEmitedState=t,this.emit(vb.stateChange,t),this.logger.info("stateChange dispatch "+JSON.stringify(this.slideState),this.taskId))}},e.prototype.emitSyncDispatch=function(t){if(!this.lock.isLocked(t.type)){var e=Math.random().toString(32).substr(2);this.lock.addLock(t.type,e);var n=lb(lb({},t),{uuid:e,clientId:this.config.clientId});"sync"===this.config.mode&&(n.incrId=this.dispatchIncrId),this.emit(vb.syncDispatch,n),this.logger.info("sync dispatch "+JSON.stringify(n),this.taskId)}},e.prototype.setMainSeqStep=function(t,e){var n;null===(n=this.player)||void 0===n||n.setMainSeqStep(t,e)},e.prototype.setInteractive=function(t){var e;this.interactive=t,null===(e=this.player)||void 0===e||e.setInteractive(t)},e.prototype.pause=function(){var t;null===(t=this.player)||void 0===t||t.pause()},e.prototype.resume=function(){var t;null===(t=this.player)||void 0===t||t.resume()},e.prototype._doFrozen=function(){var t;return cb(this,void 0,void 0,(function(){var e,n,r,i=this;return hb(this,(function(o){switch(o.label){case 0:return this.logger.info("frozen with player["+!!this.player+"]",this.taskId),this.view&&this.player?[4,this.player.clock.waitUntil((function(){return!i.isLoading}),6e4)]:[3,2];case 1:for(n in o.sent(),e=this.player.getSnapshot()||"",this.cacheImage.src=e,this.frame.appendChild(this.cacheImage),this.player.destroy(),null===(t=this.playerController)||void 0===t||t.destroy(),this.player=void 0,this.__slideState.mediaState)r=this.__slideState.mediaState[n],this.__slideState.mediaState[n]=lb(lb({},r),{frozenTime:this.timestamp()});o.label=2;case 2:return[2]}}))}))},e.prototype.frozen=function(){var t=this;this.frozenTaskManager.addTask("frozen",(function(){return t._doFrozen()}))},e.prototype._doRelease=function(){var t,e;return cb(this,void 0,void 0,(function(){var n,r,i,o;return hb(this,(function(a){switch(a.label){case 0:if(this.logger.info("do release slide",this.taskId),this.player)return[2];for(r in this.player=this.initPlayer(this.config),(null===(t=this.config)||void 0===t?void 0:t.controller)&&this.createController(),this.player.view&&(this.canvasContainer.appendChild(this.player.view),this.player.view.style.visibility="hidden"),n=this.__slideState,this.__slideState=h_()(mb),n.mediaState)"play"===(i=n.mediaState[r]).type&&(o=Math.max(null!==(e=i.frozenTime)&&void 0!==e?e:0,i.time),i.time=this.timestamp()-(o-i.time),i.frozenTime=void 0);return[4,this.setSlideState(n)];case 1:return a.sent(),[4,this.player.clock.delay(333)];case 2:a.sent(),this.player.view&&(this.player.view.style.visibility="visible");try{this.frame.removeChild(this.cacheImage)}catch(t){}return[2]}}))}))},e.prototype.release=function(){var t=this;this.frozenTaskManager.addTask("release",(function(){return t._doRelease()}))},e.prototype._doDestroy=function(){var t,n,r,i,o=this;this.logger.info("do destroy slide",this.taskId);var a=e.instances.findIndex((function(t){return t.randomId===o.randomId}));a>=0&&e.instances.splice(a,1),this.playerController&&this.playerController.destroy(),this.frameResizeObserver.disconnect(),null===(t=this.player)||void 0===t||t.removeAllListeners(),null===(n=this.player)||void 0===n||n.destroy(),null===(r=this.player)||void 0===r||r.removeAllListeners(),this.logger={warn:function(){return{}},info:function(){return{}},error:function(){return{}}},this.syncQueue.destroy(),this.renderingTaskManager.destroy(),this.frozenTaskManager.destroy(),window.removeEventListener("__slide_ref__",this.handleSlideRef),window.removeEventListener("message",this.recoverHandler),this.removeAllListeners();try{(null===(i=this.player)||void 0===i?void 0:i.view)&&this.anchor.removeChild(this.player.view),this.anchor.removeChild(this.frame)}catch(t){}},e.prototype.waitLoadEnd=function(){return cb(this,void 0,void 0,(function(){var t;return hb(this,(function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return this.isLoading&&t<10?[4,fb(100)]:[3,3];case 2:return e.sent(),t+=1,[3,1];case 3:return[2]}}))}))},e.prototype.preload=function(t){return this.player?this.player.preload(t):Promise.resolve()},e.prototype.destroy=function(){var t=this;this.logger.info("pre destroy slide",""),this.isLoading?this.waitLoadEnd().then((function(){t._doDestroy()})):this._doDestroy()},e.prototype.clearSlideCache=function(){var t;null===(t=this.player)||void 0===t||t.clearLocalCache()},e.prototype.hasNextStep=function(){if(!this.player)return!1;var t=this.player.currentIndex===this.slideCount,e=0===this.mainSeqLength||this.mainSeqStep>=this.mainSeqLength-1,n="end"===this.mainSeqState||"running"===this.mainSeqState||null==this.mainSeqState;return!(t&&e&&n)},e.prototype.hasPrevStep=function(){if(!this.player)return!1;var t=1===this.player.currentIndex,e=0===this.mainSeqLength||0===this.mainSeqStep,n="idle"===this.mainSeqState||null===this.mainSeqState;return!(t&&e&&n)},e.prototype.snapshot=function(){return cb(this,void 0,void 0,(function(){return hb(this,(function(t){return this.player?[2,this.player.getSnapshot()]:[2,null]}))}))},e.prototype.snapshotWithTimingEnd=function(t){return cb(this,void 0,void 0,(function(){return hb(this,(function(e){return this.player?[2,this.player.snapshotWithTimingEnd(t)]:[2,null]}))}))},e.prototype.updateGlobalVolume=function(t){this.volumeAdjuster.volume=t},e.prototype.getGlobalVolume=function(){return this.volumeAdjuster.volume},e.clearLocalCache=function(){n_.clearLocalCache()},e.disposeLocalCache=function(){},n=e,e.instances=[],e._tempFrozenIds=[],e._tempLog="",e._tempLogIndex=1,e.usePlugin=i_,e.handleFrozenAllSlide=function(){e.instances.forEach((function(t){t.player&&(e._tempFrozenIds.push(t.randomId),t.frozen())}))},e.handleReleaseAllSlide=function(){e._tempFrozenIds.forEach((function(t){var n=e.instances.find((function(e){return e.randomId===t}));n&&n.release()})),e._tempFrozenIds=[]},e.handleLogReport=function(t){return cb(void 0,void 0,void 0,(function(){var r,i,o,a,s,u;return hb(n,(function(n){switch(n.label){case 0:return[4,e.flushLog(!0)];case 1:if(n.sent(),!yb)return[3,12];r=[],n.label=2;case 2:return n.trys.push([2,4,,5]),[4,yb.keys()];case 3:return r=(n.sent()||[]).sort((function(t,e){return parseInt(t.replace("run_time_log_",""))-parseInt(e.replace("run_time_log_",""))})),[3,5];case 4:return n.sent(),[3,5];case 5:if(0===r.length)return window.postMessage({type:"@slide/_report_log_",log:"",index:1,total:1,customMessage:"@slide/_report_log_",sessionId:t},"*"),[2];i=0,o=r,n.label=6;case 6:if(!(i<o.length))return[3,12];a=o[i],s=a.replace("run_time_log_",""),u="",n.label=7;case 7:return n.trys.push([7,9,,10]),[4,yb.getItem(a)];case 8:return u=n.sent()||"",[3,10];case 9:return n.sent(),[3,10];case 10:window.postMessage({type:"@slide/_report_log_",log:u,index:parseInt(s,10),total:r.length,customMessage:"@slide/_report_log_",sessionId:t},"*"),n.label=11;case 11:return i++,[3,6];case 12:return[2]}}))}))},e.handleLogDownload=function(){return cb(void 0,void 0,void 0,(function(){var t,r,i,o,a,s,u;return hb(n,(function(n){switch(n.label){case 0:return n.trys.push([0,7,,8]),[4,e.flushLog(!0)];case 1:return n.sent(),t="",yb?[4,yb.keys()]:[3,6];case 2:r=(n.sent()||[]).sort((function(t,e){return parseInt(t.replace("run_time_log_",""))-parseInt(e.replace("run_time_log_",""))})),i=0,o=r,n.label=3;case 3:return i<o.length?(a=o[i],s=t,[4,yb.getItem(a)]):[3,6];case 4:t=s+(n.sent()||""),n.label=5;case 5:return i++,[3,3];case 6:return(u=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),u.setAttribute("download","slide_log"),u.style.display="none",document.body.appendChild(u),u.click(),document.body.removeChild(u),[3,8];case 7:return n.sent(),[3,8];case 8:return[2]}}))}))},function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);o>3&&a&&Object.defineProperty(e,n,a)}([(r="Slide.initConfig",function(t,e,n){var i=n.value;n.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=r_.get(r)||[],o=t,a=0,s=n;a<s.length;a++){var u=s[a];try{o=u.before(o)}catch(t){}if(!Array.isArray(o)||o.length!==t.length)throw new Error("plugin before hook return invalid args")}for(var l=i.bind(this).apply(void 0,o),c=0,h=n.reverse();c<h.length;c++){u=h[c];try{l=u.after(l)}catch(t){}if(!l)throw new Error("plugin after hook return undefined result")}return l}})],e.prototype,"initSlideConfig",null),e}(su.a);null==yb||yb.clear().catch((function(){})),window.addEventListener("__slide_log__",_b.handleLogDownload),window.addEventListener("message",(function(t){"@slide/_request_log_"===t.data.type&&_b.handleLogReport(t.data.sessionId).catch((function(){}))})),window.addEventListener("message",(function(t){"@slide/_request_frozen_"===t.data.type&&_b.handleFrozenAllSlide()})),window.addEventListener("message",(function(t){"@slide/_request_release_"===t.data.type&&_b.handleReleaseAllSlide()})),window.setInterval((function(){_b.flushLog().catch((function(){}))}),2e3)}])},4037:function(t,e,n){"use strict";var r=n(2506),i=n(9722),o=i(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"===typeof n&&o(t,".prototype.")>-1?i(n):n}},9722:function(t,e,n){"use strict";var r=n(3350),i=n(2506),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),u=i("%Object.getOwnPropertyDescriptor%",!0),l=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch(d){l=null}t.exports=function(t){var e=s(r,a,arguments);if(u&&l){var n=u(e,"length");n.configurable&&l(e,"length",{value:1+c(0,t.length-(arguments.length-1))})}return e};var h=function(){return s(r,o,arguments)};l?l(t.exports,"apply",{value:h}):t.exports.apply=h},7143:function(t){"use strict";var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||t,a),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function a(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,i,o,a){var s=n?n+t:t;if(!this._events[s])return!1;var u,l,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,i),!0;case 5:return c.fn.call(c.context,e,r,i,o),!0;case 6:return c.fn.call(c.context,e,r,i,o,a),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,r);break;case 4:c[l].fn.call(c[l].context,e,r,i);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==e||i&&!s[u].once||r&&s[u].context!==r)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s},222:function(t){"use strict";var e="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,r=Object.prototype.toString,i="[object Function]";t.exports=function(t){var o=this;if("function"!==typeof o||r.call(o)!==i)throw new TypeError(e+o);for(var a,s=n.call(arguments,1),u=function(){if(this instanceof a){var e=o.apply(this,s.concat(n.call(arguments)));return Object(e)===e?e:this}return o.apply(t,s.concat(n.call(arguments)))},l=Math.max(0,o.length-s.length),c=[],h=0;h<l;h++)c.push("$"+h);if(a=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(u),o.prototype){var d=function(){};d.prototype=o.prototype,a.prototype=new d,d.prototype=null}return a}},3350:function(t,e,n){"use strict";var r=n(222);t.exports=Function.prototype.bind||r},2506:function(t,e,n){"use strict";var r,i=SyntaxError,o=Function,a=TypeError,s=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(e){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(R){u=null}var l=function(){throw new a},c=u?function(){try{return l}catch(t){try{return u(arguments,"callee").get}catch(e){return l}}}():l,h=n(697)(),d=Object.getPrototypeOf||function(t){return t.__proto__},f={},p="undefined"===typeof Uint8Array?r:d(Uint8Array),v={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h?d([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":f,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?d(d([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&h?d((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&h?d((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?d(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":p,"%TypeError%":a,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet},m=function t(e){var n;if("%AsyncFunction%"===e)n=s("async function () {}");else if("%GeneratorFunction%"===e)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=s("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&(n=d(i.prototype))}return v[e]=n,n},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n(3350),_=n(8316),x=y.call(Function.call,Array.prototype.concat),b=y.call(Function.apply,Array.prototype.splice),T=y.call(Function.call,String.prototype.replace),w=y.call(Function.call,String.prototype.slice),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,A=function(t){var e=w(t,0,1),n=w(t,-1);if("%"===e&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return T(t,E,(function(t,e,n,i){r[r.length]=n?T(i,S,"$1"):e||t})),r},M=function(t,e){var n,r=t;if(_(g,r)&&(r="%"+(n=g[r])[0]+"%"),_(v,r)){var o=v[r];if(o===f&&(o=m(r)),"undefined"===typeof o&&!e)throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!==typeof t||0===t.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof e)throw new a('"allowMissing" argument must be a boolean');var n=A(t),r=n.length>0?n[0]:"",o=M("%"+r+"%",e),s=o.name,l=o.value,c=!1,h=o.alias;h&&(r=h[0],b(n,x([0,1],h)));for(var d=1,f=!0;d<n.length;d+=1){var p=n[d],m=w(p,0,1),g=w(p,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new i("property names with quotes must have matching quotes");if("constructor"!==p&&f||(c=!0),_(v,s="%"+(r+="."+p)+"%"))l=v[s];else if(null!=l){if(!(p in l)){if(!e)throw new a("base intrinsic for "+t+" exists, but the property is not available.");return}if(u&&d+1>=n.length){var y=u(l,p);l=(f=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:l[p]}else f=_(l,p),l=l[p];f&&!c&&(v[s]=l)}}return l}},697:function(t,e,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n(3297);t.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},3297:function(t){"use strict";t.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"===typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"===typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},8316:function(t,e,n){"use strict";var r=n(3350);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},1725:function(t){"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,o){for(var a,s,u=i(t),l=1;l<arguments.length;l++){for(var c in a=Object(arguments[l]))n.call(a,c)&&(u[c]=a[c]);if(e){s=e(a);for(var h=0;h<s.length;h++)r.call(a,s[h])&&(u[s[h]]=a[s[h]])}}return u}},2584:function(t,e,n){var r="function"===typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"===typeof i.get?i.get:null,a=r&&Map.prototype.forEach,s="function"===typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=s&&u&&"function"===typeof u.get?u.get:null,c=s&&Set.prototype.forEach,h="function"===typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"===typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"===typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,v=Object.prototype.toString,m=Function.prototype.toString,g=String.prototype.match,y=String.prototype.slice,_=String.prototype.replace,x=String.prototype.toUpperCase,b=String.prototype.toLowerCase,T=RegExp.prototype.test,w=Array.prototype.concat,E=Array.prototype.join,S=Array.prototype.slice,A=Math.floor,M="function"===typeof BigInt?BigInt.prototype.valueOf:null,R=Object.getOwnPropertySymbols,C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,P="function"===typeof Symbol&&"object"===typeof Symbol.iterator,I="function"===typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===P||"symbol")?Symbol.toStringTag:null,O=Object.prototype.propertyIsEnumerable,k=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function N(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||T.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof t){var r=t<0?-A(-t):A(t);if(r!==t){var i=String(r),o=y.call(e,i.length+1);return _.call(i,n,"$&_")+"."+_.call(_.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(e,n,"$&_")}var L=n(4654).custom,D=L&&G(L)?L:null;function F(t,e,n){var r="double"===(n.quoteStyle||e)?'"':"'";return r+t+r}function B(t){return _.call(String(t),/"/g,"&quot;")}function U(t){return"[object Array]"===z(t)&&(!I||!("object"===typeof t&&I in t))}function G(t){if(P)return t&&"object"===typeof t&&t instanceof Symbol;if("symbol"===typeof t)return!0;if(!t||"object"!==typeof t||!C)return!1;try{return C.call(t),!0}catch(e){}return!1}t.exports=function t(e,n,r,i){var s=n||{};if(H(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(H(s,"maxStringLength")&&("number"===typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!H(s,"customInspect")||s.customInspect;if("boolean"!==typeof u&&"symbol"!==u)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(H(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(H(s,"numericSeparator")&&"boolean"!==typeof s.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var v=s.numericSeparator;if("undefined"===typeof e)return"undefined";if(null===e)return"null";if("boolean"===typeof e)return e?"true":"false";if("string"===typeof e)return W(e,s);if("number"===typeof e){if(0===e)return 1/0/e>0?"0":"-0";var x=String(e);return v?N(e,x):x}if("bigint"===typeof e){var T=String(e)+"n";return v?N(e,T):T}var A="undefined"===typeof s.depth?5:s.depth;if("undefined"===typeof r&&(r=0),r>=A&&A>0&&"object"===typeof e)return U(e)?"[Array]":"[Object]";var R=function(t,e){var n;if("\t"===t.indent)n="\t";else{if(!("number"===typeof t.indent&&t.indent>0))return null;n=E.call(Array(t.indent+1)," ")}return{base:n,prev:E.call(Array(e+1),n)}}(s,r);if("undefined"===typeof i)i=[];else if(V(i,e)>=0)return"[Circular]";function L(e,n,o){if(n&&(i=S.call(i)).push(n),o){var a={depth:s.depth};return H(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),t(e,a,r+1,i)}return t(e,s,r+1,i)}if("function"===typeof e){var j=function(t){if(t.name)return t.name;var e=g.call(m.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),X=K(e,L);return"[Function"+(j?": "+j:" (anonymous)")+"]"+(X.length>0?" { "+E.call(X,", ")+" }":"")}if(G(e)){var J=P?_.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):C.call(e);return"object"!==typeof e||P?J:Y(J)}if(function(t){if(!t||"object"!==typeof t)return!1;if("undefined"!==typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"===typeof t.nodeName&&"function"===typeof t.getAttribute}(e)){for(var $="<"+b.call(String(e.nodeName)),tt=e.attributes||[],et=0;et<tt.length;et++)$+=" "+tt[et].name+"="+F(B(tt[et].value),"double",s);return $+=">",e.childNodes&&e.childNodes.length&&($+="..."),$+="</"+b.call(String(e.nodeName))+">"}if(U(e)){if(0===e.length)return"[]";var nt=K(e,L);return R&&!function(t){for(var e=0;e<t.length;e++)if(V(t[e],"\n")>=0)return!1;return!0}(nt)?"["+Q(nt,R)+"]":"[ "+E.call(nt,", ")+" ]"}if(function(t){return"[object Error]"===z(t)&&(!I||!("object"===typeof t&&I in t))}(e)){var rt=K(e,L);return"cause"in e&&!O.call(e,"cause")?"{ ["+String(e)+"] "+E.call(w.call("[cause]: "+L(e.cause),rt),", ")+" }":0===rt.length?"["+String(e)+"]":"{ ["+String(e)+"] "+E.call(rt,", ")+" }"}if("object"===typeof e&&u){if(D&&"function"===typeof e[D])return e[D]();if("symbol"!==u&&"function"===typeof e.inspect)return e.inspect()}if(function(t){if(!o||!t||"object"!==typeof t)return!1;try{o.call(t);try{l.call(t)}catch($){return!0}return t instanceof Map}catch(e){}return!1}(e)){var it=[];return a.call(e,(function(t,n){it.push(L(n,e,!0)+" => "+L(t,e))})),Z("Map",o.call(e),it,R)}if(function(t){if(!l||!t||"object"!==typeof t)return!1;try{l.call(t);try{o.call(t)}catch(e){return!0}return t instanceof Set}catch(n){}return!1}(e)){var ot=[];return c.call(e,(function(t){ot.push(L(t,e))})),Z("Set",l.call(e),ot,R)}if(function(t){if(!h||!t||"object"!==typeof t)return!1;try{h.call(t,h);try{d.call(t,d)}catch($){return!0}return t instanceof WeakMap}catch(e){}return!1}(e))return q("WeakMap");if(function(t){if(!d||!t||"object"!==typeof t)return!1;try{d.call(t,d);try{h.call(t,h)}catch($){return!0}return t instanceof WeakSet}catch(e){}return!1}(e))return q("WeakSet");if(function(t){if(!f||!t||"object"!==typeof t)return!1;try{return f.call(t),!0}catch(e){}return!1}(e))return q("WeakRef");if(function(t){return"[object Number]"===z(t)&&(!I||!("object"===typeof t&&I in t))}(e))return Y(L(Number(e)));if(function(t){if(!t||"object"!==typeof t||!M)return!1;try{return M.call(t),!0}catch(e){}return!1}(e))return Y(L(M.call(e)));if(function(t){return"[object Boolean]"===z(t)&&(!I||!("object"===typeof t&&I in t))}(e))return Y(p.call(e));if(function(t){return"[object String]"===z(t)&&(!I||!("object"===typeof t&&I in t))}(e))return Y(L(String(e)));if(!function(t){return"[object Date]"===z(t)&&(!I||!("object"===typeof t&&I in t))}(e)&&!function(t){return"[object RegExp]"===z(t)&&(!I||!("object"===typeof t&&I in t))}(e)){var at=K(e,L),st=k?k(e)===Object.prototype:e instanceof Object||e.constructor===Object,ut=e instanceof Object?"":"null prototype",lt=!st&&I&&Object(e)===e&&I in e?y.call(z(e),8,-1):ut?"Object":"",ct=(st||"function"!==typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(lt||ut?"["+E.call(w.call([],lt||[],ut||[]),": ")+"] ":"");return 0===at.length?ct+"{}":R?ct+"{"+Q(at,R)+"}":ct+"{ "+E.call(at,", ")+" }"}return String(e)};var j=Object.prototype.hasOwnProperty||function(t){return t in this};function H(t,e){return j.call(t,e)}function z(t){return v.call(t)}function V(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function W(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return W(y.call(t,0,e.maxStringLength),e)+r}return F(_.call(_.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,X),"single",e)}function X(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+x.call(e.toString(16))}function Y(t){return"Object("+t+")"}function q(t){return t+" { ? }"}function Z(t,e,n,r){return t+" ("+e+") {"+(r?Q(n,r):E.call(n,", "))+"}"}function Q(t,e){if(0===t.length)return"";var n="\n"+e.prev+e.base;return n+E.call(t,","+n)+"\n"+e.prev}function K(t,e){var n=U(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=H(t,i)?e(t[i],t):""}var o,a="function"===typeof R?R(t):[];if(P){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var u in t)H(t,u)&&(n&&String(Number(u))===u&&u<t.length||P&&o["$"+u]instanceof Symbol||(T.call(/[^\w$]/,u)?r.push(e(u,t)+": "+e(t[u],t)):r.push(u+": "+e(t[u],t))));if("function"===typeof R)for(var l=0;l<a.length;l++)O.call(t,a[l])&&r.push("["+e(a[l])+"]: "+e(t[a[l]],t));return r}},9874:function(t){"use strict";var e=String.prototype.replace,n=/%20/g,r="RFC1738",i="RFC3986";t.exports={default:i,formatters:{RFC1738:function(t){return e.call(t,n,"+")},RFC3986:function(t){return String(t)}},RFC1738:r,RFC3986:i}},2808:function(t,e,n){"use strict";var r=n(2334),i=n(4360),o=n(9874);t.exports={formats:o,parse:i,stringify:r}},4360:function(t,e,n){"use strict";var r=n(4184),i=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},u=function(t,e){return t&&"string"===typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},l=function(t,e,n,r){if(t){var o=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/g,s=n.depth>0&&/(\[[^[\]]*])/.exec(o),l=s?o.slice(0,s.index):o,c=[];if(l){if(!n.plainObjects&&i.call(Object.prototype,l)&&!n.allowPrototypes)return;c.push(l)}for(var h=0;n.depth>0&&null!==(s=a.exec(o))&&h<n.depth;){if(h+=1,!n.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+o.slice(s.index)+"]"),function(t,e,n,r){for(var i=r?e:u(e,n),o=t.length-1;o>=0;--o){var a,s=t[o];if("[]"===s&&n.parseArrays)a=[].concat(i);else{a=n.plainObjects?Object.create(null):{};var l="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(l,10);n.parseArrays||""!==l?!isNaN(c)&&s!==l&&String(c)===l&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(a=[])[c]=i:"__proto__"!==l&&(a[l]=i):a={0:i}}i=a}return i}(c,e,n,r)}};t.exports=function(t,e){var n=function(t){if(!t)return a;if(null!==t.decoder&&void 0!==t.decoder&&"function"!==typeof t.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e="undefined"===typeof t.charset?a.charset:t.charset;return{allowDots:"undefined"===typeof t.allowDots?a.allowDots:!!t.allowDots,allowPrototypes:"boolean"===typeof t.allowPrototypes?t.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"===typeof t.allowSparse?t.allowSparse:a.allowSparse,arrayLimit:"number"===typeof t.arrayLimit?t.arrayLimit:a.arrayLimit,charset:e,charsetSentinel:"boolean"===typeof t.charsetSentinel?t.charsetSentinel:a.charsetSentinel,comma:"boolean"===typeof t.comma?t.comma:a.comma,decoder:"function"===typeof t.decoder?t.decoder:a.decoder,delimiter:"string"===typeof t.delimiter||r.isRegExp(t.delimiter)?t.delimiter:a.delimiter,depth:"number"===typeof t.depth||!1===t.depth?+t.depth:a.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof t.interpretNumericEntities?t.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"===typeof t.parameterLimit?t.parameterLimit:a.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"===typeof t.plainObjects?t.plainObjects:a.plainObjects,strictNullHandling:"boolean"===typeof t.strictNullHandling?t.strictNullHandling:a.strictNullHandling}}(e);if(""===t||null===t||"undefined"===typeof t)return n.plainObjects?Object.create(null):{};for(var c="string"===typeof t?function(t,e){var n,l={},c=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,h=e.parameterLimit===1/0?void 0:e.parameterLimit,d=c.split(e.delimiter,h),f=-1,p=e.charset;if(e.charsetSentinel)for(n=0;n<d.length;++n)0===d[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[n]?p="utf-8":"utf8=%26%2310003%3B"===d[n]&&(p="iso-8859-1"),f=n,n=d.length);for(n=0;n<d.length;++n)if(n!==f){var v,m,g=d[n],y=g.indexOf("]="),_=-1===y?g.indexOf("="):y+1;-1===_?(v=e.decoder(g,a.decoder,p,"key"),m=e.strictNullHandling?null:""):(v=e.decoder(g.slice(0,_),a.decoder,p,"key"),m=r.maybeMap(u(g.slice(_+1),e),(function(t){return e.decoder(t,a.decoder,p,"value")}))),m&&e.interpretNumericEntities&&"iso-8859-1"===p&&(m=s(m)),g.indexOf("[]=")>-1&&(m=o(m)?[m]:m),i.call(l,v)?l[v]=r.combine(l[v],m):l[v]=m}return l}(t,n):t,h=n.plainObjects?Object.create(null):{},d=Object.keys(c),f=0;f<d.length;++f){var p=d[f],v=l(p,c[p],n,"string"===typeof t);h=r.merge(h,v,n)}return!0===n.allowSparse?h:r.compact(h)}},2334:function(t,e,n){"use strict";var r=n(581),i=n(4184),o=n(9874),a=Object.prototype.hasOwnProperty,s={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},u=Array.isArray,l=String.prototype.split,c=Array.prototype.push,h=function(t,e){c.apply(t,u(e)?e:[e])},d=Date.prototype.toISOString,f=o.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:f,formatter:o.formatters[f],indices:!1,serializeDate:function(t){return d.call(t)},skipNulls:!1,strictNullHandling:!1},v={},m=function t(e,n,o,a,s,c,d,f,m,g,y,_,x,b,T,w){for(var E,S=e,A=w,M=0,R=!1;void 0!==(A=A.get(v))&&!R;){var C=A.get(e);if(M+=1,"undefined"!==typeof C){if(C===M)throw new RangeError("Cyclic object value");R=!0}"undefined"===typeof A.get(v)&&(M=0)}if("function"===typeof f?S=f(n,S):S instanceof Date?S=y(S):"comma"===o&&u(S)&&(S=i.maybeMap(S,(function(t){return t instanceof Date?y(t):t}))),null===S){if(s)return d&&!b?d(n,p.encoder,T,"key",_):n;S=""}if("string"===typeof(E=S)||"number"===typeof E||"boolean"===typeof E||"symbol"===typeof E||"bigint"===typeof E||i.isBuffer(S)){if(d){var P=b?n:d(n,p.encoder,T,"key",_);if("comma"===o&&b){for(var I=l.call(String(S),","),O="",k=0;k<I.length;++k)O+=(0===k?"":",")+x(d(I[k],p.encoder,T,"value",_));return[x(P)+(a&&u(S)&&1===I.length?"[]":"")+"="+O]}return[x(P)+"="+x(d(S,p.encoder,T,"value",_))]}return[x(n)+"="+x(String(S))]}var N,L=[];if("undefined"===typeof S)return L;if("comma"===o&&u(S))N=[{value:S.length>0?S.join(",")||null:void 0}];else if(u(f))N=f;else{var D=Object.keys(S);N=m?D.sort(m):D}for(var F=a&&u(S)&&1===S.length?n+"[]":n,B=0;B<N.length;++B){var U=N[B],G="object"===typeof U&&"undefined"!==typeof U.value?U.value:S[U];if(!c||null!==G){var j=u(S)?"function"===typeof o?o(F,U):F:F+(g?"."+U:"["+U+"]");w.set(e,M);var H=r();H.set(v,w),h(L,t(G,j,o,a,s,c,d,f,m,g,y,_,x,b,T,H))}}return L};t.exports=function(t,e){var n,i=t,l=function(t){if(!t)return p;if(null!==t.encoder&&"undefined"!==typeof t.encoder&&"function"!==typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||p.charset;if("undefined"!==typeof t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o.default;if("undefined"!==typeof t.format){if(!a.call(o.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var r=o.formatters[n],i=p.filter;return("function"===typeof t.filter||u(t.filter))&&(i=t.filter),{addQueryPrefix:"boolean"===typeof t.addQueryPrefix?t.addQueryPrefix:p.addQueryPrefix,allowDots:"undefined"===typeof t.allowDots?p.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"===typeof t.charsetSentinel?t.charsetSentinel:p.charsetSentinel,delimiter:"undefined"===typeof t.delimiter?p.delimiter:t.delimiter,encode:"boolean"===typeof t.encode?t.encode:p.encode,encoder:"function"===typeof t.encoder?t.encoder:p.encoder,encodeValuesOnly:"boolean"===typeof t.encodeValuesOnly?t.encodeValuesOnly:p.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:"function"===typeof t.serializeDate?t.serializeDate:p.serializeDate,skipNulls:"boolean"===typeof t.skipNulls?t.skipNulls:p.skipNulls,sort:"function"===typeof t.sort?t.sort:null,strictNullHandling:"boolean"===typeof t.strictNullHandling?t.strictNullHandling:p.strictNullHandling}}(e);"function"===typeof l.filter?i=(0,l.filter)("",i):u(l.filter)&&(n=l.filter);var c,d=[];if("object"!==typeof i||null===i)return"";c=e&&e.arrayFormat in s?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var f=s[c];if(e&&"commaRoundTrip"in e&&"boolean"!==typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var v="comma"===f&&e&&e.commaRoundTrip;n||(n=Object.keys(i)),l.sort&&n.sort(l.sort);for(var g=r(),y=0;y<n.length;++y){var _=n[y];l.skipNulls&&null===i[_]||h(d,m(i[_],_,f,v,l.strictNullHandling,l.skipNulls,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.format,l.formatter,l.encodeValuesOnly,l.charset,g))}var x=d.join(l.delimiter),b=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),x.length>0?b+x:""}},4184:function(t,e,n){"use strict";var r=n(9874),i=Object.prototype.hasOwnProperty,o=Array.isArray,a=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),s=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)"undefined"!==typeof t[r]&&(n[r]=t[r]);return n};t.exports={arrayToObject:s,assign:function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var i=e[r],a=i.obj[i.prop],s=Object.keys(a),u=0;u<s.length;++u){var l=s[u],c=a[l];"object"===typeof c&&null!==c&&-1===n.indexOf(c)&&(e.push({obj:a,prop:l}),n.push(c))}return function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(o(n)){for(var r=[],i=0;i<n.length;++i)"undefined"!==typeof n[i]&&r.push(n[i]);e.obj[e.prop]=r}}}(e),t},decode:function(t,e,n){var r=t.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(i){return r}},encode:function(t,e,n,i,o){if(0===t.length)return t;var s=t;if("symbol"===typeof t?s=Symbol.prototype.toString.call(t):"string"!==typeof t&&(s=String(t)),"iso-8859-1"===n)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var u="",l=0;l<s.length;++l){var c=s.charCodeAt(l);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===r.RFC1738&&(40===c||41===c)?u+=s.charAt(l):c<128?u+=a[c]:c<2048?u+=a[192|c>>6]+a[128|63&c]:c<55296||c>=57344?u+=a[224|c>>12]+a[128|c>>6&63]+a[128|63&c]:(l+=1,c=65536+((1023&c)<<10|1023&s.charCodeAt(l)),u+=a[240|c>>18]+a[128|c>>12&63]+a[128|c>>6&63]+a[128|63&c])}return u},isBuffer:function(t){return!(!t||"object"!==typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(o(t)){for(var n=[],r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)},merge:function t(e,n,r){if(!n)return e;if("object"!==typeof n){if(o(e))e.push(n);else{if(!e||"object"!==typeof e)return[e,n];(r&&(r.plainObjects||r.allowPrototypes)||!i.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||"object"!==typeof e)return[e].concat(n);var a=e;return o(e)&&!o(n)&&(a=s(e,r)),o(e)&&o(n)?(n.forEach((function(n,o){if(i.call(e,o)){var a=e[o];a&&"object"===typeof a&&n&&"object"===typeof n?e[o]=t(a,n,r):e.push(n)}else e[o]=n})),e):Object.keys(n).reduce((function(e,o){var a=n[o];return i.call(e,o)?e[o]=t(e[o],a,r):e[o]=a,e}),a)}}},4463:function(t,e,n){"use strict";var r=n(2791),i=n(1725),o=n(5296);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(u[t]=e,t=0;t<e.length;t++)s.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},v={};function m(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function _(t){return t[1].toUpperCase()}function x(t,e,n,r){var i=g.hasOwnProperty(e)?g[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!f.call(v,t)||!f.call(p,t)&&(d.test(t)?v[t]=!0:(p[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,_);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,_);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,_);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=60103,w=60106,E=60107,S=60108,A=60114,M=60109,R=60110,C=60112,P=60113,I=60120,O=60115,k=60116,N=60121,L=60128,D=60129,F=60130,B=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;T=U("react.element"),w=U("react.portal"),E=U("react.fragment"),S=U("react.strict_mode"),A=U("react.profiler"),M=U("react.provider"),R=U("react.context"),C=U("react.forward_ref"),P=U("react.suspense"),I=U("react.suspense_list"),O=U("react.memo"),k=U("react.lazy"),N=U("react.block"),U("react.scope"),L=U("react.opaque.id"),D=U("react.debug_trace_mode"),F=U("react.offscreen"),B=U("react.legacy_hidden")}var G,j="function"===typeof Symbol&&Symbol.iterator;function H(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=j&&t[j]||t["@@iterator"])?t:null}function z(t){if(void 0===G)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);G=e&&e[1]||""}return"\n"+G+t}var V=!1;function W(t,e){if(!t||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{V=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?z(t):""}function X(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=W(t.type,!1);case 11:return t=W(t.type.render,!1);case 22:return t=W(t.type._render,!1);case 1:return t=W(t.type,!0);default:return""}}function Y(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case E:return"Fragment";case w:return"Portal";case A:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case I:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case R:return(t.displayName||"Context")+".Consumer";case M:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case O:return Y(t.type);case N:return Y(t._render);case k:e=t._payload,t=t._init;try{return Y(t(e))}catch(n){}}return null}function q(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Z(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Q(t){t._valueTracker||(t._valueTracker=function(t){var e=Z(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function K(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Z(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function J(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function $(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=q(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&x(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=q(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?it(t,e.type,n):e.hasOwnProperty("defaultValue")&&it(t,e.type,q(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function rt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function it(t,e,n){"number"===e&&J(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function ot(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function at(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+q(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function st(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ut(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:q(n)}}function lt(t,e){var n=q(e.value),r=q(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function ct(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml",dt="http://www.w3.org/2000/svg";function ft(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?ft(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var vt,mt,gt=(mt=function(t,e){if(t.namespaceURI!==dt||"innerHTML"in t)t.innerHTML=e;else{for((vt=vt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return mt(t,e)}))}:mt);function yt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var _t={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xt=["Webkit","ms","Moz","O"];function bt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||_t.hasOwnProperty(t)&&_t[t]?(""+e).trim():e+"px"}function Tt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=bt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(_t).forEach((function(t){xt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_t[e]=_t[t]}))}));var wt=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Et(t,e){if(e){if(wt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62))}}function St(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function At(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Mt=null,Rt=null,Ct=null;function Pt(t){if(t=ri(t)){if("function"!==typeof Mt)throw Error(a(280));var e=t.stateNode;e&&(e=oi(e),Mt(t.stateNode,t.type,e))}}function It(t){Rt?Ct?Ct.push(t):Ct=[t]:Rt=t}function Ot(){if(Rt){var t=Rt,e=Ct;if(Ct=Rt=null,Pt(t),e)for(t=0;t<e.length;t++)Pt(e[t])}}function kt(t,e){return t(e)}function Nt(t,e,n,r,i){return t(e,n,r,i)}function Lt(){}var Dt=kt,Ft=!1,Bt=!1;function Ut(){null===Rt&&null===Ct||(Lt(),Ot())}function Gt(t,e){var n=t.stateNode;if(null===n)return null;var r=oi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}var jt=!1;if(h)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){jt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(mt){jt=!1}function zt(t,e,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Vt=!1,Wt=null,Xt=!1,Yt=null,qt={onError:function(t){Vt=!0,Wt=t}};function Zt(t,e,n,r,i,o,a,s,u){Vt=!1,Wt=null,zt.apply(qt,arguments)}function Qt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Kt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Jt(t){if(Qt(t)!==t)throw Error(a(188))}function $t(t){if(t=function(t){var e=t.alternate;if(!e){if(null===(e=Qt(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Jt(i),t;if(o===r)return Jt(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t),!t)return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function te(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var ee,ne,re,ie,oe=!1,ae=[],se=null,ue=null,le=null,ce=new Map,he=new Map,de=[],fe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pe(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function ve(t,e){switch(t){case"focusin":case"focusout":se=null;break;case"dragenter":case"dragleave":ue=null;break;case"mouseover":case"mouseout":le=null;break;case"pointerover":case"pointerout":ce.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":he.delete(e.pointerId)}}function me(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=pe(e,n,r,i,o),null!==e&&(null!==(e=ri(e))&&ne(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function ge(t){var e=ni(t.target);if(null!==e){var n=Qt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Kt(n)))return t.blockedOn=e,void ie(t.lanePriority,(function(){o.unstable_runWithPriority(t.priority,(function(){re(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ye(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=ri(n))&&ne(e),t.blockedOn=n,!1;e.shift()}return!0}function _e(t,e,n){ye(t)&&n.delete(e)}function xe(){for(oe=!1;0<ae.length;){var t=ae[0];if(null!==t.blockedOn){null!==(t=ri(t.blockedOn))&&ee(t);break}for(var e=t.targetContainers;0<e.length;){var n=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&ae.shift()}null!==se&&ye(se)&&(se=null),null!==ue&&ye(ue)&&(ue=null),null!==le&&ye(le)&&(le=null),ce.forEach(_e),he.forEach(_e)}function be(t,e){t.blockedOn===e&&(t.blockedOn=null,oe||(oe=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,xe)))}function Te(t){function e(e){return be(e,t)}if(0<ae.length){be(ae[0],t);for(var n=1;n<ae.length;n++){var r=ae[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==se&&be(se,t),null!==ue&&be(ue,t),null!==le&&be(le,t),ce.forEach(e),he.forEach(e),n=0;n<de.length;n++)(r=de[n]).blockedOn===t&&(r.blockedOn=null);for(;0<de.length&&null===(n=de[0]).blockedOn;)ge(n),null===n.blockedOn&&de.shift()}function we(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ee={animationend:we("Animation","AnimationEnd"),animationiteration:we("Animation","AnimationIteration"),animationstart:we("Animation","AnimationStart"),transitionend:we("Transition","TransitionEnd")},Se={},Ae={};function Me(t){if(Se[t])return Se[t];if(!Ee[t])return t;var e,n=Ee[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ae)return Se[t]=n[e];return t}h&&(Ae=document.createElement("div").style,"AnimationEvent"in window||(delete Ee.animationend.animation,delete Ee.animationiteration.animation,delete Ee.animationstart.animation),"TransitionEvent"in window||delete Ee.transitionend.transition);var Re=Me("animationend"),Ce=Me("animationiteration"),Pe=Me("animationstart"),Ie=Me("transitionend"),Oe=new Map,ke=new Map,Ne=["abort","abort",Re,"animationEnd",Ce,"animationIteration",Pe,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ie,"transitionEnd","waiting","waiting"];function Le(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),ke.set(r,e),Oe.set(r,i),l(i,[r])}}(0,o.unstable_now)();var De=8;function Fe(t){if(0!==(1&t))return De=15,1;if(0!==(2&t))return De=14,2;if(0!==(4&t))return De=13,4;var e=24&t;return 0!==e?(De=12,e):0!==(32&t)?(De=11,32):0!==(e=192&t)?(De=10,e):0!==(256&t)?(De=9,256):0!==(e=3584&t)?(De=8,e):0!==(4096&t)?(De=7,4096):0!==(e=4186112&t)?(De=6,e):0!==(e=62914560&t)?(De=5,e):67108864&t?(De=4,67108864):0!==(134217728&t)?(De=3,134217728):0!==(e=805306368&t)?(De=2,e):0!==(1073741824&t)?(De=1,1073741824):(De=8,t)}function Be(t,e){var n=t.pendingLanes;if(0===n)return De=0;var r=0,i=0,o=t.expiredLanes,a=t.suspendedLanes,s=t.pingedLanes;if(0!==o)r=o,i=De=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Fe(u),i=De):0!==(s&=o)&&(r=Fe(s),i=De)}else 0!==(o=n&~a)?(r=Fe(o),i=De):0!==s&&(r=Fe(s),i=De);if(0===r)return 0;if(r=n&((0>(r=31-Ve(r))?0:1<<r)<<1)-1,0!==e&&e!==r&&0===(e&a)){if(Fe(e),i<=De)return e;De=i}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-Ve(e)),r|=t[n],e&=~i;return r}function Ue(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Ge(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=je(24&~e))?Ge(10,e):t;case 10:return 0===(t=je(192&~e))?Ge(8,e):t;case 8:return 0===(t=je(3584&~e))&&(0===(t=je(4186112&~e))&&(t=512)),t;case 2:return 0===(e=je(805306368&~e))&&(e=268435456),e}throw Error(a(358,t))}function je(t){return t&-t}function He(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ze(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,(t=t.eventTimes)[e=31-Ve(e)]=n}var Ve=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(We(t)/Xe|0)|0},We=Math.log,Xe=Math.LN2;var Ye=o.unstable_UserBlockingPriority,qe=o.unstable_runWithPriority,Ze=!0;function Qe(t,e,n,r){Ft||Lt();var i=Je,o=Ft;Ft=!0;try{Nt(i,t,e,n,r)}finally{(Ft=o)||Ut()}}function Ke(t,e,n,r){qe(Ye,Je.bind(null,t,e,n,r))}function Je(t,e,n,r){var i;if(Ze)if((i=0===(4&e))&&0<ae.length&&-1<fe.indexOf(t))t=pe(null,t,e,n,r),ae.push(t);else{var o=$e(t,e,n,r);if(null===o)i&&ve(t,r);else{if(i){if(-1<fe.indexOf(t))return t=pe(o,t,e,n,r),void ae.push(t);if(function(t,e,n,r,i){switch(e){case"focusin":return se=me(se,t,e,n,r,i),!0;case"dragenter":return ue=me(ue,t,e,n,r,i),!0;case"mouseover":return le=me(le,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ce.set(o,me(ce.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,he.set(o,me(he.get(o)||null,t,e,n,r,i)),!0}return!1}(o,t,e,n,r))return;ve(t,r)}Lr(t,e,r,null,n)}}}function $e(t,e,n,r){var i=At(r);if(null!==(i=ni(i))){var o=Qt(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Kt(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Lr(t,e,r,i,n),null}var tn=null,en=null,nn=null;function rn(){if(nn)return nn;var t,e,n=en,r=n.length,i="value"in tn?tn.value:tn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return nn=i.slice(t,1<e?1-e:void 0)}function on(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function an(){return!0}function sn(){return!1}function un(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:sn,this.isPropagationStopped=sn,this}return i(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),e}var ln,cn,hn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=un(dn),pn=i({},dn,{view:0,detail:0}),vn=un(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hn&&(hn&&"mousemove"===t.type?(ln=t.screenX-hn.screenX,cn=t.screenY-hn.screenY):cn=ln=0,hn=t),ln)},movementY:function(t){return"movementY"in t?t.movementY:cn}}),gn=un(mn),yn=un(i({},mn,{dataTransfer:0})),_n=un(i({},pn,{relatedTarget:0})),xn=un(i({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},dn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tn=un(bn),wn=un(i({},dn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=An[t])&&!!e[t]}function Rn(){return Mn}var Cn=i({},pn,{key:function(t){if(t.key){var e=En[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=on(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Sn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rn,charCode:function(t){return"keypress"===t.type?on(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?on(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Pn=un(Cn),In=un(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rn})),kn=un(i({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=i({},mn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=un(Nn),Dn=[9,13,27,32],Fn=h&&"CompositionEvent"in window,Bn=null;h&&"documentMode"in document&&(Bn=document.documentMode);var Un=h&&"TextEvent"in window&&!Bn,Gn=h&&(!Fn||Bn&&8<Bn&&11>=Bn),jn=String.fromCharCode(32),Hn=!1;function zn(t,e){switch(t){case"keyup":return-1!==Dn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Wn=!1;var Xn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Xn[t.type]:"textarea"===e}function qn(t,e,n,r){It(r),0<(e=Fr(e,"onChange")).length&&(n=new fn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zn=null,Qn=null;function Kn(t){Cr(t,0)}function Jn(t){if(K(ii(t)))return t}function $n(t,e){if("change"===t)return e}var tr=!1;if(h){var er;if(h){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}er=nr}else er=!1;tr=er&&(!document.documentMode||9<document.documentMode)}function ir(){Zn&&(Zn.detachEvent("onpropertychange",or),Qn=Zn=null)}function or(t){if("value"===t.propertyName&&Jn(Qn)){var e=[];if(qn(e,Qn,t,At(t)),t=Kn,Ft)t(e);else{Ft=!0;try{kt(t,e)}finally{Ft=!1,Ut()}}}}function ar(t,e,n){"focusin"===t?(ir(),Qn=n,(Zn=e).attachEvent("onpropertychange",or)):"focusout"===t&&ir()}function sr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Jn(Qn)}function ur(t,e){if("click"===t)return Jn(e)}function lr(t,e){if("input"===t||"change"===t)return Jn(e)}var cr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},hr=Object.prototype.hasOwnProperty;function dr(t,e){if(cr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!hr.call(e,n[r])||!cr(t[n[r]],e[n[r]]))return!1;return!0}function fr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pr(t,e){var n,r=fr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=fr(r)}}function vr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?vr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function mr(){for(var t=window,e=J();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=J((t=e.contentWindow).document)}return e}function gr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,_r=null,xr=null,br=null,Tr=!1;function wr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Tr||null==_r||_r!==J(r)||("selectionStart"in(r=_r)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&dr(br,r)||(br=r,0<(r=Fr(xr,"onSelect")).length&&(e=new fn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_r)))}Le("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Le("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Le(Ne,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sr=0;Sr<Er.length;Sr++)ke.set(Er[Sr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ar));function Rr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,o,s,u,l){if(Zt.apply(this,arguments),Vt){if(!Vt)throw Error(a(198));var c=Wt;Vt=!1,Wt=null,Xt||(Xt=!0,Yt=c)}}(r,e,void 0,t),t.currentTarget=null}function Cr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break t;Rr(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break t;Rr(i,s,l),o=u}}}if(Xt)throw t=Yt,Xt=!1,Yt=null,t}function Pr(t,e){var n=ai(e),r=t+"__bubble";n.has(r)||(Nr(e,t,2,!1),n.add(r))}var Ir="_reactListening"+Math.random().toString(36).slice(2);function Or(t){t[Ir]||(t[Ir]=!0,s.forEach((function(e){Mr.has(e)||kr(e,!1,t,null),kr(e,!0,t,null)})))}function kr(t,e,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===t&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!e&&Mr.has(t)){if("scroll"!==t)return;i|=2,o=r}var a=ai(o),s=t+"__"+(e?"capture":"bubble");a.has(s)||(e&&(i|=4),Nr(o,t,i,e),a.add(s))}function Nr(t,e,n,r){var i=ke.get(e);switch(void 0===i?2:i){case 0:i=Qe;break;case 1:i=Ke;break;default:i=Je}n=i.bind(null,e,n,t),i=void 0,!jt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Lr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=ni(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue t}s=s.parentNode}}r=r.return}!function(t,e,n){if(Bt)return t(e,n);Bt=!0;try{Dt(t,e,n)}finally{Bt=!1,Ut()}}((function(){var r=o,i=At(n),a=[];t:{var s=Oe.get(t);if(void 0!==s){var u=fn,l=t;switch(t){case"keypress":if(0===on(n))break t;case"keydown":case"keyup":u=Pn;break;case"focusin":l="focus",u=_n;break;case"focusout":l="blur",u=_n;break;case"beforeblur":case"afterblur":u=_n;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=On;break;case Re:case Ce:case Pe:u=xn;break;case Ie:u=kn;break;case"scroll":u=vn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=Tn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var c=0!==(4&e),h=!c&&"scroll"===t,d=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var v=(f=p).stateNode;if(5===f.tag&&null!==v&&(f=v,null!==d&&(null!=(v=Gt(p,d))&&c.push(Dr(p,v,f)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&e)){if(u="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(l=n.relatedTarget||n.fromElement)||!ni(l)&&!l[ti])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?ni(l):null)&&(l!==(h=Qt(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=gn,v="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(c=In,v="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==u?s:ii(u),f=null==l?s:ii(l),(s=new c(v,p+"leave",u,n,i)).target=h,s.relatedTarget=f,v=null,ni(i)===r&&((c=new c(d,p+"enter",l,n,i)).target=f,c.relatedTarget=h,v=c),h=v,u&&l)t:{for(d=l,p=0,f=c=u;f;f=Br(f))p++;for(f=0,v=d;v;v=Br(v))f++;for(;0<p-f;)c=Br(c),p--;for(;0<f-p;)d=Br(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break t;c=Br(c),d=Br(d)}c=null}else c=null;null!==u&&Ur(a,s,u,c,!1),null!==l&&null!==h&&Ur(a,h,l,c,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=$n;else if(Yn(s))if(tr)m=lr;else{m=sr;var g=ar}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ur);switch(m&&(m=m(t,r))?qn(a,m,n,i):(g&&g(t,s,r),"focusout"===t&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&it(s,"number",s.value)),g=r?ii(r):window,t){case"focusin":(Yn(g)||"true"===g.contentEditable)&&(_r=g,xr=r,br=null);break;case"focusout":br=xr=_r=null;break;case"mousedown":Tr=!0;break;case"contextmenu":case"mouseup":case"dragend":Tr=!1,wr(a,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":wr(a,n,i)}var y;if(Fn)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Wn?zn(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(Gn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Wn&&(y=rn()):(en="value"in(tn=i)?tn.value:tn.textContent,Wn=!0)),0<(g=Fr(r,_)).length&&(_=new wn(_,t,null,n,i),a.push({event:_,listeners:g}),y?_.data=y:null!==(y=Vn(n))&&(_.data=y))),(y=Un?function(t,e){switch(t){case"compositionend":return Vn(e);case"keypress":return 32!==e.which?null:(Hn=!0,jn);case"textInput":return(t=e.data)===jn&&Hn?null:t;default:return null}}(t,n):function(t,e){if(Wn)return"compositionend"===t||!Fn&&zn(t,e)?(t=rn(),nn=en=tn=null,Wn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Cr(a,e)}))}function Dr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Gt(t,n))&&r.unshift(Dr(t,o,i)),null!=(o=Gt(t,e))&&r.push(Dr(t,o,i))),t=t.return}return r}function Br(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Ur(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Gt(n,o))&&a.unshift(Dr(n,u,s)):i||null!=(u=Gt(n,o))&&a.push(Dr(n,u,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}function Gr(){}var jr=null,Hr=null;function zr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Vr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,Xr="function"===typeof clearTimeout?clearTimeout:void 0;function Yr(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function qr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Zr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Qr=0;var Kr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Kr,$r="__reactProps$"+Kr,ti="__reactContainer$"+Kr,ei="__reactEvents$"+Kr;function ni(t){var e=t[Jr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ti]||n[Jr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Zr(t);null!==t;){if(n=t[Jr])return n;t=Zr(t)}return e}n=(t=n).parentNode}return null}function ri(t){return!(t=t[Jr]||t[ti])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function ii(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function oi(t){return t[$r]||null}function ai(t){var e=t[ei];return void 0===e&&(e=t[ei]=new Set),e}var si=[],ui=-1;function li(t){return{current:t}}function ci(t){0>ui||(t.current=si[ui],si[ui]=null,ui--)}function hi(t,e){ui++,si[ui]=t.current,t.current=e}var di={},fi=li(di),pi=li(!1),vi=di;function mi(t,e){var n=t.type.contextTypes;if(!n)return di;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function gi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function yi(){ci(pi),ci(fi)}function _i(t,e,n){if(fi.current!==di)throw Error(a(168));hi(fi,e),hi(pi,n)}function xi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,Y(e)||"Unknown",o));return i({},n,r)}function bi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||di,vi=fi.current,hi(fi,t),hi(pi,pi.current),!0}function Ti(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=xi(t,e,vi),r.__reactInternalMemoizedMergedChildContext=t,ci(pi),ci(fi),hi(fi,t)):ci(pi),hi(pi,n)}var wi=null,Ei=null,Si=o.unstable_runWithPriority,Ai=o.unstable_scheduleCallback,Mi=o.unstable_cancelCallback,Ri=o.unstable_shouldYield,Ci=o.unstable_requestPaint,Pi=o.unstable_now,Ii=o.unstable_getCurrentPriorityLevel,Oi=o.unstable_ImmediatePriority,ki=o.unstable_UserBlockingPriority,Ni=o.unstable_NormalPriority,Li=o.unstable_LowPriority,Di=o.unstable_IdlePriority,Fi={},Bi=void 0!==Ci?Ci:function(){},Ui=null,Gi=null,ji=!1,Hi=Pi(),zi=1e4>Hi?Pi:function(){return Pi()-Hi};function Vi(){switch(Ii()){case Oi:return 99;case ki:return 98;case Ni:return 97;case Li:return 96;case Di:return 95;default:throw Error(a(332))}}function Wi(t){switch(t){case 99:return Oi;case 98:return ki;case 97:return Ni;case 96:return Li;case 95:return Di;default:throw Error(a(332))}}function Xi(t,e){return t=Wi(t),Si(t,e)}function Yi(t,e,n){return t=Wi(t),Ai(t,e,n)}function qi(){if(null!==Gi){var t=Gi;Gi=null,Mi(t)}Zi()}function Zi(){if(!ji&&null!==Ui){ji=!0;var t=0;try{var e=Ui;Xi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(t+1)),Ai(Oi,qi),n}finally{ji=!1}}}var Qi=b.ReactCurrentBatchConfig;function Ki(t,e){if(t&&t.defaultProps){for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var Ji=li(null),$i=null,to=null,eo=null;function no(){eo=to=$i=null}function ro(t){var e=Ji.current;ci(Ji),t.type._context._currentValue=e}function io(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function oo(t,e){$i=t,eo=to=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Fa=!0),t.firstContext=null)}function ao(t,e){if(eo!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(eo=t,e=1073741823),e={context:t,observedBits:e,next:null},null===to){if(null===$i)throw Error(a(308));to=e,$i.dependencies={lanes:0,firstContext:e,responders:null}}else to=to.next=e;return t._currentValue}var so=!1;function uo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function lo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function co(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ho(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function fo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function po(t,e,n,r){var o=t.updateQueue;so=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var h=t.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==s&&(null===d?h.firstBaseUpdate=c:d.next=c,h.lastBaseUpdate=l)}}if(null!==a){for(d=o.baseState,s=0,h=c=l=null;;){u=a.lane;var f=a.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=t,v=a;switch(u=e,f=n,v.tag){case 1:if("function"===typeof(p=v.payload)){d=p.call(f,d,u);break t}d=p;break t;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(f,d,u):p)||void 0===u)break t;d=i({},d,u);break t;case 2:so=!0}}null!==a.callback&&(t.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else f={eventTime:f,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=f,l=d):h=h.next=f,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===h&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=h,js|=s,t.lanes=s,t.memoizedState=d}}function vo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var mo=(new r.Component).refs;function go(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var yo={isMounted:function(t){return!!(t=t._reactInternals)&&Qt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=du(),i=fu(t),o=co(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),ho(t,o),pu(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=du(),i=fu(t),o=co(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),ho(t,o),pu(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=du(),r=fu(t),i=co(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),ho(t,i),pu(t,r,n)}};function _o(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!dr(n,r)||!dr(i,o))}function xo(t,e,n){var r=!1,i=di,o=e.contextType;return"object"===typeof o&&null!==o?o=ao(o):(i=gi(e)?vi:fi.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?mi(t,i):di),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=yo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function bo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yo.enqueueReplaceState(e,e.state,null)}function To(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=mo,uo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=ao(o):(o=gi(e)?vi:fi.current,i.context=mi(t,o)),po(t,n,i,r),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(go(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&yo.enqueueReplaceState(i,i.state,null),po(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4)}var wo=Array.isArray;function Eo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:(e=function(t){var e=r.refs;e===mo&&(e=r.refs={}),null===t?delete e[i]:e[i]=t},e._stringRef=i,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function So(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function Ao(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Xu(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags=2,n):r:(e.flags=2,n):n}function s(e){return t&&null===e.alternate&&(e.flags=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=Qu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function l(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=Eo(t,e,n),r.return=t,r):((r=Yu(n.type,n.key,n.props,null,t.mode,r)).ref=Eo(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Ku(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=qu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=Qu(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case T:return(n=Yu(e.type,e.key,e.props,null,t.mode,n)).ref=Eo(t,null,e),n.return=t,n;case w:return(e=Ku(e,t.mode,n)).return=t,e}if(wo(e)||H(e))return(e=qu(e,t.mode,n,null)).return=t,e;So(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case T:return n.key===i?n.type===E?h(t,e,n.props.children,r,i):l(t,e,n,r):null;case w:return n.key===i?c(t,e,n,r):null}if(wo(n)||H(n))return null!==i?null:h(t,e,n,r,null);So(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case T:return t=t.get(null===r.key?n:r.key)||null,r.type===E?h(e,t,r.props.children,i,r.key):l(e,t,r,i);case w:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(wo(r)||H(r))return h(e,t=t.get(n)||null,r,i,null);So(e,r)}return null}function v(i,a,s,u){for(var l=null,c=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=f(i,h,s[v],u);if(null===g){null===h&&(h=m);break}t&&h&&null===g.alternate&&e(i,h),a=o(g,a,v),null===c?l=g:c.sibling=g,c=g,h=m}if(v===s.length)return n(i,h),l;if(null===h){for(;v<s.length;v++)null!==(h=d(i,s[v],u))&&(a=o(h,a,v),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(t&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m);return t&&h.forEach((function(t){return e(i,t)})),l}function m(i,s,u,l){var c=H(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var _=f(i,v,y.value,l);if(null===_){null===v&&(v=g);break}t&&v&&null===_.alternate&&e(i,v),s=o(_,s,m),null===h?c=_:h.sibling=_,h=_,v=g}if(y.done)return n(i,v),c;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=d(i,y.value,l))&&(s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return c}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,l))&&(t&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return t&&v.forEach((function(t){return e(i,t)})),c}return function(t,r,o,u){var l="object"===typeof o&&null!==o&&o.type===E&&null===o.key;l&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case T:t:{for(c=o.key,l=r;null!==l;){if(l.key===c){if(7===l.tag){if(o.type===E){n(t,l.sibling),(r=i(l,o.props.children)).return=t,t=r;break t}}else if(l.elementType===o.type){n(t,l.sibling),(r=i(l,o.props)).ref=Eo(t,l,o),r.return=t,t=r;break t}n(t,l);break}e(t,l),l=l.sibling}o.type===E?((r=qu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=Yu(o.type,o.key,o.props,null,t.mode,u)).ref=Eo(t,r,o),u.return=t,t=u)}return s(t);case w:t:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Ku(o,t.mode,u)).return=t,t=r}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=Qu(o,t.mode,u)).return=t,t=r),s(t);if(wo(o))return v(t,r,o,u);if(H(o))return m(t,r,o,u);if(c&&So(t,o),"undefined"===typeof o&&!l)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,Y(t.type)||"Component"))}return n(t,r)}}var Mo=Ao(!0),Ro=Ao(!1),Co={},Po=li(Co),Io=li(Co),Oo=li(Co);function ko(t){if(t===Co)throw Error(a(174));return t}function No(t,e){switch(hi(Oo,e),hi(Io,t),hi(Po,Co),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pt(null,"");break;default:e=pt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ci(Po),hi(Po,e)}function Lo(){ci(Po),ci(Io),ci(Oo)}function Do(t){ko(Oo.current);var e=ko(Po.current),n=pt(e,t.type);e!==n&&(hi(Io,t),hi(Po,n))}function Fo(t){Io.current===t&&(ci(Po),ci(Io))}var Bo=li(0);function Uo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Go=null,jo=null,Ho=!1;function zo(t,e){var n=Vu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Vo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function Wo(t){if(Ho){var e=jo;if(e){var n=e;if(!Vo(t,e)){if(!(e=qr(n.nextSibling))||!Vo(t,e))return t.flags=-1025&t.flags|2,Ho=!1,void(Go=t);zo(Go,n)}Go=t,jo=qr(e.firstChild)}else t.flags=-1025&t.flags|2,Ho=!1,Go=t}}function Xo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Go=t}function Yo(t){if(t!==Go)return!1;if(!Ho)return Xo(t),Ho=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Vr(e,t.memoizedProps))for(e=jo;e;)zo(t,e),e=qr(e.nextSibling);if(Xo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){jo=qr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}jo=null}}else jo=Go?qr(t.stateNode.nextSibling):null;return!0}function qo(){jo=Go=null,Ho=!1}var Zo=[];function Qo(){for(var t=0;t<Zo.length;t++)Zo[t]._workInProgressVersionPrimary=null;Zo.length=0}var Ko=b.ReactCurrentDispatcher,Jo=b.ReactCurrentBatchConfig,$o=0,ta=null,ea=null,na=null,ra=!1,ia=!1;function oa(){throw Error(a(321))}function aa(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cr(t[n],e[n]))return!1;return!0}function sa(t,e,n,r,i,o){if($o=o,ta=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ko.current=null===t||null===t.memoizedState?ka:Na,t=n(r,i),ia){o=0;do{if(ia=!1,!(25>o))throw Error(a(301));o+=1,na=ea=null,e.updateQueue=null,Ko.current=La,t=n(r,i)}while(ia)}if(Ko.current=Oa,e=null!==ea&&null!==ea.next,$o=0,na=ea=ta=null,ra=!1,e)throw Error(a(300));return t}function ua(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===na?ta.memoizedState=na=t:na=na.next=t,na}function la(){if(null===ea){var t=ta.alternate;t=null!==t?t.memoizedState:null}else t=ea.next;var e=null===na?ta.memoizedState:na.next;if(null!==e)na=e,ea=t;else{if(null===t)throw Error(a(310));t={memoizedState:(ea=t).memoizedState,baseState:ea.baseState,baseQueue:ea.baseQueue,queue:ea.queue,next:null},null===na?ta.memoizedState=na=t:na=na.next=t}return na}function ca(t,e){return"function"===typeof e?e(t):e}function ha(t){var e=la(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=ea,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,l=i;do{var c=l.lane;if(($o&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===t?l.eagerState:t(r,l.action);else{var h={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,ta.lanes|=c,js|=c}l=l.next}while(null!==l&&l!==i);null===u?o=r:u.next=s,cr(r,e.memoizedState)||(Fa=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function da(t){var e=la(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);cr(o,e.memoizedState)||(Fa=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function fa(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(null!==i?t=i===r:(t=t.mutableReadLanes,(t=($o&t)===t)&&(e._workInProgressVersionPrimary=r,Zo.push(e))),t)return n(e._source);throw Zo.push(e),Error(a(350))}function pa(t,e,n,r){var i=ks;if(null===i)throw Error(a(349));var o=e._getVersion,s=o(e._source),u=Ko.current,l=u.useState((function(){return fa(i,e,n)})),c=l[1],h=l[0];l=na;var d=t.memoizedState,f=d.refs,p=f.getSnapshot,v=d.source;d=d.subscribe;var m=ta;return t.memoizedState={refs:f,source:e,subscribe:r},u.useEffect((function(){f.getSnapshot=n,f.setSnapshot=c;var t=o(e._source);if(!cr(s,t)){t=n(e._source),cr(h,t)||(c(t),t=fu(m),i.mutableReadLanes|=t&i.pendingLanes),t=i.mutableReadLanes,i.entangledLanes|=t;for(var r=i.entanglements,a=t;0<a;){var u=31-Ve(a),l=1<<u;r[u]|=t,a&=~l}}}),[n,e,r]),u.useEffect((function(){return r(e._source,(function(){var t=f.getSnapshot,n=f.setSnapshot;try{n(t(e._source));var r=fu(m);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[e,r]),cr(p,n)&&cr(v,e)&&cr(d,r)||((t={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:h}).dispatch=c=Ia.bind(null,ta,t),l.queue=t,l.baseQueue=null,h=fa(i,e,n),l.memoizedState=l.baseState=h),h}function va(t,e,n){return pa(la(),t,e,n)}function ma(t){var e=ua();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:t}).dispatch=Ia.bind(null,ta,t),[e.memoizedState,t]}function ga(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=ta.updateQueue)?(e={lastEffect:null},ta.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function ya(t){return t={current:t},ua().memoizedState=t}function _a(){return la().memoizedState}function xa(t,e,n,r){var i=ua();ta.flags|=t,i.memoizedState=ga(1|e,n,void 0,void 0===r?null:r)}function ba(t,e,n,r){var i=la();r=void 0===r?null:r;var o=void 0;if(null!==ea){var a=ea.memoizedState;if(o=a.destroy,null!==r&&aa(r,a.deps))return void ga(e,n,o,r)}ta.flags|=t,i.memoizedState=ga(1|e,n,o,r)}function Ta(t,e){return xa(516,4,t,e)}function wa(t,e){return ba(516,4,t,e)}function Ea(t,e){return ba(4,2,t,e)}function Sa(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Aa(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ba(4,2,Sa.bind(null,e,t),n)}function Ma(){}function Ra(t,e){var n=la();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&aa(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ca(t,e){var n=la();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&aa(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Pa(t,e){var n=Vi();Xi(98>n?98:n,(function(){t(!0)})),Xi(97<n?97:n,(function(){var n=Jo.transition;Jo.transition=1;try{t(!1),e()}finally{Jo.transition=n}}))}function Ia(t,e,n){var r=du(),i=fu(t),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),e.pending=o,a=t.alternate,t===ta||null!==a&&a===ta)ia=ra=!0;else{if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,cr(u,s))return}catch(l){}pu(t,i,r)}}var Oa={readContext:ao,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useMutableSource:oa,useOpaqueIdentifier:oa,unstable_isNewReconciler:!1},ka={readContext:ao,useCallback:function(t,e){return ua().memoizedState=[t,void 0===e?null:e],t},useContext:ao,useEffect:Ta,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,xa(4,2,Sa.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xa(4,2,t,e)},useMemo:function(t,e){var n=ua();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ua();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Ia.bind(null,ta,t),[r.memoizedState,t]},useRef:ya,useState:ma,useDebugValue:Ma,useDeferredValue:function(t){var e=ma(t),n=e[0],r=e[1];return Ta((function(){var e=Jo.transition;Jo.transition=1;try{r(t)}finally{Jo.transition=e}}),[t]),n},useTransition:function(){var t=ma(!1),e=t[0];return ya(t=Pa.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var r=ua();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},pa(r,t,e,n)},useOpaqueIdentifier:function(){if(Ho){var t=!1,e=function(t){return{$$typeof:L,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+(Qr++).toString(36))),Error(a(355))})),n=ma(e)[1];return 0===(2&ta.mode)&&(ta.flags|=516,ga(5,(function(){n("r:"+(Qr++).toString(36))}),void 0,null)),e}return ma(e="r:"+(Qr++).toString(36)),e},unstable_isNewReconciler:!1},Na={readContext:ao,useCallback:Ra,useContext:ao,useEffect:wa,useImperativeHandle:Aa,useLayoutEffect:Ea,useMemo:Ca,useReducer:ha,useRef:_a,useState:function(){return ha(ca)},useDebugValue:Ma,useDeferredValue:function(t){var e=ha(ca),n=e[0],r=e[1];return wa((function(){var e=Jo.transition;Jo.transition=1;try{r(t)}finally{Jo.transition=e}}),[t]),n},useTransition:function(){var t=ha(ca)[0];return[_a().current,t]},useMutableSource:va,useOpaqueIdentifier:function(){return ha(ca)[0]},unstable_isNewReconciler:!1},La={readContext:ao,useCallback:Ra,useContext:ao,useEffect:wa,useImperativeHandle:Aa,useLayoutEffect:Ea,useMemo:Ca,useReducer:da,useRef:_a,useState:function(){return da(ca)},useDebugValue:Ma,useDeferredValue:function(t){var e=da(ca),n=e[0],r=e[1];return wa((function(){var e=Jo.transition;Jo.transition=1;try{r(t)}finally{Jo.transition=e}}),[t]),n},useTransition:function(){var t=da(ca)[0];return[_a().current,t]},useMutableSource:va,useOpaqueIdentifier:function(){return da(ca)[0]},unstable_isNewReconciler:!1},Da=b.ReactCurrentOwner,Fa=!1;function Ba(t,e,n,r){e.child=null===t?Ro(e,null,n,r):Mo(e,t.child,n,r)}function Ua(t,e,n,r,i){n=n.render;var o=e.ref;return oo(e,i),r=sa(t,e,n,r,o,i),null===t||Fa?(e.flags|=1,Ba(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,os(t,e,i))}function Ga(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!==typeof a||Wu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Yu(n.type,null,r,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,ja(t,e,a,r,i,o))}return a=t.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:dr)(i,r)&&t.ref===e.ref)?os(t,e,o):(e.flags|=1,(t=Xu(a,r)).ref=e.ref,t.return=e,e.child=t)}function ja(t,e,n,r,i,o){if(null!==t&&dr(t.memoizedProps,r)&&t.ref===e.ref){if(Fa=!1,0===(o&i))return e.lanes=t.lanes,os(t,e,o);0!==(16384&t.flags)&&(Fa=!0)}return Va(t,e,n,r,o)}function Ha(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},Tu(e,n);else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},Tu(e,t),null;e.memoizedState={baseLanes:0},Tu(e,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Tu(e,r);return Ba(t,e,i,n),e.child}function za(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function Va(t,e,n,r,i){var o=gi(n)?vi:fi.current;return o=mi(e,o),oo(e,i),n=sa(t,e,n,r,o,i),null===t||Fa?(e.flags|=1,Ba(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,os(t,e,i))}function Wa(t,e,n,r,i){if(gi(n)){var o=!0;bi(e)}else o=!1;if(oo(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),xo(e,n,r),To(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=ao(l):l=mi(e,l=gi(n)?vi:fi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&bo(e,a,r,l),so=!1;var d=e.memoizedState;a.state=d,po(e,r,a,i),u=e.memoizedState,s!==r||d!==u||pi.current||so?("function"===typeof c&&(go(e,n,c,r),u=e.memoizedState),(s=so||_o(e,n,s,r,d,u,l))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4)):("function"===typeof a.componentDidMount&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4),r=!1)}else{a=e.stateNode,lo(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:Ki(e.type,s),a.props=l,h=e.pendingProps,d=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=ao(u):u=mi(e,u=gi(n)?vi:fi.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==u)&&bo(e,a,r,u),so=!1,d=e.memoizedState,a.state=d,po(e,r,a,i);var p=e.memoizedState;s!==h||d!==p||pi.current||so?("function"===typeof f&&(go(e,n,f,r),p=e.memoizedState),(l=so||_o(e,n,l,r,d,p,u))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),r=!1)}return Xa(t,e,n,r,o,i)}function Xa(t,e,n,r,i,o){za(t,e);var a=0!==(64&e.flags);if(!r&&!a)return i&&Ti(e,n,!1),os(t,e,o);r=e.stateNode,Da.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=Mo(e,t.child,null,o),e.child=Mo(e,null,s,o)):Ba(t,e,s,o),e.memoizedState=r.state,i&&Ti(e,n,!0),e.child}function Ya(t){var e=t.stateNode;e.pendingContext?_i(0,e.pendingContext,e.pendingContext!==e.context):e.context&&_i(0,e.context,!1),No(t,e.containerInfo)}var qa,Za,Qa,Ka={dehydrated:null,retryLane:0};function Ja(t,e,n){var r,i=e.pendingProps,o=Bo.current,a=!1;return(r=0!==(64&e.flags))||(r=(null===t||null!==t.memoizedState)&&0!==(2&o)),r?(a=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),hi(Bo,1&o),null===t?(void 0!==i.fallback&&Wo(e),t=i.children,o=i.fallback,a?(t=$a(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ka,t):"number"===typeof i.unstable_expectedLoadTime?(t=$a(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ka,e.lanes=33554432,t):((n=Zu({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,a?(i=es(t,e,i.children,i.fallback,n),a=e.child,o=t.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=t.childLanes&~n,e.memoizedState=Ka,i):(n=ts(t,e,i.children,n),e.memoizedState=null,n))}function $a(t,e,n,r){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=Zu(e,i,0,null),n=qu(n,i,r,null),o.return=t,n.return=t,o.sibling=n,t.child=o,n}function ts(t,e,n,r){var i=t.child;return t=i.sibling,n=Xu(i,{mode:"visible",children:n}),0===(2&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function es(t,e,n,r,i){var o=e.mode,a=t.child;t=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&e.child!==a?((n=e.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):n=Xu(a,s),null!==t?r=Xu(t,r):(r=qu(r,o,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}function ns(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),io(t.return,e)}function rs(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function is(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ba(t,e,r.children,n),0!==(2&(r=Bo.current)))r=1&r|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&ns(t,n);else if(19===t.tag)ns(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(hi(Bo,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Uo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),rs(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Uo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}rs(e,!0,n,null,o,e.lastEffect);break;case"together":rs(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function os(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),js|=e.lanes,0!==(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Xu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Xu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function as(t,e){if(!Ho)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ss(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(e.type)&&yi(),null;case 3:return Lo(),ci(pi),ci(fi),Qo(),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(Yo(e)?e.flags|=4:r.hydrate||(e.flags|=256)),null;case 5:Fo(e);var o=ko(Oo.current);if(n=e.type,null!==t&&null!=e.stateNode)Za(t,e,n,r),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=ko(Po.current),Yo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Jr]=e,r[$r]=s,n){case"dialog":Pr("cancel",r),Pr("close",r);break;case"iframe":case"object":case"embed":Pr("load",r);break;case"video":case"audio":for(t=0;t<Ar.length;t++)Pr(Ar[t],r);break;case"source":Pr("error",r);break;case"img":case"image":case"link":Pr("error",r),Pr("load",r);break;case"details":Pr("toggle",r);break;case"input":tt(r,s),Pr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pr("invalid",r);break;case"textarea":ut(r,s),Pr("invalid",r)}for(var l in Et(n,s),t=null,s)s.hasOwnProperty(l)&&(o=s[l],"children"===l?"string"===typeof o?r.textContent!==o&&(t=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(t=["children",""+o]):u.hasOwnProperty(l)&&null!=o&&"onScroll"===l&&Pr("scroll",r));switch(n){case"input":Q(r),rt(r,s,!0);break;case"textarea":Q(r),ct(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Gr)}r=t,e.updateQueue=r,null!==r&&(e.flags|=4)}else{switch(l=9===o.nodeType?o:o.ownerDocument,t===ht&&(t=ft(n)),t===ht?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Jr]=e,t[$r]=r,qa(t,e),e.stateNode=t,l=St(n,r),n){case"dialog":Pr("cancel",t),Pr("close",t),o=r;break;case"iframe":case"object":case"embed":Pr("load",t),o=r;break;case"video":case"audio":for(o=0;o<Ar.length;o++)Pr(Ar[o],t);o=r;break;case"source":Pr("error",t),o=r;break;case"img":case"image":case"link":Pr("error",t),Pr("load",t),o=r;break;case"details":Pr("toggle",t),o=r;break;case"input":tt(t,r),o=$(t,r),Pr("invalid",t);break;case"option":o=ot(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Pr("invalid",t);break;case"textarea":ut(t,r),o=st(t,r),Pr("invalid",t);break;default:o=r}Et(n,o);var c=o;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?Tt(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&gt(t,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&yt(t,h):"number"===typeof h&&yt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Pr("scroll",t):null!=h&&x(t,s,h,l))}switch(n){case"input":Q(t),rt(t,r,!1);break;case"textarea":Q(t),ct(t);break;case"option":null!=r.value&&t.setAttribute("value",""+q(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?at(t,!!r.multiple,s,!1):null!=r.defaultValue&&at(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=Gr)}zr(n,r)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)Qa(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));n=ko(Oo.current),ko(Po.current),Yo(e)?(r=e.stateNode,n=e.memoizedProps,r[Jr]=e,r.nodeValue!==n&&(e.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=e,e.stateNode=r)}return null;case 13:return ci(Bo),r=e.memoizedState,0!==(64&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?void 0!==e.memoizedProps.fallback&&Yo(e):n=null!==t.memoizedState,r&&!n&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Bo.current)?0===Bs&&(Bs=3):(0!==Bs&&3!==Bs||(Bs=4),null===ks||0===(134217727&js)&&0===(134217727&Hs)||yu(ks,Ls))),(r||n)&&(e.flags|=4),null);case 4:return Lo(),null===t&&Or(e.stateNode.containerInfo),null;case 10:return ro(e),null;case 19:if(ci(Bo),null===(r=e.memoizedState))return null;if(s=0!==(64&e.flags),null===(l=r.rendering))if(s)as(r,!1);else{if(0!==Bs||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(l=Uo(t))){for(e.flags|=64,as(r,!1),null!==(s=l.updateQueue)&&(e.updateQueue=s,e.flags|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;null!==n;)t=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return hi(Bo,1&Bo.current|2),e.child}t=t.sibling}null!==r.tail&&zi()>Xs&&(e.flags|=64,s=!0,as(r,!1),e.lanes=33554432)}else{if(!s)if(null!==(t=Uo(l))){if(e.flags|=64,s=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),as(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Ho)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Xs&&1073741824!==n&&(e.flags|=64,s=!0,as(r,!1),e.lanes=33554432);r.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=r.last)?n.sibling=l:e.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=zi(),n.sibling=null,e=Bo.current,hi(Bo,s?1&e|2:1&e),n):null;case 23:case 24:return wu(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(e.flags|=4),null}throw Error(a(156,e.tag))}function us(t){switch(t.tag){case 1:gi(t.type)&&yi();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Lo(),ci(pi),ci(fi),Qo(),0!==(64&(e=t.flags)))throw Error(a(285));return t.flags=-4097&e|64,t;case 5:return Fo(t),null;case 13:return ci(Bo),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return ci(Bo),null;case 4:return Lo(),null;case 10:return ro(t),null;case 23:case 24:return wu(),null;default:return null}}function ls(t,e){try{var n="",r=e;do{n+=X(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i}}function cs(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}qa=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Za=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,ko(Po.current);var a,s=null;switch(n){case"input":o=$(t,o),r=$(t,r),s=[];break;case"option":o=ot(t,o),r=ot(t,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=st(t,o),r=st(t,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(t.onclick=Gr)}for(h in Et(n,r),n=null,o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var l=o[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(l=null!=o?o[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Pr("scroll",t),s||l===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===L?c.toString():(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}},Qa=function(t,e,n,r){n!==r&&(e.flags|=4)};var hs="function"===typeof WeakMap?WeakMap:Map;function ds(t,e,n){(n=co(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Qs||(Qs=!0,Ks=r),cs(0,e)},n}function fs(t,e,n){(n=co(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return cs(0,e),r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),cs(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){Gu(t,n)}else e.current=null}function ms(t,e){switch(e.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Ki(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Yr(e.stateNode.containerInfo))}throw Error(a(163))}function gs(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var i=t;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fu(n,t),Du(n,t)),t=r}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:Ki(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&vo(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}vo(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&zr(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Te(n)))))}throw Error(a(163))}function ys(t,e){for(var n=t;;){if(5===n.tag){var r=n.stateNode;if(e)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=bt("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function _s(t,e){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(wi,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fu(e,n);else{r=e;try{i()}catch(o){Gu(r,o)}}n=n.next}while(n!==t)}break;case 1:if(vs(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){Gu(e,o)}break;case 5:vs(e);break;case 4:Ss(t,e)}}function xs(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function bs(t){return 5===t.tag||3===t.tag||4===t.tag}function Ts(t){t:{for(var e=t.return;null!==e;){if(bs(e))break t;e=e.return}throw Error(a(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(yt(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||bs(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}r?ws(t,n,e):Es(t,n,e)}function ws(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Gr));else if(4!==r&&null!==(t=t.child))for(ws(t,e,n),t=t.sibling;null!==t;)ws(t,e,n),t=t.sibling}function Es(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(Es(t,e,n),t=t.sibling;null!==t;)Es(t,e,n),t=t.sibling}function Ss(t,e){for(var n,r,i=e,o=!1;;){if(!o){o=i.return;t:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break t;case 3:case 4:n=n.containerInfo,r=!0;break t}o=o.return}o=!0}if(5===i.tag||6===i.tag){t:for(var s=t,u=i,l=u;;)if(_s(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break t;for(;null===l.sibling;){if(null===l.return||l.return===u)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(_s(t,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function As(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(t=r.destroy,r.destroy=void 0,void 0!==t&&t()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=e.stateNode)){r=e.memoizedProps;var i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[$r]=r,"input"===t&&"radio"===r.type&&null!=r.name&&et(n,r),St(t,i),e=St(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?Tt(n,u):"dangerouslySetInnerHTML"===s?gt(n,u):"children"===s?yt(n,u):x(n,s,u,e)}switch(t){case"input":nt(n,r);break;case"textarea":lt(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?at(n,!!r.multiple,o,!1):t!==!!r.multiple&&(null!=r.defaultValue?at(n,!!r.multiple,r.defaultValue,!0):at(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,Te(n.containerInfo)));case 13:return null!==e.memoizedState&&(Ws=zi(),ys(e.child,!0)),void Ms(e);case 19:return void Ms(e);case 23:case 24:return void ys(e,null!==e.memoizedState)}throw Error(a(163))}function Ms(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new ps),e.forEach((function(e){var r=Hu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function Rs(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var Cs=Math.ceil,Ps=b.ReactCurrentDispatcher,Is=b.ReactCurrentOwner,Os=0,ks=null,Ns=null,Ls=0,Ds=0,Fs=li(0),Bs=0,Us=null,Gs=0,js=0,Hs=0,zs=0,Vs=null,Ws=0,Xs=1/0;function Ys(){Xs=zi()+500}var qs,Zs=null,Qs=!1,Ks=null,Js=null,$s=!1,tu=null,eu=90,nu=[],ru=[],iu=null,ou=0,au=null,su=-1,uu=0,lu=0,cu=null,hu=!1;function du(){return 0!==(48&Os)?zi():-1!==su?su:su=zi()}function fu(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===Vi()?1:2;if(0===uu&&(uu=Gs),0!==Qi.transition){0!==lu&&(lu=null!==Vs?Vs.pendingLanes:0),t=uu;var e=4186112&~lu;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=Vi(),0!==(4&Os)&&98===t?t=Ge(12,uu):t=Ge(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),uu),t}function pu(t,e,n){if(50<ou)throw ou=0,au=null,Error(a(185));if(null===(t=vu(t,e)))return null;ze(t,e,n),t===ks&&(Hs|=e,4===Bs&&yu(t,Ls));var r=Vi();1===e?0!==(8&Os)&&0===(48&Os)?_u(t):(mu(t,n),0===Os&&(Ys(),qi())):(0===(4&Os)||98!==r&&99!==r||(null===iu?iu=new Set([t]):iu.add(t)),mu(t,n)),Vs=t}function vu(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function mu(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var u=31-Ve(s),l=1<<u,c=o[u];if(-1===c){if(0===(l&r)||0!==(l&i)){c=e,Fe(l);var h=De;o[u]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=e&&(t.expiredLanes|=l);s&=~l}if(r=Be(t,t===ks?Ls:0),e=De,0===r)null!==n&&(n!==Fi&&Mi(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==Fi&&Mi(n)}15===e?(n=_u.bind(null,t),null===Ui?(Ui=[n],Gi=Ai(Oi,Zi)):Ui.push(n),n=Fi):14===e?n=Yi(99,_u.bind(null,t)):(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,t))}}(e),n=Yi(n,gu.bind(null,t))),t.callbackPriority=e,t.callbackNode=n}}function gu(t){if(su=-1,lu=uu=0,0!==(48&Os))throw Error(a(327));var e=t.callbackNode;if(Lu()&&t.callbackNode!==e)return null;var n=Be(t,t===ks?Ls:0);if(0===n)return null;var r=n,i=Os;Os|=16;var o=Au();for(ks===t&&Ls===r||(Ys(),Eu(t,r));;)try{Cu();break}catch(u){Su(t,u)}if(no(),Ps.current=o,Os=i,null!==Ns?r=0:(ks=null,Ls=0,r=Bs),0!==(Gs&Hs))Eu(t,0);else if(0!==r){if(2===r&&(Os|=64,t.hydrate&&(t.hydrate=!1,Yr(t.containerInfo)),0!==(n=Ue(t))&&(r=Mu(t,n))),1===r)throw e=Us,Eu(t,0),yu(t,n),mu(t,zi()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:case 5:Ou(t);break;case 3:if(yu(t,n),(62914560&n)===n&&10<(r=Ws+500-zi())){if(0!==Be(t,0))break;if(((i=t.suspendedLanes)&n)!==n){du(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Wr(Ou.bind(null,t),r);break}Ou(t);break;case 4:if(yu(t,n),(4186112&n)===n)break;for(r=t.eventTimes,i=-1;0<n;){var s=31-Ve(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Cs(n/1960))-n)){t.timeoutHandle=Wr(Ou.bind(null,t),n);break}Ou(t);break;default:throw Error(a(329))}}return mu(t,zi()),t.callbackNode===e?gu.bind(null,t):null}function yu(t,e){for(e&=~zs,e&=~Hs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ve(e),r=1<<n;t[n]=-1,e&=~r}}function _u(t){if(0!==(48&Os))throw Error(a(327));if(Lu(),t===ks&&0!==(t.expiredLanes&Ls)){var e=Ls,n=Mu(t,e);0!==(Gs&Hs)&&(n=Mu(t,e=Be(t,e)))}else n=Mu(t,e=Be(t,0));if(0!==t.tag&&2===n&&(Os|=64,t.hydrate&&(t.hydrate=!1,Yr(t.containerInfo)),0!==(e=Ue(t))&&(n=Mu(t,e))),1===n)throw n=Us,Eu(t,0),yu(t,e),mu(t,zi()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ou(t),mu(t,zi()),null}function xu(t,e){var n=Os;Os|=1;try{return t(e)}finally{0===(Os=n)&&(Ys(),qi())}}function bu(t,e){var n=Os;Os&=-2,Os|=8;try{return t(e)}finally{0===(Os=n)&&(Ys(),qi())}}function Tu(t,e){hi(Fs,Ds),Ds|=e,Gs|=e}function wu(){Ds=Fs.current,ci(Fs)}function Eu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Xr(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Lo(),ci(pi),ci(fi),Qo();break;case 5:Fo(r);break;case 4:Lo();break;case 13:case 19:ci(Bo);break;case 10:ro(r);break;case 23:case 24:wu()}n=n.return}ks=t,Ns=Xu(t.current,null),Ls=Ds=Gs=e,Bs=0,Us=null,zs=Hs=js=0}function Su(t,e){for(;;){var n=Ns;try{if(no(),Ko.current=Oa,ra){for(var r=ta.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ra=!1}if($o=0,na=ea=ta=null,ia=!1,Is.current=null,null===n||null===n.return){Bs=1,Us=e,Ns=null;break}t:{var o=t,a=n.return,s=n,u=e;if(e=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Bo.current),d=a;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var v=d.memoizedProps;f=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(f){var m=d.updateQueue;if(null===m){var g=new Set;g.add(l),d.updateQueue=g}else m.add(l);if(0===(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=co(-1,1);y.tag=2,ho(s,y)}s.lanes|=1;break t}u=void 0,s=e;var _=o.pingCache;if(null===_?(_=o.pingCache=new hs,u=new Set,_.set(l,u)):void 0===(u=_.get(l))&&(u=new Set,_.set(l,u)),!u.has(s)){u.add(s);var x=ju.bind(null,o,l,s);l.then(x,x)}d.flags|=4096,d.lanes=e;break t}d=d.return}while(null!==d);u=Error((Y(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Bs&&(Bs=2),u=ls(u,s),d=a;do{switch(d.tag){case 3:o=u,d.flags|=4096,e&=-e,d.lanes|=e,fo(d,ds(0,o,e));break t;case 1:o=u;var b=d.type,T=d.stateNode;if(0===(64&d.flags)&&("function"===typeof b.getDerivedStateFromError||null!==T&&"function"===typeof T.componentDidCatch&&(null===Js||!Js.has(T)))){d.flags|=4096,e&=-e,d.lanes|=e,fo(d,fs(d,o,e));break t}}d=d.return}while(null!==d)}Iu(n)}catch(w){e=w,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function Au(){var t=Ps.current;return Ps.current=Oa,null===t?Oa:t}function Mu(t,e){var n=Os;Os|=16;var r=Au();for(ks===t&&Ls===e||Eu(t,e);;)try{Ru();break}catch(i){Su(t,i)}if(no(),Os=n,Ps.current=r,null!==Ns)throw Error(a(261));return ks=null,Ls=0,Bs}function Ru(){for(;null!==Ns;)Pu(Ns)}function Cu(){for(;null!==Ns&&!Ri();)Pu(Ns)}function Pu(t){var e=qs(t.alternate,t,Ds);t.memoizedProps=t.pendingProps,null===e?Iu(t):Ns=e,Is.current=null}function Iu(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(n=ss(n,e,Ds)))return void(Ns=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ds)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=us(e)))return n.flags&=2047,void(Ns=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(Ns=e);Ns=e=t}while(null!==e);0===Bs&&(Bs=5)}function Ou(t){var e=Vi();return Xi(99,ku.bind(null,t,e)),null}function ku(t,e){do{Lu()}while(null!==tu);if(0!==(48&Os))throw Error(a(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var s=t.eventTimes,u=t.expirationTimes;0<o;){var l=31-Ve(o),c=1<<l;i[l]=0,s[l]=-1,u[l]=-1,o&=~c}if(null!==iu&&0===(24&r)&&iu.has(t)&&iu.delete(t),t===ks&&(Ns=ks=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Os,Os|=32,Is.current=null,jr=Ze,gr(s=mr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else t:if(u=(u=s.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,o=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(A){u=null;break t}var h=0,d=-1,f=-1,p=0,v=0,m=s,g=null;e:for(;;){for(var y;m!==u||0!==o&&3!==m.nodeType||(d=h+o),m!==l||0!==c&&3!==m.nodeType||(f=h+c),3===m.nodeType&&(h+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===s)break e;if(g===u&&++p===o&&(d=h),g===l&&++v===c&&(f=h),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}u=-1===d||-1===f?null:{start:d,end:f}}else u=null;u=u||{start:0,end:0}}else u=null;Hr={focusedElem:s,selectionRange:u},Ze=!1,cu=null,hu=!1,Zs=r;do{try{Nu()}catch(A){if(null===Zs)throw Error(a(330));Gu(Zs,A),Zs=Zs.nextEffect}}while(null!==Zs);cu=null,Zs=r;do{try{for(s=t;null!==Zs;){var _=Zs.flags;if(16&_&&yt(Zs.stateNode,""),128&_){var x=Zs.alternate;if(null!==x){var b=x.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&_){case 2:Ts(Zs),Zs.flags&=-3;break;case 6:Ts(Zs),Zs.flags&=-3,As(Zs.alternate,Zs);break;case 1024:Zs.flags&=-1025;break;case 1028:Zs.flags&=-1025,As(Zs.alternate,Zs);break;case 4:As(Zs.alternate,Zs);break;case 8:Ss(s,u=Zs);var T=u.alternate;xs(u),null!==T&&xs(T)}Zs=Zs.nextEffect}}catch(A){if(null===Zs)throw Error(a(330));Gu(Zs,A),Zs=Zs.nextEffect}}while(null!==Zs);if(b=Hr,x=mr(),_=b.focusedElem,s=b.selectionRange,x!==_&&_&&_.ownerDocument&&vr(_.ownerDocument.documentElement,_)){null!==s&&gr(_)&&(x=s.start,void 0===(b=s.end)&&(b=x),"selectionStart"in _?(_.selectionStart=x,_.selectionEnd=Math.min(b,_.value.length)):(b=(x=_.ownerDocument||document)&&x.defaultView||window).getSelection&&(b=b.getSelection(),u=_.textContent.length,T=Math.min(s.start,u),s=void 0===s.end?T:Math.min(s.end,u),!b.extend&&T>s&&(u=s,s=T,T=u),u=pr(_,T),o=pr(_,s),u&&o&&(1!==b.rangeCount||b.anchorNode!==u.node||b.anchorOffset!==u.offset||b.focusNode!==o.node||b.focusOffset!==o.offset)&&((x=x.createRange()).setStart(u.node,u.offset),b.removeAllRanges(),T>s?(b.addRange(x),b.extend(o.node,o.offset)):(x.setEnd(o.node,o.offset),b.addRange(x))))),x=[];for(b=_;b=b.parentNode;)1===b.nodeType&&x.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<x.length;_++)(b=x[_]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Ze=!!jr,Hr=jr=null,t.current=n,Zs=r;do{try{for(_=t;null!==Zs;){var w=Zs.flags;if(36&w&&gs(_,Zs.alternate,Zs),128&w){x=void 0;var E=Zs.ref;if(null!==E){var S=Zs.stateNode;Zs.tag,x=S,"function"===typeof E?E(x):E.current=x}}Zs=Zs.nextEffect}}catch(A){if(null===Zs)throw Error(a(330));Gu(Zs,A),Zs=Zs.nextEffect}}while(null!==Zs);Zs=null,Bi(),Os=i}else t.current=n;if($s)$s=!1,tu=t,eu=e;else for(Zs=r;null!==Zs;)e=Zs.nextEffect,Zs.nextEffect=null,8&Zs.flags&&((w=Zs).sibling=null,w.stateNode=null),Zs=e;if(0===(r=t.pendingLanes)&&(Js=null),1===r?t===au?ou++:(ou=0,au=t):ou=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(wi,n,void 0,64===(64&n.current.flags))}catch(A){}if(mu(t,zi()),Qs)throw Qs=!1,t=Ks,Ks=null,t;return 0!==(8&Os)||qi(),null}function Nu(){for(;null!==Zs;){var t=Zs.alternate;hu||null===cu||(0!==(8&Zs.flags)?te(Zs,cu)&&(hu=!0):13===Zs.tag&&Rs(t,Zs)&&te(Zs,cu)&&(hu=!0));var e=Zs.flags;0!==(256&e)&&ms(t,Zs),0===(512&e)||$s||($s=!0,Yi(97,(function(){return Lu(),null}))),Zs=Zs.nextEffect}}function Lu(){if(90!==eu){var t=97<eu?97:eu;return eu=90,Xi(t,Bu)}return!1}function Du(t,e){nu.push(e,t),$s||($s=!0,Yi(97,(function(){return Lu(),null})))}function Fu(t,e){ru.push(e,t),$s||($s=!0,Yi(97,(function(){return Lu(),null})))}function Bu(){if(null===tu)return!1;var t=tu;if(tu=null,0!==(48&Os))throw Error(a(331));var e=Os;Os|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(l){if(null===o)throw Error(a(330));Gu(o,l)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(l){if(null===o)throw Error(a(330));Gu(o,l)}}for(u=t.current.firstEffect;null!==u;)t=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=t;return Os=e,qi(),!0}function Uu(t,e,n){ho(t,e=ds(0,e=ls(n,e),1)),e=du(),null!==(t=vu(t,1))&&(ze(t,1,e),mu(t,e))}function Gu(t,e){if(3===t.tag)Uu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Uu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var i=fs(n,t=ls(e,t),1);if(ho(n,i),i=du(),null!==(n=vu(n,1)))ze(n,1,i),mu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(e,t)}catch(o){}break}}n=n.return}}function ju(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=du(),t.pingedLanes|=t.suspendedLanes&n,ks===t&&(Ls&n)===n&&(4===Bs||3===Bs&&(62914560&Ls)===Ls&&500>zi()-Ws?Eu(t,0):zs|=n),mu(t,e)}function Hu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===Vi()?1:2:(0===uu&&(uu=Gs),0===(e=je(62914560&~uu))&&(e=4194304))),n=du(),null!==(t=vu(t,e))&&(ze(t,e,n),mu(t,n))}function zu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Vu(t,e,n,r){return new zu(t,e,n,r)}function Wu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Xu(t,e){var n=t.alternate;return null===n?((n=Vu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yu(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)Wu(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case E:return qu(n.children,i,o,e);case D:s=8,i|=16;break;case S:s=8,i|=1;break;case A:return(t=Vu(12,n,e,8|i)).elementType=A,t.type=A,t.lanes=o,t;case P:return(t=Vu(13,n,e,i)).type=P,t.elementType=P,t.lanes=o,t;case I:return(t=Vu(19,n,e,i)).elementType=I,t.lanes=o,t;case F:return Zu(n,i,o,e);case B:return(t=Vu(24,n,e,i)).elementType=B,t.lanes=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case M:s=10;break t;case R:s=9;break t;case C:s=11;break t;case O:s=14;break t;case k:s=16,r=null;break t;case N:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Vu(s,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function qu(t,e,n,r){return(t=Vu(7,t,r,e)).lanes=n,t}function Zu(t,e,n,r){return(t=Vu(23,t,r,e)).elementType=F,t.lanes=n,t}function Qu(t,e,n){return(t=Vu(6,t,null,e)).lanes=n,t}function Ku(t,e,n){return(e=Vu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ju(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=He(0),this.expirationTimes=He(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=He(0),this.mutableSourceEagerHydrationData=null}function $u(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function tl(t,e,n,r){var i=e.current,o=du(),s=fu(i);t:if(n){e:{if(Qt(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(gi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var l=n.type;if(gi(l)){n=xi(n,l,u);break t}}n=u}else n=di;return null===e.context?e.context=n:e.pendingContext=n,(e=co(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),ho(i,e),pu(i,s,o),s}function el(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function nl(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function rl(t,e){nl(t,e),(t=t.alternate)&&nl(t,e)}function il(t,e,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ju(t,e,null!=n&&!0===n.hydrate),e=Vu(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,uo(e),t[ti]=n.current,Or(8===t.nodeType?t.parentNode:t),r)for(t=0;t<r.length;t++){var i=(e=r[t])._getVersion;i=i(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}function ol(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function al(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var t=el(a);s.call(t)}}tl(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new il(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var t=el(a);u.call(t)}}bu((function(){tl(e,a,t,i)}))}return el(a)}function sl(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ol(e))throw Error(a(200));return $u(t,e,null,n)}qs=function(t,e,n){var r=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||pi.current)Fa=!0;else{if(0===(n&r)){switch(Fa=!1,e.tag){case 3:Ya(e),qo();break;case 5:Do(e);break;case 1:gi(e.type)&&bi(e);break;case 4:No(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;hi(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(n&e.child.childLanes)?Ja(t,e,n):(hi(Bo,1&Bo.current),null!==(e=os(t,e,n))?e.sibling:null);hi(Bo,1&Bo.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(64&t.flags)){if(r)return is(t,e,n);e.flags|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),hi(Bo,Bo.current),r)break;return null;case 23:case 24:return e.lanes=0,Ha(t,e,n)}return os(t,e,n)}Fa=0!==(16384&t.flags)}else Fa=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=mi(e,fi.current),oo(e,n),i=sa(null,e,r,t,i,n),e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,gi(r)){var o=!0;bi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,uo(e);var s=r.getDerivedStateFromProps;"function"===typeof s&&go(e,r,s,t),i.updater=yo,e.stateNode=i,i._reactInternals=e,To(e,r,t,n),e=Xa(null,e,r,!0,o,n)}else e.tag=0,Ba(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(o=i._init)(i._payload),e.type=i,o=e.tag=function(t){if("function"===typeof t)return Wu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===C)return 11;if(t===O)return 14}return 2}(i),t=Ki(i,t),o){case 0:e=Va(null,e,i,t,n);break t;case 1:e=Wa(null,e,i,t,n);break t;case 11:e=Ua(null,e,i,t,n);break t;case 14:e=Ga(null,e,i,Ki(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Va(t,e,r,i=e.elementType===r?i:Ki(r,i),n);case 1:return r=e.type,i=e.pendingProps,Wa(t,e,r,i=e.elementType===r?i:Ki(r,i),n);case 3:if(Ya(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,lo(t,e),po(e,r,null,n),(r=e.memoizedState.element)===i)qo(),e=os(t,e,n);else{if((o=(i=e.stateNode).hydrate)&&(jo=qr(e.stateNode.containerInfo.firstChild),Go=e,o=Ho=!0),o){if(null!=(t=i.mutableSourceEagerHydrationData))for(i=0;i<t.length;i+=2)(o=t[i])._workInProgressVersionPrimary=t[i+1],Zo.push(o);for(n=Ro(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ba(t,e,r,n),qo();e=e.child}return e;case 5:return Do(e),null===t&&Wo(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,Vr(r,i)?s=null:null!==o&&Vr(r,o)&&(e.flags|=16),za(t,e),Ba(t,e,s,n),e.child;case 6:return null===t&&Wo(e),null;case 13:return Ja(t,e,n);case 4:return No(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Mo(e,null,r,n):Ba(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Ua(t,e,r,i=e.elementType===r?i:Ki(r,i),n);case 7:return Ba(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ba(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var u=e.type._context;if(hi(Ji,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=cr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!pi.current){e=os(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===u.tag&&((c=co(-1,n&-n)).tag=2,ho(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),io(u.return,n),l.lanes|=n;break}c=c.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Ba(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,oo(e,n),r=r(i=ao(i,o.unstable_observedBits)),e.flags|=1,Ba(t,e,r,n),e.child;case 14:return o=Ki(i=e.type,e.pendingProps),Ga(t,e,i,o=Ki(i.type,o),r,n);case 15:return ja(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ki(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,gi(r)?(t=!0,bi(e)):t=!1,oo(e,n),xo(e,r,i),To(e,r,i,n),Xa(null,e,r,!0,t,n);case 19:return is(t,e,n);case 23:case 24:return Ha(t,e,n)}throw Error(a(156,e.tag))},il.prototype.render=function(t){tl(t,this._internalRoot,null,null)},il.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;tl(null,t,null,(function(){e[ti]=null}))},ee=function(t){13===t.tag&&(pu(t,4,du()),rl(t,4))},ne=function(t){13===t.tag&&(pu(t,67108864,du()),rl(t,67108864))},re=function(t){if(13===t.tag){var e=du(),n=fu(t);pu(t,n,e),rl(t,n)}},ie=function(t,e){return e()},Mt=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=oi(r);if(!i)throw Error(a(90));K(r),nt(r,i)}}}break;case"textarea":lt(t,n);break;case"select":null!=(e=n.value)&&at(t,!!n.multiple,e,!1)}},kt=xu,Nt=function(t,e,n,r,i){var o=Os;Os|=4;try{return Xi(98,t.bind(null,e,n,r,i))}finally{0===(Os=o)&&(Ys(),qi())}},Lt=function(){0===(49&Os)&&(function(){if(null!==iu){var t=iu;iu=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,mu(t,zi())}))}qi()}(),Lu())},Dt=function(t,e){var n=Os;Os|=2;try{return t(e)}finally{0===(Os=n)&&(Ys(),qi())}};var ul={Events:[ri,ii,oi,It,Ot,Lu,{current:!1}]},ll={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cl={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=$t(t))?null:t.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hl.isDisabled&&hl.supportsFiber)try{wi=hl.inject(cl),Ei=hl}catch(mt){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ul,e.createPortal=sl,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=null===(t=$t(e))?null:t.stateNode},e.flushSync=function(t,e){var n=Os;if(0!==(48&n))return t(e);Os|=1;try{if(t)return Xi(99,t.bind(null,e))}finally{Os=n,qi()}},e.hydrate=function(t,e,n){if(!ol(e))throw Error(a(200));return al(null,t,e,!0,n)},e.render=function(t,e,n){if(!ol(e))throw Error(a(200));return al(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!ol(t))throw Error(a(40));return!!t._reactRootContainer&&(bu((function(){al(null,null,t,!1,(function(){t._reactRootContainer=null,t[ti]=null}))})),!0)},e.unstable_batchedUpdates=xu,e.unstable_createPortal=function(t,e){return sl(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ol(n))throw Error(a(200));if(null==t||void 0===t._reactInternals)throw Error(a(38));return al(t,e,n,!1,r)},e.version="17.0.2"},4164:function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(4463)},6374:function(t,e,n){"use strict";n(1725);var r=n(2791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,n){var r,o={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(c=e.ref),e)s.call(e,r)&&!u.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:l,ref:c,props:o,_owner:a.current}}e.jsx=l,e.jsxs=l},9117:function(t,e,n){"use strict";var r=n(1725),i=60103,o=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var a=60109,s=60110,u=60112;e.Suspense=60113;var l=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),o=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),e.Suspense=h("react.suspense"),l=h("react.memo"),c=h("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function f(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||p}function g(){}function y(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(f(85));this.updater.enqueueSetState(this,t,e,"setState")},m.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},g.prototype=m.prototype;var _=y.prototype=new g;_.constructor=y,r(_,m.prototype),_.isPureReactComponent=!0;var x={current:null},b=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function w(t,e,n){var r,o={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)b.call(e,r)&&!T.hasOwnProperty(r)&&(o[r]=e[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:t,key:a,ref:s,props:o,_owner:x.current}}function E(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var S=/\/+/g;function A(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function M(t,e,n,r,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=t),t=""===r?"."+A(u,0):r,Array.isArray(a)?(n="",null!=t&&(n=t.replace(S,"$&/")+"/"),M(a,e,n,"",(function(t){return t}))):null!=a&&(E(a)&&(a=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+t)),e.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(t))for(var l=0;l<t.length;l++){var c=r+A(s=t[l],l);u+=M(s,e,n,c,a)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=d&&t[d]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),l=0;!(s=t.next()).done;)u+=M(s=s.value,e,n,c=r+A(s,l++),a);else if("object"===s)throw e=""+t,Error(f(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return u}function R(t,e,n){if(null==t)return t;var r=[],i=0;return M(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function C(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var P={current:null};function I(){var t=P.current;if(null===t)throw Error(f(321));return t}var O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:R,forEach:function(t,e,n){R(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return R(t,(function(){e++})),e},toArray:function(t){return R(t,(function(t){return t}))||[]},only:function(t){if(!E(t))throw Error(f(143));return t}},e.Component=m,e.PureComponent=y,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(f(267,t));var o=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=x.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)b.call(e,c)&&!T.hasOwnProperty(c)&&(o[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];o.children=l}return{$$typeof:i,type:t.type,key:a,ref:s,props:o,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:s,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=w,e.createFactory=function(t){var e=w.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:c,_payload:{_status:-1,_result:t},_init:C}},e.memo=function(t,e){return{$$typeof:l,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return I().useCallback(t,e)},e.useContext=function(t,e){return I().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return I().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return I().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return I().useLayoutEffect(t,e)},e.useMemo=function(t,e){return I().useMemo(t,e)},e.useReducer=function(t,e,n){return I().useReducer(t,e,n)},e.useRef=function(t){return I().useRef(t)},e.useState=function(t){return I().useState(t)},e.version="17.0.2"},2791:function(t,e,n){"use strict";t.exports=n(9117)},184:function(t,e,n){"use strict";t.exports=n(6374)},9727:function(t){var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(I){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,o=Object.create(i.prototype),a=new R(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?p:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(I){return{type:"throw",arg:I}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",v={};function m(){}function g(){}function y(){}var _={};u(_,o,(function(){return this}));var x=Object.getPrototypeOf,b=x&&x(x(C([])));b&&b!==n&&r.call(b,o)&&(_=b);var T=y.prototype=m.prototype=Object.create(_);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"===typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function S(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function C(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:e,done:!0}}return g.prototype=y,u(T,"constructor",y),u(y,"constructor",g),g.displayName=u(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,s,"GeneratorFunction")),t.prototype=Object.create(T),t},t.awrap=function(t){return{__await:t}},w(E.prototype),u(E.prototype,a,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new E(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(T),u(T,s,"Generator"),u(T,o,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},6813:function(t,e){"use strict";var n,r,i,o;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,c=null,h=function t(){if(null!==l)try{var n=e.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(t,0),r}};n=function(t){null!==l?setTimeout(n,0,t):(l=t,setTimeout(h,0))},r=function(t,e){c=setTimeout(t,e)},i=function(){clearTimeout(c)},e.unstable_shouldYield=function(){return!1},o=e.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,g=-1,y=5,_=0;e.unstable_shouldYield=function(){return e.unstable_now()>=_},o=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<t?Math.floor(1e3/t):5};var x=new MessageChannel,b=x.port2;x.port1.onmessage=function(){if(null!==m){var t=e.unstable_now();_=t+y;try{m(!0,t)?b.postMessage(null):(v=!1,m=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(t){m=t,v||(v=!0,b.postMessage(null))},r=function(t,n){g=d((function(){t(e.unstable_now())}),n)},i=function(){f(g),g=-1}}function T(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<S(i,e)))break t;t[r]=e,t[n]=i,n=r}}function w(t){return void 0===(t=t[0])?null:t}function E(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>S(a,n))void 0!==u&&0>S(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>S(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function S(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var A=[],M=[],R=1,C=null,P=3,I=!1,O=!1,k=!1;function N(t){for(var e=w(M);null!==e;){if(null===e.callback)E(M);else{if(!(e.startTime<=t))break;E(M),e.sortIndex=e.expirationTime,T(A,e)}e=w(M)}}function L(t){if(k=!1,N(t),!O)if(null!==w(A))O=!0,n(D);else{var e=w(M);null!==e&&r(L,e.startTime-t)}}function D(t,n){O=!1,k&&(k=!1,i()),I=!0;var o=P;try{for(N(n),C=w(A);null!==C&&(!(C.expirationTime>n)||t&&!e.unstable_shouldYield());){var a=C.callback;if("function"===typeof a){C.callback=null,P=C.priorityLevel;var s=a(C.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?C.callback=s:C===w(A)&&E(A),N(n)}else E(A);C=w(A)}if(null!==C)var u=!0;else{var l=w(M);null!==l&&r(L,l.startTime-n),u=!1}return u}finally{C=null,P=o,I=!1}}var F=o;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){O||I||(O=!0,n(D))},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return w(A)},e.unstable_next=function(t){switch(P){case 1:case 2:case 3:var e=3;break;default:e=P}var n=P;P=e;try{return t()}finally{P=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=F,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=P;P=t;try{return e()}finally{P=n}},e.unstable_scheduleCallback=function(t,o,a){var s=e.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,t){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return t={id:R++,callback:o,priorityLevel:t,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(t.sortIndex=a,T(M,t),null===w(A)&&t===w(M)&&(k?i():k=!0,r(L,a-s))):(t.sortIndex=u,T(A,t),O||I||(O=!0,n(D))),t},e.unstable_wrapCallback=function(t){var e=P;return function(){var n=P;P=e;try{return t.apply(this,arguments)}finally{P=n}}}},5296:function(t,e,n){"use strict";t.exports=n(6813)},581:function(t,e,n){"use strict";var r=n(2506),i=n(4037),o=n(2584),a=r("%TypeError%"),s=r("%WeakMap%",!0),u=r("%Map%",!0),l=i("WeakMap.prototype.get",!0),c=i("WeakMap.prototype.set",!0),h=i("WeakMap.prototype.has",!0),d=i("Map.prototype.get",!0),f=i("Map.prototype.set",!0),p=i("Map.prototype.has",!0),v=function(t,e){for(var n,r=t;null!==(n=r.next);r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n};t.exports=function(){var t,e,n,r={assert:function(t){if(!r.has(t))throw new a("Side channel does not contain "+o(t))},get:function(r){if(s&&r&&("object"===typeof r||"function"===typeof r)){if(t)return l(t,r)}else if(u){if(e)return d(e,r)}else if(n)return function(t,e){var n=v(t,e);return n&&n.value}(n,r)},has:function(r){if(s&&r&&("object"===typeof r||"function"===typeof r)){if(t)return h(t,r)}else if(u){if(e)return p(e,r)}else if(n)return function(t,e){return!!v(t,e)}(n,r);return!1},set:function(r,i){s&&r&&("object"===typeof r||"function"===typeof r)?(t||(t=new s),c(t,r,i)):u?(e||(e=new u),f(e,r,i)):(n||(n={key:{},next:null}),function(t,e,n){var r=v(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}}(n,r,i))}};return r}},4654:function(){}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.m=t,n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,r){return n.f[r](t,e),e}),[]))},n.u=function(t){return"static/js/"+t+".abff3aea.chunk.js"},n.miniCssF=function(t){},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={},e="netless-slide-demo:";n.l=function(r,i,o,a){if(t[r])t[r].push(i);else{var s,u;if(void 0!==o)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var h=l[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==e+o){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+o),s.src=r),t[r]=[i];var d=function(e,n){s.onerror=s.onload=null,clearTimeout(f);var i=t[r];if(delete t[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(t){return t(n)})),e)return e(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/",function(){var t={179:0};n.f.j=function(e,r){var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((function(n,r){i=t[e]=[n,r]}));r.push(i[2]=o);var a=n.p+n.u(e),s=new Error;n.l(a,(function(r){if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+e,e)}};var e=function(e,r){var i,o,a=r[0],s=r[1],u=r[2],l=0;if(a.some((function(e){return 0!==t[e]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(e&&e(r);l<a.length;l++)o=a[l],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0},r=self.webpackChunknetless_slide_demo=self.webpackChunknetless_slide_demo||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}(),function(){"use strict";var t=n(2791),e=n(4164);function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=n(2808),a=n(3038);function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function h(t,e){if(e&&("object"===c(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}var f=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(o,t);var e,n,r,i=d(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this)).audio=new Audio(t),e.audio.addEventListener("loadeddata",(function(){e.emit("load")})),e.audio.addEventListener("play",(function(){e.emit("play")})),e.audio.addEventListener("pause",(function(){e.emit("pause")})),e.audio.load(),e}return e=o,(n=[{key:"play",value:function(){console.log("\u4f7f\u7528 rtc \u64ad\u653e\u5668"),this.audio.play()}},{key:"pause",value:function(){this.audio.pause()}},{key:"destroy",value:function(){}},{key:"currentTime",get:function(){return this.audio.currentTime},set:function(t){this.audio.currentTime=t}},{key:"isPaused",get:function(){return this.audio.paused}},{key:"duration",get:function(){return this.audio.duration}}])&&s(e.prototype,n),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(n(7143).EventEmitter),p=n(184);var v=function(){var e=(0,o.parse)(window.location.search),n=e.minFPS,r=e.maxFPS,s=e.resolution,u=e.maxResolutionLevel,l=e.pptMode,c=i((0,t.useState)(!1),2),h=c[0],d=c[1],v=i((0,t.useState)(l||"local"),2),m=v[0],g=v[1],y=i((0,t.useState)("06415a307f2011ec8bdc15d18ec9acc7"),2),_=y[0],x=y[1],b=i((0,t.useState)("https://convertcdn.netless.group/dynamicConvert"),2),T=b[0],w=b[1],E=(0,t.useRef)(null),S=(0,t.useRef)(null),A=(0,t.useRef)(null),M=(0,t.useRef)(null),R=(0,t.useCallback)((function(t){x(t.target.value),localStorage.setItem("slide-taskId",t.target.value)}),[]),C=(0,t.useCallback)((function(t){w(t.target.value),localStorage.setItem("slide-prefix",t.target.value)}),[]),P=(0,t.useCallback)((function(t){g(t.target.value),localStorage.setItem("slide-mode",t.target.value)}),[]);return(0,t.useEffect)((function(){var t=localStorage.getItem("slide-mode"),e=localStorage.getItem("slide-taskId"),n=localStorage.getItem("slide-prefix");t&&g(t),e&&x(e),n&&w(n)}),[]),(0,t.useEffect)((function(){return console.log("[t]",_),E.current&&(S.current=new a.Slide({anchor:E.current,interactive:!0,mode:m,controller:!0,rtcAudio:h?f:void 0,logger:{info:function(t){console.log(t)},warn:function(t){console.warn(t)},error:function(t){console.error(t)}},renderOptions:{minFPS:n?parseInt(n,10):void 0,maxFPS:n?parseInt(r,10):void 0,resolution:n?parseInt(s,10):void 0,maxResolutionLevel:n?parseInt(u,10):void 0}}),S.current.on(a.SLIDE_EVENTS.stateChange,(function(t){console.log(t)})),S.current.on(a.SLIDE_EVENTS.renderError,(function(t,e){console.log(t,e)})),"sync"===m?S.current.on(a.SLIDE_EVENTS.syncDispatch,(function(t){A.current&&A.current.emit(a.SLIDE_EVENTS.syncReceive,t)})):"interactive"===m&&S.current.on(a.SLIDE_EVENTS.syncDispatch,(function(t){S.current.emit(a.SLIDE_EVENTS.syncReceive,t),A.current&&A.current.emit(a.SLIDE_EVENTS.syncReceive,t)})),S.current.setResource(_,T),S.current.renderSlide(1)),function(){var t;null===(t=S.current)||void 0===t||t.destroy()}}),[_,T,m,h]),(0,t.useEffect)((function(){return"sync"!==m&&"interactive"!==m||(A.current=new a.Slide({anchor:M.current,interactive:"sync"!==m,mode:m,controller:!0,rtcAudio:h?f:void 0,renderOptions:{minFPS:n?parseInt(n,10):void 0,maxFPS:n?parseInt(r,10):void 0,resolution:n?parseInt(s,10):void 0,maxResolutionLevel:n?parseInt(u,10):void 0}}),"interactive"===m&&A.current.on(a.SLIDE_EVENTS.syncDispatch,(function(t){A.current.emit(a.SLIDE_EVENTS.syncReceive,t),S.current&&S.current.emit(a.SLIDE_EVENTS.syncReceive,t)})),A.current.setResource(_,T),A.current.renderSlide(1)),function(){var t;null===(t=A.current)||void 0===t||t.destroy()}}),[m,_,T,h]),(0,p.jsxs)("div",{className:"App",children:[(0,p.jsxs)("div",{className:"header",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{children:"taskId:"}),(0,p.jsx)("input",{value:_,onChange:R}),(0,p.jsx)("label",{children:"prefixUrl:"}),(0,p.jsx)("input",{value:T,onChange:C})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{children:"\u542f\u7528 rtc \u6df7\u97f3"}),(0,p.jsx)("input",{type:"checkbox",id:"bike",value:h,onChange:function(){return d(!h)}}),(0,p.jsx)("span",{children:" "}),(0,p.jsxs)("select",{value:m,onChange:P,children:[(0,p.jsx)("option",{value:"local",children:"\u672c\u5730\u6a21\u5f0f"}),(0,p.jsx)("option",{value:"interactive",children:"\u4e92\u52a8\u6a21\u5f0f"})]})]})]}),(0,p.jsxs)("div",{className:"content",children:[(0,p.jsxs)("div",{className:"anchor",ref:E,style:{width:"local"!==m?"45%":"90%"},children:[(0,p.jsx)("div",{onClick:function(){var t;return null===(t=S.current)||void 0===t?void 0:t.prevStep()},className:"arrow",style:{left:"0"},children:"<"}),(0,p.jsx)("div",{onClick:function(){var t;return null===(t=S.current)||void 0===t?void 0:t.nextStep()},className:"arrow",style:{right:"0"},children:">"})]}),(0,p.jsxs)("div",{className:"anchor",ref:M,style:{display:"local"!==m?"block":"none",width:"local"!==m?"45%":"100%"},children:[(0,p.jsx)("div",{onClick:function(){var t;return null===(t=A.current)||void 0===t?void 0:t.prevStep()},className:"arrow",style:{left:"0"},children:"<"}),(0,p.jsx)("div",{onClick:function(){var t;return null===(t=A.current)||void 0===t?void 0:t.nextStep()},className:"arrow",style:{right:"0"},children:">"})]})]})]})},m=function(t){t&&t instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,o=e.getLCP,a=e.getTTFB;n(t),r(t),i(t),o(t),a(t)}))};e.render((0,p.jsx)(t.StrictMode,{children:(0,p.jsx)(v,{})}),document.getElementById("root")),m()}()}();
//# sourceMappingURL=main.91973494.js.map